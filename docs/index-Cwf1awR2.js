(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var tI={exports:{}},nm={},nI={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd=Symbol.for("react.element"),PD=Symbol.for("react.portal"),FD=Symbol.for("react.fragment"),kD=Symbol.for("react.strict_mode"),UD=Symbol.for("react.profiler"),OD=Symbol.for("react.provider"),QD=Symbol.for("react.context"),jD=Symbol.for("react.forward_ref"),VD=Symbol.for("react.suspense"),GD=Symbol.for("react.memo"),HD=Symbol.for("react.lazy"),aw=Symbol.iterator;function zD(n){return n===null||typeof n!="object"?null:(n=aw&&n[aw]||n["@@iterator"],typeof n=="function"?n:null)}var iI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sI=Object.assign,rI={};function pc(n,e,t){this.props=n,this.context=e,this.refs=rI,this.updater=t||iI}pc.prototype.isReactComponent={};pc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};pc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function aI(){}aI.prototype=pc.prototype;function Gy(n,e,t){this.props=n,this.context=e,this.refs=rI,this.updater=t||iI}var Hy=Gy.prototype=new aI;Hy.constructor=Gy;sI(Hy,pc.prototype);Hy.isPureReactComponent=!0;var ow=Array.isArray,oI=Object.prototype.hasOwnProperty,zy={current:null},lI={key:!0,ref:!0,__self:!0,__source:!0};function cI(n,e,t){var i,s={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)oI.call(e,i)&&!lI.hasOwnProperty(i)&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return{$$typeof:Bd,type:n,key:r,ref:a,props:s,_owner:zy.current}}function WD(n,e){return{$$typeof:Bd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Wy(n){return typeof n=="object"&&n!==null&&n.$$typeof===Bd}function $D(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var lw=/\/+/g;function km(n,e){return typeof n=="object"&&n!==null&&n.key!=null?$D(""+n.key):e.toString(36)}function bf(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Bd:case PD:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+km(a,0):i,ow(s)?(t="",n!=null&&(t=n.replace(lw,"$&/")+"/"),bf(s,e,t,"",function(c){return c})):s!=null&&(Wy(s)&&(s=WD(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(lw,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",ow(n))for(var o=0;o<n.length;o++){r=n[o];var l=i+km(r,o);a+=bf(r,e,t,l,s)}else if(l=zD(n),typeof l=="function")for(n=l.call(n),o=0;!(r=n.next()).done;)r=r.value,l=i+km(r,o++),a+=bf(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Kd(n,e,t){if(n==null)return n;var i=[],s=0;return bf(n,i,"","",function(r){return e.call(t,r,s++)}),i}function qD(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ni={current:null},wf={transition:null},YD={ReactCurrentDispatcher:ni,ReactCurrentBatchConfig:wf,ReactCurrentOwner:zy};function uI(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:Kd,forEach:function(n,e,t){Kd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Kd(n,function(){e++}),e},toArray:function(n){return Kd(n,function(e){return e})||[]},only:function(n){if(!Wy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ze.Component=pc;Ze.Fragment=FD;Ze.Profiler=UD;Ze.PureComponent=Gy;Ze.StrictMode=kD;Ze.Suspense=VD;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YD;Ze.act=uI;Ze.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=sI({},n.props),s=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=zy.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)oI.call(e,l)&&!lI.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:Bd,type:n.type,key:s,ref:r,props:i,_owner:a}};Ze.createContext=function(n){return n={$$typeof:QD,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:OD,_context:n},n.Consumer=n};Ze.createElement=cI;Ze.createFactory=function(n){var e=cI.bind(null,n);return e.type=n,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(n){return{$$typeof:jD,render:n}};Ze.isValidElement=Wy;Ze.lazy=function(n){return{$$typeof:HD,_payload:{_status:-1,_result:n},_init:qD}};Ze.memo=function(n,e){return{$$typeof:GD,type:n,compare:e===void 0?null:e}};Ze.startTransition=function(n){var e=wf.transition;wf.transition={};try{n()}finally{wf.transition=e}};Ze.unstable_act=uI;Ze.useCallback=function(n,e){return ni.current.useCallback(n,e)};Ze.useContext=function(n){return ni.current.useContext(n)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(n){return ni.current.useDeferredValue(n)};Ze.useEffect=function(n,e){return ni.current.useEffect(n,e)};Ze.useId=function(){return ni.current.useId()};Ze.useImperativeHandle=function(n,e,t){return ni.current.useImperativeHandle(n,e,t)};Ze.useInsertionEffect=function(n,e){return ni.current.useInsertionEffect(n,e)};Ze.useLayoutEffect=function(n,e){return ni.current.useLayoutEffect(n,e)};Ze.useMemo=function(n,e){return ni.current.useMemo(n,e)};Ze.useReducer=function(n,e,t){return ni.current.useReducer(n,e,t)};Ze.useRef=function(n){return ni.current.useRef(n)};Ze.useState=function(n){return ni.current.useState(n)};Ze.useSyncExternalStore=function(n,e,t){return ni.current.useSyncExternalStore(n,e,t)};Ze.useTransition=function(){return ni.current.useTransition()};Ze.version="18.3.1";nI.exports=Ze;var N=nI.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XD=N,KD=Symbol.for("react.element"),JD=Symbol.for("react.fragment"),ZD=Object.prototype.hasOwnProperty,eL=XD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tL={key:!0,ref:!0,__self:!0,__source:!0};function dI(n,e,t){var i,s={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)ZD.call(e,i)&&!tL.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:KD,type:n,key:r,ref:a,props:s,_owner:eL.current}}nm.Fragment=JD;nm.jsx=dI;nm.jsxs=dI;tI.exports=nm;var h=tI.exports,hI={exports:{}},Ci={},fI={exports:{}},pI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,W){var K=D.length;D.push(W);e:for(;0<K;){var ee=K-1>>>1,Q=D[ee];if(0<s(Q,W))D[ee]=W,D[K]=Q,K=ee;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var W=D[0],K=D.pop();if(K!==W){D[0]=K;e:for(var ee=0,Q=D.length,ae=Q>>>1;ee<ae;){var $=2*(ee+1)-1,te=D[$],de=$+1,ue=D[de];if(0>s(te,K))de<Q&&0>s(ue,te)?(D[ee]=ue,D[de]=K,ee=de):(D[ee]=te,D[$]=K,ee=$);else if(de<Q&&0>s(ue,K))D[ee]=ue,D[de]=K,ee=de;else break e}}return W}function s(D,W){var K=D.sortIndex-W.sortIndex;return K!==0?K:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=D)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function b(D){if(x=!1,v(D),!g)if(t(l)!==null)g=!0,V(w);else{var W=t(c);W!==null&&G(b,W.startTime-D)}}function w(D,W){g=!1,x&&(x=!1,m(M),M=-1),p=!0;var K=f;try{for(v(W),d=t(l);d!==null&&(!(d.expirationTime>W)||D&&!R());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,f=d.priorityLevel;var Q=ee(d.expirationTime<=W);W=n.unstable_now(),typeof Q=="function"?d.callback=Q:d===t(l)&&i(l),v(W)}else i(l);d=t(l)}if(d!==null)var ae=!0;else{var $=t(c);$!==null&&G(b,$.startTime-W),ae=!1}return ae}finally{d=null,f=K,p=!1}}var S=!1,C=null,M=-1,_=5,E=-1;function R(){return!(n.unstable_now()-E<_)}function L(){if(C!==null){var D=n.unstable_now();E=D;var W=!0;try{W=C(!0,D)}finally{W?F():(S=!1,C=null)}}else S=!1}var F;if(typeof y=="function")F=function(){y(L)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,z=U.port2;U.port1.onmessage=L,F=function(){z.postMessage(null)}}else F=function(){A(L,0)};function V(D){C=D,S||(S=!0,F())}function G(D,W){M=A(function(){D(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,V(w))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var K=f;f=W;try{return D()}finally{f=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var K=f;f=D;try{return W()}finally{f=K}},n.unstable_scheduleCallback=function(D,W,K){var ee=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ee+K:ee):K=ee,D){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=K+Q,D={id:u++,callback:W,priorityLevel:D,startTime:K,expirationTime:Q,sortIndex:-1},K>ee?(D.sortIndex=K,e(c,D),t(l)===null&&D===t(c)&&(x?(m(M),M=-1):x=!0,G(b,K-ee))):(D.sortIndex=Q,e(l,D),g||p||(g=!0,V(w))),D},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(D){var W=f;return function(){var K=f;f=W;try{return D.apply(this,arguments)}finally{f=K}}}})(pI);fI.exports=pI;var nL=fI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iL=N,_i=nL;function oe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mI=new Set,qu={};function bo(n,e){Hl(n,e),Hl(n+"Capture",e)}function Hl(n,e){for(qu[n]=e,n=0;n<e.length;n++)mI.add(e[n])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T0=Object.prototype.hasOwnProperty,sL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cw={},uw={};function rL(n){return T0.call(uw,n)?!0:T0.call(cw,n)?!1:sL.test(n)?uw[n]=!0:(cw[n]=!0,!1)}function aL(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function oL(n,e,t,i){if(e===null||typeof e>"u"||aL(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ii(n,e,t,i,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Tn[n]=new ii(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Tn[e]=new ii(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Tn[n]=new ii(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Tn[n]=new ii(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Tn[n]=new ii(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Tn[n]=new ii(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Tn[n]=new ii(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Tn[n]=new ii(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Tn[n]=new ii(n,5,!1,n.toLowerCase(),null,!1,!1)});var $y=/[\-:]([a-z])/g;function qy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($y,qy);Tn[e]=new ii(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($y,qy);Tn[e]=new ii(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($y,qy);Tn[e]=new ii(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Tn[n]=new ii(n,1,!1,n.toLowerCase(),null,!1,!1)});Tn.xlinkHref=new ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Tn[n]=new ii(n,1,!1,n.toLowerCase(),null,!0,!0)});function Yy(n,e,t,i){var s=Tn.hasOwnProperty(e)?Tn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oL(e,t,s,i)&&(t=null),i||s===null?rL(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Er=iL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jd=Symbol.for("react.element"),rl=Symbol.for("react.portal"),al=Symbol.for("react.fragment"),Xy=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),gI=Symbol.for("react.provider"),AI=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),B0=Symbol.for("react.suspense"),N0=Symbol.for("react.suspense_list"),Jy=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),xI=Symbol.for("react.offscreen"),dw=Symbol.iterator;function Ic(n){return n===null||typeof n!="object"?null:(n=dw&&n[dw]||n["@@iterator"],typeof n=="function"?n:null)}var $t=Object.assign,Um;function hu(n){if(Um===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Um=e&&e[1]||""}return`
`+Um+n}var Om=!1;function Qm(n,e){if(!n||Om)return"";Om=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{Om=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?hu(n):""}function lL(n){switch(n.tag){case 5:return hu(n.type);case 16:return hu("Lazy");case 13:return hu("Suspense");case 19:return hu("SuspenseList");case 0:case 2:case 15:return n=Qm(n.type,!1),n;case 11:return n=Qm(n.type.render,!1),n;case 1:return n=Qm(n.type,!0),n;default:return""}}function D0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case al:return"Fragment";case rl:return"Portal";case R0:return"Profiler";case Xy:return"StrictMode";case B0:return"Suspense";case N0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case AI:return(n.displayName||"Context")+".Consumer";case gI:return(n._context.displayName||"Context")+".Provider";case Ky:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Jy:return e=n.displayName||null,e!==null?e:D0(n.type)||"Memo";case Ur:e=n._payload,n=n._init;try{return D0(n(e))}catch{}}return null}function cL(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D0(e);case 8:return e===Xy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ca(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function yI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uL(n){var e=yI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Zd(n){n._valueTracker||(n._valueTracker=uL(n))}function vI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=yI(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Zf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function L0(n,e){var t=e.checked;return $t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function hw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ca(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bI(n,e){e=e.checked,e!=null&&Yy(n,"checked",e,!1)}function P0(n,e){bI(n,e);var t=ca(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?F0(n,e.type,t):e.hasOwnProperty("defaultValue")&&F0(n,e.type,ca(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function fw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function F0(n,e,t){(e!=="number"||Zf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var fu=Array.isArray;function Tl(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ca(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function k0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return $t({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(oe(92));if(fu(t)){if(1<t.length)throw Error(oe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ca(t)}}function wI(n,e){var t=ca(e.value),i=ca(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function mw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function EI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?EI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var eh,_I=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(eh=eh||document.createElement("div"),eh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Yu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dL=["Webkit","ms","Moz","O"];Object.keys(Su).forEach(function(n){dL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Su[e]=Su[n]})});function SI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Su.hasOwnProperty(n)&&Su[n]?(""+e).trim():e+"px"}function CI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=SI(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var hL=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function O0(n,e){if(e){if(hL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Q0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j0=null;function Zy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var V0=null,Rl=null,Bl=null;function gw(n){if(n=Ld(n)){if(typeof V0!="function")throw Error(oe(280));var e=n.stateNode;e&&(e=om(e),V0(n.stateNode,n.type,e))}}function MI(n){Rl?Bl?Bl.push(n):Bl=[n]:Rl=n}function II(){if(Rl){var n=Rl,e=Bl;if(Bl=Rl=null,gw(n),e)for(n=0;n<e.length;n++)gw(e[n])}}function TI(n,e){return n(e)}function RI(){}var jm=!1;function BI(n,e,t){if(jm)return n(e,t);jm=!0;try{return TI(n,e,t)}finally{jm=!1,(Rl!==null||Bl!==null)&&(RI(),II())}}function Xu(n,e){var t=n.stateNode;if(t===null)return null;var i=om(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(oe(231,e,typeof t));return t}var G0=!1;if(gr)try{var Tc={};Object.defineProperty(Tc,"passive",{get:function(){G0=!0}}),window.addEventListener("test",Tc,Tc),window.removeEventListener("test",Tc,Tc)}catch{G0=!1}function fL(n,e,t,i,s,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Cu=!1,ep=null,tp=!1,H0=null,pL={onError:function(n){Cu=!0,ep=n}};function mL(n,e,t,i,s,r,a,o,l){Cu=!1,ep=null,fL.apply(pL,arguments)}function gL(n,e,t,i,s,r,a,o,l){if(mL.apply(this,arguments),Cu){if(Cu){var c=ep;Cu=!1,ep=null}else throw Error(oe(198));tp||(tp=!0,H0=c)}}function wo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function NI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Aw(n){if(wo(n)!==n)throw Error(oe(188))}function AL(n){var e=n.alternate;if(!e){if(e=wo(n),e===null)throw Error(oe(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return Aw(s),n;if(r===i)return Aw(s),e;r=r.sibling}throw Error(oe(188))}if(t.return!==i.return)t=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a)throw Error(oe(189))}}if(t.alternate!==i)throw Error(oe(190))}if(t.tag!==3)throw Error(oe(188));return t.stateNode.current===t?n:e}function DI(n){return n=AL(n),n!==null?LI(n):null}function LI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=LI(n);if(e!==null)return e;n=n.sibling}return null}var PI=_i.unstable_scheduleCallback,xw=_i.unstable_cancelCallback,xL=_i.unstable_shouldYield,yL=_i.unstable_requestPaint,nn=_i.unstable_now,vL=_i.unstable_getCurrentPriorityLevel,ev=_i.unstable_ImmediatePriority,FI=_i.unstable_UserBlockingPriority,np=_i.unstable_NormalPriority,bL=_i.unstable_LowPriority,kI=_i.unstable_IdlePriority,im=null,Is=null;function wL(n){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(im,n,void 0,(n.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:SL,EL=Math.log,_L=Math.LN2;function SL(n){return n>>>=0,n===0?32:31-(EL(n)/_L|0)|0}var th=64,nh=4194304;function pu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ip(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?i=pu(o):(r&=a,r!==0&&(i=pu(r)))}else a=t&~s,a!==0?i=pu(a):r!==0&&(i=pu(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-us(e),s=1<<t,i|=n[t],e&=~s;return i}function CL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ML(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-us(r),o=1<<a,l=s[a];l===-1?(!(o&t)||o&i)&&(s[a]=CL(o,e)):l<=e&&(n.expiredLanes|=o),r&=~o}}function z0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function UI(){var n=th;return th<<=1,!(th&4194240)&&(th=64),n}function Vm(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Nd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-us(e),n[e]=t}function IL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-us(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function tv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-us(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var yt=0;function OI(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var QI,nv,jI,VI,GI,W0=!1,ih=[],Zr=null,ea=null,ta=null,Ku=new Map,Ju=new Map,jr=[],TL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yw(n,e){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":Ku.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(e.pointerId)}}function Rc(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Ld(e),e!==null&&nv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function RL(n,e,t,i,s){switch(e){case"focusin":return Zr=Rc(Zr,n,e,t,i,s),!0;case"dragenter":return ea=Rc(ea,n,e,t,i,s),!0;case"mouseover":return ta=Rc(ta,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Ku.set(r,Rc(Ku.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Ju.set(r,Rc(Ju.get(r)||null,n,e,t,i,s)),!0}return!1}function HI(n){var e=qa(n.target);if(e!==null){var t=wo(e);if(t!==null){if(e=t.tag,e===13){if(e=NI(t),e!==null){n.blockedOn=e,GI(n.priority,function(){jI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ef(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);j0=i,t.target.dispatchEvent(i),j0=null}else return e=Ld(t),e!==null&&nv(e),n.blockedOn=t,!1;e.shift()}return!0}function vw(n,e,t){Ef(n)&&t.delete(e)}function BL(){W0=!1,Zr!==null&&Ef(Zr)&&(Zr=null),ea!==null&&Ef(ea)&&(ea=null),ta!==null&&Ef(ta)&&(ta=null),Ku.forEach(vw),Ju.forEach(vw)}function Bc(n,e){n.blockedOn===e&&(n.blockedOn=null,W0||(W0=!0,_i.unstable_scheduleCallback(_i.unstable_NormalPriority,BL)))}function Zu(n){function e(s){return Bc(s,n)}if(0<ih.length){Bc(ih[0],n);for(var t=1;t<ih.length;t++){var i=ih[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Zr!==null&&Bc(Zr,n),ea!==null&&Bc(ea,n),ta!==null&&Bc(ta,n),Ku.forEach(e),Ju.forEach(e),t=0;t<jr.length;t++)i=jr[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<jr.length&&(t=jr[0],t.blockedOn===null);)HI(t),t.blockedOn===null&&jr.shift()}var Nl=Er.ReactCurrentBatchConfig,sp=!0;function NL(n,e,t,i){var s=yt,r=Nl.transition;Nl.transition=null;try{yt=1,iv(n,e,t,i)}finally{yt=s,Nl.transition=r}}function DL(n,e,t,i){var s=yt,r=Nl.transition;Nl.transition=null;try{yt=4,iv(n,e,t,i)}finally{yt=s,Nl.transition=r}}function iv(n,e,t,i){if(sp){var s=$0(n,e,t,i);if(s===null)Jm(n,e,i,rp,t),yw(n,i);else if(RL(s,n,e,t,i))i.stopPropagation();else if(yw(n,i),e&4&&-1<TL.indexOf(n)){for(;s!==null;){var r=Ld(s);if(r!==null&&QI(r),r=$0(n,e,t,i),r===null&&Jm(n,e,i,rp,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else Jm(n,e,i,null,t)}}var rp=null;function $0(n,e,t,i){if(rp=null,n=Zy(i),n=qa(n),n!==null)if(e=wo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=NI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return rp=n,null}function zI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vL()){case ev:return 1;case FI:return 4;case np:case bL:return 16;case kI:return 536870912;default:return 16}default:return 16}}var Wr=null,sv=null,_f=null;function WI(){if(_f)return _f;var n,e=sv,t=e.length,i,s="value"in Wr?Wr.value:Wr.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===s[r-i];i++);return _f=s.slice(n,1<i?1-i:void 0)}function Sf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function sh(){return!0}function bw(){return!1}function Mi(n){function e(t,i,s,r,a){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?sh:bw,this.isPropagationStopped=bw,this}return $t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=sh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=sh)},persist:function(){},isPersistent:sh}),e}var mc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=Mi(mc),Dd=$t({},mc,{view:0,detail:0}),LL=Mi(Dd),Gm,Hm,Nc,sm=$t({},Dd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nc&&(Nc&&n.type==="mousemove"?(Gm=n.screenX-Nc.screenX,Hm=n.screenY-Nc.screenY):Hm=Gm=0,Nc=n),Gm)},movementY:function(n){return"movementY"in n?n.movementY:Hm}}),ww=Mi(sm),PL=$t({},sm,{dataTransfer:0}),FL=Mi(PL),kL=$t({},Dd,{relatedTarget:0}),zm=Mi(kL),UL=$t({},mc,{animationName:0,elapsedTime:0,pseudoElement:0}),OL=Mi(UL),QL=$t({},mc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jL=Mi(QL),VL=$t({},mc,{data:0}),Ew=Mi(VL),GL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=zL[n])?!!e[n]:!1}function av(){return WL}var $L=$t({},Dd,{key:function(n){if(n.key){var e=GL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Sf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?HL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(n){return n.type==="keypress"?Sf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qL=Mi($L),YL=$t({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_w=Mi(YL),XL=$t({},Dd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),KL=Mi(XL),JL=$t({},mc,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZL=Mi(JL),eP=$t({},sm,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tP=Mi(eP),nP=[9,13,27,32],ov=gr&&"CompositionEvent"in window,Mu=null;gr&&"documentMode"in document&&(Mu=document.documentMode);var iP=gr&&"TextEvent"in window&&!Mu,$I=gr&&(!ov||Mu&&8<Mu&&11>=Mu),Sw=" ",Cw=!1;function qI(n,e){switch(n){case"keyup":return nP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ol=!1;function sP(n,e){switch(n){case"compositionend":return YI(e);case"keypress":return e.which!==32?null:(Cw=!0,Sw);case"textInput":return n=e.data,n===Sw&&Cw?null:n;default:return null}}function rP(n,e){if(ol)return n==="compositionend"||!ov&&qI(n,e)?(n=WI(),_f=sv=Wr=null,ol=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $I&&e.locale!=="ko"?null:e.data;default:return null}}var aP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!aP[n.type]:e==="textarea"}function XI(n,e,t,i){MI(i),e=ap(e,"onChange"),0<e.length&&(t=new rv("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Iu=null,ed=null;function oP(n){oT(n,0)}function rm(n){var e=ul(n);if(vI(e))return n}function lP(n,e){if(n==="change")return e}var KI=!1;if(gr){var Wm;if(gr){var $m="oninput"in document;if(!$m){var Iw=document.createElement("div");Iw.setAttribute("oninput","return;"),$m=typeof Iw.oninput=="function"}Wm=$m}else Wm=!1;KI=Wm&&(!document.documentMode||9<document.documentMode)}function Tw(){Iu&&(Iu.detachEvent("onpropertychange",JI),ed=Iu=null)}function JI(n){if(n.propertyName==="value"&&rm(ed)){var e=[];XI(e,ed,n,Zy(n)),BI(oP,e)}}function cP(n,e,t){n==="focusin"?(Tw(),Iu=e,ed=t,Iu.attachEvent("onpropertychange",JI)):n==="focusout"&&Tw()}function uP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rm(ed)}function dP(n,e){if(n==="click")return rm(e)}function hP(n,e){if(n==="input"||n==="change")return rm(e)}function fP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ps=typeof Object.is=="function"?Object.is:fP;function td(n,e){if(ps(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!T0.call(e,s)||!ps(n[s],e[s]))return!1}return!0}function Rw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bw(n,e){var t=Rw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Rw(t)}}function ZI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ZI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function eT(){for(var n=window,e=Zf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Zf(n.document)}return e}function lv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function pP(n){var e=eT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ZI(t.ownerDocument.documentElement,t)){if(i!==null&&lv(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=Bw(t,r);var a=Bw(t,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mP=gr&&"documentMode"in document&&11>=document.documentMode,ll=null,q0=null,Tu=null,Y0=!1;function Nw(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Y0||ll==null||ll!==Zf(i)||(i=ll,"selectionStart"in i&&lv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Tu&&td(Tu,i)||(Tu=i,i=ap(q0,"onSelect"),0<i.length&&(e=new rv("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=ll)))}function rh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var cl={animationend:rh("Animation","AnimationEnd"),animationiteration:rh("Animation","AnimationIteration"),animationstart:rh("Animation","AnimationStart"),transitionend:rh("Transition","TransitionEnd")},qm={},tT={};gr&&(tT=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function am(n){if(qm[n])return qm[n];if(!cl[n])return n;var e=cl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tT)return qm[n]=e[t];return n}var nT=am("animationend"),iT=am("animationiteration"),sT=am("animationstart"),rT=am("transitionend"),aT=new Map,Dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ma(n,e){aT.set(n,e),bo(e,[n])}for(var Ym=0;Ym<Dw.length;Ym++){var Xm=Dw[Ym],gP=Xm.toLowerCase(),AP=Xm[0].toUpperCase()+Xm.slice(1);ma(gP,"on"+AP)}ma(nT,"onAnimationEnd");ma(iT,"onAnimationIteration");ma(sT,"onAnimationStart");ma("dblclick","onDoubleClick");ma("focusin","onFocus");ma("focusout","onBlur");ma(rT,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xP=new Set("cancel close invalid load scroll toggle".split(" ").concat(mu));function Lw(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,gL(i,e,void 0,n),n.currentTarget=null}function oT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;Lw(s,o,c),r=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;Lw(s,o,c),r=l}}}if(tp)throw n=H0,tp=!1,H0=null,n}function Nt(n,e){var t=e[ex];t===void 0&&(t=e[ex]=new Set);var i=n+"__bubble";t.has(i)||(lT(e,n,2,!1),t.add(i))}function Km(n,e,t){var i=0;e&&(i|=4),lT(t,n,i,e)}var ah="_reactListening"+Math.random().toString(36).slice(2);function nd(n){if(!n[ah]){n[ah]=!0,mI.forEach(function(t){t!=="selectionchange"&&(xP.has(t)||Km(t,!1,n),Km(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ah]||(e[ah]=!0,Km("selectionchange",!1,e))}}function lT(n,e,t,i){switch(zI(e)){case 1:var s=NL;break;case 4:s=DL;break;default:s=iv}t=s.bind(null,e,t,n),s=void 0,!G0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Jm(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=qa(o),a===null)return;if(l=a.tag,l===5||l===6){i=r=a;continue e}o=o.parentNode}}i=i.return}BI(function(){var c=r,u=Zy(t),d=[];e:{var f=aT.get(n);if(f!==void 0){var p=rv,g=n;switch(n){case"keypress":if(Sf(t)===0)break e;case"keydown":case"keyup":p=qL;break;case"focusin":g="focus",p=zm;break;case"focusout":g="blur",p=zm;break;case"beforeblur":case"afterblur":p=zm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=FL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=KL;break;case nT:case iT:case sT:p=OL;break;case rT:p=ZL;break;case"scroll":p=LL;break;case"wheel":p=tP;break;case"copy":case"cut":case"paste":p=jL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_w}var x=(e&4)!==0,A=!x&&n==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var y=c,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,m!==null&&(b=Xu(y,m),b!=null&&x.push(id(y,b,v)))),A)break;y=y.return}0<x.length&&(f=new p(f,g,null,t,u),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==j0&&(g=t.relatedTarget||t.fromElement)&&(qa(g)||g[Ar]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=c,g=g?qa(g):null,g!==null&&(A=wo(g),g!==A||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(x=ww,b="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(x=_w,b="onPointerLeave",m="onPointerEnter",y="pointer"),A=p==null?f:ul(p),v=g==null?f:ul(g),f=new x(b,y+"leave",p,t,u),f.target=A,f.relatedTarget=v,b=null,qa(u)===c&&(x=new x(m,y+"enter",g,t,u),x.target=v,x.relatedTarget=A,b=x),A=b,p&&g)t:{for(x=p,m=g,y=0,v=x;v;v=_o(v))y++;for(v=0,b=m;b;b=_o(b))v++;for(;0<y-v;)x=_o(x),y--;for(;0<v-y;)m=_o(m),v--;for(;y--;){if(x===m||m!==null&&x===m.alternate)break t;x=_o(x),m=_o(m)}x=null}else x=null;p!==null&&Pw(d,f,p,x,!1),g!==null&&A!==null&&Pw(d,A,g,x,!0)}}e:{if(f=c?ul(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var w=lP;else if(Mw(f))if(KI)w=hP;else{w=uP;var S=cP}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=dP);if(w&&(w=w(n,c))){XI(d,w,t,u);break e}S&&S(n,f,c),n==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&F0(f,"number",f.value)}switch(S=c?ul(c):window,n){case"focusin":(Mw(S)||S.contentEditable==="true")&&(ll=S,q0=c,Tu=null);break;case"focusout":Tu=q0=ll=null;break;case"mousedown":Y0=!0;break;case"contextmenu":case"mouseup":case"dragend":Y0=!1,Nw(d,t,u);break;case"selectionchange":if(mP)break;case"keydown":case"keyup":Nw(d,t,u)}var C;if(ov)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ol?qI(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&($I&&t.locale!=="ko"&&(ol||M!=="onCompositionStart"?M==="onCompositionEnd"&&ol&&(C=WI()):(Wr=u,sv="value"in Wr?Wr.value:Wr.textContent,ol=!0)),S=ap(c,M),0<S.length&&(M=new Ew(M,n,null,t,u),d.push({event:M,listeners:S}),C?M.data=C:(C=YI(t),C!==null&&(M.data=C)))),(C=iP?sP(n,t):rP(n,t))&&(c=ap(c,"onBeforeInput"),0<c.length&&(u=new Ew("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=C))}oT(d,e)})}function id(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ap(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Xu(n,t),r!=null&&i.unshift(id(n,r,s)),r=Xu(n,e),r!=null&&i.push(id(n,r,s))),n=n.return}return i}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Pw(n,e,t,i,s){for(var r=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,s?(l=Xu(t,r),l!=null&&a.unshift(id(t,l,o))):s||(l=Xu(t,r),l!=null&&a.push(id(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var yP=/\r\n?/g,vP=/\u0000|\uFFFD/g;function Fw(n){return(typeof n=="string"?n:""+n).replace(yP,`
`).replace(vP,"")}function oh(n,e,t){if(e=Fw(e),Fw(n)!==e&&t)throw Error(oe(425))}function op(){}var X0=null,K0=null;function J0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Z0=typeof setTimeout=="function"?setTimeout:void 0,bP=typeof clearTimeout=="function"?clearTimeout:void 0,kw=typeof Promise=="function"?Promise:void 0,wP=typeof queueMicrotask=="function"?queueMicrotask:typeof kw<"u"?function(n){return kw.resolve(null).then(n).catch(EP)}:Z0;function EP(n){setTimeout(function(){throw n})}function Zm(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),Zu(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);Zu(e)}function na(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Uw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var gc=Math.random().toString(36).slice(2),Ss="__reactFiber$"+gc,sd="__reactProps$"+gc,Ar="__reactContainer$"+gc,ex="__reactEvents$"+gc,_P="__reactListeners$"+gc,SP="__reactHandles$"+gc;function qa(n){var e=n[Ss];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ar]||t[Ss]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Uw(n);n!==null;){if(t=n[Ss])return t;n=Uw(n)}return e}n=t,t=n.parentNode}return null}function Ld(n){return n=n[Ss]||n[Ar],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ul(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(oe(33))}function om(n){return n[sd]||null}var tx=[],dl=-1;function ga(n){return{current:n}}function Lt(n){0>dl||(n.current=tx[dl],tx[dl]=null,dl--)}function Mt(n,e){dl++,tx[dl]=n.current,n.current=e}var ua={},Qn=ga(ua),ci=ga(!1),lo=ua;function zl(n,e){var t=n.type.contextTypes;if(!t)return ua;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function ui(n){return n=n.childContextTypes,n!=null}function lp(){Lt(ci),Lt(Qn)}function Ow(n,e,t){if(Qn.current!==ua)throw Error(oe(168));Mt(Qn,e),Mt(ci,t)}function cT(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(oe(108,cL(n)||"Unknown",s));return $t({},t,i)}function cp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ua,lo=Qn.current,Mt(Qn,n),Mt(ci,ci.current),!0}function Qw(n,e,t){var i=n.stateNode;if(!i)throw Error(oe(169));t?(n=cT(n,e,lo),i.__reactInternalMemoizedMergedChildContext=n,Lt(ci),Lt(Qn),Mt(Qn,n)):Lt(ci),Mt(ci,t)}var ar=null,lm=!1,eg=!1;function uT(n){ar===null?ar=[n]:ar.push(n)}function CP(n){lm=!0,uT(n)}function Aa(){if(!eg&&ar!==null){eg=!0;var n=0,e=yt;try{var t=ar;for(yt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ar=null,lm=!1}catch(s){throw ar!==null&&(ar=ar.slice(n+1)),PI(ev,Aa),s}finally{yt=e,eg=!1}}return null}var hl=[],fl=0,up=null,dp=0,Fi=[],ki=0,co=null,lr=1,cr="";function Pa(n,e){hl[fl++]=dp,hl[fl++]=up,up=n,dp=e}function dT(n,e,t){Fi[ki++]=lr,Fi[ki++]=cr,Fi[ki++]=co,co=n;var i=lr;n=cr;var s=32-us(i)-1;i&=~(1<<s),t+=1;var r=32-us(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,lr=1<<32-us(e)+s|t<<s|i,cr=r+n}else lr=1<<r|t<<s|i,cr=n}function cv(n){n.return!==null&&(Pa(n,1),dT(n,1,0))}function uv(n){for(;n===up;)up=hl[--fl],hl[fl]=null,dp=hl[--fl],hl[fl]=null;for(;n===co;)co=Fi[--ki],Fi[ki]=null,cr=Fi[--ki],Fi[ki]=null,lr=Fi[--ki],Fi[ki]=null}var wi=null,yi=null,Qt=!1,as=null;function hT(n,e){var t=Qi(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wi=n,yi=na(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wi=n,yi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=co!==null?{id:lr,overflow:cr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Qi(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,wi=n,yi=null,!0):!1;default:return!1}}function nx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ix(n){if(Qt){var e=yi;if(e){var t=e;if(!jw(n,e)){if(nx(n))throw Error(oe(418));e=na(t.nextSibling);var i=wi;e&&jw(n,e)?hT(i,t):(n.flags=n.flags&-4097|2,Qt=!1,wi=n)}}else{if(nx(n))throw Error(oe(418));n.flags=n.flags&-4097|2,Qt=!1,wi=n}}}function Vw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wi=n}function lh(n){if(n!==wi)return!1;if(!Qt)return Vw(n),Qt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!J0(n.type,n.memoizedProps)),e&&(e=yi)){if(nx(n))throw fT(),Error(oe(418));for(;e;)hT(n,e),e=na(e.nextSibling)}if(Vw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(oe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){yi=na(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}yi=null}}else yi=wi?na(n.stateNode.nextSibling):null;return!0}function fT(){for(var n=yi;n;)n=na(n.nextSibling)}function Wl(){yi=wi=null,Qt=!1}function dv(n){as===null?as=[n]:as.push(n)}var MP=Er.ReactCurrentBatchConfig;function Dc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(oe(309));var i=t.stateNode}if(!i)throw Error(oe(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(oe(284));if(!t._owner)throw Error(oe(290,n))}return n}function ch(n,e){throw n=Object.prototype.toString.call(e),Error(oe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Gw(n){var e=n._init;return e(n._payload)}function pT(n){function e(m,y){if(n){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function t(m,y){if(!n)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=aa(m,y),m.index=0,m.sibling=null,m}function r(m,y,v){return m.index=v,n?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function a(m){return n&&m.alternate===null&&(m.flags|=2),m}function o(m,y,v,b){return y===null||y.tag!==6?(y=og(v,m.mode,b),y.return=m,y):(y=s(y,v),y.return=m,y)}function l(m,y,v,b){var w=v.type;return w===al?u(m,y,v.props.children,b,v.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ur&&Gw(w)===y.type)?(b=s(y,v.props),b.ref=Dc(m,y,v),b.return=m,b):(b=Nf(v.type,v.key,v.props,null,m.mode,b),b.ref=Dc(m,y,v),b.return=m,b)}function c(m,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=lg(v,m.mode,b),y.return=m,y):(y=s(y,v.children||[]),y.return=m,y)}function u(m,y,v,b,w){return y===null||y.tag!==7?(y=no(v,m.mode,b,w),y.return=m,y):(y=s(y,v),y.return=m,y)}function d(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=og(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jd:return v=Nf(y.type,y.key,y.props,null,m.mode,v),v.ref=Dc(m,null,y),v.return=m,v;case rl:return y=lg(y,m.mode,v),y.return=m,y;case Ur:var b=y._init;return d(m,b(y._payload),v)}if(fu(y)||Ic(y))return y=no(y,m.mode,v,null),y.return=m,y;ch(m,y)}return null}function f(m,y,v,b){var w=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:o(m,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jd:return v.key===w?l(m,y,v,b):null;case rl:return v.key===w?c(m,y,v,b):null;case Ur:return w=v._init,f(m,y,w(v._payload),b)}if(fu(v)||Ic(v))return w!==null?null:u(m,y,v,b,null);ch(m,v)}return null}function p(m,y,v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(v)||null,o(y,m,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jd:return m=m.get(b.key===null?v:b.key)||null,l(y,m,b,w);case rl:return m=m.get(b.key===null?v:b.key)||null,c(y,m,b,w);case Ur:var S=b._init;return p(m,y,v,S(b._payload),w)}if(fu(b)||Ic(b))return m=m.get(v)||null,u(y,m,b,w,null);ch(y,b)}return null}function g(m,y,v,b){for(var w=null,S=null,C=y,M=y=0,_=null;C!==null&&M<v.length;M++){C.index>M?(_=C,C=null):_=C.sibling;var E=f(m,C,v[M],b);if(E===null){C===null&&(C=_);break}n&&C&&E.alternate===null&&e(m,C),y=r(E,y,M),S===null?w=E:S.sibling=E,S=E,C=_}if(M===v.length)return t(m,C),Qt&&Pa(m,M),w;if(C===null){for(;M<v.length;M++)C=d(m,v[M],b),C!==null&&(y=r(C,y,M),S===null?w=C:S.sibling=C,S=C);return Qt&&Pa(m,M),w}for(C=i(m,C);M<v.length;M++)_=p(C,m,M,v[M],b),_!==null&&(n&&_.alternate!==null&&C.delete(_.key===null?M:_.key),y=r(_,y,M),S===null?w=_:S.sibling=_,S=_);return n&&C.forEach(function(R){return e(m,R)}),Qt&&Pa(m,M),w}function x(m,y,v,b){var w=Ic(v);if(typeof w!="function")throw Error(oe(150));if(v=w.call(v),v==null)throw Error(oe(151));for(var S=w=null,C=y,M=y=0,_=null,E=v.next();C!==null&&!E.done;M++,E=v.next()){C.index>M?(_=C,C=null):_=C.sibling;var R=f(m,C,E.value,b);if(R===null){C===null&&(C=_);break}n&&C&&R.alternate===null&&e(m,C),y=r(R,y,M),S===null?w=R:S.sibling=R,S=R,C=_}if(E.done)return t(m,C),Qt&&Pa(m,M),w;if(C===null){for(;!E.done;M++,E=v.next())E=d(m,E.value,b),E!==null&&(y=r(E,y,M),S===null?w=E:S.sibling=E,S=E);return Qt&&Pa(m,M),w}for(C=i(m,C);!E.done;M++,E=v.next())E=p(C,m,M,E.value,b),E!==null&&(n&&E.alternate!==null&&C.delete(E.key===null?M:E.key),y=r(E,y,M),S===null?w=E:S.sibling=E,S=E);return n&&C.forEach(function(L){return e(m,L)}),Qt&&Pa(m,M),w}function A(m,y,v,b){if(typeof v=="object"&&v!==null&&v.type===al&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Jd:e:{for(var w=v.key,S=y;S!==null;){if(S.key===w){if(w=v.type,w===al){if(S.tag===7){t(m,S.sibling),y=s(S,v.props.children),y.return=m,m=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ur&&Gw(w)===S.type){t(m,S.sibling),y=s(S,v.props),y.ref=Dc(m,S,v),y.return=m,m=y;break e}t(m,S);break}else e(m,S);S=S.sibling}v.type===al?(y=no(v.props.children,m.mode,b,v.key),y.return=m,m=y):(b=Nf(v.type,v.key,v.props,null,m.mode,b),b.ref=Dc(m,y,v),b.return=m,m=b)}return a(m);case rl:e:{for(S=v.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){t(m,y.sibling),y=s(y,v.children||[]),y.return=m,m=y;break e}else{t(m,y);break}else e(m,y);y=y.sibling}y=lg(v,m.mode,b),y.return=m,m=y}return a(m);case Ur:return S=v._init,A(m,y,S(v._payload),b)}if(fu(v))return g(m,y,v,b);if(Ic(v))return x(m,y,v,b);ch(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(t(m,y.sibling),y=s(y,v),y.return=m,m=y):(t(m,y),y=og(v,m.mode,b),y.return=m,m=y),a(m)):t(m,y)}return A}var $l=pT(!0),mT=pT(!1),hp=ga(null),fp=null,pl=null,hv=null;function fv(){hv=pl=fp=null}function pv(n){var e=hp.current;Lt(hp),n._currentValue=e}function sx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Dl(n,e){fp=n,hv=pl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(oi=!0),n.firstContext=null)}function zi(n){var e=n._currentValue;if(hv!==n)if(n={context:n,memoizedValue:e,next:null},pl===null){if(fp===null)throw Error(oe(308));pl=n,fp.dependencies={lanes:0,firstContext:n}}else pl=pl.next=n;return e}var Ya=null;function mv(n){Ya===null?Ya=[n]:Ya.push(n)}function gT(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,mv(e)):(t.next=s.next,s.next=t),e.interleaved=t,xr(n,i)}function xr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Or=!1;function gv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ia(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ct&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,xr(n,t)}return s=i.interleaved,s===null?(e.next=e,mv(i)):(e.next=s.next,s.next=e),i.interleaved=e,xr(n,t)}function Cf(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,tv(n,t)}}function Hw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function pp(n,e,t,i){var s=n.updateQueue;Or=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?r=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;a=0,u=c=l=null,o=r;do{var f=o.lane,p=o.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=n,x=o;switch(f=e,p=t,x.tag){case 1:if(g=x.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=$t({},d,f);break e;case 2:Or=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);ho|=a,n.lanes=a,n.memoizedState=d}}function zw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(oe(191,s));s.call(i)}}}var Pd={},Ts=ga(Pd),rd=ga(Pd),ad=ga(Pd);function Xa(n){if(n===Pd)throw Error(oe(174));return n}function Av(n,e){switch(Mt(ad,e),Mt(rd,n),Mt(Ts,Pd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=U0(e,n)}Lt(Ts),Mt(Ts,e)}function ql(){Lt(Ts),Lt(rd),Lt(ad)}function xT(n){Xa(ad.current);var e=Xa(Ts.current),t=U0(e,n.type);e!==t&&(Mt(rd,n),Mt(Ts,t))}function xv(n){rd.current===n&&(Lt(Ts),Lt(rd))}var Gt=ga(0);function mp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tg=[];function yv(){for(var n=0;n<tg.length;n++)tg[n]._workInProgressVersionPrimary=null;tg.length=0}var Mf=Er.ReactCurrentDispatcher,ng=Er.ReactCurrentBatchConfig,uo=0,zt=null,dn=null,gn=null,gp=!1,Ru=!1,od=0,IP=0;function Bn(){throw Error(oe(321))}function vv(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ps(n[t],e[t]))return!1;return!0}function bv(n,e,t,i,s,r){if(uo=r,zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mf.current=n===null||n.memoizedState===null?NP:DP,n=t(i,s),Ru){r=0;do{if(Ru=!1,od=0,25<=r)throw Error(oe(301));r+=1,gn=dn=null,e.updateQueue=null,Mf.current=LP,n=t(i,s)}while(Ru)}if(Mf.current=Ap,e=dn!==null&&dn.next!==null,uo=0,gn=dn=zt=null,gp=!1,e)throw Error(oe(300));return n}function wv(){var n=od!==0;return od=0,n}function bs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?zt.memoizedState=gn=n:gn=gn.next=n,gn}function Wi(){if(dn===null){var n=zt.alternate;n=n!==null?n.memoizedState:null}else n=dn.next;var e=gn===null?zt.memoizedState:gn.next;if(e!==null)gn=e,dn=n;else{if(n===null)throw Error(oe(310));dn=n,n={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},gn===null?zt.memoizedState=gn=n:gn=gn.next=n}return gn}function ld(n,e){return typeof e=="function"?e(n):e}function ig(n){var e=Wi(),t=e.queue;if(t===null)throw Error(oe(311));t.lastRenderedReducer=n;var i=dn,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var o=a=null,l=null,c=r;do{var u=c.lane;if((uo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=i):l=l.next=d,zt.lanes|=u,ho|=u}c=c.next}while(c!==null&&c!==r);l===null?a=i:l.next=o,ps(i,e.memoizedState)||(oi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,zt.lanes|=r,ho|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function sg(n){var e=Wi(),t=e.queue;if(t===null)throw Error(oe(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=n(r,a.action),a=a.next;while(a!==s);ps(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function yT(){}function vT(n,e){var t=zt,i=Wi(),s=e(),r=!ps(i.memoizedState,s);if(r&&(i.memoizedState=s,oi=!0),i=i.queue,Ev(ET.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||gn!==null&&gn.memoizedState.tag&1){if(t.flags|=2048,cd(9,wT.bind(null,t,i,s,e),void 0,null),bn===null)throw Error(oe(349));uo&30||bT(t,e,s)}return s}function bT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function wT(n,e,t,i){e.value=t,e.getSnapshot=i,_T(e)&&ST(n)}function ET(n,e,t){return t(function(){_T(e)&&ST(n)})}function _T(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ps(n,t)}catch{return!0}}function ST(n){var e=xr(n,1);e!==null&&ds(e,n,1,-1)}function Ww(n){var e=bs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:n},e.queue=n,n=n.dispatch=BP.bind(null,zt,n),[e.memoizedState,n]}function cd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=zt.updateQueue,e===null?(e={lastEffect:null,stores:null},zt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function CT(){return Wi().memoizedState}function If(n,e,t,i){var s=bs();zt.flags|=n,s.memoizedState=cd(1|e,t,void 0,i===void 0?null:i)}function cm(n,e,t,i){var s=Wi();i=i===void 0?null:i;var r=void 0;if(dn!==null){var a=dn.memoizedState;if(r=a.destroy,i!==null&&vv(i,a.deps)){s.memoizedState=cd(e,t,r,i);return}}zt.flags|=n,s.memoizedState=cd(1|e,t,r,i)}function $w(n,e){return If(8390656,8,n,e)}function Ev(n,e){return cm(2048,8,n,e)}function MT(n,e){return cm(4,2,n,e)}function IT(n,e){return cm(4,4,n,e)}function TT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function RT(n,e,t){return t=t!=null?t.concat([n]):null,cm(4,4,TT.bind(null,e,n),t)}function _v(){}function BT(n,e){var t=Wi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&vv(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function NT(n,e){var t=Wi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&vv(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function DT(n,e,t){return uo&21?(ps(t,e)||(t=UI(),zt.lanes|=t,ho|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,oi=!0),n.memoizedState=t)}function TP(n,e){var t=yt;yt=t!==0&&4>t?t:4,n(!0);var i=ng.transition;ng.transition={};try{n(!1),e()}finally{yt=t,ng.transition=i}}function LT(){return Wi().memoizedState}function RP(n,e,t){var i=ra(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},PT(n))FT(e,t);else if(t=gT(n,e,t,i),t!==null){var s=ei();ds(t,n,i,s),kT(t,e,i)}}function BP(n,e,t){var i=ra(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(PT(n))FT(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,ps(o,a)){var l=e.interleaved;l===null?(s.next=s,mv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=gT(n,e,s,i),t!==null&&(s=ei(),ds(t,n,i,s),kT(t,e,i))}}function PT(n){var e=n.alternate;return n===zt||e!==null&&e===zt}function FT(n,e){Ru=gp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function kT(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,tv(n,t)}}var Ap={readContext:zi,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},NP={readContext:zi,useCallback:function(n,e){return bs().memoizedState=[n,e===void 0?null:e],n},useContext:zi,useEffect:$w,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,If(4194308,4,TT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return If(4194308,4,n,e)},useInsertionEffect:function(n,e){return If(4,2,n,e)},useMemo:function(n,e){var t=bs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=bs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=RP.bind(null,zt,n),[i.memoizedState,n]},useRef:function(n){var e=bs();return n={current:n},e.memoizedState=n},useState:Ww,useDebugValue:_v,useDeferredValue:function(n){return bs().memoizedState=n},useTransition:function(){var n=Ww(!1),e=n[0];return n=TP.bind(null,n[1]),bs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=zt,s=bs();if(Qt){if(t===void 0)throw Error(oe(407));t=t()}else{if(t=e(),bn===null)throw Error(oe(349));uo&30||bT(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,$w(ET.bind(null,i,r,n),[n]),i.flags|=2048,cd(9,wT.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=bs(),e=bn.identifierPrefix;if(Qt){var t=cr,i=lr;t=(i&~(1<<32-us(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=od++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=IP++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},DP={readContext:zi,useCallback:BT,useContext:zi,useEffect:Ev,useImperativeHandle:RT,useInsertionEffect:MT,useLayoutEffect:IT,useMemo:NT,useReducer:ig,useRef:CT,useState:function(){return ig(ld)},useDebugValue:_v,useDeferredValue:function(n){var e=Wi();return DT(e,dn.memoizedState,n)},useTransition:function(){var n=ig(ld)[0],e=Wi().memoizedState;return[n,e]},useMutableSource:yT,useSyncExternalStore:vT,useId:LT,unstable_isNewReconciler:!1},LP={readContext:zi,useCallback:BT,useContext:zi,useEffect:Ev,useImperativeHandle:RT,useInsertionEffect:MT,useLayoutEffect:IT,useMemo:NT,useReducer:sg,useRef:CT,useState:function(){return sg(ld)},useDebugValue:_v,useDeferredValue:function(n){var e=Wi();return dn===null?e.memoizedState=n:DT(e,dn.memoizedState,n)},useTransition:function(){var n=sg(ld)[0],e=Wi().memoizedState;return[n,e]},useMutableSource:yT,useSyncExternalStore:vT,useId:LT,unstable_isNewReconciler:!1};function ss(n,e){if(n&&n.defaultProps){e=$t({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function rx(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:$t({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var um={isMounted:function(n){return(n=n._reactInternals)?wo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=ei(),s=ra(n),r=hr(i,s);r.payload=e,t!=null&&(r.callback=t),e=ia(n,r,s),e!==null&&(ds(e,n,s,i),Cf(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=ei(),s=ra(n),r=hr(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=ia(n,r,s),e!==null&&(ds(e,n,s,i),Cf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ei(),i=ra(n),s=hr(t,i);s.tag=2,e!=null&&(s.callback=e),e=ia(n,s,i),e!==null&&(ds(e,n,i,t),Cf(e,n,i))}};function qw(n,e,t,i,s,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!td(t,i)||!td(s,r):!0}function UT(n,e,t){var i=!1,s=ua,r=e.contextType;return typeof r=="object"&&r!==null?r=zi(r):(s=ui(e)?lo:Qn.current,i=e.contextTypes,r=(i=i!=null)?zl(n,s):ua),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=um,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function Yw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&um.enqueueReplaceState(e,e.state,null)}function ax(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},gv(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=zi(r):(r=ui(e)?lo:Qn.current,s.context=zl(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(rx(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&um.enqueueReplaceState(s,s.state,null),pp(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Yl(n,e){try{var t="",i=e;do t+=lL(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function rg(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function ox(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var PP=typeof WeakMap=="function"?WeakMap:Map;function OT(n,e,t){t=hr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){yp||(yp=!0,Ax=i),ox(n,e)},t}function QT(n,e,t){t=hr(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){ox(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){ox(n,e),typeof i!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function Xw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new PP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=YP.bind(null,n,e,t),e.then(n,n))}function Kw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Jw(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=hr(-1,1),e.tag=2,ia(t,e,1))),t.lanes|=1),n)}var FP=Er.ReactCurrentOwner,oi=!1;function qn(n,e,t,i){e.child=n===null?mT(e,null,t,i):$l(e,n.child,t,i)}function Zw(n,e,t,i,s){t=t.render;var r=e.ref;return Dl(e,s),i=bv(n,e,t,i,r,s),t=wv(),n!==null&&!oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,yr(n,e,s)):(Qt&&t&&cv(e),e.flags|=1,qn(n,e,i,s),e.child)}function eE(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!Nv(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,jT(n,e,r,i,s)):(n=Nf(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:td,t(a,i)&&n.ref===e.ref)return yr(n,e,s)}return e.flags|=1,n=aa(r,i),n.ref=e.ref,n.return=e,e.child=n}function jT(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(td(r,i)&&n.ref===e.ref)if(oi=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(oi=!0);else return e.lanes=n.lanes,yr(n,e,s)}return lx(n,e,t,i,s)}function VT(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(gl,Ai),Ai|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Mt(gl,Ai),Ai|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,Mt(gl,Ai),Ai|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,Mt(gl,Ai),Ai|=i;return qn(n,e,s,t),e.child}function GT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function lx(n,e,t,i,s){var r=ui(t)?lo:Qn.current;return r=zl(e,r),Dl(e,s),t=bv(n,e,t,i,r,s),i=wv(),n!==null&&!oi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,yr(n,e,s)):(Qt&&i&&cv(e),e.flags|=1,qn(n,e,t,s),e.child)}function tE(n,e,t,i,s){if(ui(t)){var r=!0;cp(e)}else r=!1;if(Dl(e,s),e.stateNode===null)Tf(n,e),UT(e,t,i),ax(e,t,i,s),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=zi(c):(c=ui(t)?lo:Qn.current,c=zl(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&Yw(e,a,i,c),Or=!1;var f=e.memoizedState;a.state=f,pp(e,i,a,s),l=e.memoizedState,o!==i||f!==l||ci.current||Or?(typeof u=="function"&&(rx(e,t,u,i),l=e.memoizedState),(o=Or||qw(e,t,o,i,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,AT(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:ss(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=zi(l):(l=ui(t)?lo:Qn.current,l=zl(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&Yw(e,a,i,l),Or=!1,f=e.memoizedState,a.state=f,pp(e,i,a,s);var g=e.memoizedState;o!==d||f!==g||ci.current||Or?(typeof p=="function"&&(rx(e,t,p,i),g=e.memoizedState),(c=Or||qw(e,t,c,i,f,g,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return cx(n,e,t,i,r,s)}function cx(n,e,t,i,s,r){GT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&Qw(e,t,!1),yr(n,e,r);i=e.stateNode,FP.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=$l(e,n.child,null,r),e.child=$l(e,null,o,r)):qn(n,e,o,r),e.memoizedState=i.state,s&&Qw(e,t,!0),e.child}function HT(n){var e=n.stateNode;e.pendingContext?Ow(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Ow(n,e.context,!1),Av(n,e.containerInfo)}function nE(n,e,t,i,s){return Wl(),dv(s),e.flags|=256,qn(n,e,t,i),e.child}var ux={dehydrated:null,treeContext:null,retryLane:0};function dx(n){return{baseLanes:n,cachePool:null,transitions:null}}function zT(n,e,t){var i=e.pendingProps,s=Gt.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Mt(Gt,s&1),n===null)return ix(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=fm(a,i,0,null),n=no(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=dx(t),e.memoizedState=ux,n):Sv(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return kP(n,e,a,i,o,s,t);if(r){r=i.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=aa(s,l),i.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=aa(o,r):(r=no(r,a,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=n.child.memoizedState,a=a===null?dx(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=ux,i}return r=n.child,n=r.sibling,i=aa(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Sv(n,e){return e=fm({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function uh(n,e,t,i){return i!==null&&dv(i),$l(e,n.child,null,t),n=Sv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function kP(n,e,t,i,s,r,a){if(t)return e.flags&256?(e.flags&=-257,i=rg(Error(oe(422))),uh(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=fm({mode:"visible",children:i.children},s,0,null),r=no(r,s,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&$l(e,n.child,null,a),e.child.memoizedState=dx(a),e.memoizedState=ux,r);if(!(e.mode&1))return uh(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(oe(419)),i=rg(r,i,void 0),uh(n,e,a,i)}if(o=(a&n.childLanes)!==0,oi||o){if(i=bn,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,xr(n,s),ds(i,n,s,-1))}return Bv(),i=rg(Error(oe(421))),uh(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=XP.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,yi=na(s.nextSibling),wi=e,Qt=!0,as=null,n!==null&&(Fi[ki++]=lr,Fi[ki++]=cr,Fi[ki++]=co,lr=n.id,cr=n.overflow,co=e),e=Sv(e,i.children),e.flags|=4096,e)}function iE(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),sx(n.return,e,t)}function ag(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function WT(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(qn(n,e,i.children,t),i=Gt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&iE(n,t,e);else if(n.tag===19)iE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Mt(Gt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&mp(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),ag(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&mp(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}ag(e,!0,t,null,r);break;case"together":ag(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function yr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ho|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(oe(153));if(e.child!==null){for(n=e.child,t=aa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=aa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function UP(n,e,t){switch(e.tag){case 3:HT(e),Wl();break;case 5:xT(e);break;case 1:ui(e.type)&&cp(e);break;case 4:Av(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Mt(hp,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Mt(Gt,Gt.current&1),e.flags|=128,null):t&e.child.childLanes?zT(n,e,t):(Mt(Gt,Gt.current&1),n=yr(n,e,t),n!==null?n.sibling:null);Mt(Gt,Gt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return WT(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(Gt,Gt.current),i)break;return null;case 22:case 23:return e.lanes=0,VT(n,e,t)}return yr(n,e,t)}var $T,hx,qT,YT;$T=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hx=function(){};qT=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Xa(Ts.current);var r=null;switch(t){case"input":s=L0(n,s),i=L0(n,i),r=[];break;case"select":s=$t({},s,{value:void 0}),i=$t({},i,{value:void 0}),r=[];break;case"textarea":s=k0(n,s),i=k0(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=op)}O0(t,i);var a;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qu.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(o=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Nt("scroll",n),r||o===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};YT=function(n,e,t,i){t!==i&&(e.flags|=4)};function Lc(n,e){if(!Qt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Nn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function OP(n,e,t){var i=e.pendingProps;switch(uv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return ui(e.type)&&lp(),Nn(e),null;case 3:return i=e.stateNode,ql(),Lt(ci),Lt(Qn),yv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(lh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,as!==null&&(vx(as),as=null))),hx(n,e),Nn(e),null;case 5:xv(e);var s=Xa(ad.current);if(t=e.type,n!==null&&e.stateNode!=null)qT(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(oe(166));return Nn(e),null}if(n=Xa(Ts.current),lh(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Ss]=e,i[sd]=r,n=(e.mode&1)!==0,t){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(s=0;s<mu.length;s++)Nt(mu[s],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":hw(i,r),Nt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Nt("invalid",i);break;case"textarea":pw(i,r),Nt("invalid",i)}O0(t,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&oh(i.textContent,o,n),s=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&oh(i.textContent,o,n),s=["children",""+o]):qu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Nt("scroll",i)}switch(t){case"input":Zd(i),fw(i,r,!0);break;case"textarea":Zd(i),mw(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=op)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=EI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[Ss]=e,n[sd]=i,$T(n,e,!1,!1),e.stateNode=n;e:{switch(a=Q0(t,i),t){case"dialog":Nt("cancel",n),Nt("close",n),s=i;break;case"iframe":case"object":case"embed":Nt("load",n),s=i;break;case"video":case"audio":for(s=0;s<mu.length;s++)Nt(mu[s],n);s=i;break;case"source":Nt("error",n),s=i;break;case"img":case"image":case"link":Nt("error",n),Nt("load",n),s=i;break;case"details":Nt("toggle",n),s=i;break;case"input":hw(n,i),s=L0(n,i),Nt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=$t({},i,{value:void 0}),Nt("invalid",n);break;case"textarea":pw(n,i),s=k0(n,i),Nt("invalid",n);break;default:s=i}O0(t,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?CI(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&_I(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Yu(n,l):typeof l=="number"&&Yu(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(qu.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Nt("scroll",n):l!=null&&Yy(n,r,l,a))}switch(t){case"input":Zd(n),fw(n,i,!1);break;case"textarea":Zd(n),mw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ca(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Tl(n,!!i.multiple,r,!1):i.defaultValue!=null&&Tl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=op)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(n&&e.stateNode!=null)YT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(oe(166));if(t=Xa(ad.current),Xa(Ts.current),lh(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ss]=e,(r=i.nodeValue!==t)&&(n=wi,n!==null))switch(n.tag){case 3:oh(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&oh(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ss]=e,e.stateNode=i}return Nn(e),null;case 13:if(Lt(Gt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qt&&yi!==null&&e.mode&1&&!(e.flags&128))fT(),Wl(),e.flags|=98560,r=!1;else if(r=lh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(oe(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(oe(317));r[Ss]=e}else Wl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),r=!1}else as!==null&&(vx(as),as=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Gt.current&1?hn===0&&(hn=3):Bv())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return ql(),hx(n,e),n===null&&nd(e.stateNode.containerInfo),Nn(e),null;case 10:return pv(e.type._context),Nn(e),null;case 17:return ui(e.type)&&lp(),Nn(e),null;case 19:if(Lt(Gt),r=e.memoizedState,r===null)return Nn(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Lc(r,!1);else{if(hn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=mp(n),a!==null){for(e.flags|=128,Lc(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Mt(Gt,Gt.current&1|2),e.child}n=n.sibling}r.tail!==null&&nn()>Xl&&(e.flags|=128,i=!0,Lc(r,!1),e.lanes=4194304)}else{if(!i)if(n=mp(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Lc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Qt)return Nn(e),null}else 2*nn()-r.renderingStartTime>Xl&&t!==1073741824&&(e.flags|=128,i=!0,Lc(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=nn(),e.sibling=null,t=Gt.current,Mt(Gt,i?t&1|2:t&1),e):(Nn(e),null);case 22:case 23:return Rv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ai&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function QP(n,e){switch(uv(e),e.tag){case 1:return ui(e.type)&&lp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ql(),Lt(ci),Lt(Qn),yv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return xv(e),null;case 13:if(Lt(Gt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Wl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Lt(Gt),null;case 4:return ql(),null;case 10:return pv(e.type._context),null;case 22:case 23:return Rv(),null;case 24:return null;default:return null}}var dh=!1,kn=!1,jP=typeof WeakSet=="function"?WeakSet:Set,xe=null;function ml(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Kt(n,e,i)}else t.current=null}function fx(n,e,t){try{t()}catch(i){Kt(n,e,i)}}var sE=!1;function VP(n,e){if(X0=sp,n=eT(),lv(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=n,f=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(o=a+s),d!==r||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++c===s&&(o=a),f===r&&++u===i&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(K0={focusedElem:n,selectionRange:t},sp=!1,xe=e;xe!==null;)if(e=xe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,xe=n;else for(;xe!==null;){e=xe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,A=g.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:ss(e.type,x),A);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(b){Kt(e,e.return,b)}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}return g=sE,sE=!1,g}function Bu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&fx(e,t,r)}s=s.next}while(s!==i)}}function dm(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function px(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function XT(n){var e=n.alternate;e!==null&&(n.alternate=null,XT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ss],delete e[sd],delete e[ex],delete e[_P],delete e[SP])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function KT(n){return n.tag===5||n.tag===3||n.tag===4}function rE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||KT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=op));else if(i!==4&&(n=n.child,n!==null))for(mx(n,e,t),n=n.sibling;n!==null;)mx(n,e,t),n=n.sibling}function gx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(gx(n,e,t),n=n.sibling;n!==null;)gx(n,e,t),n=n.sibling}var En=null,rs=!1;function Cr(n,e,t){for(t=t.child;t!==null;)JT(n,e,t),t=t.sibling}function JT(n,e,t){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(im,t)}catch{}switch(t.tag){case 5:kn||ml(t,e);case 6:var i=En,s=rs;En=null,Cr(n,e,t),En=i,rs=s,En!==null&&(rs?(n=En,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):En.removeChild(t.stateNode));break;case 18:En!==null&&(rs?(n=En,t=t.stateNode,n.nodeType===8?Zm(n.parentNode,t):n.nodeType===1&&Zm(n,t),Zu(n)):Zm(En,t.stateNode));break;case 4:i=En,s=rs,En=t.stateNode.containerInfo,rs=!0,Cr(n,e,t),En=i,rs=s;break;case 0:case 11:case 14:case 15:if(!kn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&fx(t,e,a),s=s.next}while(s!==i)}Cr(n,e,t);break;case 1:if(!kn&&(ml(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){Kt(t,e,o)}Cr(n,e,t);break;case 21:Cr(n,e,t);break;case 22:t.mode&1?(kn=(i=kn)||t.memoizedState!==null,Cr(n,e,t),kn=i):Cr(n,e,t);break;default:Cr(n,e,t)}}function aE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new jP),e.forEach(function(i){var s=KP.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Ji(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:En=o.stateNode,rs=!1;break e;case 3:En=o.stateNode.containerInfo,rs=!0;break e;case 4:En=o.stateNode.containerInfo,rs=!0;break e}o=o.return}if(En===null)throw Error(oe(160));JT(r,a,s),En=null,rs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Kt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZT(e,n),e=e.sibling}function ZT(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ji(e,n),ys(n),i&4){try{Bu(3,n,n.return),dm(3,n)}catch(x){Kt(n,n.return,x)}try{Bu(5,n,n.return)}catch(x){Kt(n,n.return,x)}}break;case 1:Ji(e,n),ys(n),i&512&&t!==null&&ml(t,t.return);break;case 5:if(Ji(e,n),ys(n),i&512&&t!==null&&ml(t,t.return),n.flags&32){var s=n.stateNode;try{Yu(s,"")}catch(x){Kt(n,n.return,x)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&bI(s,r),Q0(o,a);var c=Q0(o,r);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?CI(s,d):u==="dangerouslySetInnerHTML"?_I(s,d):u==="children"?Yu(s,d):Yy(s,u,d,c)}switch(o){case"input":P0(s,r);break;case"textarea":wI(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Tl(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Tl(s,!!r.multiple,r.defaultValue,!0):Tl(s,!!r.multiple,r.multiple?[]:"",!1))}s[sd]=r}catch(x){Kt(n,n.return,x)}}break;case 6:if(Ji(e,n),ys(n),i&4){if(n.stateNode===null)throw Error(oe(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(x){Kt(n,n.return,x)}}break;case 3:if(Ji(e,n),ys(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Zu(e.containerInfo)}catch(x){Kt(n,n.return,x)}break;case 4:Ji(e,n),ys(n);break;case 13:Ji(e,n),ys(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Iv=nn())),i&4&&aE(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(kn=(c=kn)||u,Ji(e,n),kn=c):Ji(e,n),ys(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(xe=n,u=n.child;u!==null;){for(d=xe=u;xe!==null;){switch(f=xe,p=f.child,f.tag){case 0:case 11:case 14:case 15:Bu(4,f,f.return);break;case 1:ml(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){Kt(i,t,x)}}break;case 5:ml(f,f.return);break;case 22:if(f.memoizedState!==null){lE(d);continue}}p!==null?(p.return=f,xe=p):lE(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=SI("display",a))}catch(x){Kt(n,n.return,x)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(x){Kt(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ji(e,n),ys(n),i&4&&aE(n);break;case 21:break;default:Ji(e,n),ys(n)}}function ys(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(KT(t)){var i=t;break e}t=t.return}throw Error(oe(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Yu(s,""),i.flags&=-33);var r=rE(n);gx(n,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,o=rE(n);mx(n,o,a);break;default:throw Error(oe(161))}}catch(l){Kt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function GP(n,e,t){xe=n,eR(n)}function eR(n,e,t){for(var i=(n.mode&1)!==0;xe!==null;){var s=xe,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||dh;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||kn;o=dh;var c=kn;if(dh=a,(kn=l)&&!c)for(xe=s;xe!==null;)a=xe,l=a.child,a.tag===22&&a.memoizedState!==null?cE(s):l!==null?(l.return=a,xe=l):cE(s);for(;r!==null;)xe=r,eR(r),r=r.sibling;xe=s,dh=o,kn=c}oE(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,xe=r):oE(n)}}function oE(n){for(;xe!==null;){var e=xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||dm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!kn)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ss(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&zw(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}zw(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Zu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}kn||e.flags&512&&px(e)}catch(f){Kt(e,e.return,f)}}if(e===n){xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}}function lE(n){for(;xe!==null;){var e=xe;if(e===n){xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,xe=t;break}xe=e.return}}function cE(n){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{dm(4,e)}catch(l){Kt(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Kt(e,s,l)}}var r=e.return;try{px(e)}catch(l){Kt(e,r,l)}break;case 5:var a=e.return;try{px(e)}catch(l){Kt(e,a,l)}}}catch(l){Kt(e,e.return,l)}if(e===n){xe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,xe=o;break}xe=e.return}}var HP=Math.ceil,xp=Er.ReactCurrentDispatcher,Cv=Er.ReactCurrentOwner,Gi=Er.ReactCurrentBatchConfig,ct=0,bn=null,ln=null,Mn=0,Ai=0,gl=ga(0),hn=0,ud=null,ho=0,hm=0,Mv=0,Nu=null,ai=null,Iv=0,Xl=1/0,sr=null,yp=!1,Ax=null,sa=null,hh=!1,$r=null,vp=0,Du=0,xx=null,Rf=-1,Bf=0;function ei(){return ct&6?nn():Rf!==-1?Rf:Rf=nn()}function ra(n){return n.mode&1?ct&2&&Mn!==0?Mn&-Mn:MP.transition!==null?(Bf===0&&(Bf=UI()),Bf):(n=yt,n!==0||(n=window.event,n=n===void 0?16:zI(n.type)),n):1}function ds(n,e,t,i){if(50<Du)throw Du=0,xx=null,Error(oe(185));Nd(n,t,i),(!(ct&2)||n!==bn)&&(n===bn&&(!(ct&2)&&(hm|=t),hn===4&&Vr(n,Mn)),di(n,i),t===1&&ct===0&&!(e.mode&1)&&(Xl=nn()+500,lm&&Aa()))}function di(n,e){var t=n.callbackNode;ML(n,e);var i=ip(n,n===bn?Mn:0);if(i===0)t!==null&&xw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&xw(t),e===1)n.tag===0?CP(uE.bind(null,n)):uT(uE.bind(null,n)),wP(function(){!(ct&6)&&Aa()}),t=null;else{switch(OI(i)){case 1:t=ev;break;case 4:t=FI;break;case 16:t=np;break;case 536870912:t=kI;break;default:t=np}t=lR(t,tR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function tR(n,e){if(Rf=-1,Bf=0,ct&6)throw Error(oe(327));var t=n.callbackNode;if(Ll()&&n.callbackNode!==t)return null;var i=ip(n,n===bn?Mn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=bp(n,i);else{e=i;var s=ct;ct|=2;var r=iR();(bn!==n||Mn!==e)&&(sr=null,Xl=nn()+500,to(n,e));do try{$P();break}catch(o){nR(n,o)}while(!0);fv(),xp.current=r,ct=s,ln!==null?e=0:(bn=null,Mn=0,e=hn)}if(e!==0){if(e===2&&(s=z0(n),s!==0&&(i=s,e=yx(n,s))),e===1)throw t=ud,to(n,0),Vr(n,i),di(n,nn()),t;if(e===6)Vr(n,i);else{if(s=n.current.alternate,!(i&30)&&!zP(s)&&(e=bp(n,i),e===2&&(r=z0(n),r!==0&&(i=r,e=yx(n,r))),e===1))throw t=ud,to(n,0),Vr(n,i),di(n,nn()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(oe(345));case 2:Fa(n,ai,sr);break;case 3:if(Vr(n,i),(i&130023424)===i&&(e=Iv+500-nn(),10<e)){if(ip(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){ei(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Z0(Fa.bind(null,n,ai,sr),e);break}Fa(n,ai,sr);break;case 4:if(Vr(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-us(i);r=1<<a,a=e[a],a>s&&(s=a),i&=~r}if(i=s,i=nn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*HP(i/1960))-i,10<i){n.timeoutHandle=Z0(Fa.bind(null,n,ai,sr),i);break}Fa(n,ai,sr);break;case 5:Fa(n,ai,sr);break;default:throw Error(oe(329))}}}return di(n,nn()),n.callbackNode===t?tR.bind(null,n):null}function yx(n,e){var t=Nu;return n.current.memoizedState.isDehydrated&&(to(n,e).flags|=256),n=bp(n,e),n!==2&&(e=ai,ai=t,e!==null&&vx(e)),n}function vx(n){ai===null?ai=n:ai.push.apply(ai,n)}function zP(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!ps(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(n,e){for(e&=~Mv,e&=~hm,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-us(e),i=1<<t;n[t]=-1,e&=~i}}function uE(n){if(ct&6)throw Error(oe(327));Ll();var e=ip(n,0);if(!(e&1))return di(n,nn()),null;var t=bp(n,e);if(n.tag!==0&&t===2){var i=z0(n);i!==0&&(e=i,t=yx(n,i))}if(t===1)throw t=ud,to(n,0),Vr(n,e),di(n,nn()),t;if(t===6)throw Error(oe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fa(n,ai,sr),di(n,nn()),null}function Tv(n,e){var t=ct;ct|=1;try{return n(e)}finally{ct=t,ct===0&&(Xl=nn()+500,lm&&Aa())}}function fo(n){$r!==null&&$r.tag===0&&!(ct&6)&&Ll();var e=ct;ct|=1;var t=Gi.transition,i=yt;try{if(Gi.transition=null,yt=1,n)return n()}finally{yt=i,Gi.transition=t,ct=e,!(ct&6)&&Aa()}}function Rv(){Ai=gl.current,Lt(gl)}function to(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,bP(t)),ln!==null)for(t=ln.return;t!==null;){var i=t;switch(uv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&lp();break;case 3:ql(),Lt(ci),Lt(Qn),yv();break;case 5:xv(i);break;case 4:ql();break;case 13:Lt(Gt);break;case 19:Lt(Gt);break;case 10:pv(i.type._context);break;case 22:case 23:Rv()}t=t.return}if(bn=n,ln=n=aa(n.current,null),Mn=Ai=e,hn=0,ud=null,Mv=hm=ho=0,ai=Nu=null,Ya!==null){for(e=0;e<Ya.length;e++)if(t=Ya[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}t.pending=i}Ya=null}return n}function nR(n,e){do{var t=ln;try{if(fv(),Mf.current=Ap,gp){for(var i=zt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}gp=!1}if(uo=0,gn=dn=zt=null,Ru=!1,od=0,Cv.current=null,t===null||t.return===null){hn=1,ud=e,ln=null;break}e:{var r=n,a=t.return,o=t,l=e;if(e=Mn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Kw(a);if(p!==null){p.flags&=-257,Jw(p,a,o,r,e),p.mode&1&&Xw(r,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var x=new Set;x.add(l),e.updateQueue=x}else g.add(l);break e}else{if(!(e&1)){Xw(r,c,e),Bv();break e}l=Error(oe(426))}}else if(Qt&&o.mode&1){var A=Kw(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Jw(A,a,o,r,e),dv(Yl(l,o));break e}}r=l=Yl(l,o),hn!==4&&(hn=2),Nu===null?Nu=[r]:Nu.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var m=OT(r,l,e);Hw(r,m);break e;case 1:o=l;var y=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(sa===null||!sa.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=QT(r,o,e);Hw(r,b);break e}}r=r.return}while(r!==null)}rR(t)}catch(w){e=w,ln===t&&t!==null&&(ln=t=t.return);continue}break}while(!0)}function iR(){var n=xp.current;return xp.current=Ap,n===null?Ap:n}function Bv(){(hn===0||hn===3||hn===2)&&(hn=4),bn===null||!(ho&268435455)&&!(hm&268435455)||Vr(bn,Mn)}function bp(n,e){var t=ct;ct|=2;var i=iR();(bn!==n||Mn!==e)&&(sr=null,to(n,e));do try{WP();break}catch(s){nR(n,s)}while(!0);if(fv(),ct=t,xp.current=i,ln!==null)throw Error(oe(261));return bn=null,Mn=0,hn}function WP(){for(;ln!==null;)sR(ln)}function $P(){for(;ln!==null&&!xL();)sR(ln)}function sR(n){var e=oR(n.alternate,n,Ai);n.memoizedProps=n.pendingProps,e===null?rR(n):ln=e,Cv.current=null}function rR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=QP(t,e),t!==null){t.flags&=32767,ln=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{hn=6,ln=null;return}}else if(t=OP(t,e,Ai),t!==null){ln=t;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=n}while(e!==null);hn===0&&(hn=5)}function Fa(n,e,t){var i=yt,s=Gi.transition;try{Gi.transition=null,yt=1,qP(n,e,t,i)}finally{Gi.transition=s,yt=i}return null}function qP(n,e,t,i){do Ll();while($r!==null);if(ct&6)throw Error(oe(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(oe(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(IL(n,r),n===bn&&(ln=bn=null,Mn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||hh||(hh=!0,lR(np,function(){return Ll(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Gi.transition,Gi.transition=null;var a=yt;yt=1;var o=ct;ct|=4,Cv.current=null,VP(n,t),ZT(t,n),pP(K0),sp=!!X0,K0=X0=null,n.current=t,GP(t),yL(),ct=o,yt=a,Gi.transition=r}else n.current=t;if(hh&&(hh=!1,$r=n,vp=s),r=n.pendingLanes,r===0&&(sa=null),wL(t.stateNode),di(n,nn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(yp)throw yp=!1,n=Ax,Ax=null,n;return vp&1&&n.tag!==0&&Ll(),r=n.pendingLanes,r&1?n===xx?Du++:(Du=0,xx=n):Du=0,Aa(),null}function Ll(){if($r!==null){var n=OI(vp),e=Gi.transition,t=yt;try{if(Gi.transition=null,yt=16>n?16:n,$r===null)var i=!1;else{if(n=$r,$r=null,vp=0,ct&6)throw Error(oe(331));var s=ct;for(ct|=4,xe=n.current;xe!==null;){var r=xe,a=r.child;if(xe.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(xe=c;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Bu(8,u,r)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var f=u.sibling,p=u.return;if(XT(u),u===c){xe=null;break}if(f!==null){f.return=p,xe=f;break}xe=p}}}var g=r.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}xe=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,xe=a;else e:for(;xe!==null;){if(r=xe,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Bu(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,xe=m;break e}xe=r.return}}var y=n.current;for(xe=y;xe!==null;){a=xe;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,xe=v;else e:for(a=y;xe!==null;){if(o=xe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:dm(9,o)}}catch(w){Kt(o,o.return,w)}if(o===a){xe=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,xe=b;break e}xe=o.return}}if(ct=s,Aa(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(im,n)}catch{}i=!0}return i}finally{yt=t,Gi.transition=e}}return!1}function dE(n,e,t){e=Yl(t,e),e=OT(n,e,1),n=ia(n,e,1),e=ei(),n!==null&&(Nd(n,1,e),di(n,e))}function Kt(n,e,t){if(n.tag===3)dE(n,n,t);else for(;e!==null;){if(e.tag===3){dE(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(sa===null||!sa.has(i))){n=Yl(t,n),n=QT(e,n,1),e=ia(e,n,1),n=ei(),e!==null&&(Nd(e,1,n),di(e,n));break}}e=e.return}}function YP(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=ei(),n.pingedLanes|=n.suspendedLanes&t,bn===n&&(Mn&t)===t&&(hn===4||hn===3&&(Mn&130023424)===Mn&&500>nn()-Iv?to(n,0):Mv|=t),di(n,e)}function aR(n,e){e===0&&(n.mode&1?(e=nh,nh<<=1,!(nh&130023424)&&(nh=4194304)):e=1);var t=ei();n=xr(n,e),n!==null&&(Nd(n,e,t),di(n,t))}function XP(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),aR(n,t)}function KP(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(oe(314))}i!==null&&i.delete(e),aR(n,t)}var oR;oR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ci.current)oi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return oi=!1,UP(n,e,t);oi=!!(n.flags&131072)}else oi=!1,Qt&&e.flags&1048576&&dT(e,dp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Tf(n,e),n=e.pendingProps;var s=zl(e,Qn.current);Dl(e,t),s=bv(null,e,i,n,s,t);var r=wv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ui(i)?(r=!0,cp(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gv(e),s.updater=um,e.stateNode=s,s._reactInternals=e,ax(e,i,n,t),e=cx(null,e,i,!0,r,t)):(e.tag=0,Qt&&r&&cv(e),qn(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Tf(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=ZP(i),n=ss(i,n),s){case 0:e=lx(null,e,i,n,t);break e;case 1:e=tE(null,e,i,n,t);break e;case 11:e=Zw(null,e,i,n,t);break e;case 14:e=eE(null,e,i,ss(i.type,n),t);break e}throw Error(oe(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ss(i,s),lx(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ss(i,s),tE(n,e,i,s,t);case 3:e:{if(HT(e),n===null)throw Error(oe(387));i=e.pendingProps,r=e.memoizedState,s=r.element,AT(n,e),pp(e,i,null,t);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Yl(Error(oe(423)),e),e=nE(n,e,i,t,s);break e}else if(i!==s){s=Yl(Error(oe(424)),e),e=nE(n,e,i,t,s);break e}else for(yi=na(e.stateNode.containerInfo.firstChild),wi=e,Qt=!0,as=null,t=mT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wl(),i===s){e=yr(n,e,t);break e}qn(n,e,i,t)}e=e.child}return e;case 5:return xT(e),n===null&&ix(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,a=s.children,J0(i,s)?a=null:r!==null&&J0(i,r)&&(e.flags|=32),GT(n,e),qn(n,e,a,t),e.child;case 6:return n===null&&ix(e),null;case 13:return zT(n,e,t);case 4:return Av(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=$l(e,null,i,t):qn(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ss(i,s),Zw(n,e,i,s,t);case 7:return qn(n,e,e.pendingProps,t),e.child;case 8:return qn(n,e,e.pendingProps.children,t),e.child;case 12:return qn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,Mt(hp,i._currentValue),i._currentValue=a,r!==null)if(ps(r.value,a)){if(r.children===s.children&&!ci.current){e=yr(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=hr(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),sx(r.return,t,e),o.lanes|=t;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(oe(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),sx(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}qn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Dl(e,t),s=zi(s),i=i(s),e.flags|=1,qn(n,e,i,t),e.child;case 14:return i=e.type,s=ss(i,e.pendingProps),s=ss(i.type,s),eE(n,e,i,s,t);case 15:return jT(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ss(i,s),Tf(n,e),e.tag=1,ui(i)?(n=!0,cp(e)):n=!1,Dl(e,t),UT(e,i,s),ax(e,i,s,t),cx(null,e,i,!0,n,t);case 19:return WT(n,e,t);case 22:return VT(n,e,t)}throw Error(oe(156,e.tag))};function lR(n,e){return PI(n,e)}function JP(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(n,e,t,i){return new JP(n,e,t,i)}function Nv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ZP(n){if(typeof n=="function")return Nv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ky)return 11;if(n===Jy)return 14}return 2}function aa(n,e){var t=n.alternate;return t===null?(t=Qi(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Nf(n,e,t,i,s,r){var a=2;if(i=n,typeof n=="function")Nv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case al:return no(t.children,s,r,e);case Xy:a=8,s|=8;break;case R0:return n=Qi(12,t,e,s|2),n.elementType=R0,n.lanes=r,n;case B0:return n=Qi(13,t,e,s),n.elementType=B0,n.lanes=r,n;case N0:return n=Qi(19,t,e,s),n.elementType=N0,n.lanes=r,n;case xI:return fm(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gI:a=10;break e;case AI:a=9;break e;case Ky:a=11;break e;case Jy:a=14;break e;case Ur:a=16,i=null;break e}throw Error(oe(130,n==null?n:typeof n,""))}return e=Qi(a,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function no(n,e,t,i){return n=Qi(7,n,i,e),n.lanes=t,n}function fm(n,e,t,i){return n=Qi(22,n,i,e),n.elementType=xI,n.lanes=t,n.stateNode={isHidden:!1},n}function og(n,e,t){return n=Qi(6,n,null,e),n.lanes=t,n}function lg(n,e,t){return e=Qi(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function e3(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vm(0),this.expirationTimes=Vm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dv(n,e,t,i,s,r,a,o,l){return n=new e3(n,e,t,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Qi(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},gv(r),n}function t3(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function cR(n){if(!n)return ua;n=n._reactInternals;e:{if(wo(n)!==n||n.tag!==1)throw Error(oe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ui(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(n.tag===1){var t=n.type;if(ui(t))return cT(n,t,e)}return e}function uR(n,e,t,i,s,r,a,o,l){return n=Dv(t,i,!0,n,s,r,a,o,l),n.context=cR(null),t=n.current,i=ei(),s=ra(t),r=hr(i,s),r.callback=e??null,ia(t,r,s),n.current.lanes=s,Nd(n,s,i),di(n,i),n}function pm(n,e,t,i){var s=e.current,r=ei(),a=ra(s);return t=cR(t),e.context===null?e.context=t:e.pendingContext=t,e=hr(r,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=ia(s,e,a),n!==null&&(ds(n,s,a,r),Cf(n,s,a)),a}function wp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Lv(n,e){hE(n,e),(n=n.alternate)&&hE(n,e)}function n3(){return null}var dR=typeof reportError=="function"?reportError:function(n){console.error(n)};function Pv(n){this._internalRoot=n}mm.prototype.render=Pv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(oe(409));pm(n,e,null,null)};mm.prototype.unmount=Pv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;fo(function(){pm(null,n,null,null)}),e[Ar]=null}};function mm(n){this._internalRoot=n}mm.prototype.unstable_scheduleHydration=function(n){if(n){var e=VI();n={blockedOn:null,target:n,priority:e};for(var t=0;t<jr.length&&e!==0&&e<jr[t].priority;t++);jr.splice(t,0,n),t===0&&HI(n)}};function Fv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function fE(){}function i3(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=wp(a);r.call(c)}}var a=uR(e,i,n,0,null,!1,!1,"",fE);return n._reactRootContainer=a,n[Ar]=a.current,nd(n.nodeType===8?n.parentNode:n),fo(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var o=i;i=function(){var c=wp(l);o.call(c)}}var l=Dv(n,0,!1,null,null,!1,!1,"",fE);return n._reactRootContainer=l,n[Ar]=l.current,nd(n.nodeType===8?n.parentNode:n),fo(function(){pm(e,l,t,i)}),l}function Am(n,e,t,i,s){var r=t._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var l=wp(a);o.call(l)}}pm(e,a,n,s)}else a=i3(t,e,n,s,i);return wp(a)}QI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=pu(e.pendingLanes);t!==0&&(tv(e,t|1),di(e,nn()),!(ct&6)&&(Xl=nn()+500,Aa()))}break;case 13:fo(function(){var i=xr(n,1);if(i!==null){var s=ei();ds(i,n,1,s)}}),Lv(n,1)}};nv=function(n){if(n.tag===13){var e=xr(n,134217728);if(e!==null){var t=ei();ds(e,n,134217728,t)}Lv(n,134217728)}};jI=function(n){if(n.tag===13){var e=ra(n),t=xr(n,e);if(t!==null){var i=ei();ds(t,n,e,i)}Lv(n,e)}};VI=function(){return yt};GI=function(n,e){var t=yt;try{return yt=n,e()}finally{yt=t}};V0=function(n,e,t){switch(e){case"input":if(P0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=om(i);if(!s)throw Error(oe(90));vI(i),P0(i,s)}}}break;case"textarea":wI(n,t);break;case"select":e=t.value,e!=null&&Tl(n,!!t.multiple,e,!1)}};TI=Tv;RI=fo;var s3={usingClientEntryPoint:!1,Events:[Ld,ul,om,MI,II,Tv]},Pc={findFiberByHostInstance:qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r3={bundleType:Pc.bundleType,version:Pc.version,rendererPackageName:Pc.rendererPackageName,rendererConfig:Pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Er.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=DI(n),n===null?null:n.stateNode},findFiberByHostInstance:Pc.findFiberByHostInstance||n3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{im=fh.inject(r3),Is=fh}catch{}}Ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s3;Ci.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(oe(200));return t3(n,e,null,t)};Ci.createRoot=function(n,e){if(!Fv(n))throw Error(oe(299));var t=!1,i="",s=dR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dv(n,1,!1,null,null,t,!1,i,s),n[Ar]=e.current,nd(n.nodeType===8?n.parentNode:n),new Pv(e)};Ci.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(oe(188)):(n=Object.keys(n).join(","),Error(oe(268,n)));return n=DI(e),n=n===null?null:n.stateNode,n};Ci.flushSync=function(n){return fo(n)};Ci.hydrate=function(n,e,t){if(!gm(e))throw Error(oe(200));return Am(null,n,e,!0,t)};Ci.hydrateRoot=function(n,e,t){if(!Fv(n))throw Error(oe(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",a=dR;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=uR(e,null,n,1,t??null,s,!1,r,a),n[Ar]=e.current,nd(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new mm(e)};Ci.render=function(n,e,t){if(!gm(e))throw Error(oe(200));return Am(null,n,e,!1,t)};Ci.unmountComponentAtNode=function(n){if(!gm(n))throw Error(oe(40));return n._reactRootContainer?(fo(function(){Am(null,null,n,!1,function(){n._reactRootContainer=null,n[Ar]=null})}),!0):!1};Ci.unstable_batchedUpdates=Tv;Ci.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!gm(t))throw Error(oe(200));if(n==null||n._reactInternals===void 0)throw Error(oe(38));return Am(n,e,t,!1,i)};Ci.version="18.3.1-next-f1338f8080-20240426";function hR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hR)}catch(n){console.error(n)}}hR(),hI.exports=Ci;var a3=hI.exports,fR,pE=a3;fR=pE.createRoot,pE.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mE="popstate";function o3(n={}){function e(i,s){let{pathname:r,search:a,hash:o}=i.location;return bx("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:dd(s)}return c3(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ms(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l3(){return Math.random().toString(36).substring(2,10)}function gE(n,e){return{usr:n.state,key:n.key,idx:e}}function bx(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ac(e):e,state:t,key:e&&e.key||i||l3()}}function dd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ac(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function c3(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let A=u(),m=A==null?null:A-c;c=A,l&&l({action:o,location:x.location,delta:m})}function f(A,m){o="PUSH";let y=bx(x.location,A,m);c=u()+1;let v=gE(y,c),b=x.createHref(y);try{a.pushState(v,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(b)}r&&l&&l({action:o,location:x.location,delta:1})}function p(A,m){o="REPLACE";let y=bx(x.location,A,m);c=u();let v=gE(y,c),b=x.createHref(y);a.replaceState(v,"",b),r&&l&&l({action:o,location:x.location,delta:0})}function g(A){return u3(A)}let x={get action(){return o},get location(){return n(s,a)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(mE,d),l=A,()=>{s.removeEventListener(mE,d),l=null}},createHref(A){return e(s,A)},createURL:g,encodeLocation(A){let m=g(A);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(A){return a.go(A)}};return x}function u3(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:dd(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function pR(n,e,t="/"){return d3(n,e,t,!1)}function d3(n,e,t,i){let s=typeof e=="string"?Ac(e):e,r=vr(s.pathname||"/",t);if(r==null)return null;let a=mR(n);h3(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=E3(r);o=b3(a[l],c,i)}return o}function mR(n,e=[],t=[],i="",s=!1){let r=(a,o,l=s,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&l)return;Wt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let d=fr([i,u.relativePath]),f=t.concat(u);a.children&&a.children.length>0&&(Wt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),mR(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:y3(d,a.index),routesMeta:f})};return n.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,o);else for(let c of gR(a.path))r(a,o,!0,c)}),e}function gR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=gR(i.join("/")),o=[];return o.push(...a.map(l=>l===""?r:[r,l].join("/"))),s&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function h3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:v3(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var f3=/^:[\w-]+$/,p3=3,m3=2,g3=1,A3=10,x3=-2,AE=n=>n==="*";function y3(n,e){let t=n.split("/"),i=t.length;return t.some(AE)&&(i+=x3),e&&(i+=m3),t.filter(s=>!AE(s)).reduce((s,r)=>s+(f3.test(r)?p3:r===""?g3:A3),i)}function v3(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function b3(n,e,t=!1){let{routesMeta:i}=n,s={},r="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",d=Ep({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&t&&!i[i.length-1].route.index&&(d=Ep({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:fr([r,d.pathname]),pathnameBase:I3(fr([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=fr([r,d.pathnameBase]))}return a}function Ep(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=w3(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let g=o[f]||"";a=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:a,pattern:n}}function w3(n,e=!1,t=!0){ms(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function E3(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ms(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function vr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var _3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S3=n=>_3.test(n);function C3(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Ac(n):n,r;if(t)if(S3(t))r=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),ms(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?r=xE(t.substring(1),"/"):r=xE(t,e)}else r=e;return{pathname:r,search:T3(i),hash:R3(s)}}function xE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function cg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M3(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function AR(n){let e=M3(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function xR(n,e,t,i=!1){let s;typeof n=="string"?s=Ac(n):(s={...n},Wt(!s.pathname||!s.pathname.includes("?"),cg("?","pathname","search",s)),Wt(!s.pathname||!s.pathname.includes("#"),cg("#","pathname","hash",s)),Wt(!s.search||!s.search.includes("#"),cg("#","search","hash",s)));let r=n===""||s.pathname==="",a=r?"/":s.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=C3(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(r||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var fr=n=>n.join("/").replace(/\/\/+/g,"/"),I3=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),T3=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,R3=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function B3(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yR=["POST","PUT","PATCH","DELETE"];new Set(yR);var N3=["GET",...yR];new Set(N3);var xc=N.createContext(null);xc.displayName="DataRouter";var xm=N.createContext(null);xm.displayName="DataRouterState";N.createContext(!1);var vR=N.createContext({isTransitioning:!1});vR.displayName="ViewTransition";var D3=N.createContext(new Map);D3.displayName="Fetchers";var L3=N.createContext(null);L3.displayName="Await";var Fs=N.createContext(null);Fs.displayName="Navigation";var Fd=N.createContext(null);Fd.displayName="Location";var ks=N.createContext({outlet:null,matches:[],isDataRoute:!1});ks.displayName="Route";var kv=N.createContext(null);kv.displayName="RouteError";function P3(n,{relative:e}={}){Wt(kd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=N.useContext(Fs),{hash:s,pathname:r,search:a}=Ud(n,{relative:e}),o=r;return t!=="/"&&(o=r==="/"?t:fr([t,r])),i.createHref({pathname:o,search:a,hash:s})}function kd(){return N.useContext(Fd)!=null}function Us(){return Wt(kd(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Fd).location}var bR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wR(n){N.useContext(Fs).static||N.useLayoutEffect(n)}function ER(){let{isDataRoute:n}=N.useContext(ks);return n?Y3():F3()}function F3(){Wt(kd(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(xc),{basename:e,navigator:t}=N.useContext(Fs),{matches:i}=N.useContext(ks),{pathname:s}=Us(),r=JSON.stringify(AR(i)),a=N.useRef(!1);return wR(()=>{a.current=!0}),N.useCallback((l,c={})=>{if(ms(a.current,bR),!a.current)return;if(typeof l=="number"){t.go(l);return}let u=xR(l,JSON.parse(r),s,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:fr([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,r,s,n])}N.createContext(null);function k3(){let{matches:n}=N.useContext(ks),e=n[n.length-1];return e?e.params:{}}function Ud(n,{relative:e}={}){let{matches:t}=N.useContext(ks),{pathname:i}=Us(),s=JSON.stringify(AR(t));return N.useMemo(()=>xR(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function U3(n,e){return _R(n,e)}function _R(n,e,t,i,s){var y;Wt(kd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=N.useContext(Fs),{matches:a}=N.useContext(ks),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let v=d&&d.path||"";SR(c,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=Us(),p;if(e){let v=typeof e=="string"?Ac(e):e;Wt(u==="/"||((y=v.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${v.pathname}" was given in the \`location\` prop.`),p=v}else p=f;let g=p.pathname||"/",x=g;if(u!=="/"){let v=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let A=pR(n,{pathname:x});ms(d||A!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ms(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=G3(A&&A.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:fr([u,r.encodeLocation?r.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:fr([u,r.encodeLocation?r.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),a,t,i,s);return e&&m?N.createElement(Fd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},m):m}function O3(){let n=q3(),e=B3(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:r},"ErrorBoundary")," or"," ",N.createElement("code",{style:r},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,a)}var Q3=N.createElement(O3,null),j3=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?N.createElement(ks.Provider,{value:this.props.routeContext},N.createElement(kv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V3({routeContext:n,match:e,children:t}){let i=N.useContext(xc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ks.Provider,{value:n},t)}function G3(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,a=t==null?void 0:t.errors;if(a!=null){let u=r.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Wt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,u+1))}let o=!1,l=-1;if(t)for(let u=0;u<r.length;u++){let d=r[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:p}=t,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}let c=t&&i?(u,d)=>{var f,p;i(u,{location:t.location,params:((p=(f=t.matches)==null?void 0:f[0])==null?void 0:p.params)??{},errorInfo:d})}:void 0;return r.reduceRight((u,d,f)=>{let p,g=!1,x=null,A=null;t&&(p=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||Q3,o&&(l<0&&f===0?(SR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,A=null):l===f&&(g=!0,A=d.route.hydrateFallbackElement||null)));let m=e.concat(r.slice(0,f+1)),y=()=>{let v;return p?v=x:g?v=A:d.route.Component?v=N.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,N.createElement(V3,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:t!=null},children:v})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?N.createElement(j3,{location:t.location,revalidation:t.revalidation,component:x,error:p,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):y()},null)}function Uv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H3(n){let e=N.useContext(xc);return Wt(e,Uv(n)),e}function z3(n){let e=N.useContext(xm);return Wt(e,Uv(n)),e}function W3(n){let e=N.useContext(ks);return Wt(e,Uv(n)),e}function Ov(n){let e=W3(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $3(){return Ov("useRouteId")}function q3(){var i;let n=N.useContext(kv),e=z3("useRouteError"),t=Ov("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function Y3(){let{router:n}=H3("useNavigate"),e=Ov("useNavigate"),t=N.useRef(!1);return wR(()=>{t.current=!0}),N.useCallback(async(s,r={})=>{ms(t.current,bR),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...r}))},[n,e])}var yE={};function SR(n,e,t){!e&&!yE[n]&&(yE[n]=!0,ms(!1,t))}N.memo(X3);function X3({routes:n,future:e,state:t,unstable_onError:i}){return _R(n,void 0,t,i,e)}function zn(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function K3({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:r=!1}){Wt(!kd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),o=N.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof t=="string"&&(t=Ac(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=t,p=N.useMemo(()=>{let g=vr(l,a);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:f},navigationType:i}},[a,l,c,u,d,f,i]);return ms(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:N.createElement(Fs.Provider,{value:o},N.createElement(Fd.Provider,{children:e,value:p}))}function J3({children:n,location:e}){return U3(wx(n),e)}function wx(n,e=[]){let t=[];return N.Children.forEach(n,(i,s)=>{if(!N.isValidElement(i))return;let r=[...e,s];if(i.type===N.Fragment){t.push.apply(t,wx(i.props.children,r));return}Wt(i.type===zn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=wx(i.props.children,r)),t.push(a)}),t}var Df="get",Lf="application/x-www-form-urlencoded";function ym(n){return n!=null&&typeof n.tagName=="string"}function Z3(n){return ym(n)&&n.tagName.toLowerCase()==="button"}function eF(n){return ym(n)&&n.tagName.toLowerCase()==="form"}function tF(n){return ym(n)&&n.tagName.toLowerCase()==="input"}function nF(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iF(n,e){return n.button===0&&(!e||e==="_self")&&!nF(n)}var ph=null;function sF(){if(ph===null)try{new FormData(document.createElement("form"),0),ph=!1}catch{ph=!0}return ph}var rF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ug(n){return n!=null&&!rF.has(n)?(ms(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lf}"`),null):n}function aF(n,e){let t,i,s,r,a;if(eF(n)){let o=n.getAttribute("action");i=o?vr(o,e):null,t=n.getAttribute("method")||Df,s=ug(n.getAttribute("enctype"))||Lf,r=new FormData(n)}else if(Z3(n)||tF(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(i=l?vr(l,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||Df,s=ug(n.getAttribute("formenctype"))||ug(o.getAttribute("enctype"))||Lf,r=new FormData(o,n),!sF()){let{name:c,type:u,value:d}=n;if(u==="image"){let f=c?`${c}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else c&&r.append(c,d)}}else{if(ym(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Df,i=null,s=Lf,a=n}return r&&s==="text/plain"&&(a=r,r=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oF(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&vr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function lF(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cF(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function uF(n,e,t){let i=await Promise.all(n.map(async s=>{let r=e.routes[s.route.id];if(r){let a=await lF(r,t);return a.links?a.links():[]}return[]}));return pF(i.flat(1).filter(cF).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vE(n,e,t,i,s,r){let a=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,o=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):r==="data"?e.filter((l,c)=>{var d;let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function dF(n,e,{includeHydrateFallback:t}={}){return hF(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function hF(n){return[...new Set(n)]}function fF(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function pF(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let r=JSON.stringify(fF(s));return t.has(r)||(t.add(r),i.push({key:r,link:s})),i},[])}function CR(){let n=N.useContext(xc);return Qv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function mF(){let n=N.useContext(xm);return Qv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var jv=N.createContext(void 0);jv.displayName="FrameworkContext";function MR(){let n=N.useContext(jv);return Qv(n,"You must render this element inside a <HydratedRouter> element"),n}function gF(n,e){let t=N.useContext(jv),[i,s]=N.useState(!1),[r,a]=N.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=N.useRef(null);N.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let x=m=>{m.forEach(y=>{a(y.isIntersecting)})},A=new IntersectionObserver(x,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[n]),N.useEffect(()=>{if(i){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[i]);let p=()=>{s(!0)},g=()=>{s(!1),a(!1)};return t?n!=="intent"?[r,f,{}]:[r,f,{onFocus:Fc(o,p),onBlur:Fc(l,g),onMouseEnter:Fc(c,p),onMouseLeave:Fc(u,g),onTouchStart:Fc(d,p)}]:[!1,f,{}]}function Fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function AF({page:n,...e}){let{router:t}=CR(),i=N.useMemo(()=>pR(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?N.createElement(yF,{page:n,matches:i,...e}):null}function xF(n){let{manifest:e,routeModules:t}=MR(),[i,s]=N.useState([]);return N.useEffect(()=>{let r=!1;return uF(n,e,t).then(a=>{r||s(a)}),()=>{r=!0}},[n,e,t]),i}function yF({page:n,matches:e,...t}){let i=Us(),{manifest:s,routeModules:r}=MR(),{basename:a}=CR(),{loaderData:o,matches:l}=mF(),c=N.useMemo(()=>vE(n,e,l,s,i,"data"),[n,e,l,s,i]),u=N.useMemo(()=>vE(n,e,l,s,i,"assets"),[n,e,l,s,i]),d=N.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let g=new Set,x=!1;if(e.forEach(m=>{var v;let y=s.routes[m.route.id];!y||!y.hasLoader||(!c.some(b=>b.route.id===m.route.id)&&m.route.id in o&&((v=r[m.route.id])!=null&&v.shouldRevalidate)||y.hasClientLoader?x=!0:g.add(m.route.id))}),g.size===0)return[];let A=oF(n,a,"data");return x&&g.size>0&&A.searchParams.set("_routes",e.filter(m=>g.has(m.route.id)).map(m=>m.route.id).join(",")),[A.pathname+A.search]},[a,o,i,s,c,e,n,r]),f=N.useMemo(()=>dF(u,s),[u,s]),p=xF(u);return N.createElement(N.Fragment,null,d.map(g=>N.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),f.map(g=>N.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),p.map(({key:g,link:x})=>N.createElement("link",{key:g,nonce:t.nonce,...x})))}function vF(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IR&&(window.__reactRouterVersion="7.9.6")}catch{}function bF({basename:n,children:e,window:t}){let i=N.useRef();i.current==null&&(i.current=o3({window:t,v5Compat:!0}));let s=i.current,[r,a]=N.useState({action:s.action,location:s.location}),o=N.useCallback(l=>{N.startTransition(()=>a(l))},[a]);return N.useLayoutEffect(()=>s.listen(o),[s,o]),N.createElement(K3,{basename:n,children:e,location:r.location,navigationType:r.action,navigator:s})}var TR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=N.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:r,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},p){let{basename:g}=N.useContext(Fs),x=typeof c=="string"&&TR.test(c),A,m=!1;if(typeof c=="string"&&x&&(A=c,IR))try{let _=new URL(window.location.href),E=c.startsWith("//")?new URL(_.protocol+c):new URL(c),R=vr(E.pathname,g);E.origin===_.origin&&R!=null?c=R+E.search+E.hash:m=!0}catch{ms(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=P3(c,{relative:s}),[v,b,w]=gF(i,f),S=SF(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:d});function C(_){e&&e(_),_.defaultPrevented||S(_)}let M=N.createElement("a",{...f,...w,href:A||y,onClick:m||r?e:C,ref:vF(p,b),target:l,"data-discover":!x&&t==="render"?"true":void 0});return v&&!x?N.createElement(N.Fragment,null,M,N.createElement(AF,{page:y})):M});St.displayName="Link";var wF=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:r,to:a,viewTransition:o,children:l,...c},u){let d=Ud(a,{relative:c.relative}),f=Us(),p=N.useContext(xm),{navigator:g,basename:x}=N.useContext(Fs),A=p!=null&&RF(d)&&o===!0,m=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,y=f.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(y=y.toLowerCase(),v=v?v.toLowerCase():null,m=m.toLowerCase()),v&&x&&(v=vr(v,x)||v);const b=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let w=y===m||!s&&y.startsWith(m)&&y.charAt(b)==="/",S=v!=null&&(v===m||!s&&v.startsWith(m)&&v.charAt(m.length)==="/"),C={isActive:w,isPending:S,isTransitioning:A},M=w?e:void 0,_;typeof i=="function"?_=i(C):_=[i,w?"active":null,S?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let E=typeof r=="function"?r(C):r;return N.createElement(St,{...c,"aria-current":M,className:_,ref:u,style:E,to:a,viewTransition:o},typeof l=="function"?l(C):l)});wF.displayName="NavLink";var EF=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:r,method:a=Df,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},p)=>{let g=IF(),x=TF(o,{relative:c}),A=a.toLowerCase()==="get"?"get":"post",m=typeof o=="string"&&TR.test(o),y=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let b=v.nativeEvent.submitter,w=(b==null?void 0:b.getAttribute("formmethod"))||a;g(b||v.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:s,state:r,relative:c,preventScrollReset:u,viewTransition:d})};return N.createElement("form",{ref:p,method:A,action:x,onSubmit:i?l:y,...f,"data-discover":!m&&n==="render"?"true":void 0})});EF.displayName="Form";function _F(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RR(n){let e=N.useContext(xc);return Wt(e,_F(n)),e}function SF(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:r,viewTransition:a}={}){let o=ER(),l=Us(),c=Ud(n,{relative:r});return N.useCallback(u=>{if(iF(u,e)){u.preventDefault();let d=t!==void 0?t:dd(l)===dd(c);o(n,{replace:d,state:i,preventScrollReset:s,relative:r,viewTransition:a})}},[l,o,c,t,i,e,n,s,r,a])}var CF=0,MF=()=>`__${String(++CF)}__`;function IF(){let{router:n}=RR("useSubmit"),{basename:e}=N.useContext(Fs),t=$3();return N.useCallback(async(i,s={})=>{let{action:r,method:a,encType:o,formData:l,body:c}=aF(i,e);if(s.navigate===!1){let u=s.fetcherKey||MF();await n.fetch(u,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await n.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function TF(n,{relative:e}={}){let{basename:t}=N.useContext(Fs),i=N.useContext(ks);Wt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Ud(n||".",{relative:e})},a=Us();if(n==null){r.search=a.search;let o=new URLSearchParams(r.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let u=o.toString();r.search=u?`?${u}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:fr([t,r.pathname])),dd(r)}function RF(n,{relative:e}={}){let t=N.useContext(vR);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=RR("useViewTransitionState"),s=Ud(n,{relative:e});if(!t.isTransitioning)return!1;let r=vr(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=vr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ep(s.pathname,a)!=null||Ep(s.pathname,r)!=null}function BF(){const n=Us(),e=i=>n.pathname===i,t=[{path:"/",label:"Home"},{path:"/about",label:"About Us"},{path:"/demo-menu",label:"Demo Menu"},{path:"/contact",label:"Contact"}];return h.jsx("nav",{className:"fixed top-0 left-0 w-full z-50 bg-white shadow-md",children:h.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:h.jsxs("div",{className:"flex items-center justify-between h-20",children:[h.jsx(St,{to:"/",className:"flex items-center flex-shrink-0",children:h.jsx("img",{src:"/images/our logo.png",alt:"The VisuPlate Logo",className:"h-14 w-auto object-contain"})}),h.jsx("div",{className:"hidden lg:flex items-center space-x-1",children:t.map(i=>h.jsx(St,{to:i.path,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${e(i.path)?"bg-emerald-100 text-emerald-700":"text-gray-700 hover:text-emerald-600 hover:bg-emerald-50"}`,children:i.label},i.path))}),h.jsx("div",{className:"hidden lg:flex items-center",children:h.jsx(St,{to:"/contact",children:h.jsx("button",{className:"px-6 py-2.5 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 shadow-lg",children:"Request Demo"})})}),h.jsx("div",{className:"lg:hidden"})]})})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xe=(n,e)=>{const t=N.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:l,...c},u)=>N.createElement("svg",{ref:u,...NF,width:s,height:s,stroke:i,strokeWidth:a?Number(r)*24/Number(s):r,className:["lucide",`lucide-${DF(n)}`,o].join(" "),...c},[...e.map(([d,f])=>N.createElement(d,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=Xe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Xe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Xe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Xe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Xe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Xe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=Xe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=Xe("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=Xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=Xe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=Xe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Xe("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Xe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Xe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=Xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=Xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=Xe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=Xe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ek=[{icon:UR,title:"Real Portion Videos",description:"Show customers exactly what they're ordering with high-quality videos showcasing real food portions and presentation.",gradient:"from-blue-500 to-cyan-500",bgGradient:"from-blue-50 to-cyan-50"},{icon:NR,title:"3D AR Visualization",description:"Let diners see animated 3D food models on their table using augmented reality, making ordering decisions easier and more exciting.",gradient:"from-purple-500 to-pink-500",bgGradient:"from-purple-50 to-pink-50"},{icon:FR,title:"Instant QR Access",description:"No app downloads needed. Customers simply scan a QR code to access your complete digital menu instantly.",gradient:"from-emerald-500 to-teal-500",bgGradient:"from-emerald-50 to-teal-50"},{icon:WF,title:"Eco-Friendly Solution",description:"Go green and reduce waste. Eliminate paper menus while providing a better experience for environmentally conscious diners.",gradient:"from-green-500 to-emerald-500",bgGradient:"from-green-50 to-emerald-50"},{icon:LR,title:"Visual Storytelling",description:"Tell the story of each dish with rich media, ingredients, and preparation details that engage and inform your customers.",gradient:"from-orange-500 to-red-500",bgGradient:"from-orange-50 to-red-50"},{icon:OR,title:"Instant Updates",description:"Update your menu in real-time. Change prices, add specials, or remove sold-out items instantly across all devices.",gradient:"from-yellow-500 to-orange-500",bgGradient:"from-yellow-50 to-orange-50"}];function tk(){return h.jsx("div",{className:"py-24 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6",children:"Everything Your Restaurant Needs"}),h.jsx("p",{className:"text-xl text-gray-600",children:"Powerful features that transform how customers experience your menu"})]}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:ek.map((n,e)=>h.jsxs("div",{className:"group relative bg-white rounded-2xl p-8 border-2 border-gray-100 hover:border-transparent hover:shadow-2xl transition-all duration-300",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-5 transition-opacity duration-300 rounded-2xl",style:{backgroundImage:"linear-gradient(to bottom right, var(--tw-gradient-stops))"}}),h.jsx("div",{className:`relative z-10 w-14 h-14 bg-gradient-to-br ${n.gradient} rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:h.jsx(n.icon,{className:"w-7 h-7 text-white"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:n.title}),h.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]},e))})]})})}const Hv=N.createContext({});function zv(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const Wv=typeof window<"u",QR=Wv?N.useLayoutEffect:N.useEffect,bm=N.createContext(null);function $v(n,e){n.indexOf(e)===-1&&n.push(e)}function qv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const br=(n,e,t)=>t>e?e:t<n?n:t;let Sp=()=>{};const wr={},jR=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function VR(n){return typeof n=="object"&&n!==null}const GR=n=>/^0[^.\s]+$/u.test(n);function Yv(n){let e;return()=>(e===void 0&&(e=n()),e)}const Hi=n=>n,nk=(n,e)=>t=>e(n(t)),Od=(...n)=>n.reduce(nk),hd=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Xv{constructor(){this.subscriptions=[]}add(e){return $v(this.subscriptions,e),()=>qv(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Rs=n=>n*1e3,ji=n=>n/1e3;function HR(n,e){return e?n*(1e3/e):0}const zR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,ik=1e-7,sk=12;function rk(n,e,t,i,s){let r,a,o=0;do a=e+(t-e)/2,r=zR(a,i,s)-n,r>0?t=a:e=a;while(Math.abs(r)>ik&&++o<sk);return a}function Qd(n,e,t,i){if(n===e&&t===i)return Hi;const s=r=>rk(r,0,1,n,t);return r=>r===0||r===1?r:zR(s(r),e,i)}const WR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,$R=n=>e=>1-n(1-e),qR=Qd(.33,1.53,.69,.99),Kv=$R(qR),YR=WR(Kv),XR=n=>(n*=2)<1?.5*Kv(n):.5*(2-Math.pow(2,-10*(n-1))),Jv=n=>1-Math.sin(Math.acos(n)),KR=$R(Jv),JR=WR(Jv),ak=Qd(.42,0,1,1),ok=Qd(0,0,.58,1),ZR=Qd(.42,0,.58,1),lk=n=>Array.isArray(n)&&typeof n[0]!="number",e2=n=>Array.isArray(n)&&typeof n[0]=="number",wE={linear:Hi,easeIn:ak,easeInOut:ZR,easeOut:ok,circIn:Jv,circInOut:JR,circOut:KR,backIn:Kv,backInOut:YR,backOut:qR,anticipate:XR},ck=n=>typeof n=="string",EE=n=>{if(e2(n)){Sp(n.length===4);const[e,t,i,s]=n;return Qd(e,t,i,s)}else if(ck(n))return Sp(wE[n]!==void 0),wE[n];return n},mh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],_E={value:null,addProjectionMetrics:null};function uk(n,e){let t=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){a.has(d)&&(u.schedule(d),n()),l++,d(o)}const u={schedule:(d,f=!1,p=!1)=>{const x=p&&s?t:i;return f&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{i.delete(d),a.delete(d)},process:d=>{if(o=d,s){r=!0;return}s=!0,[t,i]=[i,t],t.forEach(c),e&&_E.value&&_E.value.frameloop[e].push(l),l=0,t.clear(),s=!1,r&&(r=!1,u.process(d))}};return u}const dk=40;function t2(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,a=mh.reduce((v,b)=>(v[b]=uk(r,e?b:void 0),v),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:f,render:p,postRender:g}=a,x=()=>{const v=wr.useManualTiming?s.timestamp:performance.now();t=!1,wr.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(v-s.timestamp,dk),1)),s.timestamp=v,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),p.process(s),g.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(x))},A=()=>{t=!0,i=!0,s.isProcessing||n(x)};return{schedule:mh.reduce((v,b)=>{const w=a[b];return v[b]=(S,C=!1,M=!1)=>(t||A(),w.schedule(S,C,M)),v},{}),cancel:v=>{for(let b=0;b<mh.length;b++)a[mh[b]].cancel(v)},state:s,steps:a}}const{schedule:jt,cancel:da,state:Sn,steps:dg}=t2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hi,!0);let Ff;function hk(){Ff=void 0}const li={now:()=>(Ff===void 0&&li.set(Sn.isProcessing||wr.useManualTiming?Sn.timestamp:performance.now()),Ff),set:n=>{Ff=n,queueMicrotask(hk)}},n2=n=>e=>typeof e=="string"&&e.startsWith(n),Zv=n2("--"),fk=n2("var(--"),eb=n=>fk(n)?pk.test(n.split("/*")[0].trim()):!1,pk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},fd={...yc,transform:n=>br(0,1,n)},gh={...yc,default:1},Lu=n=>Math.round(n*1e5)/1e5,tb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mk(n){return n==null}const gk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nb=(n,e)=>t=>!!(typeof t=="string"&&gk.test(t)&&t.startsWith(n)||e&&!mk(t)&&Object.prototype.hasOwnProperty.call(t,e)),i2=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,a,o]=i.match(tb);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Ak=n=>br(0,255,n),hg={...yc,transform:n=>Math.round(Ak(n))},Ka={test:nb("rgb","red"),parse:i2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+hg.transform(n)+", "+hg.transform(e)+", "+hg.transform(t)+", "+Lu(fd.transform(i))+")"};function xk(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const _x={test:nb("#"),parse:xk,transform:Ka.transform},jd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Fr=jd("deg"),Bs=jd("%"),Pe=jd("px"),yk=jd("vh"),vk=jd("vw"),SE={...Bs,parse:n=>Bs.parse(n)/100,transform:n=>Bs.transform(n*100)},xl={test:nb("hsl","hue"),parse:i2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Bs.transform(Lu(e))+", "+Bs.transform(Lu(t))+", "+Lu(fd.transform(i))+")"},on={test:n=>Ka.test(n)||_x.test(n)||xl.test(n),parse:n=>Ka.test(n)?Ka.parse(n):xl.test(n)?xl.parse(n):_x.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ka.transform(n):xl.transform(n),getAnimatableNone:n=>{const e=on.parse(n);return e.alpha=0,on.transform(e)}},bk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wk(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(tb))==null?void 0:e.length)||0)+(((t=n.match(bk))==null?void 0:t.length)||0)>0}const s2="number",r2="color",Ek="var",_k="var(",CE="${}",Sk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pd(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(Sk,l=>(on.test(l)?(i.color.push(r),s.push(r2),t.push(on.parse(l))):l.startsWith(_k)?(i.var.push(r),s.push(Ek),t.push(l)):(i.number.push(r),s.push(s2),t.push(parseFloat(l))),++r,CE)).split(CE);return{values:t,split:o,indexes:i,types:s}}function a2(n){return pd(n).values}function o2(n){const{split:e,types:t}=pd(n),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const o=t[a];o===s2?r+=Lu(s[a]):o===r2?r+=on.transform(s[a]):r+=s[a]}return r}}const Ck=n=>typeof n=="number"?0:on.test(n)?on.getAnimatableNone(n):n;function Mk(n){const e=a2(n);return o2(n)(e.map(Ck))}const ha={test:wk,parse:a2,createTransformer:o2,getAnimatableNone:Mk};function fg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ik({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,a=0;if(!e)s=r=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;s=fg(l,o,n+1/3),r=fg(l,o,n),a=fg(l,o,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function Cp(n,e){return t=>t>0?e:n}const Ht=(n,e,t)=>n+(e-n)*t,pg=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},Tk=[_x,Ka,xl],Rk=n=>Tk.find(e=>e.test(n));function ME(n){const e=Rk(n);if(!e)return!1;let t=e.parse(n);return e===xl&&(t=Ik(t)),t}const IE=(n,e)=>{const t=ME(n),i=ME(e);if(!t||!i)return Cp(n,e);const s={...t};return r=>(s.red=pg(t.red,i.red,r),s.green=pg(t.green,i.green,r),s.blue=pg(t.blue,i.blue,r),s.alpha=Ht(t.alpha,i.alpha,r),Ka.transform(s))},Sx=new Set(["none","hidden"]);function Bk(n,e){return Sx.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Nk(n,e){return t=>Ht(n,e,t)}function ib(n){return typeof n=="number"?Nk:typeof n=="string"?eb(n)?Cp:on.test(n)?IE:Pk:Array.isArray(n)?l2:typeof n=="object"?on.test(n)?IE:Dk:Cp}function l2(n,e){const t=[...n],i=t.length,s=n.map((r,a)=>ib(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)t[a]=s[a](r);return t}}function Dk(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=ib(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function Lk(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=n.indexes[r][i[r]],o=n.values[a]??0;t[s]=o,i[r]++}return t}const Pk=(n,e)=>{const t=ha.createTransformer(e),i=pd(n),s=pd(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Sx.has(n)&&!s.values.length||Sx.has(e)&&!i.values.length?Bk(n,e):Od(l2(Lk(i,s),s.values),t):Cp(n,e)};function c2(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ht(n,e,t):ib(n)(n,e)}const Fk=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>jt.update(e,t),stop:()=>da(e),now:()=>Sn.isProcessing?Sn.timestamp:li.now()}},u2=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Mp=2e4;function sb(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Mp;)e+=t,i=n.next(e);return e>=Mp?1/0:e}function kk(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(sb(i),Mp);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:ji(s)}}const Uk=5;function d2(n,e,t){const i=Math.max(e-Uk,0);return HR(t-n(i),e-i)}const Xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mg=.001;function Ok({duration:n=Xt.duration,bounce:e=Xt.bounce,velocity:t=Xt.velocity,mass:i=Xt.mass}){let s,r,a=1-e;a=br(Xt.minDamping,Xt.maxDamping,a),n=br(Xt.minDuration,Xt.maxDuration,ji(n)),a<1?(s=c=>{const u=c*a,d=u*n,f=u-t,p=Cx(c,a),g=Math.exp(-d);return mg-f/p*g},r=c=>{const d=c*a*n,f=d*t+t,p=Math.pow(a,2)*Math.pow(c,2)*n,g=Math.exp(-d),x=Cx(Math.pow(c,2),a);return(-s(c)+mg>0?-1:1)*((f-p)*g)/x}):(s=c=>{const u=Math.exp(-c*n),d=(c-t)*n+1;return-mg+u*d},r=c=>{const u=Math.exp(-c*n),d=(t-c)*(n*n);return u*d});const o=5/n,l=jk(s,r,o);if(n=Rs(n),isNaN(l))return{stiffness:Xt.stiffness,damping:Xt.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:n}}}const Qk=12;function jk(n,e,t){let i=t;for(let s=1;s<Qk;s++)i=i-n(i)/e(i);return i}function Cx(n,e){return n*Math.sqrt(1-e*e)}const Vk=["duration","bounce"],Gk=["stiffness","damping","mass"];function TE(n,e){return e.some(t=>n[t]!==void 0)}function Hk(n){let e={velocity:Xt.velocity,stiffness:Xt.stiffness,damping:Xt.damping,mass:Xt.mass,isResolvedFromDuration:!1,...n};if(!TE(n,Gk)&&TE(n,Vk))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*br(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Xt.mass,stiffness:s,damping:r}}else{const t=Ok(n);e={...e,...t,mass:Xt.mass},e.isResolvedFromDuration=!0}return e}function Ip(n=Xt.visualDuration,e=Xt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=Hk({...t,velocity:-ji(t.velocity||0)}),g=f||0,x=c/(2*Math.sqrt(l*u)),A=a-r,m=ji(Math.sqrt(l/u)),y=Math.abs(A)<5;i||(i=y?Xt.restSpeed.granular:Xt.restSpeed.default),s||(s=y?Xt.restDelta.granular:Xt.restDelta.default);let v;if(x<1){const w=Cx(m,x);v=S=>{const C=Math.exp(-x*m*S);return a-C*((g+x*m*A)/w*Math.sin(w*S)+A*Math.cos(w*S))}}else if(x===1)v=w=>a-Math.exp(-m*w)*(A+(g+m*A)*w);else{const w=m*Math.sqrt(x*x-1);v=S=>{const C=Math.exp(-x*m*S),M=Math.min(w*S,300);return a-C*((g+x*m*A)*Math.sinh(M)+w*A*Math.cosh(M))/w}}const b={calculatedDuration:p&&d||null,next:w=>{const S=v(w);if(p)o.done=w>=d;else{let C=w===0?g:0;x<1&&(C=w===0?Rs(g):d2(v,w,S));const M=Math.abs(C)<=i,_=Math.abs(a-S)<=s;o.done=M&&_}return o.value=o.done?a:S,o},toString:()=>{const w=Math.min(sb(b),Mp),S=u2(C=>b.next(w*C).value,w,30);return w+"ms "+S},toTransition:()=>{}};return b}Ip.applyToOptions=n=>{const e=kk(n,100,Ip);return n.ease=e.ease,n.duration=Rs(e.duration),n.type="keyframes",n};function Mx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=n[0],f={done:!1,value:d},p=M=>o!==void 0&&M<o||l!==void 0&&M>l,g=M=>o===void 0?l:l===void 0||Math.abs(o-M)<Math.abs(l-M)?o:l;let x=t*e;const A=d+x,m=a===void 0?A:a(A);m!==A&&(x=m-d);const y=M=>-x*Math.exp(-M/i),v=M=>m+y(M),b=M=>{const _=y(M),E=v(M);f.done=Math.abs(_)<=c,f.value=f.done?m:E};let w,S;const C=M=>{p(f.value)&&(w=M,S=Ip({keyframes:[f.value,g(f.value)],velocity:d2(v,M,f.value),damping:s,stiffness:r,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:M=>{let _=!1;return!S&&w===void 0&&(_=!0,b(M),C(M)),w!==void 0&&M>=w?S.next(M-w):(!_&&b(M),f)}}}function zk(n,e,t){const i=[],s=t||wr.mix||c2,r=n.length-1;for(let a=0;a<r;a++){let o=s(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Hi:e;o=Od(l,o)}i.push(o)}return i}function Wk(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(Sp(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=zk(e,i,s),l=o.length,c=u=>{if(a&&u<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const f=hd(n[d],n[d+1],u);return o[d](f)};return t?u=>c(br(n[0],n[r-1],u)):c}function $k(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=hd(0,e,i);n.push(Ht(t,1,s))}}function qk(n){const e=[0];return $k(e,n.length-1),e}function Yk(n,e){return n.map(t=>t*e)}function Xk(n,e){return n.map(()=>e||ZR).splice(0,n.length-1)}function Pu({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=lk(i)?i.map(EE):EE(i),r={done:!1,value:e[0]},a=Yk(t&&t.length===e.length?t:qk(e),n),o=Wk(a,e,{ease:Array.isArray(s)?s:Xk(e,s)});return{calculatedDuration:n,next:l=>(r.value=o(l),r.done=l>=n,r)}}const Kk=n=>n!==null;function rb(n,{repeat:e,repeatType:t="loop"},i,s=1){const r=n.filter(Kk),o=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const Jk={decay:Mx,inertia:Mx,tween:Pu,keyframes:Pu,spring:Ip};function h2(n){typeof n.type=="string"&&(n.type=Jk[n.type])}class ab{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Zk=n=>n/100;class ob extends ab{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:t}=this.options;t&&t.updatedAt!==li.now()&&this.tick(li.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;h2(e);const{type:t=Pu,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=t||Pu;l!==Pu&&typeof o[0]!="number"&&(this.mixKeyframes=Od(Zk,c2(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=sb(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:x,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const m=this.currentTime-c*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?m<0:m>s;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let v=this.currentTime,b=i;if(d){const M=Math.min(this.currentTime,s)/o;let _=Math.floor(M),E=M%1;!E&&M>=1&&(E=1),E===1&&_--,_=Math.min(_,d+1),!!(_%2)&&(f==="reverse"?(E=1-E,p&&(E-=p/o)):f==="mirror"&&(b=a)),v=br(0,1,E)*o}const w=y?{done:!1,value:u[0]}:b.next(v);r&&(w.value=r(w.value));let{done:S}=w;!y&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return C&&g!==Mx&&(w.value=rb(u,this.options,A,this.speed)),x&&x(w.value),C&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return ji(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ji(e)}get time(){return ji(this.currentTime)}set time(e){var t;e=Rs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(li.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ji(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=Fk,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(li.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function eU(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ja=n=>n*180/Math.PI,Ix=n=>{const e=Ja(Math.atan2(n[1],n[0]));return Tx(e)},tU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Ix,rotateZ:Ix,skewX:n=>Ja(Math.atan(n[1])),skewY:n=>Ja(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Tx=n=>(n=n%360,n<0&&(n+=360),n),RE=Ix,BE=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),NE=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),nU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:BE,scaleY:NE,scale:n=>(BE(n)+NE(n))/2,rotateX:n=>Tx(Ja(Math.atan2(n[6],n[5]))),rotateY:n=>Tx(Ja(Math.atan2(-n[2],n[0]))),rotateZ:RE,rotate:RE,skewX:n=>Ja(Math.atan(n[4])),skewY:n=>Ja(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Rx(n){return n.includes("scale")?1:0}function Bx(n,e){if(!n||n==="none")return Rx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=nU,s=t;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=tU,s=o}if(!s)return Rx(e);const r=i[e],a=s[1].split(",").map(sU);return typeof r=="function"?r(a):a[r]}const iU=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Bx(t,e)};function sU(n){return parseFloat(n.trim())}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bc=new Set(vc),DE=n=>n===yc||n===Pe,rU=new Set(["x","y","z"]),aU=vc.filter(n=>!rU.has(n));function oU(n){const e=[];return aU.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const io={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Bx(e,"x"),y:(n,{transform:e})=>Bx(e,"y")};io.translateX=io.x;io.translateY=io.y;const so=new Set;let Nx=!1,Dx=!1,Lx=!1;function f2(){if(Dx){const n=Array.from(so).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=oU(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,a])=>{var o;(o=i.getValue(r))==null||o.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Dx=!1,Nx=!1,so.forEach(n=>n.complete(Lx)),so.clear()}function p2(){so.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Dx=!0)})}function lU(){Lx=!0,p2(),f2(),Lx=!1}class lb{constructor(e,t,i,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(so.add(this),Nx||(Nx=!0,jt.read(p2),jt.resolveKeyframes(f2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&t){const o=i.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}eU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),so.delete(this)}cancel(){this.state==="scheduled"&&(so.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cU=n=>n.startsWith("--");function uU(n,e,t){cU(e)?n.style.setProperty(e,t):n.style[e]=t}const dU=Yv(()=>window.ScrollTimeline!==void 0),hU={};function fU(n,e){const t=Yv(n);return()=>hU[e]??t()}const m2=fU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gu=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,LE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gu([0,.65,.55,1]),circOut:gu([.55,0,1,.45]),backIn:gu([.31,.01,.66,-.59]),backOut:gu([.33,1.53,.69,.99])};function g2(n,e){if(n)return typeof n=="function"?m2()?u2(n,e):"ease-out":e2(n)?gu(n):Array.isArray(n)?n.map(t=>g2(t,e)||LE.easeOut):LE[n]}function pU(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:t};l&&(u.offset=l);const d=g2(o,s);Array.isArray(d)&&(u.easing=d);const f={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),n.animate(u,f)}function A2(n){return typeof n=="function"&&"applyToOptions"in n}function mU({type:n,...e}){return A2(n)&&m2()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class gU extends ab{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,Sp(typeof e.type!="string");const c=mU(e);this.animation=pU(t,i,s,c,r),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const u=rb(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):uU(t,i,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return ji(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ji(e)}get time(){return ji(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Rs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&dU()?(this.animation.timeline=e,Hi):t(this)}}const x2={anticipate:XR,backInOut:YR,circInOut:JR};function AU(n){return n in x2}function xU(n){typeof n.ease=="string"&&AU(n.ease)&&(n.ease=x2[n.ease])}const PE=10;class yU extends gU{constructor(e){xU(e),h2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:r,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new ob({...a,autoplay:!1}),l=Rs(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-PE).value,o.sample(l).value,PE),o.stop()}}const FE=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ha.test(n)||n==="0")&&!n.startsWith("url("));function vU(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function bU(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],a=FE(s,e),o=FE(r,e);return!a||!o?!1:vU(n)||(t==="spring"||A2(t))&&i}function Px(n){n.duration=0,n.type="keyframes"}const wU=new Set(["opacity","clipPath","filter","transform"]),EU=Yv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _U(n){var u;const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:r,type:a}=n;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return EU()&&t&&wU.has(t)&&(t!=="transform"||!c)&&!l&&!i&&s!=="mirror"&&r!==0&&a!=="inertia"}const SU=40;class CU extends ab{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var g;super(),this.stop=()=>{var x,A;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=li.now();const f={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:a,name:l,motionValue:c,element:u,...d},p=(u==null?void 0:u.KeyframeResolver)||lb;this.keyframeResolver=new p(o,(x,A,m)=>this.onKeyframesResolved(x,A,f,!m),l,c,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=i;this.resolvedAt=li.now(),bU(e,r,a,o)||((wr.instantAnimations||!l)&&(u==null||u(rb(e,i,t))),e[0]=e[e.length-1],Px(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>SU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},p=!c&&_U(f)?new yU({...f,element:f.motionValue.owner.current}):new ob(f);p.finished.then(()=>this.notifyFinished()).catch(Hi),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),lU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const MU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IU(n){const e=MU.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function y2(n,e,t=1){const[i,s]=IU(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return jR(a)?parseFloat(a):a}return eb(s)?y2(s,e,t+1):s}function cb(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const v2=new Set(["width","height","top","left","right","bottom",...vc]),TU={test:n=>n==="auto",parse:n=>n},b2=n=>e=>e.test(n),w2=[yc,Pe,Bs,Fr,vk,yk,TU],kE=n=>w2.find(b2(n));function RU(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||GR(n):!0}const BU=new Set(["brightness","contrast","saturate","opacity"]);function NU(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(tb)||[];if(!i)return n;const s=t.replace(i,"");let r=BU.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const DU=/\b([a-z-]*)\(.*?\)/gu,Fx={...ha,getAnimatableNone:n=>{const e=n.match(DU);return e?e.map(NU).join(" "):n}},UE={...yc,transform:Math.round},LU={rotate:Fr,rotateX:Fr,rotateY:Fr,rotateZ:Fr,scale:gh,scaleX:gh,scaleY:gh,scaleZ:gh,skew:Fr,skewX:Fr,skewY:Fr,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:fd,originX:SE,originY:SE,originZ:Pe},ub={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...LU,zIndex:UE,fillOpacity:fd,strokeOpacity:fd,numOctaves:UE},PU={...ub,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:Fx,WebkitFilter:Fx},E2=n=>PU[n];function _2(n,e){let t=E2(n);return t!==Fx&&(t=ha),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const FU=new Set(["auto","none","0"]);function kU(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!FU.has(r)&&pd(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=_2(t,s)}class UU extends lb{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),eb(c))){const u=y2(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!v2.has(i)||e.length!==2)return;const[s,r]=e,a=kE(s),o=kE(r);if(a!==o)if(DE(a)&&DE(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else io[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||RU(e[s]))&&i.push(s);i.length&&kU(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=io[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=io[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function OU(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const s=document.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const S2=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function C2(n){return VR(n)&&"offsetHeight"in n}const OE=30,QU=n=>!isNaN(parseFloat(n));class jU{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=li.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=li.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=QU(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Xv);const i=this.events[e].add(t);return e==="change"?()=>{i(),jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=li.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>OE)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,OE);return HR(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kl(n,e){return new jU(n,e)}const{schedule:db,cancel:Nq}=t2(queueMicrotask,!1),is={x:!1,y:!1};function M2(){return is.x||is.y}function VU(n){return n==="x"||n==="y"?is[n]?null:(is[n]=!0,()=>{is[n]=!1}):is.x||is.y?null:(is.x=is.y=!0,()=>{is.x=is.y=!1})}function I2(n,e){const t=OU(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function QE(n){return!(n.pointerType==="touch"||M2())}function GU(n,e,t={}){const[i,s,r]=I2(n,t),a=o=>{if(!QE(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const u=d=>{QE(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,s)};return i.forEach(o=>{o.addEventListener("pointerenter",a,s)}),r}const T2=(n,e)=>e?n===e?!0:T2(n,e.parentElement):!1,hb=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,HU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zU(n){return HU.has(n.tagName)||n.tabIndex!==-1}const kf=new WeakSet;function jE(n){return e=>{e.key==="Enter"&&n(e)}}function gg(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WU=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=jE(()=>{if(kf.has(t))return;gg(t,"down");const s=jE(()=>{gg(t,"up")}),r=()=>gg(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function VE(n){return hb(n)&&!M2()}function $U(n,e,t={}){const[i,s,r]=I2(n,t),a=o=>{const l=o.currentTarget;if(!VE(o))return;kf.add(l);const c=e(l,o),u=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),kf.has(l)&&kf.delete(l),VE(p)&&typeof c=="function"&&c(p,{success:g})},d=p=>{u(p,l===window||l===document||t.useGlobalTarget||T2(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return i.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),C2(o)&&(o.addEventListener("focus",c=>WU(c,s)),!zU(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function R2(n){return VR(n)&&"ownerSVGElement"in n}function qU(n){return R2(n)&&n.tagName==="svg"}const Un=n=>!!(n&&n.getVelocity),YU=[...w2,on,ha],XU=n=>YU.find(b2(n)),fb=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function GE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function KU(...n){return e=>{let t=!1;const i=n.map(s=>{const r=GE(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():GE(n[s],null)}}}}function JU(...n){return N.useCallback(KU(...n),n)}class ZU extends N.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,s=C2(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function eO({children:n,isPresent:e,anchorX:t,root:i}){const s=N.useId(),r=N.useRef(null),a=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=N.useContext(fb),l=JU(r,n==null?void 0:n.ref);return N.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:p}=a.current;if(e||!r.current||!c||!u)return;const g=t==="left"?`left: ${f}`:`right: ${p}`;r.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const A=i??document.head;return A.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{A.contains(x)&&A.removeChild(x)}},[e]),h.jsx(ZU,{isPresent:e,childRef:r,sizeRef:a,children:N.cloneElement(n,{ref:l})})}const tO=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:o,root:l})=>{const c=zv(nO),u=N.useId();let d=!0,f=N.useMemo(()=>(d=!1,{id:u,initial:e,isPresent:t,custom:s,onExitComplete:p=>{c.set(p,!0);for(const g of c.values())if(!g)return;i&&i()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[t,c,i]);return r&&d&&(f={...f}),N.useMemo(()=>{c.forEach((p,g)=>c.set(g,!1))},[t]),N.useEffect(()=>{!t&&!c.size&&i&&i()},[t]),a==="popLayout"&&(n=h.jsx(eO,{isPresent:t,anchorX:o,root:l,children:n})),h.jsx(bm.Provider,{value:f,children:n})};function nO(){return new Map}function B2(n=!0){const e=N.useContext(bm);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=N.useId();N.useEffect(()=>{if(n)return s(r)},[n]);const a=N.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,a]:[!0]}const Ah=n=>n.key||"";function HE(n){const e=[];return N.Children.forEach(n,t=>{N.isValidElement(t)&&e.push(t)}),e}const pb=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[c,u]=B2(a),d=N.useMemo(()=>HE(n),[n]),f=a&&!c?[]:d.map(Ah),p=N.useRef(!0),g=N.useRef(d),x=zv(()=>new Map),[A,m]=N.useState(d),[y,v]=N.useState(d);QR(()=>{p.current=!1,g.current=d;for(let S=0;S<y.length;S++){const C=Ah(y[S]);f.includes(C)?x.delete(C):x.get(C)!==!0&&x.set(C,!1)}},[y,f.length,f.join("-")]);const b=[];if(d!==A){let S=[...d];for(let C=0;C<y.length;C++){const M=y[C],_=Ah(M);f.includes(_)||(S.splice(C,0,M),b.push(M))}return r==="wait"&&b.length&&(S=b),v(HE(S)),m(d),null}const{forceRender:w}=N.useContext(Hv);return h.jsx(h.Fragment,{children:y.map(S=>{const C=Ah(S),M=a&&!c?!1:d===y||f.includes(C),_=()=>{if(x.has(C))x.set(C,!0);else return;let E=!0;x.forEach(R=>{R||(E=!1)}),E&&(w==null||w(),v(g.current),a&&(u==null||u()),i&&i())};return h.jsx(tO,{isPresent:M,initial:!p.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,root:l,onExitComplete:M?void 0:_,anchorX:o,children:S},C)})})},N2=N.createContext({strict:!1}),zE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jl={};for(const n in zE)Jl[n]={isEnabled:e=>zE[n].some(t=>!!e[t])};function iO(n){for(const e in n)Jl[e]={...Jl[e],...n[e]}}const sO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||sO.has(n)}let D2=n=>!Tp(n);function rO(n){typeof n=="function"&&(D2=e=>e.startsWith("on")?!Tp(e):n(e))}try{rO(require("@emotion/is-prop-valid").default)}catch{}function aO(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(D2(s)||t===!0&&Tp(s)||!e&&!Tp(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const wm=N.createContext({});function Em(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function md(n){return typeof n=="string"||Array.isArray(n)}const mb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gb=["initial",...mb];function _m(n){return Em(n.animate)||gb.some(e=>md(n[e]))}function L2(n){return!!(_m(n)||n.variants)}function oO(n,e){if(_m(n)){const{initial:t,animate:i}=n;return{initial:t===!1||md(t)?t:void 0,animate:md(i)?i:void 0}}return n.inherit!==!1?e:{}}function lO(n){const{initial:e,animate:t}=oO(n,N.useContext(wm));return N.useMemo(()=>({initial:e,animate:t}),[WE(e),WE(t)])}function WE(n){return Array.isArray(n)?n.join(" "):n}const gd={};function cO(n){for(const e in n)gd[e]=n[e],Zv(e)&&(gd[e].isCSSVariable=!0)}function P2(n,{layout:e,layoutId:t}){return bc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!gd[n]||n==="opacity")}const uO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dO=vc.length;function hO(n,e,t){let i="",s=!0;for(let r=0;r<dO;r++){const a=vc[r],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const c=S2(o,ub[a]);if(!l){s=!1;const u=uO[a]||a;i+=`${u}(${c}) `}t&&(e[a]=c)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Ab(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let a=!1,o=!1;for(const l in e){const c=e[l];if(bc.has(l)){a=!0;continue}else if(Zv(l)){s[l]=c;continue}else{const u=S2(c,ub[l]);l.startsWith("origin")?(o=!0,r[l]=u):i[l]=u}}if(e.transform||(a||t?i.transform=hO(e,n.transform,t):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=r;i.transformOrigin=`${l} ${c} ${u}`}}const xb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function F2(n,e,t){for(const i in e)!Un(e[i])&&!P2(i,t)&&(n[i]=e[i])}function fO({transformTemplate:n},e){return N.useMemo(()=>{const t=xb();return Ab(t,e,n),Object.assign({},t.vars,t.style)},[e])}function pO(n,e){const t=n.style||{},i={};return F2(i,t,n),Object.assign(i,fO(n,e)),i}function mO(n,e){const t={},i=pO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const gO={offset:"stroke-dashoffset",array:"stroke-dasharray"},AO={offset:"strokeDashoffset",array:"strokeDasharray"};function xO(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?gO:AO;n[r.offset]=Pe.transform(-i);const a=Pe.transform(e),o=Pe.transform(t);n[r.array]=`${a} ${o}`}function k2(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...o},l,c,u){if(Ab(n,o,c),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:f}=n;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),i!==void 0&&(d.scale=i),s!==void 0&&xO(d,s,r,a,!1)}const U2=()=>({...xb(),attrs:{}}),O2=n=>typeof n=="string"&&n.toLowerCase()==="svg";function yO(n,e,t,i){const s=N.useMemo(()=>{const r=U2();return k2(r,e,O2(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};F2(r,n.style,n),s.style={...r,...s.style}}return s}const vO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yb(n){return typeof n!="string"||n.includes("-")?!1:!!(vO.indexOf(n)>-1||/[A-Z]/u.test(n))}function bO(n,e,t,{latestValues:i},s,r=!1){const o=(yb(n)?yO:mO)(e,i,s,n),l=aO(e,typeof n=="string",r),c=n!==N.Fragment?{...l,...o,ref:t}:{},{children:u}=e,d=N.useMemo(()=>Un(u)?u.get():u,[u]);return N.createElement(n,{...c,children:d})}function $E(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function vb(n,e,t,i){if(typeof e=="function"){const[s,r]=$E(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=$E(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function Uf(n){return Un(n)?n.get():n}function wO({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:EO(t,i,s,n),renderState:e()}}function EO(n,e,t,i){const s={},r=i(n,{});for(const f in r)s[f]=Uf(r[f]);let{initial:a,animate:o}=n;const l=_m(n),c=L2(n);e&&c&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=t?t.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!Em(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=vb(n,f[p]);if(g){const{transitionEnd:x,transition:A,...m}=g;for(const y in m){let v=m[y];if(Array.isArray(v)){const b=u?v.length-1:0;v=v[b]}v!==null&&(s[y]=v)}for(const y in x)s[y]=x[y]}}}return s}const Q2=n=>(e,t)=>{const i=N.useContext(wm),s=N.useContext(bm),r=()=>wO(n,e,i,s);return t?r():zv(r)};function bb(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Un(i[a])||e.style&&Un(e.style[a])||P2(a,n)||((r=t==null?void 0:t.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const _O=Q2({scrapeMotionValuesFromProps:bb,createRenderState:xb});function j2(n,e,t){const i=bb(n,e,t);for(const s in n)if(Un(n[s])||Un(e[s])){const r=vc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const SO=Q2({scrapeMotionValuesFromProps:j2,createRenderState:U2}),CO=Symbol.for("motionComponentSymbol");function yl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function MO(n,e,t){return N.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):yl(t)&&(t.current=i))},[e])}const wb=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),IO="framerAppearId",V2="data-"+wb(IO),G2=N.createContext({});function TO(n,e,t,i,s){var x,A;const{visualElement:r}=N.useContext(wm),a=N.useContext(N2),o=N.useContext(bm),l=N.useContext(fb).reducedMotion,c=N.useRef(null);i=i||a.renderer,!c.current&&i&&(c.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=N.useContext(G2);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&RO(c.current,t,s,d);const f=N.useRef(!1);N.useInsertionEffect(()=>{u&&f.current&&u.update(t,o)});const p=t[V2],g=N.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,p)));return QR(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),g.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,p)}),g.current=!1),u.enteringChildren=void 0)}),u}function RO(n,e,t,i){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:H2(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&yl(o),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:l,layoutRoot:c})}function H2(n){if(n)return n.options.allowProjection!==!1?n.projection:H2(n.parent)}function Ag(n,{forwardMotionProps:e=!1}={},t,i){t&&iO(t);const s=yb(n)?SO:_O;function r(o,l){let c;const u={...N.useContext(fb),...o,layoutId:BO(o)},{isStatic:d}=u,f=lO(o),p=s(o,d);if(!d&&Wv){NO();const g=DO(u);c=g.MeasureLayout,f.visualElement=TO(n,p,u,i,g.ProjectionNode)}return h.jsxs(wm.Provider,{value:f,children:[c&&f.visualElement?h.jsx(c,{visualElement:f.visualElement,...u}):null,bO(n,o,MO(p,f.visualElement,l),p,d,e)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=N.forwardRef(r);return a[CO]=n,a}function BO({layoutId:n}){const e=N.useContext(Hv).id;return e&&n!==void 0?e+"-"+n:n}function NO(n,e){N.useContext(N2).strict}function DO(n){const{drag:e,layout:t}=Jl;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function LO(n,e){if(typeof Proxy>"u")return Ag;const t=new Map,i=(r,a)=>Ag(r,a,n,e),s=(r,a)=>i(r,a);return new Proxy(s,{get:(r,a)=>a==="create"?i:(t.has(a)||t.set(a,Ag(a,void 0,n,e)),t.get(a))})}function z2({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function PO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function FO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function xg(n){return n===void 0||n===1}function kx({scale:n,scaleX:e,scaleY:t}){return!xg(n)||!xg(e)||!xg(t)}function ka(n){return kx(n)||W2(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function W2(n){return qE(n.x)||qE(n.y)}function qE(n){return n&&n!=="0%"}function Rp(n,e,t){const i=n-t,s=e*i;return t+s}function YE(n,e,t,i,s){return s!==void 0&&(n=Rp(n,s,i)),Rp(n,t,i)+e}function Ux(n,e=0,t=1,i,s){n.min=YE(n.min,e,t,i,s),n.max=YE(n.max,e,t,i,s)}function $2(n,{x:e,y:t}){Ux(n.x,e.translate,e.scale,e.originPoint),Ux(n.y,t.translate,t.scale,t.originPoint)}const XE=.999999999999,KE=1.0000000000001;function kO(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,a;for(let o=0;o<s;o++){r=t[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&bl(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,$2(n,a)),i&&ka(r.latestValues)&&bl(n,r.latestValues))}e.x<KE&&e.x>XE&&(e.x=1),e.y<KE&&e.y>XE&&(e.y=1)}function vl(n,e){n.min=n.min+e,n.max=n.max+e}function JE(n,e,t,i,s=.5){const r=Ht(n.min,n.max,s);Ux(n,e,t,r,i)}function bl(n,e){JE(n.x,e.x,e.scaleX,e.scale,e.originX),JE(n.y,e.y,e.scaleY,e.scale,e.originY)}function q2(n,e){return z2(FO(n.getBoundingClientRect(),e))}function UO(n,e,t){const i=q2(n,t),{scroll:s}=e;return s&&(vl(i.x,s.offset.x),vl(i.y,s.offset.y)),i}const ZE=()=>({translate:0,scale:1,origin:0,originPoint:0}),wl=()=>({x:ZE(),y:ZE()}),e_=()=>({min:0,max:0}),en=()=>({x:e_(),y:e_()}),Ox={current:null},Y2={current:!1};function OO(){if(Y2.current=!0,!!Wv)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ox.current=n.matches;n.addEventListener("change",e),e()}else Ox.current=!1}const QO=new WeakMap;function jO(n,e,t){for(const i in e){const s=e[i],r=t[i];if(Un(s))n.addValue(i,s);else if(Un(r))n.addValue(i,Kl(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,Kl(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const t_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VO{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=li.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,jt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=_m(t),this.isVariantNode=L2(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&Un(p)&&p.set(l[f])}}mount(e){var t;this.current=e,QO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),Y2.current||OO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ox.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),da(this.notifyUpdate),da(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=bc.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jl){const t=Jl[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):en()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<t_.length;i++){const s=t_[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=jO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Kl(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(jR(i)||GR(i))?i=parseFloat(i):!XU(i)&&ha.test(t)&&(i=_2(e,t)),this.setBaseTarget(e,Un(i)?i.get():i)),Un(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var r;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=vb(this.props,t,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Un(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Xv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){db.render(this.render)}}class X2 extends VO{constructor(){super(...arguments),this.KeyframeResolver=UU}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Un(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function K2(n,{style:e,vars:t},i,s){const r=n.style;let a;for(a in e)r[a]=e[a];s==null||s.applyProjectionStyles(r,i);for(a in t)r.setProperty(a,t[a])}function GO(n){return window.getComputedStyle(n)}class HO extends X2{constructor(){super(...arguments),this.type="html",this.renderInstance=K2}readValueFromInstance(e,t){var i;if(bc.has(t))return(i=this.projection)!=null&&i.isProjecting?Rx(t):iU(e,t);{const s=GO(e),r=(Zv(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return q2(e,t)}build(e,t,i){Ab(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return bb(e,t,i)}}const J2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zO(n,e,t,i){K2(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(J2.has(s)?s:wb(s),e.attrs[s])}class WO extends X2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=en}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(bc.has(t)){const i=E2(t);return i&&i.default||0}return t=J2.has(t)?t:wb(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return j2(e,t,i)}build(e,t,i){k2(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){zO(e,t,i,s)}mount(e){this.isSVGTag=O2(e.tagName),super.mount(e)}}const $O=(n,e)=>yb(n)?new WO(e):new HO(e,{allowProjection:n!==N.Fragment});function Fl(n,e,t){const i=n.getProps();return vb(i,e,t!==void 0?t:i.custom,n)}const Qx=n=>Array.isArray(n);function qO(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Kl(t))}function YO(n){return Qx(n)?n[n.length-1]||0:n}function XO(n,e){const t=Fl(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const a in r){const o=YO(r[a]);qO(n,a,o)}}function KO(n){return!!(Un(n)&&n.add)}function jx(n,e){const t=n.getValue("willChange");if(KO(t))return t.add(e);if(!t&&wr.WillChange){const i=new wr.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function Z2(n){return n.props[V2]}const JO=n=>n!==null;function ZO(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(JO),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const e4={type:"spring",stiffness:500,damping:25,restSpeed:10},t4=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),n4={type:"keyframes",duration:.8},i4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},s4=(n,{keyframes:e})=>e.length>2?n4:bc.has(n)?n.startsWith("scale")?t4(e[1]):e4:i4;function r4({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Eb=(n,e,t,i={},s,r)=>a=>{const o=cb(i,n)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Rs(l);const u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:r?void 0:s};r4(o)||Object.assign(u,s4(n,u)),u.duration&&(u.duration=Rs(u.duration)),u.repeatDelay&&(u.repeatDelay=Rs(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Px(u),u.delay===0&&(d=!0)),(wr.instantAnimations||wr.skipAnimations)&&(d=!0,Px(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!r&&e.get()!==void 0){const f=ZO(u.keyframes,o);if(f!==void 0){jt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return o.isSync?new ob(u):new CU(u)};function a4({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function eB(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:a,...o}=e;i&&(r=i);const l=[],c=s&&n.animationState&&n.animationState.getState()[s];for(const u in o){const d=n.getValue(u,n.latestValues[u]??null),f=o[u];if(f===void 0||c&&a4(c,u))continue;const p={delay:t,...cb(r||{},u)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const m=Z2(n);if(m){const y=window.MotionHandoffAnimation(m,u,jt);y!==null&&(p.startTime=y,x=!0)}}jx(n,u),d.start(Eb(u,d,f,n.shouldReduceMotion&&v2.has(u)?{type:!1}:p,n,x));const A=d.animation;A&&l.push(A)}return a&&Promise.all(l).then(()=>{jt.update(()=>{a&&XO(n,a)})}),l}function tB(n,e,t,i=0,s=1){const r=Array.from(n).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),a=n.size,o=(a-1)*i;return typeof t=="function"?t(r,a):s===1?r*i:o-r*i}function Vx(n,e,t={}){var l;const i=Fl(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all(eB(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return o4(n,e,c,u,d,f,t)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,u]=o==="beforeChildren"?[r,a]:[a,r];return c().then(()=>u())}else return Promise.all([r(),a(t.delay)])}function o4(n,e,t=0,i=0,s=0,r=1,a){const o=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),o.push(Vx(l,e,{...a,delay:t+(typeof i=="function"?0:i)+tB(n.variantChildren,l,i,s,r)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function l4(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Vx(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=Vx(n,e,t);else{const s=typeof e=="function"?Fl(n,e,t.custom):e;i=Promise.all(eB(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function nB(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const c4=gb.length;function iB(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?iB(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<c4;t++){const i=gb[t],s=n.props[i];(md(s)||s===!1)&&(e[i]=s)}return e}const u4=[...mb].reverse(),d4=mb.length;function h4(n){return e=>Promise.all(e.map(({animation:t,options:i})=>l4(n,t,i)))}function f4(n){let e=h4(n),t=n_(),i=!0;const s=l=>(c,u)=>{var f;const d=Fl(n,u,l==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...x}=d;c={...c,...x,...g}}return c};function r(l){e=l(n)}function a(l){const{props:c}=n,u=iB(n.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let A=0;A<d4;A++){const m=u4[A],y=t[m],v=c[m]!==void 0?c[m]:u[m],b=md(v),w=m===l?y.isActive:null;w===!1&&(g=A);let S=v===u[m]&&v!==c[m]&&b;if(S&&i&&n.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...p},!y.isActive&&w===null||!v&&!y.prevProp||Em(v)||typeof v=="boolean")continue;const C=p4(y.prevProp,v);let M=C||m===l&&y.isActive&&!S&&b||A>g&&b,_=!1;const E=Array.isArray(v)?v:[v];let R=E.reduce(s(m),{});w===!1&&(R={});const{prevResolvedValues:L={}}=y,F={...L,...R},U=G=>{M=!0,f.has(G)&&(_=!0,f.delete(G)),y.needsAnimating[G]=!0;const D=n.getValue(G);D&&(D.liveStyle=!1)};for(const G in F){const D=R[G],W=L[G];if(p.hasOwnProperty(G))continue;let K=!1;Qx(D)&&Qx(W)?K=!nB(D,W):K=D!==W,K?D!=null?U(G):f.add(G):D!==void 0&&f.has(G)?U(G):y.protectedKeys[G]=!0}y.prevProp=v,y.prevResolvedValues=R,y.isActive&&(p={...p,...R}),i&&n.blockInitialAnimation&&(M=!1);const z=S&&C;M&&(!z||_)&&d.push(...E.map(G=>{const D={type:m};if(typeof G=="string"&&i&&!z&&n.manuallyAnimateOnMount&&n.parent){const{parent:W}=n,K=Fl(W,G);if(W.enteringChildren&&K){const{delayChildren:ee}=K.transition||{};D.delay=tB(W.enteringChildren,n,ee)}}return{animation:G,options:D}}))}if(f.size){const A={};if(typeof c.initial!="boolean"){const m=Fl(n,Array.isArray(c.initial)?c.initial[0]:c.initial);m&&m.transition&&(A.transition=m.transition)}f.forEach(m=>{const y=n.getBaseTarget(m),v=n.getValue(m);v&&(v.liveStyle=!0),A[m]=y??null}),d.push({animation:A})}let x=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(d):Promise.resolve()}function o(l,c){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),t[l].isActive=c;const u=a(l);for(const f in t)t[f].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>t,reset:()=>{t=n_()}}}function p4(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!nB(e,n):!1}function ba(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function n_(){return{animate:ba(!0),whileInView:ba(),whileHover:ba(),whileTap:ba(),whileDrag:ba(),whileFocus:ba(),exit:ba()}}class xa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class m4 extends xa{constructor(e){super(e),e.animationState||(e.animationState=f4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Em(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let g4=0;class A4 extends xa{constructor(){super(...arguments),this.id=g4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const x4={animation:{Feature:m4},exit:{Feature:A4}};function Ad(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Vd(n){return{point:{x:n.pageX,y:n.pageY}}}const y4=n=>e=>hb(e)&&n(e,Vd(e));function Fu(n,e,t,i){return Ad(n,e,y4(t),i)}const sB=1e-4,v4=1-sB,b4=1+sB,rB=.01,w4=0-rB,E4=0+rB;function Jn(n){return n.max-n.min}function _4(n,e,t){return Math.abs(n-e)<=t}function i_(n,e,t,i=.5){n.origin=i,n.originPoint=Ht(e.min,e.max,n.origin),n.scale=Jn(t)/Jn(e),n.translate=Ht(t.min,t.max,n.origin)-n.originPoint,(n.scale>=v4&&n.scale<=b4||isNaN(n.scale))&&(n.scale=1),(n.translate>=w4&&n.translate<=E4||isNaN(n.translate))&&(n.translate=0)}function ku(n,e,t,i){i_(n.x,e.x,t.x,i?i.originX:void 0),i_(n.y,e.y,t.y,i?i.originY:void 0)}function s_(n,e,t){n.min=t.min+e.min,n.max=n.min+Jn(e)}function S4(n,e,t){s_(n.x,e.x,t.x),s_(n.y,e.y,t.y)}function r_(n,e,t){n.min=e.min-t.min,n.max=n.min+Jn(e)}function Uu(n,e,t){r_(n.x,e.x,t.x),r_(n.y,e.y,t.y)}function Li(n){return[n("x"),n("y")]}const aB=({current:n})=>n?n.ownerDocument.defaultView:null,a_=(n,e)=>Math.abs(n-e);function C4(n,e){const t=a_(n.x,e.x),i=a_(n.y,e.y);return Math.sqrt(t**2+i**2)}class oB{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=vg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=C4(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:x}=f,{timestamp:A}=Sn;this.history.push({...x,timestamp:A});const{onStart:m,onMove:y}=this.handlers;p||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=yg(p,this.transformPagePoint),jt.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=vg(f.type==="pointercancel"?this.lastMoveEventInfo:yg(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,m),x&&x(f,m)},!hb(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=s||window;const o=Vd(e),l=yg(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Sn;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,vg(l,this.history)),this.removeListeners=Od(Fu(this.contextWindow,"pointermove",this.handlePointerMove),Fu(this.contextWindow,"pointerup",this.handlePointerUp),Fu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),da(this.updatePoint)}}function yg(n,e){return e?{point:e(n.point)}:n}function o_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function vg({point:n},e){return{point:n,delta:o_(n,lB(e)),offset:o_(n,M4(e)),velocity:I4(e,.1)}}function M4(n){return n[0]}function lB(n){return n[n.length-1]}function I4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=lB(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>Rs(e)));)t--;if(!i)return{x:0,y:0};const r=ji(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function T4(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ht(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ht(t,n,i.max):Math.min(n,t)),n}function l_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function R4(n,{top:e,left:t,bottom:i,right:s}){return{x:l_(n.x,t,s),y:l_(n.y,e,i)}}function c_(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function B4(n,e){return{x:c_(n.x,e.x),y:c_(n.y,e.y)}}function N4(n,e){let t=.5;const i=Jn(n),s=Jn(e);return s>i?t=hd(e.min,e.max-i,n.min):i>s&&(t=hd(n.min,n.max-s,e.min)),br(0,1,t)}function D4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Gx=.35;function L4(n=Gx){return n===!1?n=0:n===!0&&(n=Gx),{x:u_(n,"left","right"),y:u_(n,"top","bottom")}}function u_(n,e,t){return{min:d_(n,e),max:d_(n,t)}}function d_(n,e){return typeof n=="number"?n:n[e]||0}const P4=new WeakMap;class F4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=en(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Vd(d).point)},a=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:x}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VU(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Li(m=>{let y=this.getAxisMotionValue(m).get()||0;if(Bs.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(y=Jn(b)*(parseFloat(y)/100))}}this.originPoint[m]=y}),x&&jt.postRender(()=>x(d,f)),jx(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},o=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:x,onDrag:A}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:m}=f;if(g&&this.currentDirection===null){this.currentDirection=k4(m),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),A&&A(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Li(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new oB(e,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:aB(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&jt.postRender(()=>o(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!xh(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=T4(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&yl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=R4(i.layoutBox,e):this.constraints=!1,this.elastic=L4(t),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Li(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=D4(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!yl(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=UO(i,s.root,this.visualElement.getTransformPagePoint());let a=B4(s.layout.layoutBox,r);if(t){const o=t(PO(a));this.hasMutatedConstraints=!!o,o&&(a=z2(o))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Li(u=>{if(!xh(u,t,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:i?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return jx(this.visualElement,e),i.start(Eb(e,i,0,t,this.visualElement,!1))}stopAnimation(){Li(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Li(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Li(t=>{const{drag:i}=this.getProps();if(!xh(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[t];r.set(e[t]-Ht(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!yl(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Li(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=N4({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Li(a=>{if(!xh(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Ht(l,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;P4.set(this.visualElement,this);const e=this.visualElement.current,t=Fu(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();yl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),jt.read(i);const a=Ad(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Li(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),t(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=Gx,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function xh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function k4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class U4 extends xa{constructor(e){super(e),this.removeGroupControls=Hi,this.removeListeners=Hi,this.controls=new F4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hi}unmount(){this.removeGroupControls(),this.removeListeners()}}const h_=n=>(e,t)=>{n&&jt.postRender(()=>n(e,t))};class O4 extends xa{constructor(){super(...arguments),this.removePointerDownListener=Hi}onPointerDown(e){this.session=new oB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:h_(e),onStart:h_(t),onMove:i,onEnd:(r,a)=>{delete this.session,s&&jt.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=Fu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Of={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function f_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const kc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Pe.test(n))n=parseFloat(n);else return n;const t=f_(n,e.target.x),i=f_(n,e.target.y);return`${t}% ${i}%`}},Q4={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=ha.parse(n);if(s.length>5)return i;const r=ha.createTransformer(n),a=typeof s[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const c=Ht(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),r(s)}};let bg=!1;class j4 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;cO(V4),r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),bg&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Of.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,{projection:a}=i;return a&&(a.isPresent=r,bg=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||jt.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),db.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;bg=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cB(n){const[e,t]=B2(),i=N.useContext(Hv);return h.jsx(j4,{...n,layoutGroup:i,switchLayoutGroup:N.useContext(G2),isPresent:e,safeToRemove:t})}const V4={borderRadius:{...kc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kc,borderTopRightRadius:kc,borderBottomLeftRadius:kc,borderBottomRightRadius:kc,boxShadow:Q4};function G4(n,e,t){const i=Un(n)?n:Kl(n);return i.start(Eb("",i,e,t)),i.animation}const H4=(n,e)=>n.depth-e.depth;class z4{constructor(){this.children=[],this.isDirty=!1}add(e){$v(this.children,e),this.isDirty=!0}remove(e){qv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(H4),this.isDirty=!1,this.children.forEach(e)}}function W4(n,e){const t=li.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(da(i),n(r-e))};return jt.setup(i,!0),()=>da(i)}const uB=["TopLeft","TopRight","BottomLeft","BottomRight"],$4=uB.length,p_=n=>typeof n=="string"?parseFloat(n):n,m_=n=>typeof n=="number"||Pe.test(n);function q4(n,e,t,i,s,r){s?(n.opacity=Ht(0,t.opacity??1,Y4(i)),n.opacityExit=Ht(e.opacity??1,0,X4(i))):r&&(n.opacity=Ht(e.opacity??1,t.opacity??1,i));for(let a=0;a<$4;a++){const o=`border${uB[a]}Radius`;let l=g_(e,o),c=g_(t,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||m_(l)===m_(c)?(n[o]=Math.max(Ht(p_(l),p_(c),i),0),(Bs.test(c)||Bs.test(l))&&(n[o]+="%")):n[o]=c}(e.rotate||t.rotate)&&(n.rotate=Ht(e.rotate||0,t.rotate||0,i))}function g_(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Y4=dB(0,.5,KR),X4=dB(.5,.95,Hi);function dB(n,e,t){return i=>i<n?0:i>e?1:t(hd(n,e,i))}function A_(n,e){n.min=e.min,n.max=e.max}function Bi(n,e){A_(n.x,e.x),A_(n.y,e.y)}function x_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function y_(n,e,t,i,s){return n-=e,n=Rp(n,1/t,i),s!==void 0&&(n=Rp(n,1/s,i)),n}function K4(n,e=0,t=1,i=.5,s,r=n,a=n){if(Bs.test(e)&&(e=parseFloat(e),e=Ht(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Ht(r.min,r.max,i);n===r&&(o-=e),n.min=y_(n.min,e,t,o,s),n.max=y_(n.max,e,t,o,s)}function v_(n,e,[t,i,s],r,a){K4(n,e[t],e[i],e[s],e.scale,r,a)}const J4=["x","scaleX","originX"],Z4=["y","scaleY","originY"];function b_(n,e,t,i){v_(n.x,e,J4,t?t.x:void 0,i?i.x:void 0),v_(n.y,e,Z4,t?t.y:void 0,i?i.y:void 0)}function w_(n){return n.translate===0&&n.scale===1}function hB(n){return w_(n.x)&&w_(n.y)}function E_(n,e){return n.min===e.min&&n.max===e.max}function eQ(n,e){return E_(n.x,e.x)&&E_(n.y,e.y)}function __(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function fB(n,e){return __(n.x,e.x)&&__(n.y,e.y)}function S_(n){return Jn(n.x)/Jn(n.y)}function C_(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class tQ{constructor(){this.members=[]}add(e){$v(this.members,e),e.scheduleRender()}remove(e){if(qv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nQ(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:g}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),g&&(i+=`skewY(${g}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const wg=["","X","Y","Z"],iQ=1e3;let sQ=0;function Eg(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function pB(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Z2(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",jt,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&pB(i)}function mB({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=sQ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(oQ),this.nodes.forEach(dQ),this.nodes.forEach(hQ),this.nodes.forEach(lQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z4)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Xv),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=R2(a)&&!qU(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let u,d=0;const f=()=>this.root.updateBlockedByResize=!1;jt.read(()=>{d=window.innerWidth}),n(a,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,u&&u(),u=W4(f,250),Of.hasAnimatedSinceResize&&(Of.hasAnimatedSinceResize=!1,this.nodes.forEach(T_)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||AQ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=c.getProps(),m=!this.targetLayout||!fB(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...cb(g,"layout"),onPlay:x,onComplete:A};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(u,y)}else d||T_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fQ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(I_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(uQ),this.nodes.forEach(rQ),this.nodes.forEach(aQ)):this.nodes.forEach(I_),this.clearAllSnapshots();const o=li.now();Sn.delta=br(0,1e3/60,o-Sn.timestamp),Sn.timestamp=o,Sn.isProcessing=!0,dg.update.process(Sn),dg.preRender.process(Sn),dg.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,db.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cQ),this.sharedNodes.forEach(pQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jn(this.snapshot.measuredBox.x)&&!Jn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=en(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!hB(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||ka(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),xQ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return en();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(yQ))){const{scroll:u}=this.root;u&&(vl(o.x,u.offset.x),vl(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=en();if(Bi(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Bi(o,a),vl(o.x,d.offset.x),vl(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=en();Bi(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&bl(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ka(u.latestValues)&&bl(l,u.latestValues)}return ka(this.latestValues)&&bl(l,this.latestValues),l}removeTransform(a){const o=en();Bi(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ka(c.latestValues))continue;kx(c.latestValues)&&c.updateSnapshot();const u=en(),d=c.measurePageBox();Bi(u,d),b_(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ka(this.latestValues)&&b_(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),Uu(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=en(),this.targetWithTransforms=en()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Bi(this.target,this.layout.layoutBox),$2(this.target,this.targetDelta)):Bi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=en(),this.relativeTargetOrigin=en(),Uu(this.relativeTargetOrigin,this.target,p.target),Bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kx(this.parent.latestValues)||W2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Bi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;kO(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=en());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(x_(this.prevProjectionDelta.x,this.projectionDelta.x),x_(this.prevProjectionDelta.y,this.projectionDelta.y)),ku(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!C_(this.projectionDelta.x,this.prevProjectionDelta.x)||!C_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wl(),this.projectionDelta=wl(),this.projectionDeltaWithTransform=wl()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=en(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,x=p!==g,A=this.getStack(),m=!A||A.members.length<=1,y=!!(x&&!m&&this.options.crossfade===!0&&!this.path.some(gQ));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const w=b/1e3;R_(d.x,a.x,w),R_(d.y,a.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uu(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mQ(this.relativeTarget,this.relativeTargetOrigin,f,w),v&&eQ(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=en()),Bi(v,this.relativeTarget)),x&&(this.animationValues=u,q4(u,c,this.latestValues,w,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jt.update(()=>{Of.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Kl(0)),this.currentAnimation=G4(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&gB(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||en();const d=Jn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Jn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Bi(o,l),bl(o,u),ku(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new tQ),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Eg("z",a,c,this.animationValues);for(let u=0;u<wg.length;u++)Eg(`rotate${wg[u]}`,a,c,this.animationValues),Eg(`skew${wg[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Uf(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Uf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ka(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=nQ(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),a.transform=d;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in gd){if(u[g]===void 0)continue;const{correct:x,applyTo:A,isCSSVariable:m}=gd[g],y=d==="none"?u[g]:x(u[g],c);if(A){const v=A.length;for(let b=0;b<v;b++)a[A[b]]=y}else m?this.options.visualElement.renderState.vars[g]=y:a[g]=y}this.options.layoutId&&(a.pointerEvents=c===this?Uf(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(M_),this.root.sharedNodes.clear()}}}function rQ(n){n.updateLayout()}function aQ(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?Li(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],p=Jn(f);f.min=i[d].min,f.max=f.min+p}):gB(r,e.layoutBox,i)&&Li(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],p=Jn(i[d]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const o=wl();ku(o,i,e.layoutBox);const l=wl();a?ku(l,n.applyTransform(s,!0),e.measuredBox):ku(l,i,e.layoutBox);const c=!hB(o);let u=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=en();Uu(g,e.layoutBox,f.layoutBox);const x=en();Uu(x,i,p.layoutBox),fB(g,x)||(u=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=g,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function oQ(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function lQ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function cQ(n){n.clearSnapshot()}function M_(n){n.clearMeasurements()}function I_(n){n.isLayoutDirty=!1}function uQ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function T_(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function dQ(n){n.resolveTargetDelta()}function hQ(n){n.calcProjection()}function fQ(n){n.resetSkewAndRotation()}function pQ(n){n.removeLeadSnapshot()}function R_(n,e,t){n.translate=Ht(e.translate,0,t),n.scale=Ht(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function B_(n,e,t,i){n.min=Ht(e.min,t.min,i),n.max=Ht(e.max,t.max,i)}function mQ(n,e,t,i){B_(n.x,e.x,t.x,i),B_(n.y,e.y,t.y,i)}function gQ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const AQ={duration:.45,ease:[.4,0,.1,1]},N_=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),D_=N_("applewebkit/")&&!N_("chrome/")?Math.round:Hi;function L_(n){n.min=D_(n.min),n.max=D_(n.max)}function xQ(n){L_(n.x),L_(n.y)}function gB(n,e,t){return n==="position"||n==="preserve-aspect"&&!_4(S_(e),S_(t),.2)}function yQ(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const vQ=mB({attachResizeListener:(n,e)=>Ad(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_g={current:void 0},AB=mB({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!_g.current){const n=new vQ({});n.mount(window),n.setOptions({layoutScroll:!0}),_g.current=n}return _g.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),bQ={pan:{Feature:O4},drag:{Feature:U4,ProjectionNode:AB,MeasureLayout:cB}};function P_(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&jt.postRender(()=>r(e,Vd(e)))}class wQ extends xa{mount(){const{current:e}=this.node;e&&(this.unmount=GU(e,(t,i)=>(P_(this.node,i,"Start"),s=>P_(this.node,s,"End"))))}unmount(){}}class EQ extends xa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Od(Ad(this.node.current,"focus",()=>this.onFocus()),Ad(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function F_(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&jt.postRender(()=>r(e,Vd(e)))}class _Q extends xa{mount(){const{current:e}=this.node;e&&(this.unmount=$U(e,(t,i)=>(F_(this.node,i,"Start"),(s,{success:r})=>F_(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hx=new WeakMap,Sg=new WeakMap,SQ=n=>{const e=Hx.get(n.target);e&&e(n)},CQ=n=>{n.forEach(SQ)};function MQ({root:n,...e}){const t=n||document;Sg.has(t)||Sg.set(t,{});const i=Sg.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(CQ,{root:n,...e})),i[s]}function IQ(n,e,t){const i=MQ(e);return Hx.set(n,t),i.observe(n),()=>{Hx.delete(n),i.unobserve(n)}}const TQ={some:0,all:1};class RQ extends xa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:TQ[s]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return IQ(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(BQ(e,t))&&this.startObserver()}unmount(){}}function BQ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const NQ={inView:{Feature:RQ},tap:{Feature:_Q},focus:{Feature:EQ},hover:{Feature:wQ}},DQ={layout:{ProjectionNode:AB,MeasureLayout:cB}},LQ={...x4,...NQ,...bQ,...DQ},Se=LO(LQ,$O),PQ=[{icon:KF,title:"Scan QR Code",description:"Guests scan instantly.",number:"01"},{icon:FR,title:"Browse Menu",description:"Modern visual menu.",number:"02"},{icon:LR,title:"View in AR",description:"3D dishes on the table.",number:"03"},{icon:Al,title:"Order",description:"Confident, clear ordering.",number:"04"}];function FQ(){return h.jsxs("div",{className:"relative py-20 bg-gradient-to-br from-gray-50 to-emerald-50 overflow-hidden",children:[h.jsxs(Se.svg,{viewBox:"0 0 800 300",className:"absolute inset-0 w-full h-full opacity-25 pointer-events-none",initial:{opacity:0},animate:{opacity:.35},transition:{duration:1.5},children:[h.jsx(Se.path,{d:"M 50 250 C 200 80, 600 80, 750 250",fill:"none",stroke:"url(#grad)",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",animate:{pathLength:[0,1]},transition:{duration:3,ease:"easeInOut",repeat:1/0,repeatType:"reverse"}}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"grad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#34d399"}),h.jsx("stop",{offset:"50%",stopColor:"#2dd4bf"}),h.jsx("stop",{offset:"100%",stopColor:"#34d399"})]})}),h.jsx(Se.circle,{cx:"50",cy:"250",r:"10",fill:"#34d399",animate:{cx:[50,200,400,600,750]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}})]}),h.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 lg:px-12",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[h.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent mb-4",children:"How It Works"}),h.jsx("p",{className:"text-lg md:text-xl text-gray-600",children:"A clean and smart flow your customers instantly understand"})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-10 relative",children:PQ.map((n,e)=>h.jsx(Se.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:e*.1},viewport:{once:!0},whileHover:{y:-6},className:"relative",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100 hover:border-emerald-200 h-full",children:[h.jsx(Se.div,{animate:{opacity:[1,.6,1]},transition:{duration:2,repeat:1/0},className:"absolute -top-5 right-4 w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-lg",children:n.number}),h.jsx(Se.div,{animate:{y:[0,-6,0]},transition:{duration:2.5,repeat:1/0},className:"w-16 h-16 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-2xl flex items-center justify-center mb-6",children:h.jsx(n.icon,{className:"w-8 h-8 text-emerald-600"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:n.title}),h.jsx("p",{className:"text-gray-600 leading-relaxed text-sm md:text-base",children:n.description})]})},e))})]})]})}const kQ=[{icon:Gv,title:"Increase Orders by 40%",description:"Rich visuals and AR experiences lead to higher order values and customer satisfaction.",stats:"+40% Average"},{icon:kR,title:"Enhanced Customer Experience",description:"Provide a modern, engaging dining experience that customers love and remember.",stats:"98% Satisfaction"},{icon:DR,title:"Reduce Decision Time",description:"Customers order faster when they can see exactly what they're getting.",stats:"60% Faster"},{icon:QF,title:"Lower Operating Costs",description:"Eliminate printing costs and reduce menu waste while being eco-friendly.",stats:"Save Money"},{icon:VF,title:"Build Customer Loyalty",description:"Create memorable experiences that keep customers coming back.",stats:"3x Return Rate"},{icon:PR,title:"Multilingual Support",description:"Serve international customers with automatic menu translation.",stats:"Languages"}],UQ=[{quote:"The Visuplate transformed our restaurant. Customers love the AR feature and our orders increased by 45% in the first month!",author:"Maria Rodriguez",role:"Owner, Bella Vista Restaurant"},{quote:"Going digital was the best decision. We save thousands on printing and our customers appreciate the eco-friendly approach.",author:"James Chen",role:"Manager, Urban Bistro"}];function OQ(){return h.jsx("div",{className:"py-24 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6",children:"Why Restaurants Choose Us"}),h.jsx("p",{className:"text-xl text-gray-600",children:"Proven results that drive growth and customer satisfaction"})]}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20",children:kQ.map((n,e)=>h.jsxs("div",{className:"group bg-gradient-to-br from-white to-emerald-50 rounded-2xl p-8 border-2 border-emerald-100 hover:shadow-2xl hover:border-emerald-300 transition-all duration-300",children:[h.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300",children:h.jsx(n.icon,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"text-2xl font-bold text-emerald-600 mb-2",children:n.stats}),h.jsx("h3",{className:"text-lg font-bold text-gray-900",children:n.title})]})]}),h.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description})]},e))}),h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-600 rounded-3xl p-12 lg:p-16 text-white relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("h3",{className:"text-3xl lg:text-4xl font-bold mb-12 text-center",children:"What Restaurant Owners Say"}),h.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:UQ.map((n,e)=>h.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20",children:[h.jsxs("p",{className:"text-lg leading-relaxed mb-6 text-white/95",children:['"',n.quote,'"']}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-xl font-bold",children:n.author[0]})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold",children:n.author}),h.jsx("div",{className:"text-white/80 text-sm",children:n.role})]})]})]},e))}),h.jsx("div",{className:"mt-12 text-center",children:h.jsx("div",{className:"inline-flex flex-wrap justify-center gap-4 text-sm",children:["Easy Setup","No Hardware Required","Real-Time Analytics","24/7 Support"].map((n,e)=>h.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 px-4 py-2 rounded-lg",children:[h.jsx(kF,{className:"w-4 h-4"}),h.jsx("span",{children:n})]},e))})})]})]})]})})}function QQ(){return h.jsx("div",{className:"py-24 bg-gradient-to-br from-gray-50 to-emerald-50",children:h.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:h.jsx("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:h.jsxs("div",{className:"grid lg:grid-cols-2",children:[h.jsxs("div",{className:"p-12 lg:p-16 space-y-8",children:[h.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-emerald-100 rounded-full text-emerald-700 text-sm font-medium",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),h.jsx("span",{children:"Join 500+ Restaurants"})]}),h.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 leading-tight",children:"Ready to Transform Your Restaurant?"}),h.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Start delighting your customers with interactive menus, AR experiences, and eco-friendly digital solutions."}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-3 text-gray-700",children:[h.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0",children:h.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),h.jsx("span",{className:"font-medium",children:"Free demo and consultation"})]}),h.jsxs("div",{className:"flex items-center space-x-3 text-gray-700",children:[h.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0",children:h.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),h.jsx("span",{className:"font-medium",children:"Setup within 3 Weeks"})]}),h.jsxs("div",{className:"flex items-center space-x-3 text-gray-700",children:[h.jsx("div",{className:"w-6 h-6 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0",children:h.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),h.jsx("span",{className:"font-medium",children:"No server-side maintainance required from restaurant"})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[h.jsx(St,{to:"/contact",className:"w-full sm:w-auto",children:h.jsxs("button",{className:"group px-8 py-4 bg-emerald-600 text-white rounded-xl font-semibold hover:bg-emerald-700 transition-all duration-200 shadow-xl shadow-emerald-600/30 hover:shadow-2xl hover:shadow-emerald-600/40 flex items-center justify-center space-x-2 w-full",children:[h.jsx("span",{children:"Get Started Today"}),h.jsx(BR,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),h.jsx(St,{to:"/demo-menu",className:"w-full sm:w-auto",children:h.jsx("button",{className:"px-8 py-4 bg-white text-gray-900 rounded-xl font-semibold border-2 border-gray-200 hover:border-emerald-600 hover:text-emerald-600 transition-all duration-200 w-full",children:"View Demo"})})]})]}),h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-600 p-12 lg:p-16 flex flex-col justify-center space-y-8",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Contact Our Team"}),h.jsx("p",{className:"text-emerald-50 mb-8",children:"Have questions? Our team is here to help you get started with The Visuplate."})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-4 text-white",children:[h.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:h.jsx(vm,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-emerald-100",children:"Email us"}),h.jsx("div",{className:"font-semibold",children:"hello@thevisuplate.com"})]})]}),h.jsxs("div",{className:"flex items-center space-x-4 text-white",children:[h.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:h.jsx(Pl,{className:"w-6 h-6"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-emerald-100",children:"Call us"}),h.jsx("div",{className:"font-semibold",children:"+91-8377861214"})]})]})]}),h.jsxs("div",{className:"pt-8 border-t border-white/20",children:[h.jsx("div",{className:"text-emerald-50 text-sm mb-4",children:"Trusted by leading restaurants"}),h.jsxs("div",{className:"flex items-center space-x-6 text-white/80",children:[h.jsx("div",{className:"text-sm font-medium",children:""}),h.jsx("div",{className:"text-sm",children:"4.9/5 Rating"}),h.jsx("div",{className:"text-sm",children:""}),h.jsx("div",{className:"text-sm",children:"50+ Reviews"})]})]})]})]})})})})}function jQ(){const[n,e]=N.useState(!1),[t,i]=N.useState(!1);N.useEffect(()=>{const a=()=>{e(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),N.useEffect(()=>{const a=new Image;a.src="/images/New Demo QR.png",a.onload=()=>i(!0)},[]);const s=[{number:"15+",label:"Restaurants"},{number:"1K+",label:"Happy Diners"},{number:"40%",label:"Order Increase"},{number:"4.9/5",label:"Customer Rating"}],r=["AR Food Previews","Real Portion Videos","Instant Updates","Eco-Friendly"];return h.jsxs("div",{className:"relative bg-gradient-to-br from-emerald-50 via-white to-teal-50 overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-[0.02] sm:opacity-5"}),!t&&h.jsx("div",{className:"absolute inset-0 bg-white z-20 flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}),h.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 sm:pt-20 pb-20 sm:pb-32",children:h.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 sm:gap-12 lg:gap-16 items-center",children:[h.jsxs("div",{className:"space-y-6 sm:space-y-8 text-center lg:text-left",children:[h.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 bg-emerald-100/80 backdrop-blur-sm rounded-full text-emerald-700 text-sm font-medium border border-emerald-200 shadow-sm",children:[h.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),h.jsx("span",{children:"Digital Innovation for Modern Restaurants"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-gray-900 leading-tight",children:["Transform Your Menu into an",h.jsx("span",{className:"block bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent mt-1 sm:mt-2",children:"Interactive Experience"})]}),h.jsx("div",{className:"flex flex-wrap justify-center lg:justify-start gap-2 pt-2",children:r.map((a,o)=>h.jsxs("div",{className:"inline-flex items-center gap-1 bg-white/80 px-3 py-1 rounded-full text-xs font-medium text-gray-700 border border-gray-200 shadow-sm",children:[h.jsx(Al,{className:"w-3 h-3 text-emerald-500"}),a]},o))})]}),h.jsxs("p",{className:"text-lg sm:text-xl text-gray-600 leading-relaxed max-w-2xl mx-auto lg:mx-0",children:["Welcome to the future with ",h.jsx("strong",{children:"AR-powered 3D food visualization"}),", real-portion videos, and an ",h.jsx("strong",{children:"eco-friendly digital solution"})," that increases orders by 40% and delights your customers."]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 max-w-md mx-auto lg:mx-0",children:[h.jsx(St,{to:"/contact",className:"w-full sm:w-auto group",children:h.jsxs("button",{className:"w-full px-6 sm:px-8 py-3 sm:py-4 bg-emerald-600 text-white rounded-xl font-semibold hover:bg-emerald-700 active:scale-95 transition-all duration-200 shadow-lg shadow-emerald-600/25 hover:shadow-xl hover:shadow-emerald-600/35 flex items-center justify-center space-x-2",children:[h.jsx("span",{children:"Request Free Demo"}),h.jsx(BR,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:translate-x-1 transition-transform"})]})}),h.jsx(St,{to:"/demo-menu",className:"w-full sm:w-auto group",children:h.jsxs("button",{className:"w-full px-6 sm:px-8 py-3 sm:py-4 bg-white text-gray-900 rounded-xl font-semibold border-2 border-gray-200 hover:border-emerald-500 hover:text-emerald-600 active:scale-95 transition-all duration-200 flex items-center justify-center space-x-2",children:[h.jsx(XF,{className:"w-4 h-4 sm:w-5 sm:h-5 fill-current"}),h.jsx("span",{children:"See Live Demo"})]})})]}),h.jsxs("div",{className:"pt-4 sm:pt-6",children:[h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-8 max-w-md mx-auto lg:mx-0",children:s.map((a,o)=>h.jsxs("div",{className:"text-center lg:text-left",children:[h.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:a.number}),h.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:a.label})]},o))}),h.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 mt-4",children:[h.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(a=>h.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full border-2 border-white"},a))}),h.jsx("span",{className:"text-xs text-gray-600",children:"Trusted by 15+ restaurant owners"})]})]})]}),h.jsxs("div",{className:"relative order-first lg:order-last",children:[h.jsxs("div",{className:"relative z-10 bg-white rounded-2xl sm:rounded-3xl shadow-xl sm:shadow-2xl p-4 sm:p-6 lg:p-8 transform hover:scale-105 transition-transform duration-500 active:scale-95",children:[h.jsx("div",{className:"aspect-[3/4] bg-gradient-to-br from-emerald-100 to-teal-100 rounded-xl sm:rounded-2xl p-4 sm:p-6 flex items-center justify-center",children:h.jsxs("div",{className:"w-full bg-white p-4 sm:p-6 rounded-xl sm:rounded-2xl shadow-lg text-center space-y-3 sm:space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-800 leading-tight",children:"See How It Works In Your Restaurant"}),h.jsx("div",{className:"flex items-center justify-center gap-1 text-amber-600",children:[1,2,3,4,5].map(a=>h.jsx(_p,{className:"w-4 h-4 fill-current"},a))})]}),h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:"/images/New Demo QR.png",alt:"Digital QR code menu in restaurant setting",className:`w-full rounded-lg sm:rounded-xl shadow-md transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,loading:"eager",onLoad:()=>i(!0)}),!t&&h.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-lg sm:rounded-xl animate-pulse"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-700 bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"SCAN TO EXPERIENCE MAGIC "}),h.jsx("p",{className:"text-xs text-gray-500",children:"See AR food previews & real portion videos"})]})]})}),h.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-amber-400 rounded-full flex items-center justify-center shadow-lg",children:h.jsx(_p,{className:"w-3 h-3 text-white fill-current"})})]}),!n&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute -top-4 -right-4 w-48 h-48 sm:w-72 sm:h-72 bg-emerald-200 rounded-full blur-3xl opacity-20 animate-pulse"}),h.jsx("div",{className:"absolute -bottom-4 -left-4 w-48 h-48 sm:w-72 sm:h-72 bg-teal-200 rounded-full blur-3xl opacity-20 animate-pulse delay-1000"})]})]})]})}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white to-transparent"})]})}function VQ(){return h.jsxs(h.Fragment,{children:[h.jsx(jQ,{}),h.jsx(tk,{}),h.jsx(FQ,{}),h.jsx(OQ,{}),h.jsx(QQ,{})]})}function GQ(){N.useEffect(()=>{document.title="About Visuplate - Meet Our Team | Gagan Kaushik, Himanshu Kumar, Devang Singh";const t={"@context":"https://schema.org","@type":"AboutPage",name:"About Visuplate - Leadership Team",description:"Learn about Visuplate's mission to transform restaurant dining with AR technology.",publisher:{"@type":"Organization",name:"Visuplate",description:"AR-powered digital menus for restaurants",url:"https://visuplate.com",founder:[{"@type":"Person",name:"Gagan Kaushik",jobTitle:"CEO & Founder",sameAs:"https://www.linkedin.com/in/gagan-kaushik/"},{"@type":"Person",name:"Himanshu Kumar",jobTitle:"CTO & Founder",sameAs:"https://www.linkedin.com/in/himanshu-kumar-93518b173/"}]}},i=document.getElementById("structured-data-about");i&&i.remove();const s=document.createElement("script");return s.type="application/ld+json",s.id="structured-data-about",s.text=JSON.stringify(t),document.head.appendChild(s),()=>{s.parentNode&&s.parentNode.removeChild(s)}},[]);const n=[{icon:$F,title:"Innovation",description:"Continuously pushing the boundaries of restaurant technology."},{icon:kR,title:"Customer-Centric",description:"Focused on creating exceptional experiences for diners and restaurant owners."},{icon:LF,title:"Excellence",description:"Committed to delivering the highest quality products and services."},{icon:PR,title:"Sustainability",description:"Dedicated to reducing environmental impact through digital solutions."},{icon:Gv,title:"Growth",description:"Empowering restaurants to grow their business and satisfaction."},{icon:ZF,title:"Focus",description:"Laser-focused on solving real problems in restaurant industry."}],e=[{name:"Gagan Kaushik",role:"CEO & Founder",bio:"Visionary entrepreneur in restaurant technology innovation.",image:"/images/CEO.jpg",social:{linkedin:"https://www.linkedin.com/in/gagan-kaushik/"},achievements:["Menu Digitalization","Restaurant Innovation","Customer Experience"]},{name:"Himanshu Kumar",role:"CTO & Founder",bio:"Expert in AR technology with background at leading tech companies.",image:"/images/CTO.jpg",social:{linkedin:"https://www.linkedin.com/in/himanshu-kumar-93518b173/"},achievements:["AR Technology","Platform Architecture","Technical Innovation"]},{name:"Devang Pratap Singh",role:"CMO & Co-Founder",bio:"Dedicated to supporting restaurant partners and their growth.",image:"/images/CMO.jpg",social:{linkedin:"https://www.linkedin.com/in/devang-pratap-singh-a947a2241/"},achievements:["Growth Strategy","Partner Success","Brand Development"]}];return h.jsx("div",{className:"min-h-screen bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12 py-24",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-24",children:[h.jsx("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"About Visuplate"}),h.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Transforming restaurant industry with interactive AR dining experiences."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center mb-32",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Our Story"}),h.jsxs("div",{className:"space-y-4 text-lg text-gray-600 leading-relaxed",children:[h.jsx("p",{children:"Visuplate was born from diners wanting to see what they order and restaurants wanting smarter food showcasing."}),h.jsx("p",{children:"Founded in 2025 by Gagan Kaushik and Himanshu Kumar to eliminate printed menus with engaging interactive experiences."}),h.jsx("p",{children:"Partnering with 15+ restaurants across India, serving hundreds of diners with AR-powered menus daily."})]})]}),h.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-teal-100 rounded-3xl p-12 h-96 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-6xl font-bold text-emerald-600 mb-4",children:"15+"}),h.jsx("div",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Restaurants"}),h.jsx("div",{className:"text-gray-600 mb-8",children:"Across India"}),h.jsxs("div",{className:"space-y-3 text-left",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-3xl font-bold text-teal-600",children:"1K+"}),h.jsx("span",{className:"text-gray-700",children:"Happy diners monthly"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-3xl font-bold text-emerald-600",children:"40%"}),h.jsx("span",{className:"text-gray-700",children:"Average order increase"})]})]})]})})]}),h.jsxs("div",{className:"mb-32",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-12 text-center",children:"Our Values"}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((t,i)=>h.jsxs("div",{className:"bg-gradient-to-br from-white to-emerald-50 rounded-2xl p-8 border-2 border-emerald-100 hover:border-emerald-300 hover:shadow-lg transition-all duration-300",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center mb-4",children:h.jsx(t.icon,{className:"w-6 h-6 text-white"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:t.title}),h.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description})]},i))})]}),h.jsxs("div",{className:"mb-24",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[h.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Leadership Team"}),h.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Passionate innovators driving restaurant technology forward."})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 justify-center",children:e.map((t,i)=>h.jsxs("div",{className:"group bg-white rounded-2xl p-6 border-2 border-gray-100 hover:border-emerald-300 hover:shadow-xl transition-all duration-300 text-center relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 to-teal-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"}),h.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-6",children:[h.jsx("img",{src:t.image,alt:`${t.name} - ${t.role} at Visuplate`,className:"w-full h-full rounded-full object-cover border-4 border-emerald-300 shadow-lg group-hover:border-emerald-400 transition-all duration-300"}),h.jsx("div",{className:"absolute bottom-2 right-2 w-4 h-4 bg-emerald-500 rounded-full border-2 border-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.name}),h.jsx("p",{className:"text-emerald-600 font-semibold mb-4",children:t.role}),h.jsx("p",{className:"text-gray-600 leading-relaxed mb-6 text-sm",children:t.bio}),h.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-6",children:t.achievements.map((s,r)=>h.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:s},r))}),h.jsx("div",{className:"flex justify-center space-x-4 pt-4 border-t border-gray-100",children:t.social.linkedin&&h.jsx("a",{href:t.social.linkedin,target:"_blank",rel:"noopener noreferrer nofollow",className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-emerald-500 hover:text-white transition-all duration-200 group/link","aria-label":`Connect with ${t.name} on LinkedIn`,children:h.jsx(qF,{className:"w-4 h-4 group-hover/link:scale-110 transition-transform"})})})]},i))})]}),h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-600 rounded-3xl p-12 lg:p-16 text-white text-center",children:[h.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Join Us in Revolutionizing Dining"}),h.jsx("p",{className:"text-xl text-emerald-100 mb-8 max-w-2xl mx-auto",children:"Whether you're a restaurant owner or investor, we'd love to hear from you."}),h.jsx(St,{to:"/contact",children:h.jsx("button",{className:"px-8 py-4 bg-white text-emerald-600 rounded-xl font-semibold hover:bg-emerald-50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Get In Touch"})})]})]})})}function HQ(){const[n,e]=N.useState({name:"",email:"",restaurantName:"",message:""}),[t,i]=N.useState(!1),s=a=>{const{name:o,value:l}=a.target;e(c=>({...c,[o]:l}))},r=a=>{a.preventDefault();const l=`https://wa.me/918851796110?text=${`*New Contact Form Submission*%0A%0A*Name:* ${n.name}%0A*Email:* ${n.email}%0A*Restaurant Name:* ${n.restaurantName||"Not provided"}%0A*Message:* ${n.message}`}`;window.open(l,"_blank"),i(!0),setTimeout(()=>{e({name:"",email:"",restaurantName:"",message:""}),i(!1)},3e3)};return h.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-white via-emerald-50/30 to-teal-50/30 overflow-hidden",children:[h.jsxs("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:[h.jsx("div",{className:"absolute -top-32 -left-20 w-96 h-96 bg-emerald-300/20 blur-3xl rounded-full animate-pulse"}),h.jsx("div",{className:"absolute top-1/3 -right-32 w-96 h-96 bg-emerald-200/20 blur-3xl rounded-full animate-pulse delay-700"}),h.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[40rem] h-[40rem] bg-teal-200/10 blur-3xl rounded-full animate-pulse"})]}),h.jsx("div",{className:"fixed inset-0 -z-10 opacity-20 pointer-events-none",children:[...Array(25)].map((a,o)=>h.jsx("div",{className:"absolute w-1.5 h-1.5 bg-emerald-400/60 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${4+Math.random()*4}s`}},o))}),h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12 py-24 relative z-10",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-6 py-3 rounded-full text-sm font-semibold shadow-lg mb-6 animate-bounce-slow",children:[h.jsx(Pf,{className:"w-4 h-4"}),"We're here to help"]}),h.jsx("h1",{className:"text-5xl lg:text-6xl font-extrabold text-gray-900 mb-6 bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"Get In Touch"}),h.jsx("p",{className:"text-xl text-gray-700",children:"Ready to transform your restaurant? Our team is here every step of the way."})]}),h.jsxs("div",{className:"grid lg:grid-cols-4 gap-10 mb-20",children:[h.jsxs("div",{className:"group bg-white border border-emerald-200 rounded-3xl p-10 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all",children:[h.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center mb-6",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-blue-600",children:[h.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",ry:"2"}),h.jsx("polyline",{points:"3,7 12,13 21,7"})]})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Primary contact"}),h.jsx("a",{href:"mailto:thevisuplate@gmail.com",className:"text-emerald-600 font-semibold hover:text-emerald-700 block",children:"thevisuplate@gmail.com"})]}),h.jsxs("div",{className:"group bg-white border border-emerald-200 rounded-3xl p-10 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all",children:[h.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center mb-6",children:h.jsx(Pl,{className:"w-8 h-8 text-blue-600"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Phone"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Immediate assistance"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("a",{href:"tel:+918851796110",className:"block text-emerald-600 hover:text-emerald-700 font-medium",children:"+91-88517-96110"}),h.jsx("a",{href:"tel:+919599202386",className:"block text-emerald-600 hover:text-emerald-700 font-medium",children:"+91-95992-02386"}),h.jsx("a",{href:"tel:+918377861214",className:"block text-emerald-600 hover:text-emerald-700 font-medium",children:"+91-83778-61214"})]})]}),h.jsxs("div",{className:"group bg-white border border-emerald-200 rounded-3xl p-10 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all",children:[h.jsx("div",{className:"w-14 h-14 bg-green-100 rounded-2xl flex items-center justify-center mb-6",children:h.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"WhatsApp",className:"w-8 h-8"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"WhatsApp"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Whatsapp contact"}),h.jsx("div",{className:"space-y-2",children:h.jsx("a",{href:"https://wa.me/918851796110?text=Hi,%0AI'm%20interested%20in%20your%20Digital%20QR%20menu.%20Can%20we%20talk?",target:"_blank",rel:"noopener noreferrer",className:"block text-emerald-600 hover:text-emerald-700 font-medium",children:"+91-88517-96110"})})]}),h.jsxs("div",{className:"group bg-white border border-purple-200 rounded-3xl p-10 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all",children:[h.jsx("div",{className:"w-14 h-14 bg-purple-100 rounded-2xl flex items-center justify-center mb-6",children:h.jsx(Vv,{className:"w-8 h-8 text-purple-600"})}),h.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Office"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Based in Delhi, India"}),h.jsx("span",{className:"text-purple-600 font-semibold",children:"Delhi, India"})]})]}),h.jsxs("div",{className:"grid lg:grid-cols-2 gap-16",children:[h.jsxs("div",{children:[h.jsx("div",{className:"inline-flex bg-emerald-100 text-emerald-700 px-4 py-1 rounded-full text-sm font-medium mb-4",children:"Contact VisuPlate"}),h.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Send us a Message via WhatsApp"}),t?h.jsxs("div",{className:"bg-emerald-50 border border-emerald-300 rounded-3xl p-10 text-center shadow-xl",children:[h.jsx("div",{className:"w-20 h-20 bg-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(JF,{className:"w-10 h-10 text-white"})}),h.jsx("h3",{className:"text-2xl font-bold text-emerald-600 mb-2",children:"Redirecting to WhatsApp!"}),h.jsx("p",{className:"text-gray-600",children:"You'll be redirected to WhatsApp to send your message."})]}):h.jsxs("form",{onSubmit:r,className:"space-y-6",children:[h.jsx("input",{type:"text",name:"name",required:!0,value:n.name,onChange:s,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 shadow-sm",placeholder:"Your Name"}),h.jsx("input",{type:"email",name:"email",required:!0,value:n.email,onChange:s,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 shadow-sm",placeholder:"Your Email"}),h.jsx("input",{type:"text",name:"restaurantName",value:n.restaurantName,onChange:s,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 shadow-sm",placeholder:"Restaurant Name (optional)"}),h.jsx("textarea",{name:"message",required:!0,rows:6,value:n.message,onChange:s,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-emerald-500 shadow-sm",placeholder:"How can we help you?"}),h.jsxs("button",{type:"submit",className:"w-full px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-all shadow-lg flex items-center justify-center gap-2",children:["Send via WhatsApp",h.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"WhatsApp",className:"w-5 h-5 invert brightness-0"})]})]})]}),h.jsxs("div",{className:"space-y-8",children:[h.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Response Times"}),[{title:"WhatsApp Support",desc:"Reply within 1-2 hours"},{title:"Phone Support",desc:"MonFri, 9AM to 6PM IST"},{title:"Demo Scheduling",desc:"Book a demo in 24 hours"}].map((a,o)=>h.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-emerald-100 shadow hover:-translate-y-1 hover:shadow-md transition-all flex space-x-4",children:[h.jsx(DR,{className:"w-7 h-7 text-emerald-600 mt-1"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-900",children:a.title}),h.jsx("p",{className:"text-gray-600",children:a.desc})]})]},o)),h.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-teal-600 rounded-3xl p-10 shadow-xl text-white",children:[h.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Prefer to talk directly?"}),h.jsx("p",{className:"text-emerald-50 mb-6",children:"Schedule a demo call instantly via WhatsApp."}),h.jsx("a",{href:"https://wa.me/918851796110",target:"_blank",rel:"noopener noreferrer",children:h.jsx("button",{className:"w-full px-6 py-3 bg-white text-emerald-600 rounded-xl font-semibold hover:bg-emerald-50 transition",children:"Schedule Demo Call"})})]})]})]})]})]})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qf=globalThis,_b=Qf.ShadowRoot&&(Qf.ShadyCSS===void 0||Qf.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,xB=Symbol(),k_=new WeakMap;let zQ=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==xB)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(_b&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=k_.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&k_.set(t,e))}return e}toString(){return this.cssText}};const WQ=n=>new zQ(typeof n=="string"?n:n+"",void 0,xB),$Q=(n,e)=>{if(_b)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const i=document.createElement("style"),s=Qf.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=t.cssText,n.appendChild(i)}},U_=_b?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return WQ(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:qQ,defineProperty:YQ,getOwnPropertyDescriptor:XQ,getOwnPropertyNames:KQ,getOwnPropertySymbols:JQ,getPrototypeOf:ZQ}=Object,oa=globalThis,O_=oa.trustedTypes,ej=O_?O_.emptyScript:"",Cg=oa.reactiveElementPolyfillSupport,Ou=(n,e)=>n,Bp={toAttribute(n,e){switch(e){case Boolean:n=n?ej:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},Sb=(n,e)=>!qQ(n,e),Q_={attribute:!0,type:String,converter:Bp,reflect:!1,useDefault:!1,hasChanged:Sb};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),oa.litPropertyMetadata??(oa.litPropertyMetadata=new WeakMap);let za=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=Q_){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(e,i,t);s!==void 0&&YQ(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){const{get:s,set:r}=XQ(this.prototype,e)??{get(){return this[t]},set(a){this[t]=a}};return{get:s,set(a){const o=s==null?void 0:s.call(this);r==null||r.call(this,a),this.requestUpdate(e,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Q_}static _$Ei(){if(this.hasOwnProperty(Ou("elementProperties")))return;const e=ZQ(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Ou("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Ou("properties"))){const t=this.properties,i=[...KQ(t),...JQ(t)];for(const s of i)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[i,s]of t)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[t,i]of this.elementProperties){const s=this._$Eu(t,i);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const s of i)t.unshift(U_(s))}else e!==void 0&&t.push(U_(e));return t}static _$Eu(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return $Q(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var i;return(i=t.hostConnected)==null?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var i;return(i=t.hostDisconnected)==null?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){var r;const i=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,i);if(s!==void 0&&i.reflect===!0){const a=(((r=i.converter)==null?void 0:r.toAttribute)!==void 0?i.converter:Bp).toAttribute(t,i.type);this._$Em=e,a==null?this.removeAttribute(s):this.setAttribute(s,a),this._$Em=null}}_$AK(e,t){var r,a;const i=this.constructor,s=i._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=i.getPropertyOptions(s),l=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)==null?void 0:r.fromAttribute)!==void 0?o.converter:Bp;this._$Em=s;const c=l.fromAttribute(t,o.type);this[s]=c??((a=this._$Ej)==null?void 0:a.get(s))??c,this._$Em=null}}requestUpdate(e,t,i){var s;if(e!==void 0){const r=this.constructor,a=this[e];if(i??(i=r.getPropertyOptions(e)),!((i.hasChanged??Sb)(a,t)||i.useDefault&&i.reflect&&a===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(r._$Eu(e,i))))return;this.C(e,t,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:s,wrapped:r},a){i&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,a??t??this[e]),r!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,a]of this._$Ep)this[r]=a;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[r,a]of s){const{wrapped:o}=a,l=this[r];o!==!0||this._$AL.has(r)||l===void 0||this.C(r,void 0,a,l)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(i=this._$EO)==null||i.forEach(s=>{var r;return(r=s.hostUpdate)==null?void 0:r.call(s)}),this.update(t)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(i=>{var s;return(s=i.hostUpdated)==null?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};za.elementStyles=[],za.shadowRootOptions={mode:"open"},za[Ou("elementProperties")]=new Map,za[Ou("finalized")]=new Map,Cg==null||Cg({ReactiveElement:za}),(oa.reactiveElementVersions??(oa.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tj={attribute:!0,type:String,converter:Bp,reflect:!1,hasChanged:Sb},nj=(n=tj,e,t)=>{const{kind:i,metadata:s}=t;let r=globalThis.litPropertyMetadata.get(s);if(r===void 0&&globalThis.litPropertyMetadata.set(s,r=new Map),i==="setter"&&((n=Object.create(n)).wrapped=!0),r.set(t.name,n),i==="accessor"){const{name:a}=t;return{set(o){const l=e.get.call(this);e.set.call(this,o),this.requestUpdate(a,l,n)},init(o){return o!==void 0&&this.C(a,void 0,n,o),o}}}if(i==="setter"){const{name:a}=t;return function(o){const l=this[a];e.call(this,o),this.requestUpdate(a,l,n)}}throw Error("Unsupported decorator location: "+i)};function De(n){return(e,t)=>typeof t=="object"?nj(n,e,t):((i,s,r)=>{const a=s.hasOwnProperty(r);return s.constructor.createProperty(r,i),a?Object.getOwnPropertyDescriptor(s,r):void 0})(n,e,t)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Sm="172",ij=0,j_=1,sj=2,yB=1,rj=2,nr=3,gs=0,In=1,yn=2,Ns=0,kl=1,V_=2,G_=3,H_=4,aj=5,Wa=100,oj=101,lj=102,cj=103,uj=104,dj=200,hj=201,fj=202,pj=203,zx=204,Wx=205,mj=206,gj=207,Aj=208,xj=209,yj=210,vj=211,bj=212,wj=213,Ej=214,$x=0,qx=1,Yx=2,Zl=3,Xx=4,Kx=5,Jx=6,Zx=7,vB=0,_j=1,Sj=2,Ds=0,bB=1,wB=2,EB=3,_B=4,Cj=5,SB=6,xd=7,z_="attached",Mj="detached",ec=300,po=301,tc=302,Np=303,ey=304,Cm=306,As=1e3,Jt=1001,mo=1002,un=1003,Gd=1004,qr=1005,nt=1006,ro=1007,Zn=1008,W_=1008,tn=1009,Cb=1010,Mb=1011,yd=1012,Mm=1013,fa=1014,Zt=1015,cn=1016,Ib=1017,Tb=1018,nc=1020,CB=35902,MB=1021,IB=1022,Pt=1023,TB=1024,RB=1025,Ul=1026,ic=1027,Yr=1028,Rb=1029,Za=1030,Bb=1031,Nb=1033,jf=33776,Qu=33777,Vf=33778,ju=33779,Dp=35840,ty=35841,Lp=35842,ny=35843,Pp=36196,Fp=37492,kp=37496,vd=37808,iy=37809,sy=37810,ry=37811,bd=37812,ay=37813,oy=37814,ly=37815,cy=37816,uy=37817,dy=37818,hy=37819,fy=37820,py=37821,Vu=36492,my=36494,Up=36495,BB=36283,gy=36284,Ay=36285,xy=36286,wd=2200,Ol=2201,Op=2202,sc=2300,rc=2301,Mg=2302,El=2400,_l=2401,Qp=2402,Db=2500,Ij=2501,Tj=0,NB=1,yy=2,Rj=3200,Bj=3201,DB=0,Nj=1,Ui="",Ct="srgb",It="srgb-linear",jp="linear",vt="srgb",So=7680,$_=519,Dj=512,Lj=513,Pj=514,LB=515,Fj=516,kj=517,Uj=518,Oj=519,vy=35044,q_="300 es",ur=2e3,Vp=2001;class xs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}}const Dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Y_=1234567;const Gu=Math.PI/180,ac=180/Math.PI;function hs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Dn[n&255]+Dn[n>>8&255]+Dn[n>>16&255]+Dn[n>>24&255]+"-"+Dn[e&255]+Dn[e>>8&255]+"-"+Dn[e>>16&15|64]+Dn[e>>24&255]+"-"+Dn[t&63|128]+Dn[t>>8&255]+"-"+Dn[t>>16&255]+Dn[t>>24&255]+Dn[i&255]+Dn[i>>8&255]+Dn[i>>16&255]+Dn[i>>24&255]).toLowerCase()}function Ye(n,e,t){return Math.max(e,Math.min(t,n))}function Lb(n,e){return(n%e+e)%e}function Qj(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function jj(n,e,t){return n!==e?(t-n)/(e-n):0}function Hu(n,e,t){return(1-t)*n+t*e}function Vj(n,e,t,i){return Hu(n,e,1-Math.exp(-t*i))}function Gj(n,e=1){return e-Math.abs(Lb(n,e*2)-e)}function Hj(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function zj(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Wj(n,e){return n+Math.floor(Math.random()*(e-n+1))}function $j(n,e){return n+Math.random()*(e-n)}function qj(n){return n*(.5-Math.random())}function Yj(n){n!==void 0&&(Y_=n);let e=Y_+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Xj(n){return n*Gu}function Kj(n){return n*ac}function Jj(n){return(n&n-1)===0&&n!==0}function Zj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function e5(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function t5(n,e,t,i,s){const r=Math.cos,a=Math.sin,o=r(t/2),l=a(t/2),c=r((e+i)/2),u=a((e+i)/2),d=r((e-i)/2),f=a((e-i)/2),p=r((i-e)/2),g=a((i-e)/2);switch(s){case"XYX":n.set(o*u,l*d,l*f,o*c);break;case"YZY":n.set(l*f,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*f,o*u,o*c);break;case"XZX":n.set(o*u,l*g,l*p,o*c);break;case"YXY":n.set(l*p,o*u,l*g,o*c);break;case"ZYZ":n.set(l*g,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function os(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Gp={DEG2RAD:Gu,RAD2DEG:ac,generateUUID:hs,clamp:Ye,euclideanModulo:Lb,mapLinear:Qj,inverseLerp:jj,lerp:Hu,damp:Vj,pingpong:Gj,smoothstep:Hj,smootherstep:zj,randInt:Wj,randFloat:$j,randFloatSpread:qj,seededRandom:Yj,degToRad:Xj,radToDeg:Kj,isPowerOfTwo:Jj,ceilPowerOfTwo:Zj,floorPowerOfTwo:e5,setQuaternionFromProperEuler:t5,normalize:At,denormalize:os};class Ge{constructor(e=0,t=0){Ge.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ye(this.x,e.x,t.x),this.y=Ye(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ye(this.x,e,t),this.y=Ye(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ye(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ye(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*s+e.x,this.y=r*s+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ve{constructor(e,t,i,s,r,a,o,l,c){Ve.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,a,o,l,c)}set(e,t,i,s,r,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=o,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],p=i[5],g=i[8],x=s[0],A=s[3],m=s[6],y=s[1],v=s[4],b=s[7],w=s[2],S=s[5],C=s[8];return r[0]=a*x+o*y+l*w,r[3]=a*A+o*v+l*S,r[6]=a*m+o*b+l*C,r[1]=c*x+u*y+d*w,r[4]=c*A+u*v+d*S,r[7]=c*m+u*b+d*C,r[2]=f*x+p*y+g*w,r[5]=f*A+p*v+g*S,r[8]=f*m+p*b+g*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*r*u+i*o*l+s*r*c-s*a*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,f=o*l-u*r,p=c*r-a*l,g=t*d+i*f+s*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return e[0]=d*x,e[1]=(s*c-u*i)*x,e[2]=(o*i-s*a)*x,e[3]=f*x,e[4]=(u*t-s*l)*x,e[5]=(s*r-o*t)*x,e[6]=p*x,e[7]=(i*l-c*t)*x,e[8]=(a*t-i*r)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,a,o){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-s*c,s*l,-s*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Ig.makeScale(e,t)),this}rotate(e){return this.premultiply(Ig.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ig.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Ig=new Ve;function PB(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Ed(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function n5(){const n=Ed("canvas");return n.style.display="block",n}const X_={};function il(n){n in X_||(X_[n]=!0,console.warn(n))}function i5(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}function s5(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function r5(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const K_=new Ve().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),J_=new Ve().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function a5(){const n={enabled:!0,workingColorSpace:It,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===vt&&(s.r=pr(s.r),s.g=pr(s.g),s.b=pr(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===vt&&(s.r=Ql(s.r),s.g=Ql(s.g),s.b=Ql(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ui?jp:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[It]:{primaries:e,whitePoint:i,transfer:jp,toXYZ:K_,fromXYZ:J_,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ct},outputColorSpaceConfig:{drawingBufferColorSpace:Ct}},[Ct]:{primaries:e,whitePoint:i,transfer:vt,toXYZ:K_,fromXYZ:J_,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ct}}}),n}const tt=a5();function pr(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ql(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Co;class o5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Co===void 0&&(Co=Ed("canvas")),Co.width=e.width,Co.height=e.height;const i=Co.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Co}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ed("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=pr(r[a]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(pr(t[i]/255)*255):t[i]=pr(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let l5=0;class Pb{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:l5++}),this.uuid=hs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(Tg(s[a].image)):r.push(Tg(s[a]))}else r=Tg(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function Tg(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?o5.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let c5=0,Ft=class Gf extends xs{constructor(e=Gf.DEFAULT_IMAGE,t=Gf.DEFAULT_MAPPING,i=Jt,s=Jt,r=nt,a=Zn,o=Pt,l=tn,c=Gf.DEFAULT_ANISOTROPY,u=Ui){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:c5++}),this.uuid=hs(),this.name="",this.source=new Pb(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ve,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ec)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case As:e.x=e.x-Math.floor(e.x);break;case Jt:e.x=e.x<0?0:1;break;case mo:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case As:e.y=e.y-Math.floor(e.y);break;case Jt:e.y=e.y<0?0:1;break;case mo:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Ft.DEFAULT_IMAGE=null;Ft.DEFAULT_MAPPING=ec;Ft.DEFAULT_ANISOTROPY=1;class dt{constructor(e=0,t=0,i=0,s=1){dt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*s+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*s+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*s+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*s+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],p=l[5],g=l[9],x=l[2],A=l[6],m=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-x)<.01&&Math.abs(g-A)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+x)<.1&&Math.abs(g+A)<.1&&Math.abs(c+p+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,b=(p+1)/2,w=(m+1)/2,S=(u+f)/4,C=(d+x)/4,M=(g+A)/4;return v>b&&v>w?v<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(v),s=S/i,r=C/i):b>w?b<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(b),i=S/s,r=M/s):w<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(w),i=C/r,s=M/r),this.set(i,s,r,t),this}let y=Math.sqrt((A-g)*(A-g)+(d-x)*(d-x)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(A-g)/y,this.y=(d-x)/y,this.z=(f-u)/y,this.w=Math.acos((c+p+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ye(this.x,e.x,t.x),this.y=Ye(this.y,e.y,t.y),this.z=Ye(this.z,e.z,t.z),this.w=Ye(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ye(this.x,e,t),this.y=Ye(this.y,e,t),this.z=Ye(this.z,e,t),this.w=Ye(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ye(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class u5 extends xs{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new dt(0,0,e,t),this.scissorTest=!1,this.viewport=new dt(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:nt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Ft(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Pb(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $i extends u5{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class FB extends Ft{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=un,this.minFilter=un,this.wrapR=Jt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kB extends Ft{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=un,this.minFilter=un,this.wrapR=Jt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ti{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,a,o){let l=i[s+0],c=i[s+1],u=i[s+2],d=i[s+3];const f=r[a+0],p=r[a+1],g=r[a+2],x=r[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=p,e[t+2]=g,e[t+3]=x;return}if(d!==x||l!==f||c!==p||u!==g){let A=1-o;const m=l*f+c*p+u*g+d*x,y=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){const w=Math.sqrt(v),S=Math.atan2(w,m*y);A=Math.sin(A*S)/w,o=Math.sin(o*S)/w}const b=o*y;if(l=l*A+f*b,c=c*A+p*b,u=u*A+g*b,d=d*A+x*b,A===1-o){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,s,r,a){const o=i[s],l=i[s+1],c=i[s+2],u=i[s+3],d=r[a],f=r[a+1],p=r[a+2],g=r[a+3];return e[t]=o*g+u*d+l*p-c*f,e[t+1]=l*g+u*f+c*d-o*p,e[t+2]=c*g+u*p+o*f-l*d,e[t+3]=u*g-o*d-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(s/2),d=o(r/2),f=l(i/2),p=l(s/2),g=l(r/2);switch(a){case"XYZ":this._x=f*u*d+c*p*g,this._y=c*p*d-f*u*g,this._z=c*u*g+f*p*d,this._w=c*u*d-f*p*g;break;case"YXZ":this._x=f*u*d+c*p*g,this._y=c*p*d-f*u*g,this._z=c*u*g-f*p*d,this._w=c*u*d+f*p*g;break;case"ZXY":this._x=f*u*d-c*p*g,this._y=c*p*d+f*u*g,this._z=c*u*g+f*p*d,this._w=c*u*d-f*p*g;break;case"ZYX":this._x=f*u*d-c*p*g,this._y=c*p*d+f*u*g,this._z=c*u*g-f*p*d,this._w=c*u*d+f*p*g;break;case"YZX":this._x=f*u*d+c*p*g,this._y=c*p*d+f*u*g,this._z=c*u*g-f*p*d,this._w=c*u*d-f*p*g;break;case"XZY":this._x=f*u*d-c*p*g,this._y=c*p*d-f*u*g,this._z=c*u*g+f*p*d,this._w=c*u*d+f*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+o+d;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(r-c)*p,this._z=(a-s)*p}else if(i>o&&i>d){const p=2*Math.sqrt(1+i-o-d);this._w=(u-l)/p,this._x=.25*p,this._y=(s+a)/p,this._z=(r+c)/p}else if(o>d){const p=2*Math.sqrt(1+o-i-d);this._w=(r-c)/p,this._x=(s+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-o);this._w=(a-s)/p,this._x=(r+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ye(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+s*c-r*l,this._y=s*u+a*l+r*o-i*c,this._z=r*u+a*c+i*l-s*o,this._w=a*u-i*o-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+i*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=s,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-t;return this._w=p*a+t*this._w,this._x=p*i+t*this._x,this._y=p*s+t*this._y,this._z=p*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=s*d+this._y*f,this._z=r*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class P{constructor(e=0,t=0,i=0){P.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Z_.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Z_.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*s-o*i),u=2*(o*t-r*s),d=2*(r*i-a*t);return this.x=t+l*c+a*d-o*u,this.y=i+l*u+o*c-r*d,this.z=s+l*d+r*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ye(this.x,e.x,t.x),this.y=Ye(this.y,e.y,t.y),this.z=Ye(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ye(this.x,e,t),this.y=Ye(this.y,e,t),this.z=Ye(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ye(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,a=t.x,o=t.y,l=t.z;return this.x=s*l-r*o,this.y=r*a-i*l,this.z=i*o-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Rg.copy(this).projectOnVector(e),this.sub(Rg)}reflect(e){return this.sub(Rg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ye(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Rg=new P,Z_=new ti;class Kn{constructor(e=new P(1/0,1/0,1/0),t=new P(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Zi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Zi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Zi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Zi):Zi.fromBufferAttribute(r,a),Zi.applyMatrix4(e.matrixWorld),this.expandByPoint(Zi);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),yh.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),yh.copy(i.boundingBox)),yh.applyMatrix4(e.matrixWorld),this.union(yh)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Zi),Zi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Uc),vh.subVectors(this.max,Uc),Mo.subVectors(e.a,Uc),Io.subVectors(e.b,Uc),To.subVectors(e.c,Uc),Mr.subVectors(Io,Mo),Ir.subVectors(To,Io),wa.subVectors(Mo,To);let t=[0,-Mr.z,Mr.y,0,-Ir.z,Ir.y,0,-wa.z,wa.y,Mr.z,0,-Mr.x,Ir.z,0,-Ir.x,wa.z,0,-wa.x,-Mr.y,Mr.x,0,-Ir.y,Ir.x,0,-wa.y,wa.x,0];return!Bg(t,Mo,Io,To,vh)||(t=[1,0,0,0,1,0,0,0,1],!Bg(t,Mo,Io,To,vh))?!1:(bh.crossVectors(Mr,Ir),t=[bh.x,bh.y,bh.z],Bg(t,Mo,Io,To,vh))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Gs=[new P,new P,new P,new P,new P,new P,new P,new P],Zi=new P,yh=new Kn,Mo=new P,Io=new P,To=new P,Mr=new P,Ir=new P,wa=new P,Uc=new P,vh=new P,bh=new P,Ea=new P;function Bg(n,e,t,i,s){for(let r=0,a=n.length-3;r<=a;r+=3){Ea.fromArray(n,r);const o=s.x*Math.abs(Ea.x)+s.y*Math.abs(Ea.y)+s.z*Math.abs(Ea.z),l=e.dot(Ea),c=t.dot(Ea),u=i.dot(Ea);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const d5=new Kn,Oc=new P,Ng=new P;class Yi{constructor(e=new P,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):d5.setFromPoints(e).getCenter(i);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Oc.subVectors(e,this.center);const t=Oc.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Oc,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ng.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Oc.copy(e.center).add(Ng)),this.expandByPoint(Oc.copy(e.center).sub(Ng))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Hs=new P,Dg=new P,wh=new P,Tr=new P,Lg=new P,Eh=new P,Pg=new P;class Hd{constructor(e=new P,t=new P(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Hs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Hs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Hs.copy(this.origin).addScaledVector(this.direction,t),Hs.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Dg.copy(e).add(t).multiplyScalar(.5),wh.copy(t).sub(e).normalize(),Tr.copy(this.origin).sub(Dg);const r=e.distanceTo(t)*.5,a=-this.direction.dot(wh),o=Tr.dot(this.direction),l=-Tr.dot(wh),c=Tr.lengthSq(),u=Math.abs(1-a*a);let d,f,p,g;if(u>0)if(d=a*l-o,f=a*o-l,g=r*u,d>=0)if(f>=-g)if(f<=g){const x=1/u;d*=x,f*=x,p=d*(d+a*f+2*o)+f*(a*d+f+2*l)+c}else f=r,d=Math.max(0,-(a*f+o)),p=-d*d+f*(f+2*l)+c;else f=-r,d=Math.max(0,-(a*f+o)),p=-d*d+f*(f+2*l)+c;else f<=-g?(d=Math.max(0,-(-a*r+o)),f=d>0?-r:Math.min(Math.max(-r,-l),r),p=-d*d+f*(f+2*l)+c):f<=g?(d=0,f=Math.min(Math.max(-r,-l),r),p=f*(f+2*l)+c):(d=Math.max(0,-(a*r+o)),f=d>0?r:Math.min(Math.max(-r,-l),r),p=-d*d+f*(f+2*l)+c);else f=a>0?-r:r,d=Math.max(0,-(a*f+o)),p=-d*d+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),s&&s.copy(Dg).addScaledVector(wh,f),p}intersectSphere(e,t){Hs.subVectors(e.center,this.origin);const i=Hs.dot(this.direction),s=Hs.dot(Hs)-i*i,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,s=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,s=(e.min.x-f.x)*c),u>=0?(r=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(r=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),i>a||r>s||((r>i||isNaN(i))&&(i=r),(a<s||isNaN(s))&&(s=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>s)||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,Hs)!==null}intersectTriangle(e,t,i,s,r){Lg.subVectors(t,e),Eh.subVectors(i,e),Pg.crossVectors(Lg,Eh);let a=this.direction.dot(Pg),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Tr.subVectors(this.origin,e);const l=o*this.direction.dot(Eh.crossVectors(Tr,Eh));if(l<0)return null;const c=o*this.direction.dot(Lg.cross(Tr));if(c<0||l+c>a)return null;const u=-o*Tr.dot(Pg);return u<0?null:this.at(u/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ke{constructor(e,t,i,s,r,a,o,l,c,u,d,f,p,g,x,A){ke.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,a,o,l,c,u,d,f,p,g,x,A)}set(e,t,i,s,r,a,o,l,c,u,d,f,p,g,x,A){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=s,m[1]=r,m[5]=a,m[9]=o,m[13]=l,m[2]=c,m[6]=u,m[10]=d,m[14]=f,m[3]=p,m[7]=g,m[11]=x,m[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ke().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Ro.setFromMatrixColumn(e,0).length(),r=1/Ro.setFromMatrixColumn(e,1).length(),a=1/Ro.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const f=a*u,p=a*d,g=o*u,x=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+g*c,t[5]=f-x*c,t[9]=-o*l,t[2]=x-f*c,t[6]=g+p*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,p=l*d,g=c*u,x=c*d;t[0]=f+x*o,t[4]=g*o-p,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=p*o-g,t[6]=x+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,p=l*d,g=c*u,x=c*d;t[0]=f-x*o,t[4]=-a*d,t[8]=g+p*o,t[1]=p+g*o,t[5]=a*u,t[9]=x-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,p=a*d,g=o*u,x=o*d;t[0]=l*u,t[4]=g*c-p,t[8]=f*c+x,t[1]=l*d,t[5]=x*c+f,t[9]=p*c-g,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,p=a*c,g=o*l,x=o*c;t[0]=l*u,t[4]=x-f*d,t[8]=g*d+p,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=p*d+g,t[10]=f-x*d}else if(e.order==="XZY"){const f=a*l,p=a*c,g=o*l,x=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+x,t[5]=a*u,t[9]=p*d-g,t[2]=g*d-p,t[6]=o*u,t[10]=x*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(h5,e,f5)}lookAt(e,t,i){const s=this.elements;return pi.subVectors(e,t),pi.lengthSq()===0&&(pi.z=1),pi.normalize(),Rr.crossVectors(i,pi),Rr.lengthSq()===0&&(Math.abs(i.z)===1?pi.x+=1e-4:pi.z+=1e-4,pi.normalize(),Rr.crossVectors(i,pi)),Rr.normalize(),_h.crossVectors(pi,Rr),s[0]=Rr.x,s[4]=_h.x,s[8]=pi.x,s[1]=Rr.y,s[5]=_h.y,s[9]=pi.y,s[2]=Rr.z,s[6]=_h.z,s[10]=pi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],p=i[13],g=i[2],x=i[6],A=i[10],m=i[14],y=i[3],v=i[7],b=i[11],w=i[15],S=s[0],C=s[4],M=s[8],_=s[12],E=s[1],R=s[5],L=s[9],F=s[13],U=s[2],z=s[6],V=s[10],G=s[14],D=s[3],W=s[7],K=s[11],ee=s[15];return r[0]=a*S+o*E+l*U+c*D,r[4]=a*C+o*R+l*z+c*W,r[8]=a*M+o*L+l*V+c*K,r[12]=a*_+o*F+l*G+c*ee,r[1]=u*S+d*E+f*U+p*D,r[5]=u*C+d*R+f*z+p*W,r[9]=u*M+d*L+f*V+p*K,r[13]=u*_+d*F+f*G+p*ee,r[2]=g*S+x*E+A*U+m*D,r[6]=g*C+x*R+A*z+m*W,r[10]=g*M+x*L+A*V+m*K,r[14]=g*_+x*F+A*G+m*ee,r[3]=y*S+v*E+b*U+w*D,r[7]=y*C+v*R+b*z+w*W,r[11]=y*M+v*L+b*V+w*K,r[15]=y*_+v*F+b*G+w*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],p=e[14],g=e[3],x=e[7],A=e[11],m=e[15];return g*(+r*l*d-s*c*d-r*o*f+i*c*f+s*o*p-i*l*p)+x*(+t*l*p-t*c*f+r*a*f-s*a*p+s*c*u-r*l*u)+A*(+t*c*d-t*o*p-r*a*d+i*a*p+r*o*u-i*c*u)+m*(-s*o*u-t*l*d+t*o*f+s*a*d-i*a*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],p=e[11],g=e[12],x=e[13],A=e[14],m=e[15],y=d*A*c-x*f*c+x*l*p-o*A*p-d*l*m+o*f*m,v=g*f*c-u*A*c-g*l*p+a*A*p+u*l*m-a*f*m,b=u*x*c-g*d*c+g*o*p-a*x*p-u*o*m+a*d*m,w=g*d*l-u*x*l-g*o*f+a*x*f+u*o*A-a*d*A,S=t*y+i*v+s*b+r*w;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=y*C,e[1]=(x*f*r-d*A*r-x*s*p+i*A*p+d*s*m-i*f*m)*C,e[2]=(o*A*r-x*l*r+x*s*c-i*A*c-o*s*m+i*l*m)*C,e[3]=(d*l*r-o*f*r-d*s*c+i*f*c+o*s*p-i*l*p)*C,e[4]=v*C,e[5]=(u*A*r-g*f*r+g*s*p-t*A*p-u*s*m+t*f*m)*C,e[6]=(g*l*r-a*A*r-g*s*c+t*A*c+a*s*m-t*l*m)*C,e[7]=(a*f*r-u*l*r+u*s*c-t*f*c-a*s*p+t*l*p)*C,e[8]=b*C,e[9]=(g*d*r-u*x*r-g*i*p+t*x*p+u*i*m-t*d*m)*C,e[10]=(a*x*r-g*o*r+g*i*c-t*x*c-a*i*m+t*o*m)*C,e[11]=(u*o*r-a*d*r-u*i*c+t*d*c+a*i*p-t*o*p)*C,e[12]=w*C,e[13]=(u*x*s-g*d*s+g*i*f-t*x*f-u*i*A+t*d*A)*C,e[14]=(g*o*s-a*x*s-g*i*l+t*x*l+a*i*A-t*o*A)*C,e[15]=(a*d*s-u*o*s+u*i*l-t*d*l-a*i*f+t*o*f)*C,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,a=e.x,o=e.y,l=e.z,c=r*a,u=r*o;return this.set(c*a+i,c*o-s*l,c*l+s*o,0,c*o+s*l,u*o+i,u*l-s*a,0,c*l-s*o,u*l+s*a,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,a){return this.set(1,i,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,a=t._y,o=t._z,l=t._w,c=r+r,u=a+a,d=o+o,f=r*c,p=r*u,g=r*d,x=a*u,A=a*d,m=o*d,y=l*c,v=l*u,b=l*d,w=i.x,S=i.y,C=i.z;return s[0]=(1-(x+m))*w,s[1]=(p+b)*w,s[2]=(g-v)*w,s[3]=0,s[4]=(p-b)*S,s[5]=(1-(f+m))*S,s[6]=(A+y)*S,s[7]=0,s[8]=(g+v)*C,s[9]=(A-y)*C,s[10]=(1-(f+x))*C,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Ro.set(s[0],s[1],s[2]).length();const a=Ro.set(s[4],s[5],s[6]).length(),o=Ro.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],es.copy(this);const c=1/r,u=1/a,d=1/o;return es.elements[0]*=c,es.elements[1]*=c,es.elements[2]*=c,es.elements[4]*=u,es.elements[5]*=u,es.elements[6]*=u,es.elements[8]*=d,es.elements[9]*=d,es.elements[10]*=d,t.setFromRotationMatrix(es),i.x=r,i.y=a,i.z=o,this}makePerspective(e,t,i,s,r,a,o=ur){const l=this.elements,c=2*r/(t-e),u=2*r/(i-s),d=(t+e)/(t-e),f=(i+s)/(i-s);let p,g;if(o===ur)p=-(a+r)/(a-r),g=-2*a*r/(a-r);else if(o===Vp)p=-a/(a-r),g=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,a,o=ur){const l=this.elements,c=1/(t-e),u=1/(i-s),d=1/(a-r),f=(t+e)*c,p=(i+s)*u;let g,x;if(o===ur)g=(a+r)*d,x=-2*d;else if(o===Vp)g=r*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=x,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ro=new P,es=new ke,h5=new P(0,0,0),f5=new P(1,1,1),Rr=new P,_h=new P,pi=new P,eS=new ke,tS=new ti;class qi{constructor(e=0,t=0,i=0,s=qi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],a=s[4],o=s[8],l=s[1],c=s[5],u=s[9],d=s[2],f=s[6],p=s[10];switch(t){case"XYZ":this._y=Math.asin(Ye(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ye(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ye(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-Ye(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Ye(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-Ye(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return eS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tS.setFromEuler(this),this.setFromQuaternion(tS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qi.DEFAULT_ORDER="XYZ";class Fb{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let p5=0;const nS=new P,Bo=new ti,zs=new ke,Sh=new P,Qc=new P,m5=new P,g5=new ti,iS=new P(1,0,0),sS=new P(0,1,0),rS=new P(0,0,1),aS={type:"added"},A5={type:"removed"},No={type:"childadded",child:null},Fg={type:"childremoved",child:null};class wt extends xs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:p5++}),this.uuid=hs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wt.DEFAULT_UP.clone();const e=new P,t=new qi,i=new ti,s=new P(1,1,1);function r(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ke},normalMatrix:{value:new Ve}}),this.matrix=new ke,this.matrixWorld=new ke,this.matrixAutoUpdate=wt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=wt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fb,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bo.setFromAxisAngle(e,t),this.quaternion.multiply(Bo),this}rotateOnWorldAxis(e,t){return Bo.setFromAxisAngle(e,t),this.quaternion.premultiply(Bo),this}rotateX(e){return this.rotateOnAxis(iS,e)}rotateY(e){return this.rotateOnAxis(sS,e)}rotateZ(e){return this.rotateOnAxis(rS,e)}translateOnAxis(e,t){return nS.copy(e).applyQuaternion(this.quaternion),this.position.add(nS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(iS,e)}translateY(e){return this.translateOnAxis(sS,e)}translateZ(e){return this.translateOnAxis(rS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Sh.copy(e):Sh.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Qc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zs.lookAt(Qc,Sh,this.up):zs.lookAt(Sh,Qc,this.up),this.quaternion.setFromRotationMatrix(zs),s&&(zs.extractRotation(s.matrixWorld),Bo.setFromRotationMatrix(zs),this.quaternion.premultiply(Bo.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(aS),No.child=e,this.dispatchEvent(No),No.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(A5),Fg.child=e,this.dispatchEvent(Fg),Fg.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zs.multiply(e.parent.matrixWorld)),e.applyMatrix4(zs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(aS),No.child=e,this.dispatchEvent(No),No.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qc,e,m5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qc,g5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(r(e.materials,this.material[l]));s.material=o}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];s.animations.push(r(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),f=a(e.skeletons),p=a(e.animations),g=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=s,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}wt.DEFAULT_UP=new P(0,1,0);wt.DEFAULT_MATRIX_AUTO_UPDATE=!0;wt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ts=new P,Ws=new P,kg=new P,$s=new P,Do=new P,Lo=new P,oS=new P,Ug=new P,Og=new P,Qg=new P,jg=new dt,Vg=new dt,Gg=new dt;class xi{constructor(e=new P,t=new P,i=new P){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),ts.subVectors(e,t),s.cross(ts);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){ts.subVectors(s,t),Ws.subVectors(i,t),kg.subVectors(e,t);const a=ts.dot(ts),o=ts.dot(Ws),l=ts.dot(kg),c=Ws.dot(Ws),u=Ws.dot(kg),d=a*c-o*o;if(d===0)return r.set(0,0,0),null;const f=1/d,p=(c*l-o*u)*f,g=(a*u-o*l)*f;return r.set(1-p-g,g,p)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,$s)===null?!1:$s.x>=0&&$s.y>=0&&$s.x+$s.y<=1}static getInterpolation(e,t,i,s,r,a,o,l){return this.getBarycoord(e,t,i,s,$s)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,$s.x),l.addScaledVector(a,$s.y),l.addScaledVector(o,$s.z),l)}static getInterpolatedAttribute(e,t,i,s,r,a){return jg.setScalar(0),Vg.setScalar(0),Gg.setScalar(0),jg.fromBufferAttribute(e,t),Vg.fromBufferAttribute(e,i),Gg.fromBufferAttribute(e,s),a.setScalar(0),a.addScaledVector(jg,r.x),a.addScaledVector(Vg,r.y),a.addScaledVector(Gg,r.z),a}static isFrontFacing(e,t,i,s){return ts.subVectors(i,t),Ws.subVectors(e,t),ts.cross(Ws).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ts.subVectors(this.c,this.b),Ws.subVectors(this.a,this.b),ts.cross(Ws).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return xi.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return xi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let a,o;Do.subVectors(s,i),Lo.subVectors(r,i),Ug.subVectors(e,i);const l=Do.dot(Ug),c=Lo.dot(Ug);if(l<=0&&c<=0)return t.copy(i);Og.subVectors(e,s);const u=Do.dot(Og),d=Lo.dot(Og);if(u>=0&&d<=u)return t.copy(s);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(Do,a);Qg.subVectors(e,r);const p=Do.dot(Qg),g=Lo.dot(Qg);if(g>=0&&p<=g)return t.copy(r);const x=p*c-l*g;if(x<=0&&c>=0&&g<=0)return o=c/(c-g),t.copy(i).addScaledVector(Lo,o);const A=u*g-p*d;if(A<=0&&d-u>=0&&p-g>=0)return oS.subVectors(r,s),o=(d-u)/(d-u+(p-g)),t.copy(s).addScaledVector(oS,o);const m=1/(A+x+f);return a=x*m,o=f*m,t.copy(i).addScaledVector(Do,a).addScaledVector(Lo,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const UB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Br={h:0,s:0,l:0},Ch={h:0,s:0,l:0};function Hg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Te{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ct){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,tt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=tt.workingColorSpace){return this.r=e,this.g=t,this.b=i,tt.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=tt.workingColorSpace){if(e=Lb(e,1),t=Ye(t,0,1),i=Ye(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,a=2*i-r;this.r=Hg(a,r,e+1/3),this.g=Hg(a,r,e),this.b=Hg(a,r,e-1/3)}return tt.toWorkingColorSpace(this,s),this}setStyle(e,t=Ct){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ct){const i=UB[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pr(e.r),this.g=pr(e.g),this.b=pr(e.b),this}copyLinearToSRGB(e){return this.r=Ql(e.r),this.g=Ql(e.g),this.b=Ql(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ct){return tt.fromWorkingColorSpace(Ln.copy(this),e),Math.round(Ye(Ln.r*255,0,255))*65536+Math.round(Ye(Ln.g*255,0,255))*256+Math.round(Ye(Ln.b*255,0,255))}getHexString(e=Ct){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=tt.workingColorSpace){tt.fromWorkingColorSpace(Ln.copy(this),t);const i=Ln.r,s=Ln.g,r=Ln.b,a=Math.max(i,s,r),o=Math.min(i,s,r);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(s-r)/d+(s<r?6:0);break;case s:l=(r-i)/d+2;break;case r:l=(i-s)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=tt.workingColorSpace){return tt.fromWorkingColorSpace(Ln.copy(this),t),e.r=Ln.r,e.g=Ln.g,e.b=Ln.b,e}getStyle(e=Ct){tt.fromWorkingColorSpace(Ln.copy(this),e);const t=Ln.r,i=Ln.g,s=Ln.b;return e!==Ct?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Br),this.setHSL(Br.h+e,Br.s+t,Br.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Br),e.getHSL(Ch);const i=Hu(Br.h,Ch.h,t),s=Hu(Br.s,Ch.s,t),r=Hu(Br.l,Ch.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ln=new Te;Te.NAMES=UB;let x5=0,fs=class extends xs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:x5++}),this.uuid=hs(),this.name="",this.type="Material",this.blending=kl,this.side=gs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zx,this.blendDst=Wx,this.blendEquation=Wa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Te(0,0,0),this.blendAlpha=0,this.depthFunc=Zl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=$_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=So,this.stencilZFail=So,this.stencilZPass=So,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==kl&&(i.blending=this.blending),this.side!==gs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==zx&&(i.blendSrc=this.blendSrc),this.blendDst!==Wx&&(i.blendDst=this.blendDst),this.blendEquation!==Wa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Zl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==$_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==So&&(i.stencilFail=this.stencilFail),this.stencilZFail!==So&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==So&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const a=[];for(const o in r){const l=r[o];delete l.metadata,a.push(l)}return a}if(t){const r=s(e.textures),a=s(e.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class Vi extends fs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qi,this.combine=vB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const or=y5();function y5(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,s[l]=24,s[l|256]=24):(i[l]=31744,i[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,r[l]=c|u}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:o}}function v5(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ye(n,-65504,65504),or.floatView[0]=n;const e=or.uint32View[0],t=e>>23&511;return or.baseTable[t]+((e&8388607)>>or.shiftTable[t])}function b5(n){const e=n>>10;return or.uint32View[0]=or.mantissaTable[or.offsetTable[e]+(n&1023)]+or.exponentTable[e],or.floatView[0]}const Mh={toHalfFloat:v5,fromHalfFloat:b5},rn=new P,Ih=new Ge;class kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=vy,this.updateRanges=[],this.gpuType=Zt,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Ih.fromBufferAttribute(this,t),Ih.applyMatrix3(e),this.setXY(t,Ih.x,Ih.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.applyMatrix3(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.applyMatrix4(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.applyNormalMatrix(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.transformDirection(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=os(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=At(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=os(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=os(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=os(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==vy&&(e.usage=this.usage),e}}class OB extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class QB extends kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Ei extends kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let w5=0;const Ni=new ke,zg=new wt,Po=new P,mi=new Kn,jc=new Kn,mn=new P;class hi extends xs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:w5++}),this.uuid=hs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(PB(e)?QB:OB)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new Ve().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ni.makeRotationFromQuaternion(e),this.applyMatrix4(Ni),this}rotateX(e){return Ni.makeRotationX(e),this.applyMatrix4(Ni),this}rotateY(e){return Ni.makeRotationY(e),this.applyMatrix4(Ni),this}rotateZ(e){return Ni.makeRotationZ(e),this.applyMatrix4(Ni),this}translate(e,t,i){return Ni.makeTranslation(e,t,i),this.applyMatrix4(Ni),this}scale(e,t,i){return Ni.makeScale(e,t,i),this.applyMatrix4(Ni),this}lookAt(e){return zg.lookAt(e),zg.updateMatrix(),this.applyMatrix4(zg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Po).negate(),this.translate(Po.x,Po.y,Po.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Ei(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Kn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new P(-1/0,-1/0,-1/0),new P(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];mi.setFromBufferAttribute(r),this.morphTargetsRelative?(mn.addVectors(this.boundingBox.min,mi.min),this.boundingBox.expandByPoint(mn),mn.addVectors(this.boundingBox.max,mi.max),this.boundingBox.expandByPoint(mn)):(this.boundingBox.expandByPoint(mi.min),this.boundingBox.expandByPoint(mi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new P,1/0);return}if(e){const i=this.boundingSphere.center;if(mi.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const o=t[r];jc.setFromBufferAttribute(o),this.morphTargetsRelative?(mn.addVectors(mi.min,jc.min),mi.expandByPoint(mn),mn.addVectors(mi.max,jc.max),mi.expandByPoint(mn)):(mi.expandByPoint(jc.min),mi.expandByPoint(jc.max))}mi.getCenter(i);let s=0;for(let r=0,a=e.count;r<a;r++)mn.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(mn));if(t)for(let r=0,a=t.length;r<a;r++){const o=t[r],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)mn.fromBufferAttribute(o,c),l&&(Po.fromBufferAttribute(e,c),mn.add(Po)),s=Math.max(s,i.distanceToSquared(mn))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kt(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let M=0;M<i.count;M++)o[M]=new P,l[M]=new P;const c=new P,u=new P,d=new P,f=new Ge,p=new Ge,g=new Ge,x=new P,A=new P;function m(M,_,E){c.fromBufferAttribute(i,M),u.fromBufferAttribute(i,_),d.fromBufferAttribute(i,E),f.fromBufferAttribute(r,M),p.fromBufferAttribute(r,_),g.fromBufferAttribute(r,E),u.sub(c),d.sub(c),p.sub(f),g.sub(f);const R=1/(p.x*g.y-g.x*p.y);isFinite(R)&&(x.copy(u).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(R),A.copy(d).multiplyScalar(p.x).addScaledVector(u,-g.x).multiplyScalar(R),o[M].add(x),o[_].add(x),o[E].add(x),l[M].add(A),l[_].add(A),l[E].add(A))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let M=0,_=y.length;M<_;++M){const E=y[M],R=E.start,L=E.count;for(let F=R,U=R+L;F<U;F+=3)m(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const v=new P,b=new P,w=new P,S=new P;function C(M){w.fromBufferAttribute(s,M),S.copy(w);const _=o[M];v.copy(_),v.sub(w.multiplyScalar(w.dot(_))).normalize(),b.crossVectors(S,_);const R=b.dot(l[M])<0?-1:1;a.setXYZW(M,v.x,v.y,v.z,R)}for(let M=0,_=y.length;M<_;++M){const E=y[M],R=E.start,L=E.count;for(let F=R,U=R+L;F<U;F+=3)C(e.getX(F+0)),C(e.getX(F+1)),C(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,p=i.count;f<p;f++)i.setXYZ(f,0,0,0);const s=new P,r=new P,a=new P,o=new P,l=new P,c=new P,u=new P,d=new P;if(e)for(let f=0,p=e.count;f<p;f+=3){const g=e.getX(f+0),x=e.getX(f+1),A=e.getX(f+2);s.fromBufferAttribute(t,g),r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,A),u.subVectors(a,r),d.subVectors(s,r),u.cross(d),o.fromBufferAttribute(i,g),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,A),o.add(u),l.add(u),c.add(u),i.setXYZ(g,o.x,o.y,o.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(A,c.x,c.y,c.z)}else for(let f=0,p=t.count;f<p;f+=3)s.fromBufferAttribute(t,f+0),r.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),u.subVectors(a,r),d.subVectors(s,r),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)mn.fromBufferAttribute(e,t),mn.normalize(),e.setXYZ(t,mn.x,mn.y,mn.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,f=new c.constructor(l.length*u);let p=0,g=0;for(let x=0,A=l.length;x<A;x++){o.isInterleavedBufferAttribute?p=l[x]*o.data.stride+o.offset:p=l[x]*u;for(let m=0;m<u;m++)f[g++]=c[p++]}return new kt(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new hi,i=this.index.array,s=this.attributes;for(const o in s){const l=s[o],c=e(l,i);t.setAttribute(o,c)}const r=this.morphAttributes;for(const o in r){const l=[],c=r[o];for(let u=0,d=c.length;u<d;u++){const f=c[u],p=e(f,i);l.push(p)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],d=r[c];for(let f=0,p=d.length;f<p;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const lS=new ke,_a=new Hd,Th=new Yi,cS=new P,Rh=new P,Bh=new P,Nh=new P,Wg=new P,Dh=new P,uS=new P,Lh=new P;class bt extends wt{constructor(e=new hi,t=new Vi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const o=this.morphTargetInfluences;if(r&&o){Dh.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=o[l],d=r[l];u!==0&&(Wg.fromBufferAttribute(d,e),a?Dh.addScaledVector(Wg,u):Dh.addScaledVector(Wg.sub(t),u))}t.add(Dh)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Th.copy(i.boundingSphere),Th.applyMatrix4(r),_a.copy(e.ray).recast(e.near),!(Th.containsPoint(_a.origin)===!1&&(_a.intersectSphere(Th,cS)===null||_a.origin.distanceToSquared(cS)>(e.far-e.near)**2))&&(lS.copy(r).invert(),_a.copy(e.ray).applyMatrix4(lS),!(i.boundingBox!==null&&_a.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,_a)))}_computeIntersections(e,t,i){let s;const r=this.geometry,a=this.material,o=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,d=r.attributes.normal,f=r.groups,p=r.drawRange;if(o!==null)if(Array.isArray(a))for(let g=0,x=f.length;g<x;g++){const A=f[g],m=a[A.materialIndex],y=Math.max(A.start,p.start),v=Math.min(o.count,Math.min(A.start+A.count,p.start+p.count));for(let b=y,w=v;b<w;b+=3){const S=o.getX(b),C=o.getX(b+1),M=o.getX(b+2);s=Ph(this,m,e,i,c,u,d,S,C,M),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const g=Math.max(0,p.start),x=Math.min(o.count,p.start+p.count);for(let A=g,m=x;A<m;A+=3){const y=o.getX(A),v=o.getX(A+1),b=o.getX(A+2);s=Ph(this,a,e,i,c,u,d,y,v,b),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(a))for(let g=0,x=f.length;g<x;g++){const A=f[g],m=a[A.materialIndex],y=Math.max(A.start,p.start),v=Math.min(l.count,Math.min(A.start+A.count,p.start+p.count));for(let b=y,w=v;b<w;b+=3){const S=b,C=b+1,M=b+2;s=Ph(this,m,e,i,c,u,d,S,C,M),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const g=Math.max(0,p.start),x=Math.min(l.count,p.start+p.count);for(let A=g,m=x;A<m;A+=3){const y=A,v=A+1,b=A+2;s=Ph(this,a,e,i,c,u,d,y,v,b),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function E5(n,e,t,i,s,r,a,o){let l;if(e.side===In?l=i.intersectTriangle(a,r,s,!0,o):l=i.intersectTriangle(s,r,a,e.side===gs,o),l===null)return null;Lh.copy(o),Lh.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Lh);return c<t.near||c>t.far?null:{distance:c,point:Lh.clone(),object:n}}function Ph(n,e,t,i,s,r,a,o,l,c){n.getVertexPosition(o,Rh),n.getVertexPosition(l,Bh),n.getVertexPosition(c,Nh);const u=E5(n,e,t,i,Rh,Bh,Nh,uS);if(u){const d=new P;xi.getBarycoord(uS,Rh,Bh,Nh,d),s&&(u.uv=xi.getInterpolatedAttribute(s,o,l,c,d,new Ge)),r&&(u.uv1=xi.getInterpolatedAttribute(r,o,l,c,d,new Ge)),a&&(u.normal=xi.getInterpolatedAttribute(a,o,l,c,d,new P),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a:o,b:l,c,normal:new P,materialIndex:0};xi.getNormal(Rh,Bh,Nh,f.normal),u.face=f,u.barycoord=d}return u}class _r extends hi{constructor(e=1,t=1,i=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const l=[],c=[],u=[],d=[];let f=0,p=0;g("z","y","x",-1,-1,i,t,e,a,r,0),g("z","y","x",1,-1,i,t,-e,a,r,1),g("x","z","y",1,1,e,i,t,s,a,2),g("x","z","y",1,-1,e,i,-t,s,a,3),g("x","y","z",1,-1,e,t,i,s,r,4),g("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new Ei(c,3)),this.setAttribute("normal",new Ei(u,3)),this.setAttribute("uv",new Ei(d,2));function g(x,A,m,y,v,b,w,S,C,M,_){const E=b/C,R=w/M,L=b/2,F=w/2,U=S/2,z=C+1,V=M+1;let G=0,D=0;const W=new P;for(let K=0;K<V;K++){const ee=K*R-F;for(let Q=0;Q<z;Q++){const ae=Q*E-L;W[x]=ae*y,W[A]=ee*v,W[m]=U,c.push(W.x,W.y,W.z),W[x]=0,W[A]=0,W[m]=S>0?1:-1,u.push(W.x,W.y,W.z),d.push(Q/C),d.push(1-K/M),G+=1}}for(let K=0;K<M;K++)for(let ee=0;ee<C;ee++){const Q=f+ee+z*K,ae=f+ee+z*(K+1),$=f+(ee+1)+z*(K+1),te=f+(ee+1)+z*K;l.push(Q,ae,te),l.push(ae,$,te),D+=6}o.addGroup(p,D,_),p+=D,f+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _r(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function oc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Wn(n){const e={};for(let t=0;t<n.length;t++){const i=oc(n[t]);for(const s in i)e[s]=i[s]}return e}function _5(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function jB(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:tt.workingColorSpace}const S5={clone:oc,merge:Wn};var C5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,M5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Si extends fs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=C5,this.fragmentShader=M5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=oc(e.uniforms),this.uniformsGroups=_5(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?t.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[s]={type:"m4",value:a.toArray()}:t.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class VB extends wt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ke,this.projectionMatrix=new ke,this.projectionMatrixInverse=new ke,this.coordinateSystem=ur}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Nr=new P,dS=new Ge,hS=new Ge;class Cn extends VB{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ac*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Gu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ac*2*Math.atan(Math.tan(Gu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Nr.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Nr.x,Nr.y).multiplyScalar(-e/Nr.z),Nr.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Nr.x,Nr.y).multiplyScalar(-e/Nr.z)}getViewSize(e,t){return this.getViewBounds(e,dS,hS),t.subVectors(hS,dS)}setViewOffset(e,t,i,s,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Gu*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;r+=a.offsetX*s/l,t-=a.offsetY*i/c,s*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fo=-90,ko=1;class by extends wt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Cn(Fo,ko,e,t);s.layers=this.layers,this.add(s);const r=new Cn(Fo,ko,e,t);r.layers=this.layers,this.add(r);const a=new Cn(Fo,ko,e,t);a.layers=this.layers,this.add(a);const o=new Cn(Fo,ko,e,t);o.layers=this.layers,this.add(o);const l=new Cn(Fo,ko,e,t);l.layers=this.layers,this.add(l);const c=new Cn(Fo,ko,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,a,o,l]=t;for(const c of t)this.remove(c);if(e===ur)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Vp)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,a),e.setRenderTarget(i,2,s),e.render(t,o),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,s),e.render(t,u),e.setRenderTarget(d,f,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class GB extends Ft{constructor(e,t,i,s,r,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:po,super(e,t,i,s,r,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class kb extends $i{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new GB(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:nt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new _r(5,5,5),r=new Si({name:"CubemapFromEquirect",uniforms:oc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:In,blending:Ns});r.uniforms.tEquirect.value=t;const a=new bt(s,r),o=t.minFilter;return t.minFilter===Zn&&(t.minFilter=nt),new by(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,s);e.setRenderTarget(r)}}class go extends wt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new qi,this.environmentIntensity=1,this.environmentRotation=new qi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class I5{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=vy,this.updateRanges=[],this.version=0,this.uuid=hs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Gn=new P;class Ub{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Gn.fromBufferAttribute(this,t),Gn.applyMatrix4(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Gn.fromBufferAttribute(this,t),Gn.applyNormalMatrix(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Gn.fromBufferAttribute(this,t),Gn.transformDirection(e),this.setXYZ(t,Gn.x,Gn.y,Gn.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=os(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=At(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=os(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=os(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=os(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=os(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),s=At(s,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ub(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const fS=new P,pS=new dt,mS=new dt,T5=new P,gS=new ke,Fh=new P,$g=new Yi,AS=new ke,qg=new Hd;class R5 extends bt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=z_,this.bindMatrix=new ke,this.bindMatrixInverse=new ke,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Kn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Fh),this.boundingBox.expandByPoint(Fh)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Yi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Fh),this.boundingSphere.expandByPoint(Fh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$g.copy(this.boundingSphere),$g.applyMatrix4(s),e.ray.intersectsSphere($g)!==!1&&(AS.copy(s).invert(),qg.copy(e.ray).applyMatrix4(AS),!(this.boundingBox!==null&&qg.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,qg)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new dt,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===z_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Mj?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;pS.fromBufferAttribute(s.attributes.skinIndex,e),mS.fromBufferAttribute(s.attributes.skinWeight,e),fS.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=mS.getComponent(r);if(a!==0){const o=pS.getComponent(r);gS.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(T5.copy(fS).applyMatrix4(gS),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class HB extends wt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zd extends Ft{constructor(e=null,t=1,i=1,s,r,a,o,l,c=un,u=un,d,f){super(null,a,o,l,c,u,s,r,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const xS=new ke,B5=new ke;class Ob{constructor(e=[],t=[]){this.uuid=hs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new ke)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ke;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const o=e[r]?e[r].matrixWorld:B5;xS.multiplyMatrices(o,t[r]),xS.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Ob(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new zd(t,e,e,Pt,Zt);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new HB),this.bones.push(a),this.boneInverses.push(new ke().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const a=t[s];e.bones.push(a.uuid);const o=i[s];e.boneInverses.push(o.toArray())}return e}}class wy extends kt{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Uo=new ke,yS=new ke,kh=[],vS=new Kn,N5=new ke,Vc=new bt,Gc=new Yi;class D5 extends bt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new wy(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,N5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Kn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Uo),vS.copy(e.boundingBox).applyMatrix4(Uo),this.boundingBox.union(vS)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Yi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Uo),Gc.copy(e.boundingSphere).applyMatrix4(Uo),this.boundingSphere.union(Gc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,a=e*r+1;for(let o=0;o<i.length;o++)i[o]=s[a+o]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Vc.geometry=this.geometry,Vc.material=this.material,Vc.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gc.copy(this.boundingSphere),Gc.applyMatrix4(i),e.ray.intersectsSphere(Gc)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Uo),yS.multiplyMatrices(i,Uo),Vc.matrixWorld=yS,Vc.raycast(e,kh);for(let a=0,o=kh.length;a<o;a++){const l=kh[a];l.instanceId=r,l.object=this,t.push(l)}kh.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new wy(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new zd(new Float32Array(s*this.count),s,this.count,Yr,Zt));const r=this.morphTexture.source.data.data;let a=0;for(let c=0;c<i.length;c++)a+=i[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=s*e;r[l]=o,r.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const Yg=new P,L5=new P,P5=new Ve;class Ua{constructor(e=new P(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Yg.subVectors(i,t).cross(L5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Yg),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||P5.getNormalMatrix(e),s=this.coplanarPoint(Yg).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Sa=new Yi,Uh=new P;class Qb{constructor(e=new Ua,t=new Ua,i=new Ua,s=new Ua,r=new Ua,a=new Ua){this.planes=[e,t,i,s,r,a]}set(e,t,i,s,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ur){const i=this.planes,s=e.elements,r=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],d=s[6],f=s[7],p=s[8],g=s[9],x=s[10],A=s[11],m=s[12],y=s[13],v=s[14],b=s[15];if(i[0].setComponents(l-r,f-c,A-p,b-m).normalize(),i[1].setComponents(l+r,f+c,A+p,b+m).normalize(),i[2].setComponents(l+a,f+u,A+g,b+y).normalize(),i[3].setComponents(l-a,f-u,A-g,b-y).normalize(),i[4].setComponents(l-o,f-d,A-x,b-v).normalize(),t===ur)i[5].setComponents(l+o,f+d,A+x,b+v).normalize();else if(t===Vp)i[5].setComponents(o,d,x,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Sa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Sa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Sa)}intersectsSprite(e){return Sa.center.set(0,0,0),Sa.radius=.7071067811865476,Sa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Sa)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Uh.x=s.normal.x>0?e.max.x:e.min.x,Uh.y=s.normal.y>0?e.max.y:e.min.y,Uh.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Uh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class zB extends fs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Te(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Hp=new P,zp=new P,bS=new ke,Hc=new Hd,Oh=new Yi,Xg=new P,wS=new P;class _d extends wt{constructor(e=new hi,t=new zB){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)Hp.fromBufferAttribute(t,s-1),zp.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=Hp.distanceTo(zp);e.setAttribute("lineDistance",new Ei(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Oh.copy(i.boundingSphere),Oh.applyMatrix4(s),Oh.radius+=r,e.ray.intersectsSphere(Oh)===!1)return;bS.copy(s).invert(),Hc.copy(e.ray).applyMatrix4(bS);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=i.index,f=i.attributes.position;if(u!==null){const p=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let x=p,A=g-1;x<A;x+=c){const m=u.getX(x),y=u.getX(x+1),v=Qh(this,e,Hc,l,m,y);v&&t.push(v)}if(this.isLineLoop){const x=u.getX(g-1),A=u.getX(p),m=Qh(this,e,Hc,l,x,A);m&&t.push(m)}}else{const p=Math.max(0,a.start),g=Math.min(f.count,a.start+a.count);for(let x=p,A=g-1;x<A;x+=c){const m=Qh(this,e,Hc,l,x,x+1);m&&t.push(m)}if(this.isLineLoop){const x=Qh(this,e,Hc,l,g-1,p);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function Qh(n,e,t,i,s,r){const a=n.geometry.attributes.position;if(Hp.fromBufferAttribute(a,s),zp.fromBufferAttribute(a,r),t.distanceSqToSegment(Hp,zp,Xg,wS)>i)return;Xg.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Xg);if(!(l<e.near||l>e.far))return{distance:l,point:wS.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const ES=new P,_S=new P;class F5 extends _d{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)ES.fromBufferAttribute(t,s),_S.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+ES.distanceTo(_S);e.setAttribute("lineDistance",new Ei(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class k5 extends _d{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class WB extends fs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const SS=new ke,Ey=new Hd,jh=new Yi,Vh=new P;class U5 extends wt{constructor(e=new hi,t=new WB){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),jh.copy(i.boundingSphere),jh.applyMatrix4(s),jh.radius+=r,e.ray.intersectsSphere(jh)===!1)return;SS.copy(s).invert(),Ey.copy(e.ray).applyMatrix4(SS);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,d=i.attributes.position;if(c!==null){const f=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let g=f,x=p;g<x;g++){const A=c.getX(g);Vh.fromBufferAttribute(d,A),CS(Vh,A,l,s,e,t,this)}}else{const f=Math.max(0,a.start),p=Math.min(d.count,a.start+a.count);for(let g=f,x=p;g<x;g++)Vh.fromBufferAttribute(d,g),CS(Vh,g,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function CS(n,e,t,i,s,r,a){const o=Ey.distanceSqToPoint(n);if(o<t){const l=new P;Ey.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class Xr extends wt{constructor(){super(),this.isGroup=!0,this.type="Group"}}class O5 extends Ft{constructor(e,t,i,s,r,a,o,l,c){super(e,t,i,s,r,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:nt,this.magFilter=r!==void 0?r:nt,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ao extends Ft{constructor(e,t,i,s,r,a,o,l,c,u,d,f){super(null,a,o,l,c,u,s,r,d,f),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Q5 extends ao{constructor(e,t,i,s,r,a){super(e,t,i,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Jt,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class j5 extends ao{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,po),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class V5 extends Ft{constructor(e,t,i,s,r,a,o,l,c){super(e,t,i,s,r,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $B extends Ft{constructor(e,t,i,s,r,a,o,l,c,u=Ul){if(u!==Ul&&u!==ic)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Ul&&(i=fa),i===void 0&&u===ic&&(i=nc),super(null,s,r,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:un,this.minFilter=l!==void 0?l:un,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Sr extends hi{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,a=t/2,o=Math.floor(i),l=Math.floor(s),c=o+1,u=l+1,d=e/o,f=t/l,p=[],g=[],x=[],A=[];for(let m=0;m<u;m++){const y=m*f-a;for(let v=0;v<c;v++){const b=v*d-r;g.push(b,-y,0),x.push(0,0,1),A.push(v/o),A.push(1-m/l)}}for(let m=0;m<l;m++)for(let y=0;y<o;y++){const v=y+c*m,b=y+c*(m+1),w=y+1+c*(m+1),S=y+1+c*m;p.push(v,b,S),p.push(b,w,S)}this.setIndex(p),this.setAttribute("position",new Ei(g,3)),this.setAttribute("normal",new Ei(x,3)),this.setAttribute("uv",new Ei(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sr(e.width,e.height,e.widthSegments,e.heightSegments)}}class jb extends hi{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new P,f=new P,p=[],g=[],x=[],A=[];for(let m=0;m<=i;m++){const y=[],v=m/i;let b=0;m===0&&a===0?b=.5/t:m===i&&l===Math.PI&&(b=-.5/t);for(let w=0;w<=t;w++){const S=w/t;d.x=-e*Math.cos(s+S*r)*Math.sin(a+v*o),d.y=e*Math.cos(a+v*o),d.z=e*Math.sin(s+S*r)*Math.sin(a+v*o),g.push(d.x,d.y,d.z),f.copy(d).normalize(),x.push(f.x,f.y,f.z),A.push(S+b,1-v),y.push(c++)}u.push(y)}for(let m=0;m<i;m++)for(let y=0;y<t;y++){const v=u[m][y+1],b=u[m][y],w=u[m+1][y],S=u[m+1][y+1];(m!==0||a>0)&&p.push(v,b,S),(m!==i-1||l<Math.PI)&&p.push(b,w,S)}this.setIndex(p),this.setAttribute("position",new Ei(g,3)),this.setAttribute("normal",new Ei(x,3)),this.setAttribute("uv",new Ei(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Sd extends fs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Te(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=DB,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new qi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Os extends Sd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ye(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Te(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Te(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Te(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class qB extends fs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Rj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class G5 extends fs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Gh(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function H5(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function z5(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function MS(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,a=0;a!==i;++r){const o=t[r]*e;for(let l=0;l!==e;++l)s[a++]=n[o+l]}return s}function YB(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let a=r[i];if(a!==void 0)if(Array.isArray(a))do a=r[i],a!==void 0&&(e.push(r.time),t.push.apply(t,a)),r=n[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[i],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do a=r[i],a!==void 0&&(e.push(r.time),t.push(a)),r=n[s++];while(r!==void 0)}class Wd{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let a;n:{i:if(!(e<s)){for(let o=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=s,s=t[++i],e<s)break t}a=t.length;break n}if(!(e>=r)){const o=t[1];e<o&&(i=2,r=o);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let a=0;a!==s;++a)t[a]=i[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class W5 extends Wd{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:El,endingEnd:El}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,a=e+1,o=s[r],l=s[a];if(o===void 0)switch(this.getSettings_().endingStart){case _l:r=e,o=2*t-i;break;case Qp:r=s.length-2,o=t+s[r]-s[r+1];break;default:r=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case _l:a=e,l=2*i-t;break;case Qp:a=1,l=i+s[1]-s[0];break;default:a=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-i),this._offsetPrev=r*u,this._offsetNext=a*u}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,p=this._weightNext,g=(i-t)/(s-t),x=g*g,A=x*g,m=-f*A+2*f*x-f*g,y=(1+f)*A+(-1.5-2*f)*x+(-.5+f)*g+1,v=(-1-p)*A+(1.5+p)*x+.5*g,b=p*A-p*x;for(let w=0;w!==o;++w)r[w]=m*a[u+w]+y*a[c+w]+v*a[l+w]+b*a[d+w];return r}}class XB extends Wd{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-t)/(s-t),d=1-u;for(let f=0;f!==o;++f)r[f]=a[c+f]*d+a[l+f]*u;return r}}class $5 extends Wd{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Qs{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gh(t,this.TimeBufferType),this.values=Gh(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Gh(e.times,Array),values:Gh(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new $5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new XB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new W5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sc:t=this.InterpolantFactoryMethodDiscrete;break;case rc:t=this.InterpolantFactoryMethodLinear;break;case Mg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sc;case this.InterpolantFactoryMethodLinear:return rc;case this.InterpolantFactoryMethodSmooth:return Mg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,a=s-1;for(;r!==s&&i[r]<e;)++r;for(;a!==-1&&i[a]>t;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const o=this.getValueSize();this.times=i.slice(r,a),this.values=this.values.slice(r*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==r;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(s!==void 0&&H5(s))for(let o=0,l=s.length;o!==l;++o){const c=s[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Mg,r=e.length-1;let a=1;for(let o=1;o<r;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(s)l=!0;else{const d=o*i,f=d-i,p=d+i;for(let g=0;g!==i;++g){const x=t[d+g];if(x!==t[f+g]||x!==t[p+g]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*i,f=a*i;for(let p=0;p!==i;++p)t[f+p]=t[d+p]}++a}}if(r>0){e[a]=e[r];for(let o=r*i,l=a*i,c=0;c!==i;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Qs.prototype.TimeBufferType=Float32Array;Qs.prototype.ValueBufferType=Float32Array;Qs.prototype.DefaultInterpolation=rc;class wc extends Qs{constructor(e,t,i){super(e,t,i)}}wc.prototype.ValueTypeName="bool";wc.prototype.ValueBufferType=Array;wc.prototype.DefaultInterpolation=sc;wc.prototype.InterpolantFactoryMethodLinear=void 0;wc.prototype.InterpolantFactoryMethodSmooth=void 0;class KB extends Qs{}KB.prototype.ValueTypeName="color";class lc extends Qs{}lc.prototype.ValueTypeName="number";class q5 extends Wd{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(s-t);let c=e*o;for(let u=c+o;c!==u;c+=4)ti.slerpFlat(r,0,a,c-o,a,c,l);return r}}class cc extends Qs{InterpolantFactoryMethodLinear(e){return new q5(this.times,this.values,this.getValueSize(),e)}}cc.prototype.ValueTypeName="quaternion";cc.prototype.InterpolantFactoryMethodSmooth=void 0;class Ec extends Qs{constructor(e,t,i){super(e,t,i)}}Ec.prototype.ValueTypeName="string";Ec.prototype.ValueBufferType=Array;Ec.prototype.DefaultInterpolation=sc;Ec.prototype.InterpolantFactoryMethodLinear=void 0;Ec.prototype.InterpolantFactoryMethodSmooth=void 0;class uc extends Qs{}uc.prototype.ValueTypeName="vector";class _y{constructor(e="",t=-1,i=[],s=Db){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=hs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(X5(i[a]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=i.length;r!==a;++r)t.push(Qs.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,a=[];for(let o=0;o<r;o++){let l=[],c=[];l.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);const u=z5(l);l=MS(l,1,u),c=MS(c,1,u),!s&&l[0]===0&&(l.push(r),c.push(c[0])),a.push(new lc(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(r);if(u&&u.length>1){const d=u[1];let f=s[d];f||(s[d]=f=[]),f.push(c)}}const a=[];for(const o in s)a.push(this.CreateFromMorphTargetSequence(o,s[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,p,g,x){if(p.length!==0){const A=[],m=[];YB(p,A,m,g),A.length!==0&&x.push(new d(f,A,m))}},s=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let x=0;x<f[g].morphTargets.length;x++)p[f[g].morphTargets[x]]=-1;for(const x in p){const A=[],m=[];for(let y=0;y!==f[g].morphTargets.length;++y){const v=f[g];A.push(v.time),m.push(v.morphTarget===x?1:0)}s.push(new lc(".morphTargetInfluence["+x+"]",A,m))}l=p.length*a}else{const p=".bones["+t[d].name+"]";i(uc,p+".position",f,"pos",s),i(cc,p+".quaternion",f,"rot",s),i(uc,p+".scale",f,"scl",s)}}return s.length===0?null:new this(r,l,s,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Y5(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lc;case"vector":case"vector2":case"vector3":case"vector4":return uc;case"color":return KB;case"quaternion":return cc;case"bool":case"boolean":return wc;case"string":return Ec}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function X5(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Y5(n.type);if(n.times===void 0){const t=[],i=[];YB(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Kr={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class JB{constructor(e,t,i){const s=this;let r=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,r===!1&&s.onStart!==void 0&&s.onStart(u,a,o),r=!0},this.itemEnd=function(u){a++,s.onProgress!==void 0&&s.onProgress(u,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const p=c[d],g=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return g}return null}}}const K5=new JB;class js{constructor(e){this.manager=e!==void 0?e:K5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}js.DEFAULT_MATERIAL_NAME="__DEFAULT";const qs={};class J5 extends Error{constructor(e,t){super(e),this.response=t}}class mr extends js{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Kr.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(qs[e]!==void 0){qs[e].push({onLoad:t,onProgress:i,onError:s});return}qs[e]=[],qs[e].push({onLoad:t,onProgress:i,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=qs[e],d=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=f?parseInt(f):0,g=p!==0;let x=0;const A=new ReadableStream({start(m){y();function y(){d.read().then(({done:v,value:b})=>{if(v)m.close();else{x+=b.byteLength;const w=new ProgressEvent("progress",{lengthComputable:g,loaded:x,total:p});for(let S=0,C=u.length;S<C;S++){const M=u[S];M.onProgress&&M.onProgress(w)}m.enqueue(b),y()}},v=>{m.error(v)})}}});return new Response(A)}else throw new J5(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,p=new TextDecoder(f);return c.arrayBuffer().then(g=>p.decode(g))}}}).then(c=>{Kr.add(e,c);const u=qs[e];delete qs[e];for(let d=0,f=u.length;d<f;d++){const p=u[d];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=qs[e];if(u===void 0)throw this.manager.itemError(e),c;delete qs[e];for(let d=0,f=u.length;d<f;d++){const p=u[d];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Z5 extends js{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Kr.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const o=Ed("img");function l(){u(),Kr.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(d){u(),s&&s(d),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}class e6 extends js{constructor(e){super(e)}load(e,t,i,s){const r=this,a=new zd,o=new mr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(l){let c;try{c=r.parse(l)}catch(u){if(s!==void 0)s(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Jt,a.wrapT=c.wrapT!==void 0?c.wrapT:Jt,a.magFilter=c.magFilter!==void 0?c.magFilter:nt,a.minFilter=c.minFilter!==void 0?c.minFilter:nt,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=Zn),c.mipmapCount===1&&(a.minFilter=nt),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},i,s),a}}class ZB extends js{constructor(e){super(e)}load(e,t,i,s){const r=new Ft,a=new Z5(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){r.image=o,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Im extends wt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Te(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const Kg=new ke,IS=new P,TS=new P;class Vb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new ke,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Qb,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;IS.setFromMatrixPosition(e.matrixWorld),t.position.copy(IS),TS.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(TS),t.updateMatrixWorld(),Kg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kg),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Kg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class t6 extends Vb{constructor(){super(new Cn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=ac*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class n6 extends Im{constructor(e,t,i=0,s=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(wt.DEFAULT_UP),this.updateMatrix(),this.target=new wt,this.distance=i,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new t6}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const RS=new ke,zc=new P,Jg=new P;class i6 extends Vb{constructor(){super(new Cn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new dt(2,1,1,1),new dt(0,1,1,1),new dt(3,1,1,1),new dt(1,1,1,1),new dt(3,0,1,1),new dt(1,0,1,1)],this._cubeDirections=[new P(1,0,0),new P(-1,0,0),new P(0,0,1),new P(0,0,-1),new P(0,1,0),new P(0,-1,0)],this._cubeUps=[new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,0,1),new P(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),zc.setFromMatrixPosition(e.matrixWorld),i.position.copy(zc),Jg.copy(i.position),Jg.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Jg),i.updateMatrixWorld(),s.makeTranslation(-zc.x,-zc.y,-zc.z),RS.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RS)}}class eN extends Im{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new i6}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _c extends VB{constructor(e=-1,t=1,i=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,a=i+e,o=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,a=r+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class s6 extends Vb{constructor(){super(new _c(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class tN extends Im{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(wt.DEFAULT_UP),this.updateMatrix(),this.target=new wt,this.shadow=new s6}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class r6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new P)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*s),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*s)),t.addScaledVector(a[5],1.092548*(s*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(i*r)),t.addScaledVector(a[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*s),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*s),t.addScaledVector(a[5],2*.429043*s*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*i*r),t.addScaledVector(a[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class a6 extends Im{constructor(e=new r6,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zu{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class o6 extends js{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Kr.get(e);if(a!==void 0){if(r.manager.itemStart(e),a.then){a.then(c=>{t&&t(c),r.manager.itemEnd(e)}).catch(c=>{s&&s(c)});return}return setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){return Kr.add(e,c),t&&t(c),r.manager.itemEnd(e),c}).catch(function(c){s&&s(c),Kr.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Kr.add(e,l),r.manager.itemStart(e)}}class l6 extends Cn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class c6{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,a;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==s;++o)i[r+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,r,0,o,s)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(i,s,l,1-r,t)}a>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){o.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,a=s;r!==a;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let a=0;a!==r;++a)e[t+a]=e[i+a]}_slerp(e,t,i,s){ti.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const a=this._workIndex*r;ti.multiplyQuaternionsFlat(e,a,e,t,e,i),ti.slerpFlat(e,t,e,t,e,a,s)}_lerp(e,t,i,s,r){const a=1-s;for(let o=0;o!==r;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*s}}_lerpAdditive(e,t,i,s,r){for(let a=0;a!==r;++a){const o=t+a;e[o]=e[o]+e[i+a]*s}}}const Gb="\\[\\]\\.:\\/",u6=new RegExp("["+Gb+"]","g"),Hb="[^"+Gb+"]",d6="[^"+Gb.replace("\\.","")+"]",h6=/((?:WC+[\/:])*)/.source.replace("WC",Hb),f6=/(WCOD+)?/.source.replace("WCOD",d6),p6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Hb),m6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Hb),g6=new RegExp("^"+h6+f6+p6+m6+"$"),A6=["material","materials","bones","map"];class x6{constructor(e,t,i){const s=i||at.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class at{constructor(e,t,i){this.path=t,this.parsedPath=i||at.parseTrackName(t),this.node=at.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new at.Composite(e,t,i):new at(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(u6,"")}static parseTrackName(e){const t=g6.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);A6.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let a=0;a<r.length;a++){const o=r[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=at.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[s];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}at.Composite=x6;at.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};at.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};at.prototype.GetterByBindingType=[at.prototype._getValue_direct,at.prototype._getValue_array,at.prototype._getValue_arrayElement,at.prototype._getValue_toArray];at.prototype.SetterByBindingTypeAndVersioning=[[at.prototype._setValue_direct,at.prototype._setValue_direct_setNeedsUpdate,at.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[at.prototype._setValue_array,at.prototype._setValue_array_setNeedsUpdate,at.prototype._setValue_array_setMatrixWorldNeedsUpdate],[at.prototype._setValue_arrayElement,at.prototype._setValue_arrayElement_setNeedsUpdate,at.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[at.prototype._setValue_fromArray,at.prototype._setValue_fromArray_setNeedsUpdate,at.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class y6{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,a=r.length,o=new Array(a),l={endingStart:El,endingEnd:El};for(let c=0;c!==a;++c){const u=r[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ol,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,a=r/s,o=s/r;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=s._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=r,l[1]=r+i,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Ij:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case Db:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(s,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const a=i===Op;if(e===0)return r===-1?s:a&&(r&1)===1?t-s:s;if(i===wd){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=t||s<0){const o=Math.floor(s/t);s-=t*o,r+=Math.abs(o);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=s;if(a&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=_l,s.endingEnd=_l):(e?s.endingStart=this.zeroSlopeAtStart?_l:El:s.endingStart=Qp,t?s.endingEnd=this.zeroSlopeAtEnd?_l:El:s.endingEnd=Qp)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,l[0]=t,o[1]=r+e,l[1]=i,this}}const v6=new Float32Array(1);class b6 extends xs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==r;++d){const f=s[d],p=f.name;let g=u[p];if(g!==void 0)++g.referenceCount,a[d]=g;else{if(g=a[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;g=new c6(at.create(i,p,x),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),a[d]=g}o[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[t];a===void 0&&(a={},s[t]=a),a[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,o=a[s],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[r],Object.keys(o).length===0&&delete a[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new XB(new Float32Array(2),new Float32Array(2),1,v6),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let a=typeof e=="string"?_y.findByName(s,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Db),l!==void 0){const d=l.actionByRoot[r];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new y6(this,a,t,i);return this._bindAction(u,c),this._addInactiveAction(u,o,r),u}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?_y.findByName(i,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(s,e,r,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const a=r.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const a in r){const o=r[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}const BS=new ke;class w6{constructor(e,t,i=0,s=1/0){this.ray=new Hd(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new Fb,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return BS.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(BS),this}intersectObject(e,t=!0,i=[]){return Sy(e,this,i,t),i.sort(NS),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)Sy(e[s],this,i,t);return i.sort(NS),i}}function NS(n,e){return n.distance-e.distance}function Sy(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let a=0,o=r.length;a<o;a++)Sy(r[a],e,t,!0)}}class Hf{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ye(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ye(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function DS(n,e,t,i){const s=E6(i);switch(t){case MB:return n*e;case TB:return n*e;case RB:return n*e*2;case Yr:return n*e/s.components*s.byteLength;case Rb:return n*e/s.components*s.byteLength;case Za:return n*e*2/s.components*s.byteLength;case Bb:return n*e*2/s.components*s.byteLength;case IB:return n*e*3/s.components*s.byteLength;case Pt:return n*e*4/s.components*s.byteLength;case Nb:return n*e*4/s.components*s.byteLength;case jf:case Qu:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Vf:case ju:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ty:case ny:return Math.max(n,16)*Math.max(e,8)/4;case Dp:case Lp:return Math.max(n,8)*Math.max(e,8)/2;case Pp:case Fp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case kp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case vd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iy:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case sy:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ry:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case bd:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case ay:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case oy:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case ly:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case cy:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case uy:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case dy:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case hy:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case fy:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case py:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Vu:case my:case Up:return Math.ceil(n/4)*Math.ceil(e/4)*16;case BB:case gy:return Math.ceil(n/4)*Math.ceil(e/4)*8;case Ay:case xy:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function E6(n){switch(n){case tn:case Cb:return{byteLength:1,components:1};case yd:case Mb:case cn:return{byteLength:2,components:1};case Ib:case Tb:return{byteLength:2,components:4};case fa:case Mm:case Zt:return{byteLength:4,components:1};case CB:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Sm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Sm);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function nN(){let n=null,e=!1,t=null,i=null;function s(r,a){t(r,a),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function _6(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,d=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,o),d.length===0)n.bufferSubData(c,0,u);else{d.sort((p,g)=>p.start-g.start);let f=0;for(let p=1;p<d.length;p++){const g=d[f],x=d[p];x.start<=g.start+g.count+1?g.count=Math.max(g.count,x.start+x.count-g.start):(++f,d[f]=x)}d.length=f+1;for(let p=0,g=d.length;p<g;p++){const x=d[p];n.bufferSubData(c,x.start*u.BYTES_PER_ELEMENT,u,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:s,remove:r,update:a}}var S6=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,C6=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,M6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,I6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,T6=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,R6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,B6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,N6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,D6=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,L6=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,P6=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,F6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,k6=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,U6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,O6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Q6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,j6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,V6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,G6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,H6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,z6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,W6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,$6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,q6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Y6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,X6=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,K6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,J6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Z6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,e9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,t9="gl_FragColor = linearToOutputTexel( gl_FragColor );",n9=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,i9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,s9=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,r9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,a9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,o9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,l9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,c9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,u9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,d9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,h9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,f9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,p9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,m9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,g9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,A9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,x9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,y9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,v9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,b9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,w9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,E9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,S9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,C9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,M9=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,I9=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,T9=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,R9=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,B9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,N9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,D9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,L9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,P9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,F9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,k9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,U9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,O9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Q9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,j9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,V9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,G9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,H9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,z9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,W9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,q9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Y9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,X9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,K9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,J9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Z9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,eV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,nV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,sV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,aV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,oV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,dV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,hV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,AV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,xV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,yV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,EV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _V=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,BV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,NV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,DV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,LV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,PV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,OV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,GV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,WV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,YV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eG=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,iG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$e={alphahash_fragment:S6,alphahash_pars_fragment:C6,alphamap_fragment:M6,alphamap_pars_fragment:I6,alphatest_fragment:T6,alphatest_pars_fragment:R6,aomap_fragment:B6,aomap_pars_fragment:N6,batching_pars_vertex:D6,batching_vertex:L6,begin_vertex:P6,beginnormal_vertex:F6,bsdfs:k6,iridescence_fragment:U6,bumpmap_pars_fragment:O6,clipping_planes_fragment:Q6,clipping_planes_pars_fragment:j6,clipping_planes_pars_vertex:V6,clipping_planes_vertex:G6,color_fragment:H6,color_pars_fragment:z6,color_pars_vertex:W6,color_vertex:$6,common:q6,cube_uv_reflection_fragment:Y6,defaultnormal_vertex:X6,displacementmap_pars_vertex:K6,displacementmap_vertex:J6,emissivemap_fragment:Z6,emissivemap_pars_fragment:e9,colorspace_fragment:t9,colorspace_pars_fragment:n9,envmap_fragment:i9,envmap_common_pars_fragment:s9,envmap_pars_fragment:r9,envmap_pars_vertex:a9,envmap_physical_pars_fragment:A9,envmap_vertex:o9,fog_vertex:l9,fog_pars_vertex:c9,fog_fragment:u9,fog_pars_fragment:d9,gradientmap_pars_fragment:h9,lightmap_pars_fragment:f9,lights_lambert_fragment:p9,lights_lambert_pars_fragment:m9,lights_pars_begin:g9,lights_toon_fragment:x9,lights_toon_pars_fragment:y9,lights_phong_fragment:v9,lights_phong_pars_fragment:b9,lights_physical_fragment:w9,lights_physical_pars_fragment:E9,lights_fragment_begin:_9,lights_fragment_maps:S9,lights_fragment_end:C9,logdepthbuf_fragment:M9,logdepthbuf_pars_fragment:I9,logdepthbuf_pars_vertex:T9,logdepthbuf_vertex:R9,map_fragment:B9,map_pars_fragment:N9,map_particle_fragment:D9,map_particle_pars_fragment:L9,metalnessmap_fragment:P9,metalnessmap_pars_fragment:F9,morphinstance_vertex:k9,morphcolor_vertex:U9,morphnormal_vertex:O9,morphtarget_pars_vertex:Q9,morphtarget_vertex:j9,normal_fragment_begin:V9,normal_fragment_maps:G9,normal_pars_fragment:H9,normal_pars_vertex:z9,normal_vertex:W9,normalmap_pars_fragment:$9,clearcoat_normal_fragment_begin:q9,clearcoat_normal_fragment_maps:Y9,clearcoat_pars_fragment:X9,iridescence_pars_fragment:K9,opaque_fragment:J9,packing:Z9,premultiplied_alpha_fragment:eV,project_vertex:tV,dithering_fragment:nV,dithering_pars_fragment:iV,roughnessmap_fragment:sV,roughnessmap_pars_fragment:rV,shadowmap_pars_fragment:aV,shadowmap_pars_vertex:oV,shadowmap_vertex:lV,shadowmask_pars_fragment:cV,skinbase_vertex:uV,skinning_pars_vertex:dV,skinning_vertex:hV,skinnormal_vertex:fV,specularmap_fragment:pV,specularmap_pars_fragment:mV,tonemapping_fragment:gV,tonemapping_pars_fragment:AV,transmission_fragment:xV,transmission_pars_fragment:yV,uv_pars_fragment:vV,uv_pars_vertex:bV,uv_vertex:wV,worldpos_vertex:EV,background_vert:_V,background_frag:SV,backgroundCube_vert:CV,backgroundCube_frag:MV,cube_vert:IV,cube_frag:TV,depth_vert:RV,depth_frag:BV,distanceRGBA_vert:NV,distanceRGBA_frag:DV,equirect_vert:LV,equirect_frag:PV,linedashed_vert:FV,linedashed_frag:kV,meshbasic_vert:UV,meshbasic_frag:OV,meshlambert_vert:QV,meshlambert_frag:jV,meshmatcap_vert:VV,meshmatcap_frag:GV,meshnormal_vert:HV,meshnormal_frag:zV,meshphong_vert:WV,meshphong_frag:$V,meshphysical_vert:qV,meshphysical_frag:YV,meshtoon_vert:XV,meshtoon_frag:KV,points_vert:JV,points_frag:ZV,shadow_vert:eG,shadow_frag:tG,sprite_vert:nG,sprite_frag:iG},he={common:{diffuse:{value:new Te(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ve}},envmap:{envMap:{value:null},envMapRotation:{value:new Ve},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ve}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ve}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ve},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ve},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ve},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ve}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ve}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ve}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Te(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Te(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0},uvTransform:{value:new Ve}},sprite:{diffuse:{value:new Te(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}}},Es={basic:{uniforms:Wn([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.fog]),vertexShader:$e.meshbasic_vert,fragmentShader:$e.meshbasic_frag},lambert:{uniforms:Wn([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new Te(0)}}]),vertexShader:$e.meshlambert_vert,fragmentShader:$e.meshlambert_frag},phong:{uniforms:Wn([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new Te(0)},specular:{value:new Te(1118481)},shininess:{value:30}}]),vertexShader:$e.meshphong_vert,fragmentShader:$e.meshphong_frag},standard:{uniforms:Wn([he.common,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.roughnessmap,he.metalnessmap,he.fog,he.lights,{emissive:{value:new Te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$e.meshphysical_vert,fragmentShader:$e.meshphysical_frag},toon:{uniforms:Wn([he.common,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.gradientmap,he.fog,he.lights,{emissive:{value:new Te(0)}}]),vertexShader:$e.meshtoon_vert,fragmentShader:$e.meshtoon_frag},matcap:{uniforms:Wn([he.common,he.bumpmap,he.normalmap,he.displacementmap,he.fog,{matcap:{value:null}}]),vertexShader:$e.meshmatcap_vert,fragmentShader:$e.meshmatcap_frag},points:{uniforms:Wn([he.points,he.fog]),vertexShader:$e.points_vert,fragmentShader:$e.points_frag},dashed:{uniforms:Wn([he.common,he.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$e.linedashed_vert,fragmentShader:$e.linedashed_frag},depth:{uniforms:Wn([he.common,he.displacementmap]),vertexShader:$e.depth_vert,fragmentShader:$e.depth_frag},normal:{uniforms:Wn([he.common,he.bumpmap,he.normalmap,he.displacementmap,{opacity:{value:1}}]),vertexShader:$e.meshnormal_vert,fragmentShader:$e.meshnormal_frag},sprite:{uniforms:Wn([he.sprite,he.fog]),vertexShader:$e.sprite_vert,fragmentShader:$e.sprite_frag},background:{uniforms:{uvTransform:{value:new Ve},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$e.background_vert,fragmentShader:$e.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ve}},vertexShader:$e.backgroundCube_vert,fragmentShader:$e.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$e.cube_vert,fragmentShader:$e.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$e.equirect_vert,fragmentShader:$e.equirect_frag},distanceRGBA:{uniforms:Wn([he.common,he.displacementmap,{referencePosition:{value:new P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$e.distanceRGBA_vert,fragmentShader:$e.distanceRGBA_frag},shadow:{uniforms:Wn([he.lights,he.fog,{color:{value:new Te(0)},opacity:{value:1}}]),vertexShader:$e.shadow_vert,fragmentShader:$e.shadow_frag}};Es.physical={uniforms:Wn([Es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ve},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ve},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ve},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ve},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ve},sheen:{value:0},sheenColor:{value:new Te(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ve},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ve},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ve},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ve},attenuationDistance:{value:0},attenuationColor:{value:new Te(0)},specularColor:{value:new Te(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ve},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ve},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ve}}]),vertexShader:$e.meshphysical_vert,fragmentShader:$e.meshphysical_frag};const Hh={r:0,b:0,g:0},Ca=new qi,sG=new ke;function rG(n,e,t,i,s,r,a){const o=new Te(0);let l=r===!0?0:1,c,u,d=null,f=0,p=null;function g(v){let b=v.isScene===!0?v.background:null;return b&&b.isTexture&&(b=(v.backgroundBlurriness>0?t:e).get(b)),b}function x(v){let b=!1;const w=g(v);w===null?m(o,l):w&&w.isColor&&(m(w,1),b=!0);const S=n.xr.getEnvironmentBlendMode();S==="additive"?i.buffers.color.setClear(0,0,0,1,a):S==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||b)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function A(v,b){const w=g(b);w&&(w.isCubeTexture||w.mapping===Cm)?(u===void 0&&(u=new bt(new _r(1,1,1),new Si({name:"BackgroundCubeMaterial",uniforms:oc(Es.backgroundCube.uniforms),vertexShader:Es.backgroundCube.vertexShader,fragmentShader:Es.backgroundCube.fragmentShader,side:In,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,C,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),Ca.copy(b.backgroundRotation),Ca.x*=-1,Ca.y*=-1,Ca.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Ca.y*=-1,Ca.z*=-1),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(sG.makeRotationFromEuler(Ca)),u.material.toneMapped=tt.getTransfer(w.colorSpace)!==vt,(d!==w||f!==w.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,f=w.version,p=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new bt(new Sr(2,2),new Si({name:"BackgroundMaterial",uniforms:oc(Es.background.uniforms),vertexShader:Es.background.vertexShader,fragmentShader:Es.background.fragmentShader,side:gs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=tt.getTransfer(w.colorSpace)!==vt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||f!==w.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,d=w,f=w.version,p=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function m(v,b){v.getRGB(Hh,jB(n)),i.buffers.color.setClear(Hh.r,Hh.g,Hh.b,b,a)}function y(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(v,b=1){o.set(v),l=b,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,m(o,l)},render:x,addToRenderList:A,dispose:y}}function aG(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=f(null);let r=s,a=!1;function o(E,R,L,F,U){let z=!1;const V=d(F,L,R);r!==V&&(r=V,c(r.object)),z=p(E,F,L,U),z&&g(E,F,L,U),U!==null&&e.update(U,n.ELEMENT_ARRAY_BUFFER),(z||a)&&(a=!1,b(E,R,L,F),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(U).buffer))}function l(){return n.createVertexArray()}function c(E){return n.bindVertexArray(E)}function u(E){return n.deleteVertexArray(E)}function d(E,R,L){const F=L.wireframe===!0;let U=i[E.id];U===void 0&&(U={},i[E.id]=U);let z=U[R.id];z===void 0&&(z={},U[R.id]=z);let V=z[F];return V===void 0&&(V=f(l()),z[F]=V),V}function f(E){const R=[],L=[],F=[];for(let U=0;U<t;U++)R[U]=0,L[U]=0,F[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:L,attributeDivisors:F,object:E,attributes:{},index:null}}function p(E,R,L,F){const U=r.attributes,z=R.attributes;let V=0;const G=L.getAttributes();for(const D in G)if(G[D].location>=0){const K=U[D];let ee=z[D];if(ee===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(ee=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(ee=E.instanceColor)),K===void 0||K.attribute!==ee||ee&&K.data!==ee.data)return!0;V++}return r.attributesNum!==V||r.index!==F}function g(E,R,L,F){const U={},z=R.attributes;let V=0;const G=L.getAttributes();for(const D in G)if(G[D].location>=0){let K=z[D];K===void 0&&(D==="instanceMatrix"&&E.instanceMatrix&&(K=E.instanceMatrix),D==="instanceColor"&&E.instanceColor&&(K=E.instanceColor));const ee={};ee.attribute=K,K&&K.data&&(ee.data=K.data),U[D]=ee,V++}r.attributes=U,r.attributesNum=V,r.index=F}function x(){const E=r.newAttributes;for(let R=0,L=E.length;R<L;R++)E[R]=0}function A(E){m(E,0)}function m(E,R){const L=r.newAttributes,F=r.enabledAttributes,U=r.attributeDivisors;L[E]=1,F[E]===0&&(n.enableVertexAttribArray(E),F[E]=1),U[E]!==R&&(n.vertexAttribDivisor(E,R),U[E]=R)}function y(){const E=r.newAttributes,R=r.enabledAttributes;for(let L=0,F=R.length;L<F;L++)R[L]!==E[L]&&(n.disableVertexAttribArray(L),R[L]=0)}function v(E,R,L,F,U,z,V){V===!0?n.vertexAttribIPointer(E,R,L,U,z):n.vertexAttribPointer(E,R,L,F,U,z)}function b(E,R,L,F){x();const U=F.attributes,z=L.getAttributes(),V=R.defaultAttributeValues;for(const G in z){const D=z[G];if(D.location>=0){let W=U[G];if(W===void 0&&(G==="instanceMatrix"&&E.instanceMatrix&&(W=E.instanceMatrix),G==="instanceColor"&&E.instanceColor&&(W=E.instanceColor)),W!==void 0){const K=W.normalized,ee=W.itemSize,Q=e.get(W);if(Q===void 0)continue;const ae=Q.buffer,$=Q.type,te=Q.bytesPerElement,de=$===n.INT||$===n.UNSIGNED_INT||W.gpuType===Mm;if(W.isInterleavedBufferAttribute){const ue=W.data,Re=ue.stride,Ue=W.offset;if(ue.isInstancedInterleavedBuffer){for(let ze=0;ze<D.locationSize;ze++)m(D.location+ze,ue.meshPerAttribute);E.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let ze=0;ze<D.locationSize;ze++)A(D.location+ze);n.bindBuffer(n.ARRAY_BUFFER,ae);for(let ze=0;ze<D.locationSize;ze++)v(D.location+ze,ee/D.locationSize,$,K,Re*te,(Ue+ee/D.locationSize*ze)*te,de)}else{if(W.isInstancedBufferAttribute){for(let ue=0;ue<D.locationSize;ue++)m(D.location+ue,W.meshPerAttribute);E.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let ue=0;ue<D.locationSize;ue++)A(D.location+ue);n.bindBuffer(n.ARRAY_BUFFER,ae);for(let ue=0;ue<D.locationSize;ue++)v(D.location+ue,ee/D.locationSize,$,K,ee*te,ee/D.locationSize*ue*te,de)}}else if(V!==void 0){const K=V[G];if(K!==void 0)switch(K.length){case 2:n.vertexAttrib2fv(D.location,K);break;case 3:n.vertexAttrib3fv(D.location,K);break;case 4:n.vertexAttrib4fv(D.location,K);break;default:n.vertexAttrib1fv(D.location,K)}}}}y()}function w(){M();for(const E in i){const R=i[E];for(const L in R){const F=R[L];for(const U in F)u(F[U].object),delete F[U];delete R[L]}delete i[E]}}function S(E){if(i[E.id]===void 0)return;const R=i[E.id];for(const L in R){const F=R[L];for(const U in F)u(F[U].object),delete F[U];delete R[L]}delete i[E.id]}function C(E){for(const R in i){const L=i[R];if(L[E.id]===void 0)continue;const F=L[E.id];for(const U in F)u(F[U].object),delete F[U];delete L[E.id]}}function M(){_(),a=!0,r!==s&&(r=s,c(r.object))}function _(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:M,resetDefaultState:_,dispose:w,releaseStatesOfGeometry:S,releaseStatesOfProgram:C,initAttributes:x,enableAttribute:A,disableUnusedAttributes:y}}function oG(n,e,t){let i;function s(c){i=c}function r(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function a(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let p=0;for(let g=0;g<d;g++)p+=u[g];t.update(p,i,1)}function l(c,u,d,f){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<c.length;g++)a(c[g],u[g],f[g]);else{p.multiDrawArraysInstancedWEBGL(i,c,0,u,0,f,0,d);let g=0;for(let x=0;x<d;x++)g+=u[x]*f[x];t.update(g,i,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function lG(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(C){return!(C!==Pt&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(C){const M=C===cn&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==tn&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==Zt&&!M)}function l(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),A=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=g>0,S=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:g,maxTextureSize:x,maxCubemapSize:A,maxAttributes:m,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:b,vertexTextures:w,maxSamples:S}}function cG(n){const e=this;let t=null,i=0,s=!1,r=!1;const a=new Ua,o=new Ve,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const p=d.length!==0||f||i!==0||s;return s=f,i=d.length,p},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,p){const g=d.clippingPlanes,x=d.clipIntersection,A=d.clipShadows,m=n.get(d);if(!s||g===null||g.length===0||r&&!A)r?u(null):c();else{const y=r?0:i,v=y*4;let b=m.clippingState||null;l.value=b,b=u(g,f,v,p);for(let w=0;w!==v;++w)b[w]=t[w];m.clippingState=b,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,p,g){const x=d!==null?d.length:0;let A=null;if(x!==0){if(A=l.value,g!==!0||A===null){const m=p+x*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(A===null||A.length<m)&&(A=new Float32Array(m));for(let v=0,b=p;v!==x;++v,b+=4)a.copy(d[v]).applyMatrix4(y,o),a.normal.toArray(A,b),A[b+3]=a.constant}l.value=A,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,A}}function uG(n){let e=new WeakMap;function t(a,o){return o===Np?a.mapping=po:o===ey&&(a.mapping=tc),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===Np||o===ey)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new kb(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",s),t(c.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const Sl=4,LS=[.125,.215,.35,.446,.526,.582],$a=20,Zg=new _c,PS=new Te;let eA=null,tA=0,nA=0,iA=!1;const Oa=(1+Math.sqrt(5))/2,Oo=1/Oa,FS=[new P(-Oa,Oo,0),new P(Oa,Oo,0),new P(-Oo,0,Oa),new P(Oo,0,Oa),new P(0,Oa,-Oo),new P(0,Oa,Oo),new P(-1,1,-1),new P(1,1,-1),new P(-1,1,1),new P(1,1,1)];class kS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){eA=this._renderer.getRenderTarget(),tA=this._renderer.getActiveCubeFace(),nA=this._renderer.getActiveMipmapLevel(),iA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=OS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(eA,tA,nA),this._renderer.xr.enabled=iA,e.scissorTest=!1,zh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===po||e.mapping===tc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),eA=this._renderer.getRenderTarget(),tA=this._renderer.getActiveCubeFace(),nA=this._renderer.getActiveMipmapLevel(),iA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:nt,minFilter:nt,generateMipmaps:!1,type:cn,format:Pt,colorSpace:It,depthBuffer:!1},s=US(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=US(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dG(r)),this._blurMaterial=hG(r,e,t)}return s}_compileMaterial(e){const t=new bt(this._lodPlanes[0],e);this._renderer.compile(t,Zg)}_sceneToCubeUV(e,t,i,s){const o=new Cn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(PS),u.toneMapping=Ds,u.autoClear=!1;const p=new Vi({name:"PMREM.Background",side:In,depthWrite:!1,depthTest:!1}),g=new bt(new _r,p);let x=!1;const A=e.background;A?A.isColor&&(p.color.copy(A),e.background=null,x=!0):(p.color.copy(PS),x=!0);for(let m=0;m<6;m++){const y=m%3;y===0?(o.up.set(0,l[m],0),o.lookAt(c[m],0,0)):y===1?(o.up.set(0,0,l[m]),o.lookAt(0,c[m],0)):(o.up.set(0,l[m],0),o.lookAt(0,0,c[m]));const v=this._cubeSize;zh(s,y*v,m>2?v:0,v,v),u.setRenderTarget(s),x&&u.render(g,o),u.render(e,o)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=A}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===po||e.mapping===tc;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=QS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=OS());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new bt(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;zh(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,Zg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=FS[(s-r-1)%FS.length];this._blur(e,r-1,r,a,o)}t.autoClear=i}_blur(e,t,i,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,s,"latitudinal",r),this._halfBlur(a,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new bt(this._lodPlanes[s],c),f=c.uniforms,p=this._sizeLods[i]-1,g=isFinite(r)?Math.PI/(2*p):2*Math.PI/(2*$a-1),x=r/g,A=isFinite(r)?1+Math.floor(u*x):$a;A>$a&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${$a}`);const m=[];let y=0;for(let C=0;C<$a;++C){const M=C/x,_=Math.exp(-M*M/2);m.push(_),C===0?y+=_:C<A&&(y+=2*_)}for(let C=0;C<m.length;C++)m[C]=m[C]/y;f.envMap.value=e.texture,f.samples.value=A,f.weights.value=m,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:v}=this;f.dTheta.value=g,f.mipInt.value=v-i;const b=this._sizeLods[s],w=3*b*(s>v-Sl?s-v+Sl:0),S=4*(this._cubeSize-b);zh(t,w,S,3*b,2*b),l.setRenderTarget(t),l.render(d,Zg)}}function dG(n){const e=[],t=[],i=[];let s=n;const r=n-Sl+1+LS.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);t.push(o);let l=1/o;a>n-Sl?l=LS[a-n+Sl-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,g=6,x=3,A=2,m=1,y=new Float32Array(x*g*p),v=new Float32Array(A*g*p),b=new Float32Array(m*g*p);for(let S=0;S<p;S++){const C=S%3*2/3-1,M=S>2?0:-1,_=[C,M,0,C+2/3,M,0,C+2/3,M+1,0,C,M,0,C+2/3,M+1,0,C,M+1,0];y.set(_,x*g*S),v.set(f,A*g*S);const E=[S,S,S,S,S,S];b.set(E,m*g*S)}const w=new hi;w.setAttribute("position",new kt(y,x)),w.setAttribute("uv",new kt(v,A)),w.setAttribute("faceIndex",new kt(b,m)),e.push(w),s>Sl&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function US(n,e,t){const i=new $i(n,e,t);return i.texture.mapping=Cm,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function zh(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function hG(n,e,t){const i=new Float32Array($a),s=new P(0,1,0);return new Si({name:"SphericalGaussianBlur",defines:{n:$a,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:zb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ns,depthTest:!1,depthWrite:!1})}function OS(){return new Si({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:zb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ns,depthTest:!1,depthWrite:!1})}function QS(){return new Si({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:zb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ns,depthTest:!1,depthWrite:!1})}function zb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fG(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===Np||l===ey,u=l===po||l===tc;if(c||u){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new kS(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&s(p)?(t===null&&(t=new kS(n)),d=c?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",r),d.texture):null}}}return o}function s(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function pG(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&il("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function mG(n,e,t,i){const s={},r=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",a),delete s[f.id];const p=r.get(f);p&&(e.remove(p),r.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return s[f.id]===!0||(f.addEventListener("dispose",a),s[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER)}function c(d){const f=[],p=d.index,g=d.attributes.position;let x=0;if(p!==null){const y=p.array;x=p.version;for(let v=0,b=y.length;v<b;v+=3){const w=y[v+0],S=y[v+1],C=y[v+2];f.push(w,S,S,C,C,w)}}else if(g!==void 0){const y=g.array;x=g.version;for(let v=0,b=y.length/3-1;v<b;v+=3){const w=v+0,S=v+1,C=v+2;f.push(w,S,S,C,C,w)}}else return;const A=new(PB(f)?QB:OB)(f,1);A.version=x;const m=r.get(d);m&&e.remove(m),r.set(d,A)}function u(d){const f=r.get(d);if(f){const p=d.index;p!==null&&f.version<p.version&&c(d)}else c(d);return r.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function gG(n,e,t){let i;function s(f){i=f}let r,a;function o(f){r=f.type,a=f.bytesPerElement}function l(f,p){n.drawElements(i,p,r,f*a),t.update(p,i,1)}function c(f,p,g){g!==0&&(n.drawElementsInstanced(i,p,r,f*a,g),t.update(p,i,g))}function u(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,r,f,0,g);let A=0;for(let m=0;m<g;m++)A+=p[m];t.update(A,i,1)}function d(f,p,g,x){if(g===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let m=0;m<f.length;m++)c(f[m]/a,p[m],x[m]);else{A.multiDrawElementsInstancedWEBGL(i,p,0,r,f,0,x,0,g);let m=0;for(let y=0;y<g;y++)m+=p[y]*x[y];t.update(m,i,1)}}this.setMode=s,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function AG(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(r/3);break;case n.LINES:t.lines+=o*(r/2);break;case n.LINE_STRIP:t.lines+=o*(r-1);break;case n.LINE_LOOP:t.lines+=o*r;break;case n.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function xG(n,e,t){const i=new WeakMap,s=new dt;function r(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let f=i.get(o);if(f===void 0||f.count!==d){let E=function(){M.dispose(),i.delete(o),o.removeEventListener("dispose",E)};var p=E;f!==void 0&&f.texture.dispose();const g=o.morphAttributes.position!==void 0,x=o.morphAttributes.normal!==void 0,A=o.morphAttributes.color!==void 0,m=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],v=o.morphAttributes.color||[];let b=0;g===!0&&(b=1),x===!0&&(b=2),A===!0&&(b=3);let w=o.attributes.position.count*b,S=1;w>e.maxTextureSize&&(S=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const C=new Float32Array(w*S*4*d),M=new FB(C,w,S,d);M.type=Zt,M.needsUpdate=!0;const _=b*4;for(let R=0;R<d;R++){const L=m[R],F=y[R],U=v[R],z=w*S*4*R;for(let V=0;V<L.count;V++){const G=V*_;g===!0&&(s.fromBufferAttribute(L,V),C[z+G+0]=s.x,C[z+G+1]=s.y,C[z+G+2]=s.z,C[z+G+3]=0),x===!0&&(s.fromBufferAttribute(F,V),C[z+G+4]=s.x,C[z+G+5]=s.y,C[z+G+6]=s.z,C[z+G+7]=0),A===!0&&(s.fromBufferAttribute(U,V),C[z+G+8]=s.x,C[z+G+9]=s.y,C[z+G+10]=s.z,C[z+G+11]=U.itemSize===4?s.w:1)}}f={count:d,texture:M,size:new Ge(w,S)},i.set(o,f),o.addEventListener("dispose",E)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let g=0;for(let A=0;A<c.length;A++)g+=c[A];const x=o.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:r}}function yG(n,e,t,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(s.get(d)!==c&&(e.update(d),s.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),s.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;s.get(f)!==c&&(f.update(),s.set(f,c))}return d}function a(){s=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:a}}const iN=new Ft,jS=new $B(1,1),sN=new FB,rN=new kB,aN=new GB,VS=[],GS=[],HS=new Float32Array(16),zS=new Float32Array(9),WS=new Float32Array(4);function Sc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=VS[s];if(r===void 0&&(r=new Float32Array(s),VS[s]=r),e!==0){i.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(r,o)}return r}function fn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function pn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Tm(n,e){let t=GS[e];t===void 0&&(t=new Int32Array(e),GS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function vG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function bG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fn(t,e))return;n.uniform2fv(this.addr,e),pn(t,e)}}function wG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(fn(t,e))return;n.uniform3fv(this.addr,e),pn(t,e)}}function EG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fn(t,e))return;n.uniform4fv(this.addr,e),pn(t,e)}}function _G(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(fn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),pn(t,e)}else{if(fn(t,i))return;WS.set(i),n.uniformMatrix2fv(this.addr,!1,WS),pn(t,i)}}function SG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(fn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),pn(t,e)}else{if(fn(t,i))return;zS.set(i),n.uniformMatrix3fv(this.addr,!1,zS),pn(t,i)}}function CG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(fn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),pn(t,e)}else{if(fn(t,i))return;HS.set(i),n.uniformMatrix4fv(this.addr,!1,HS),pn(t,i)}}function MG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fn(t,e))return;n.uniform2iv(this.addr,e),pn(t,e)}}function TG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fn(t,e))return;n.uniform3iv(this.addr,e),pn(t,e)}}function RG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fn(t,e))return;n.uniform4iv(this.addr,e),pn(t,e)}}function BG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function NG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fn(t,e))return;n.uniform2uiv(this.addr,e),pn(t,e)}}function DG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fn(t,e))return;n.uniform3uiv(this.addr,e),pn(t,e)}}function LG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fn(t,e))return;n.uniform4uiv(this.addr,e),pn(t,e)}}function PG(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(jS.compareFunction=LB,r=jS):r=iN,t.setTexture2D(e||r,s)}function FG(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||rN,s)}function kG(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||aN,s)}function UG(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||sN,s)}function OG(n){switch(n){case 5126:return vG;case 35664:return bG;case 35665:return wG;case 35666:return EG;case 35674:return _G;case 35675:return SG;case 35676:return CG;case 5124:case 35670:return MG;case 35667:case 35671:return IG;case 35668:case 35672:return TG;case 35669:case 35673:return RG;case 5125:return BG;case 36294:return NG;case 36295:return DG;case 36296:return LG;case 35678:case 36198:case 36298:case 36306:case 35682:return PG;case 35679:case 36299:case 36307:return FG;case 35680:case 36300:case 36308:case 36293:return kG;case 36289:case 36303:case 36311:case 36292:return UG}}function QG(n,e){n.uniform1fv(this.addr,e)}function jG(n,e){const t=Sc(e,this.size,2);n.uniform2fv(this.addr,t)}function VG(n,e){const t=Sc(e,this.size,3);n.uniform3fv(this.addr,t)}function GG(n,e){const t=Sc(e,this.size,4);n.uniform4fv(this.addr,t)}function HG(n,e){const t=Sc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function zG(n,e){const t=Sc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function WG(n,e){const t=Sc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $G(n,e){n.uniform1iv(this.addr,e)}function qG(n,e){n.uniform2iv(this.addr,e)}function YG(n,e){n.uniform3iv(this.addr,e)}function XG(n,e){n.uniform4iv(this.addr,e)}function KG(n,e){n.uniform1uiv(this.addr,e)}function JG(n,e){n.uniform2uiv(this.addr,e)}function ZG(n,e){n.uniform3uiv(this.addr,e)}function e8(n,e){n.uniform4uiv(this.addr,e)}function t8(n,e,t){const i=this.cache,s=e.length,r=Tm(t,s);fn(i,r)||(n.uniform1iv(this.addr,r),pn(i,r));for(let a=0;a!==s;++a)t.setTexture2D(e[a]||iN,r[a])}function n8(n,e,t){const i=this.cache,s=e.length,r=Tm(t,s);fn(i,r)||(n.uniform1iv(this.addr,r),pn(i,r));for(let a=0;a!==s;++a)t.setTexture3D(e[a]||rN,r[a])}function i8(n,e,t){const i=this.cache,s=e.length,r=Tm(t,s);fn(i,r)||(n.uniform1iv(this.addr,r),pn(i,r));for(let a=0;a!==s;++a)t.setTextureCube(e[a]||aN,r[a])}function s8(n,e,t){const i=this.cache,s=e.length,r=Tm(t,s);fn(i,r)||(n.uniform1iv(this.addr,r),pn(i,r));for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||sN,r[a])}function r8(n){switch(n){case 5126:return QG;case 35664:return jG;case 35665:return VG;case 35666:return GG;case 35674:return HG;case 35675:return zG;case 35676:return WG;case 5124:case 35670:return $G;case 35667:case 35671:return qG;case 35668:case 35672:return YG;case 35669:case 35673:return XG;case 5125:return KG;case 36294:return JG;case 36295:return ZG;case 36296:return e8;case 35678:case 36198:case 36298:case 36306:case 35682:return t8;case 35679:case 36299:case 36307:return n8;case 35680:case 36300:case 36308:case 36293:return i8;case 36289:case 36303:case 36311:case 36292:return s8}}class a8{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=OG(t.type)}}class o8{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=r8(t.type)}}class l8{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(e,t[o.id],i)}}}const sA=/(\w+)(\])?(\[|\.)?/g;function $S(n,e){n.seq.push(e),n.map[e.id]=e}function c8(n,e,t){const i=n.name,s=i.length;for(sA.lastIndex=0;;){const r=sA.exec(i),a=sA.lastIndex;let o=r[1];const l=r[2]==="]",c=r[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===s){$S(t,c===void 0?new a8(o,n,e):new o8(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new l8(o),$S(t,d)),t=d}}}class zf{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),a=e.getUniformLocation(t,r.name);c8(r,a,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,a=t.length;r!==a;++r){const o=t[r],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in t&&i.push(a)}return i}}function qS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const u8=37297;let d8=0;function h8(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=s;a<r;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const YS=new Ve;function f8(n){tt._getMatrix(YS,tt.workingColorSpace,n);const e=`mat3( ${YS.elements.map(t=>t.toFixed(4))} )`;switch(tt.getTransfer(n)){case jp:return[e,"LinearTransferOETF"];case vt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function XS(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+h8(n.getShaderSource(e),a)}else return s}function p8(n,e){const t=f8(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function m8(n,e){let t;switch(e){case bB:t="Linear";break;case wB:t="Reinhard";break;case EB:t="Cineon";break;case _B:t="ACESFilmic";break;case SB:t="AgX";break;case xd:t="Neutral";break;case Cj:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Wh=new P;function g8(){tt.getLuminanceCoefficients(Wh);const n=Wh.x.toFixed(4),e=Wh.y.toFixed(4),t=Wh.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function A8(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Au).join(`
`)}function x8(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function y8(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),a=r.name;let o=1;r.type===n.FLOAT_MAT2&&(o=2),r.type===n.FLOAT_MAT3&&(o=3),r.type===n.FLOAT_MAT4&&(o=4),t[a]={type:r.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Au(n){return n!==""}function KS(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function JS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const v8=/^[ \t]*#include +<([\w\d./]+)>/gm;function Cy(n){return n.replace(v8,w8)}const b8=new Map;function w8(n,e){let t=$e[e];if(t===void 0){const i=b8.get(e);if(i!==void 0)t=$e[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Cy(t)}const E8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ZS(n){return n.replace(E8,_8)}function _8(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function e1(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function S8(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===yB?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===rj?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===nr&&(e="SHADOWMAP_TYPE_VSM"),e}function C8(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case po:case tc:e="ENVMAP_TYPE_CUBE";break;case Cm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function M8(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case tc:e="ENVMAP_MODE_REFRACTION";break}return e}function I8(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case vB:e="ENVMAP_BLENDING_MULTIPLY";break;case _j:e="ENVMAP_BLENDING_MIX";break;case Sj:e="ENVMAP_BLENDING_ADD";break}return e}function T8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function R8(n,e,t,i){const s=n.getContext(),r=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=S8(t),c=C8(t),u=M8(t),d=I8(t),f=T8(t),p=A8(t),g=x8(r),x=s.createProgram();let A,m,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Au).join(`
`),A.length>0&&(A+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Au).join(`
`),m.length>0&&(m+=`
`)):(A=[e1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Au).join(`
`),m=[e1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ds?"#define TONE_MAPPING":"",t.toneMapping!==Ds?$e.tonemapping_pars_fragment:"",t.toneMapping!==Ds?m8("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$e.colorspace_pars_fragment,p8("linearToOutputTexel",t.outputColorSpace),g8(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Au).join(`
`)),a=Cy(a),a=KS(a,t),a=JS(a,t),o=Cy(o),o=KS(o,t),o=JS(o,t),a=ZS(a),o=ZS(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,A=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,m=["#define varying in",t.glslVersion===q_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===q_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const v=y+A+a,b=y+m+o,w=qS(s,s.VERTEX_SHADER,v),S=qS(s,s.FRAGMENT_SHADER,b);s.attachShader(x,w),s.attachShader(x,S),t.index0AttributeName!==void 0?s.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);function C(R){if(n.debug.checkShaderErrors){const L=s.getProgramInfoLog(x).trim(),F=s.getShaderInfoLog(w).trim(),U=s.getShaderInfoLog(S).trim();let z=!0,V=!0;if(s.getProgramParameter(x,s.LINK_STATUS)===!1)if(z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,x,w,S);else{const G=XS(s,w,"vertex"),D=XS(s,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,s.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+L+`
`+G+`
`+D)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(F===""||U==="")&&(V=!1);V&&(R.diagnostics={runnable:z,programLog:L,vertexShader:{log:F,prefix:A},fragmentShader:{log:U,prefix:m}})}s.deleteShader(w),s.deleteShader(S),M=new zf(s,x),_=y8(s,x)}let M;this.getUniforms=function(){return M===void 0&&C(this),M};let _;this.getAttributes=function(){return _===void 0&&C(this),_};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=s.getProgramParameter(x,u8)),E},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=d8++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=w,this.fragmentShader=S,this}let B8=0;class N8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new D8(e),t.set(e,i)),i}}class D8{constructor(e){this.id=B8++,this.code=e,this.usedTimes=0}}function L8(n,e,t,i,s,r,a){const o=new Fb,l=new N8,c=new Set,u=[],d=s.logarithmicDepthBuffer,f=s.vertexTextures;let p=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(_){return c.add(_),_===0?"uv":`uv${_}`}function A(_,E,R,L,F){const U=L.fog,z=F.geometry,V=_.isMeshStandardMaterial?L.environment:null,G=(_.isMeshStandardMaterial?t:e).get(_.envMap||V),D=G&&G.mapping===Cm?G.image.height:null,W=g[_.type];_.precision!==null&&(p=s.getMaxPrecision(_.precision),p!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",p,"instead."));const K=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,ee=K!==void 0?K.length:0;let Q=0;z.morphAttributes.position!==void 0&&(Q=1),z.morphAttributes.normal!==void 0&&(Q=2),z.morphAttributes.color!==void 0&&(Q=3);let ae,$,te,de;if(W){const mt=Es[W];ae=mt.vertexShader,$=mt.fragmentShader}else ae=_.vertexShader,$=_.fragmentShader,l.update(_),te=l.getVertexShaderID(_),de=l.getFragmentShaderID(_);const ue=n.getRenderTarget(),Re=n.state.buffers.depth.getReversed(),Ue=F.isInstancedMesh===!0,ze=F.isBatchedMesh===!0,Et=!!_.map,et=!!_.matcap,Tt=!!G,k=!!_.aoMap,Ii=!!_.lightMap,it=!!_.bumpMap,st=!!_.normalMap,Ie=!!_.displacementMap,Rt=!!_.emissiveMap,Me=!!_.metalnessMap,B=!!_.roughnessMap,I=_.anisotropy>0,q=_.clearcoat>0,ne=_.dispersion>0,se=_.iridescence>0,Z=_.sheen>0,Ce=_.transmission>0,me=I&&!!_.anisotropyMap,ve=q&&!!_.clearcoatMap,ot=q&&!!_.clearcoatNormalMap,ce=q&&!!_.clearcoatRoughnessMap,we=se&&!!_.iridescenceMap,Le=se&&!!_.iridescenceThicknessMap,Oe=Z&&!!_.sheenColorMap,Ee=Z&&!!_.sheenRoughnessMap,rt=!!_.specularMap,We=!!_.specularColorMap,_t=!!_.specularIntensityMap,O=Ce&&!!_.transmissionMap,fe=Ce&&!!_.thicknessMap,J=!!_.gradientMap,ie=!!_.alphaMap,Ae=_.alphaTest>0,ge=!!_.alphaHash,He=!!_.extensions;let qt=Ds;_.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(qt=n.toneMapping);const Rn={shaderID:W,shaderType:_.type,shaderName:_.name,vertexShader:ae,fragmentShader:$,defines:_.defines,customVertexShaderID:te,customFragmentShaderID:de,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:p,batching:ze,batchingColor:ze&&F._colorsTexture!==null,instancing:Ue,instancingColor:Ue&&F.instanceColor!==null,instancingMorph:Ue&&F.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:It,alphaToCoverage:!!_.alphaToCoverage,map:Et,matcap:et,envMap:Tt,envMapMode:Tt&&G.mapping,envMapCubeUVHeight:D,aoMap:k,lightMap:Ii,bumpMap:it,normalMap:st,displacementMap:f&&Ie,emissiveMap:Rt,normalMapObjectSpace:st&&_.normalMapType===Nj,normalMapTangentSpace:st&&_.normalMapType===DB,metalnessMap:Me,roughnessMap:B,anisotropy:I,anisotropyMap:me,clearcoat:q,clearcoatMap:ve,clearcoatNormalMap:ot,clearcoatRoughnessMap:ce,dispersion:ne,iridescence:se,iridescenceMap:we,iridescenceThicknessMap:Le,sheen:Z,sheenColorMap:Oe,sheenRoughnessMap:Ee,specularMap:rt,specularColorMap:We,specularIntensityMap:_t,transmission:Ce,transmissionMap:O,thicknessMap:fe,gradientMap:J,opaque:_.transparent===!1&&_.blending===kl&&_.alphaToCoverage===!1,alphaMap:ie,alphaTest:Ae,alphaHash:ge,combine:_.combine,mapUv:Et&&x(_.map.channel),aoMapUv:k&&x(_.aoMap.channel),lightMapUv:Ii&&x(_.lightMap.channel),bumpMapUv:it&&x(_.bumpMap.channel),normalMapUv:st&&x(_.normalMap.channel),displacementMapUv:Ie&&x(_.displacementMap.channel),emissiveMapUv:Rt&&x(_.emissiveMap.channel),metalnessMapUv:Me&&x(_.metalnessMap.channel),roughnessMapUv:B&&x(_.roughnessMap.channel),anisotropyMapUv:me&&x(_.anisotropyMap.channel),clearcoatMapUv:ve&&x(_.clearcoatMap.channel),clearcoatNormalMapUv:ot&&x(_.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ce&&x(_.clearcoatRoughnessMap.channel),iridescenceMapUv:we&&x(_.iridescenceMap.channel),iridescenceThicknessMapUv:Le&&x(_.iridescenceThicknessMap.channel),sheenColorMapUv:Oe&&x(_.sheenColorMap.channel),sheenRoughnessMapUv:Ee&&x(_.sheenRoughnessMap.channel),specularMapUv:rt&&x(_.specularMap.channel),specularColorMapUv:We&&x(_.specularColorMap.channel),specularIntensityMapUv:_t&&x(_.specularIntensityMap.channel),transmissionMapUv:O&&x(_.transmissionMap.channel),thicknessMapUv:fe&&x(_.thicknessMap.channel),alphaMapUv:ie&&x(_.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(st||I),vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!z.attributes.uv&&(Et||ie),fog:!!U,useFog:_.fog===!0,fogExp2:!!U&&U.isFogExp2,flatShading:_.flatShading===!0,sizeAttenuation:_.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Re,skinning:F.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:Q,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:_.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:qt,decodeVideoTexture:Et&&_.map.isVideoTexture===!0&&tt.getTransfer(_.map.colorSpace)===vt,decodeVideoTextureEmissive:Rt&&_.emissiveMap.isVideoTexture===!0&&tt.getTransfer(_.emissiveMap.colorSpace)===vt,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===yn,flipSided:_.side===In,useDepthPacking:_.depthPacking>=0,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionClipCullDistance:He&&_.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(He&&_.extensions.multiDraw===!0||ze)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:_.customProgramCacheKey()};return Rn.vertexUv1s=c.has(1),Rn.vertexUv2s=c.has(2),Rn.vertexUv3s=c.has(3),c.clear(),Rn}function m(_){const E=[];if(_.shaderID?E.push(_.shaderID):(E.push(_.customVertexShaderID),E.push(_.customFragmentShaderID)),_.defines!==void 0)for(const R in _.defines)E.push(R),E.push(_.defines[R]);return _.isRawShaderMaterial===!1&&(y(E,_),v(E,_),E.push(n.outputColorSpace)),E.push(_.customProgramCacheKey),E.join()}function y(_,E){_.push(E.precision),_.push(E.outputColorSpace),_.push(E.envMapMode),_.push(E.envMapCubeUVHeight),_.push(E.mapUv),_.push(E.alphaMapUv),_.push(E.lightMapUv),_.push(E.aoMapUv),_.push(E.bumpMapUv),_.push(E.normalMapUv),_.push(E.displacementMapUv),_.push(E.emissiveMapUv),_.push(E.metalnessMapUv),_.push(E.roughnessMapUv),_.push(E.anisotropyMapUv),_.push(E.clearcoatMapUv),_.push(E.clearcoatNormalMapUv),_.push(E.clearcoatRoughnessMapUv),_.push(E.iridescenceMapUv),_.push(E.iridescenceThicknessMapUv),_.push(E.sheenColorMapUv),_.push(E.sheenRoughnessMapUv),_.push(E.specularMapUv),_.push(E.specularColorMapUv),_.push(E.specularIntensityMapUv),_.push(E.transmissionMapUv),_.push(E.thicknessMapUv),_.push(E.combine),_.push(E.fogExp2),_.push(E.sizeAttenuation),_.push(E.morphTargetsCount),_.push(E.morphAttributeCount),_.push(E.numDirLights),_.push(E.numPointLights),_.push(E.numSpotLights),_.push(E.numSpotLightMaps),_.push(E.numHemiLights),_.push(E.numRectAreaLights),_.push(E.numDirLightShadows),_.push(E.numPointLightShadows),_.push(E.numSpotLightShadows),_.push(E.numSpotLightShadowsWithMaps),_.push(E.numLightProbes),_.push(E.shadowMapType),_.push(E.toneMapping),_.push(E.numClippingPlanes),_.push(E.numClipIntersection),_.push(E.depthPacking)}function v(_,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),_.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),_.push(o.mask)}function b(_){const E=g[_.type];let R;if(E){const L=Es[E];R=S5.clone(L.uniforms)}else R=_.uniforms;return R}function w(_,E){let R;for(let L=0,F=u.length;L<F;L++){const U=u[L];if(U.cacheKey===E){R=U,++R.usedTimes;break}}return R===void 0&&(R=new R8(n,E,_,r),u.push(R)),R}function S(_){if(--_.usedTimes===0){const E=u.indexOf(_);u[E]=u[u.length-1],u.pop(),_.destroy()}}function C(_){l.remove(_)}function M(){l.dispose()}return{getParameters:A,getProgramCacheKey:m,getUniforms:b,acquireProgram:w,releaseProgram:S,releaseShaderCache:C,programs:u,dispose:M}}function P8(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function s(a,o,l){n.get(a)[o]=l}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:r}}function F8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function t1(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function n1(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function a(d,f,p,g,x,A){let m=n[e];return m===void 0?(m={id:d.id,object:d,geometry:f,material:p,groupOrder:g,renderOrder:d.renderOrder,z:x,group:A},n[e]=m):(m.id=d.id,m.object=d,m.geometry=f,m.material=p,m.groupOrder=g,m.renderOrder=d.renderOrder,m.z=x,m.group=A),e++,m}function o(d,f,p,g,x,A){const m=a(d,f,p,g,x,A);p.transmission>0?i.push(m):p.transparent===!0?s.push(m):t.push(m)}function l(d,f,p,g,x,A){const m=a(d,f,p,g,x,A);p.transmission>0?i.unshift(m):p.transparent===!0?s.unshift(m):t.unshift(m)}function c(d,f){t.length>1&&t.sort(d||F8),i.length>1&&i.sort(f||t1),s.length>1&&s.sort(f||t1)}function u(){for(let d=e,f=n.length;d<f;d++){const p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:o,unshift:l,finish:u,sort:c}}function k8(){let n=new WeakMap;function e(i,s){const r=n.get(i);let a;return r===void 0?(a=new n1,n.set(i,[a])):s>=r.length?(a=new n1,r.push(a)):a=r[s],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function U8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new P,color:new Te};break;case"SpotLight":t={position:new P,direction:new P,color:new Te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new P,color:new Te,distance:0,decay:0};break;case"HemisphereLight":t={direction:new P,skyColor:new Te,groundColor:new Te};break;case"RectAreaLight":t={color:new Te,position:new P,halfWidth:new P,halfHeight:new P};break}return n[e.id]=t,t}}}function O8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Q8=0;function j8(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function V8(n){const e=new U8,t=O8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new P);const s=new P,r=new ke,a=new ke;function o(c){let u=0,d=0,f=0;for(let _=0;_<9;_++)i.probe[_].set(0,0,0);let p=0,g=0,x=0,A=0,m=0,y=0,v=0,b=0,w=0,S=0,C=0;c.sort(j8);for(let _=0,E=c.length;_<E;_++){const R=c[_],L=R.color,F=R.intensity,U=R.distance,z=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)u+=L.r*F,d+=L.g*F,f+=L.b*F;else if(R.isLightProbe){for(let V=0;V<9;V++)i.probe[V].addScaledVector(R.sh.coefficients[V],F);C++}else if(R.isDirectionalLight){const V=e.get(R);if(V.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const G=R.shadow,D=t.get(R);D.shadowIntensity=G.intensity,D.shadowBias=G.bias,D.shadowNormalBias=G.normalBias,D.shadowRadius=G.radius,D.shadowMapSize=G.mapSize,i.directionalShadow[p]=D,i.directionalShadowMap[p]=z,i.directionalShadowMatrix[p]=R.shadow.matrix,y++}i.directional[p]=V,p++}else if(R.isSpotLight){const V=e.get(R);V.position.setFromMatrixPosition(R.matrixWorld),V.color.copy(L).multiplyScalar(F),V.distance=U,V.coneCos=Math.cos(R.angle),V.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),V.decay=R.decay,i.spot[x]=V;const G=R.shadow;if(R.map&&(i.spotLightMap[w]=R.map,w++,G.updateMatrices(R),R.castShadow&&S++),i.spotLightMatrix[x]=G.matrix,R.castShadow){const D=t.get(R);D.shadowIntensity=G.intensity,D.shadowBias=G.bias,D.shadowNormalBias=G.normalBias,D.shadowRadius=G.radius,D.shadowMapSize=G.mapSize,i.spotShadow[x]=D,i.spotShadowMap[x]=z,b++}x++}else if(R.isRectAreaLight){const V=e.get(R);V.color.copy(L).multiplyScalar(F),V.halfWidth.set(R.width*.5,0,0),V.halfHeight.set(0,R.height*.5,0),i.rectArea[A]=V,A++}else if(R.isPointLight){const V=e.get(R);if(V.color.copy(R.color).multiplyScalar(R.intensity),V.distance=R.distance,V.decay=R.decay,R.castShadow){const G=R.shadow,D=t.get(R);D.shadowIntensity=G.intensity,D.shadowBias=G.bias,D.shadowNormalBias=G.normalBias,D.shadowRadius=G.radius,D.shadowMapSize=G.mapSize,D.shadowCameraNear=G.camera.near,D.shadowCameraFar=G.camera.far,i.pointShadow[g]=D,i.pointShadowMap[g]=z,i.pointShadowMatrix[g]=R.shadow.matrix,v++}i.point[g]=V,g++}else if(R.isHemisphereLight){const V=e.get(R);V.skyColor.copy(R.color).multiplyScalar(F),V.groundColor.copy(R.groundColor).multiplyScalar(F),i.hemi[m]=V,m++}}A>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=he.LTC_FLOAT_1,i.rectAreaLTC2=he.LTC_FLOAT_2):(i.rectAreaLTC1=he.LTC_HALF_1,i.rectAreaLTC2=he.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=f;const M=i.hash;(M.directionalLength!==p||M.pointLength!==g||M.spotLength!==x||M.rectAreaLength!==A||M.hemiLength!==m||M.numDirectionalShadows!==y||M.numPointShadows!==v||M.numSpotShadows!==b||M.numSpotMaps!==w||M.numLightProbes!==C)&&(i.directional.length=p,i.spot.length=x,i.rectArea.length=A,i.point.length=g,i.hemi.length=m,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=b+w-S,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=S,i.numLightProbes=C,M.directionalLength=p,M.pointLength=g,M.spotLength=x,M.rectAreaLength=A,M.hemiLength=m,M.numDirectionalShadows=y,M.numPointShadows=v,M.numSpotShadows=b,M.numSpotMaps=w,M.numLightProbes=C,i.version=Q8++)}function l(c,u){let d=0,f=0,p=0,g=0,x=0;const A=u.matrixWorldInverse;for(let m=0,y=c.length;m<y;m++){const v=c[m];if(v.isDirectionalLight){const b=i.directional[d];b.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(A),d++}else if(v.isSpotLight){const b=i.spot[p];b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(A),b.direction.setFromMatrixPosition(v.matrixWorld),s.setFromMatrixPosition(v.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(A),p++}else if(v.isRectAreaLight){const b=i.rectArea[g];b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(A),a.identity(),r.copy(v.matrixWorld),r.premultiply(A),a.extractRotation(r),b.halfWidth.set(v.width*.5,0,0),b.halfHeight.set(0,v.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),g++}else if(v.isPointLight){const b=i.point[f];b.position.setFromMatrixPosition(v.matrixWorld),b.position.applyMatrix4(A),f++}else if(v.isHemisphereLight){const b=i.hemi[x];b.direction.setFromMatrixPosition(v.matrixWorld),b.direction.transformDirection(A),x++}}}return{setup:o,setupView:l,state:i}}function i1(n){const e=new V8(n),t=[],i=[];function s(u){c.camera=u,t.length=0,i.length=0}function r(u){t.push(u)}function a(u){i.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:o,setupLightsView:l,pushLight:r,pushShadow:a}}function G8(n){let e=new WeakMap;function t(s,r=0){const a=e.get(s);let o;return a===void 0?(o=new i1(n),e.set(s,[o])):r>=a.length?(o=new i1(n),a.push(o)):o=a[r],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const H8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,z8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function W8(n,e,t){let i=new Qb;const s=new Ge,r=new Ge,a=new dt,o=new qB({depthPacking:Bj}),l=new G5,c={},u=t.maxTextureSize,d={[gs]:In,[In]:gs,[yn]:yn},f=new Si({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:H8,fragmentShader:z8}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const g=new hi;g.setAttribute("position",new kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new bt(g,f),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yB;let m=this.type;this.render=function(S,C,M){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||S.length===0)return;const _=n.getRenderTarget(),E=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),L=n.state;L.setBlending(Ns),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const F=m!==nr&&this.type===nr,U=m===nr&&this.type!==nr;for(let z=0,V=S.length;z<V;z++){const G=S[z],D=G.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;s.copy(D.mapSize);const W=D.getFrameExtents();if(s.multiply(W),r.copy(D.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/W.x),s.x=r.x*W.x,D.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/W.y),s.y=r.y*W.y,D.mapSize.y=r.y)),D.map===null||F===!0||U===!0){const ee=this.type!==nr?{minFilter:un,magFilter:un}:{};D.map!==null&&D.map.dispose(),D.map=new $i(s.x,s.y,ee),D.map.texture.name=G.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const K=D.getViewportCount();for(let ee=0;ee<K;ee++){const Q=D.getViewport(ee);a.set(r.x*Q.x,r.y*Q.y,r.x*Q.z,r.y*Q.w),L.viewport(a),D.updateMatrices(G,ee),i=D.getFrustum(),b(C,M,D.camera,G,this.type)}D.isPointLightShadow!==!0&&this.type===nr&&y(D,M),D.needsUpdate=!1}m=this.type,A.needsUpdate=!1,n.setRenderTarget(_,E,R)};function y(S,C){const M=e.update(x);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,p.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new $i(s.x,s.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,M,f,x,null),p.uniforms.shadow_pass.value=S.mapPass.texture,p.uniforms.resolution.value=S.mapSize,p.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,M,p,x,null)}function v(S,C,M,_){let E=null;const R=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(R!==void 0)E=R;else if(E=M.isPointLight===!0?l:o,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const L=E.uuid,F=C.uuid;let U=c[L];U===void 0&&(U={},c[L]=U);let z=U[F];z===void 0&&(z=E.clone(),U[F]=z,C.addEventListener("dispose",w)),E=z}if(E.visible=C.visible,E.wireframe=C.wireframe,_===nr?E.side=C.shadowSide!==null?C.shadowSide:C.side:E.side=C.shadowSide!==null?C.shadowSide:d[C.side],E.alphaMap=C.alphaMap,E.alphaTest=C.alphaTest,E.map=C.map,E.clipShadows=C.clipShadows,E.clippingPlanes=C.clippingPlanes,E.clipIntersection=C.clipIntersection,E.displacementMap=C.displacementMap,E.displacementScale=C.displacementScale,E.displacementBias=C.displacementBias,E.wireframeLinewidth=C.wireframeLinewidth,E.linewidth=C.linewidth,M.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const L=n.properties.get(E);L.light=M}return E}function b(S,C,M,_,E){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&E===nr)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,S.matrixWorld);const F=e.update(S),U=S.material;if(Array.isArray(U)){const z=F.groups;for(let V=0,G=z.length;V<G;V++){const D=z[V],W=U[D.materialIndex];if(W&&W.visible){const K=v(S,W,_,E);S.onBeforeShadow(n,S,C,M,F,K,D),n.renderBufferDirect(M,null,F,K,S,D),S.onAfterShadow(n,S,C,M,F,K,D)}}}else if(U.visible){const z=v(S,U,_,E);S.onBeforeShadow(n,S,C,M,F,z,null),n.renderBufferDirect(M,null,F,z,S,null),S.onAfterShadow(n,S,C,M,F,z,null)}}const L=S.children;for(let F=0,U=L.length;F<U;F++)b(L[F],C,M,_,E)}function w(S){S.target.removeEventListener("dispose",w);for(const M in c){const _=c[M],E=S.target.uuid;E in _&&(_[E].dispose(),delete _[E])}}}const $8={[$x]:qx,[Yx]:Jx,[Xx]:Zx,[Zl]:Kx,[qx]:$x,[Jx]:Yx,[Zx]:Xx,[Kx]:Zl};function q8(n,e){function t(){let O=!1;const fe=new dt;let J=null;const ie=new dt(0,0,0,0);return{setMask:function(Ae){J!==Ae&&!O&&(n.colorMask(Ae,Ae,Ae,Ae),J=Ae)},setLocked:function(Ae){O=Ae},setClear:function(Ae,ge,He,qt,Rn){Rn===!0&&(Ae*=qt,ge*=qt,He*=qt),fe.set(Ae,ge,He,qt),ie.equals(fe)===!1&&(n.clearColor(Ae,ge,He,qt),ie.copy(fe))},reset:function(){O=!1,J=null,ie.set(-1,0,0,0)}}}function i(){let O=!1,fe=!1,J=null,ie=null,Ae=null;return{setReversed:function(ge){if(fe!==ge){const He=e.get("EXT_clip_control");fe?He.clipControlEXT(He.LOWER_LEFT_EXT,He.ZERO_TO_ONE_EXT):He.clipControlEXT(He.LOWER_LEFT_EXT,He.NEGATIVE_ONE_TO_ONE_EXT);const qt=Ae;Ae=null,this.setClear(qt)}fe=ge},getReversed:function(){return fe},setTest:function(ge){ge?ue(n.DEPTH_TEST):Re(n.DEPTH_TEST)},setMask:function(ge){J!==ge&&!O&&(n.depthMask(ge),J=ge)},setFunc:function(ge){if(fe&&(ge=$8[ge]),ie!==ge){switch(ge){case $x:n.depthFunc(n.NEVER);break;case qx:n.depthFunc(n.ALWAYS);break;case Yx:n.depthFunc(n.LESS);break;case Zl:n.depthFunc(n.LEQUAL);break;case Xx:n.depthFunc(n.EQUAL);break;case Kx:n.depthFunc(n.GEQUAL);break;case Jx:n.depthFunc(n.GREATER);break;case Zx:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ie=ge}},setLocked:function(ge){O=ge},setClear:function(ge){Ae!==ge&&(fe&&(ge=1-ge),n.clearDepth(ge),Ae=ge)},reset:function(){O=!1,J=null,ie=null,Ae=null,fe=!1}}}function s(){let O=!1,fe=null,J=null,ie=null,Ae=null,ge=null,He=null,qt=null,Rn=null;return{setTest:function(mt){O||(mt?ue(n.STENCIL_TEST):Re(n.STENCIL_TEST))},setMask:function(mt){fe!==mt&&!O&&(n.stencilMask(mt),fe=mt)},setFunc:function(mt,Xi,Vs){(J!==mt||ie!==Xi||Ae!==Vs)&&(n.stencilFunc(mt,Xi,Vs),J=mt,ie=Xi,Ae=Vs)},setOp:function(mt,Xi,Vs){(ge!==mt||He!==Xi||qt!==Vs)&&(n.stencilOp(mt,Xi,Vs),ge=mt,He=Xi,qt=Vs)},setLocked:function(mt){O=mt},setClear:function(mt){Rn!==mt&&(n.clearStencil(mt),Rn=mt)},reset:function(){O=!1,fe=null,J=null,ie=null,Ae=null,ge=null,He=null,qt=null,Rn=null}}}const r=new t,a=new i,o=new s,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,p=[],g=null,x=!1,A=null,m=null,y=null,v=null,b=null,w=null,S=null,C=new Te(0,0,0),M=0,_=!1,E=null,R=null,L=null,F=null,U=null;const z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,G=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(D)[1]),V=G>=1):D.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),V=G>=2);let W=null,K={};const ee=n.getParameter(n.SCISSOR_BOX),Q=n.getParameter(n.VIEWPORT),ae=new dt().fromArray(ee),$=new dt().fromArray(Q);function te(O,fe,J,ie){const Ae=new Uint8Array(4),ge=n.createTexture();n.bindTexture(O,ge),n.texParameteri(O,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(O,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let He=0;He<J;He++)O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY?n.texImage3D(fe,0,n.RGBA,1,1,ie,0,n.RGBA,n.UNSIGNED_BYTE,Ae):n.texImage2D(fe+He,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ae);return ge}const de={};de[n.TEXTURE_2D]=te(n.TEXTURE_2D,n.TEXTURE_2D,1),de[n.TEXTURE_CUBE_MAP]=te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),de[n.TEXTURE_2D_ARRAY]=te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),de[n.TEXTURE_3D]=te(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ue(n.DEPTH_TEST),a.setFunc(Zl),it(!1),st(j_),ue(n.CULL_FACE),k(Ns);function ue(O){u[O]!==!0&&(n.enable(O),u[O]=!0)}function Re(O){u[O]!==!1&&(n.disable(O),u[O]=!1)}function Ue(O,fe){return d[O]!==fe?(n.bindFramebuffer(O,fe),d[O]=fe,O===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=fe),O===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=fe),!0):!1}function ze(O,fe){let J=p,ie=!1;if(O){J=f.get(fe),J===void 0&&(J=[],f.set(fe,J));const Ae=O.textures;if(J.length!==Ae.length||J[0]!==n.COLOR_ATTACHMENT0){for(let ge=0,He=Ae.length;ge<He;ge++)J[ge]=n.COLOR_ATTACHMENT0+ge;J.length=Ae.length,ie=!0}}else J[0]!==n.BACK&&(J[0]=n.BACK,ie=!0);ie&&n.drawBuffers(J)}function Et(O){return g!==O?(n.useProgram(O),g=O,!0):!1}const et={[Wa]:n.FUNC_ADD,[oj]:n.FUNC_SUBTRACT,[lj]:n.FUNC_REVERSE_SUBTRACT};et[cj]=n.MIN,et[uj]=n.MAX;const Tt={[dj]:n.ZERO,[hj]:n.ONE,[fj]:n.SRC_COLOR,[zx]:n.SRC_ALPHA,[yj]:n.SRC_ALPHA_SATURATE,[Aj]:n.DST_COLOR,[mj]:n.DST_ALPHA,[pj]:n.ONE_MINUS_SRC_COLOR,[Wx]:n.ONE_MINUS_SRC_ALPHA,[xj]:n.ONE_MINUS_DST_COLOR,[gj]:n.ONE_MINUS_DST_ALPHA,[vj]:n.CONSTANT_COLOR,[bj]:n.ONE_MINUS_CONSTANT_COLOR,[wj]:n.CONSTANT_ALPHA,[Ej]:n.ONE_MINUS_CONSTANT_ALPHA};function k(O,fe,J,ie,Ae,ge,He,qt,Rn,mt){if(O===Ns){x===!0&&(Re(n.BLEND),x=!1);return}if(x===!1&&(ue(n.BLEND),x=!0),O!==aj){if(O!==A||mt!==_){if((m!==Wa||b!==Wa)&&(n.blendEquation(n.FUNC_ADD),m=Wa,b=Wa),mt)switch(O){case kl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case V_:n.blendFunc(n.ONE,n.ONE);break;case G_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case H_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}else switch(O){case kl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case V_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case G_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case H_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}y=null,v=null,w=null,S=null,C.set(0,0,0),M=0,A=O,_=mt}return}Ae=Ae||fe,ge=ge||J,He=He||ie,(fe!==m||Ae!==b)&&(n.blendEquationSeparate(et[fe],et[Ae]),m=fe,b=Ae),(J!==y||ie!==v||ge!==w||He!==S)&&(n.blendFuncSeparate(Tt[J],Tt[ie],Tt[ge],Tt[He]),y=J,v=ie,w=ge,S=He),(qt.equals(C)===!1||Rn!==M)&&(n.blendColor(qt.r,qt.g,qt.b,Rn),C.copy(qt),M=Rn),A=O,_=!1}function Ii(O,fe){O.side===yn?Re(n.CULL_FACE):ue(n.CULL_FACE);let J=O.side===In;fe&&(J=!J),it(J),O.blending===kl&&O.transparent===!1?k(Ns):k(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),a.setFunc(O.depthFunc),a.setTest(O.depthTest),a.setMask(O.depthWrite),r.setMask(O.colorWrite);const ie=O.stencilWrite;o.setTest(ie),ie&&(o.setMask(O.stencilWriteMask),o.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),o.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),Rt(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),O.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):Re(n.SAMPLE_ALPHA_TO_COVERAGE)}function it(O){E!==O&&(O?n.frontFace(n.CW):n.frontFace(n.CCW),E=O)}function st(O){O!==ij?(ue(n.CULL_FACE),O!==R&&(O===j_?n.cullFace(n.BACK):O===sj?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Re(n.CULL_FACE),R=O}function Ie(O){O!==L&&(V&&n.lineWidth(O),L=O)}function Rt(O,fe,J){O?(ue(n.POLYGON_OFFSET_FILL),(F!==fe||U!==J)&&(n.polygonOffset(fe,J),F=fe,U=J)):Re(n.POLYGON_OFFSET_FILL)}function Me(O){O?ue(n.SCISSOR_TEST):Re(n.SCISSOR_TEST)}function B(O){O===void 0&&(O=n.TEXTURE0+z-1),W!==O&&(n.activeTexture(O),W=O)}function I(O,fe,J){J===void 0&&(W===null?J=n.TEXTURE0+z-1:J=W);let ie=K[J];ie===void 0&&(ie={type:void 0,texture:void 0},K[J]=ie),(ie.type!==O||ie.texture!==fe)&&(W!==J&&(n.activeTexture(J),W=J),n.bindTexture(O,fe||de[O]),ie.type=O,ie.texture=fe)}function q(){const O=K[W];O!==void 0&&O.type!==void 0&&(n.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)}function ne(){try{n.compressedTexImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function se(){try{n.compressedTexImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Z(){try{n.texSubImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ce(){try{n.texSubImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ot(){try{n.texStorage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ce(){try{n.texStorage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function we(){try{n.texImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Le(){try{n.texImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Oe(O){ae.equals(O)===!1&&(n.scissor(O.x,O.y,O.z,O.w),ae.copy(O))}function Ee(O){$.equals(O)===!1&&(n.viewport(O.x,O.y,O.z,O.w),$.copy(O))}function rt(O,fe){let J=c.get(fe);J===void 0&&(J=new WeakMap,c.set(fe,J));let ie=J.get(O);ie===void 0&&(ie=n.getUniformBlockIndex(fe,O.name),J.set(O,ie))}function We(O,fe){const ie=c.get(fe).get(O);l.get(fe)!==ie&&(n.uniformBlockBinding(fe,ie,O.__bindingPointIndex),l.set(fe,ie))}function _t(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},W=null,K={},d={},f=new WeakMap,p=[],g=null,x=!1,A=null,m=null,y=null,v=null,b=null,w=null,S=null,C=new Te(0,0,0),M=0,_=!1,E=null,R=null,L=null,F=null,U=null,ae.set(0,0,n.canvas.width,n.canvas.height),$.set(0,0,n.canvas.width,n.canvas.height),r.reset(),a.reset(),o.reset()}return{buffers:{color:r,depth:a,stencil:o},enable:ue,disable:Re,bindFramebuffer:Ue,drawBuffers:ze,useProgram:Et,setBlending:k,setMaterial:Ii,setFlipSided:it,setCullFace:st,setLineWidth:Ie,setPolygonOffset:Rt,setScissorTest:Me,activeTexture:B,bindTexture:I,unbindTexture:q,compressedTexImage2D:ne,compressedTexImage3D:se,texImage2D:we,texImage3D:Le,updateUBOMapping:rt,uniformBlockBinding:We,texStorage2D:ot,texStorage3D:ce,texSubImage2D:Z,texSubImage3D:Ce,compressedTexSubImage2D:me,compressedTexSubImage3D:ve,scissor:Oe,viewport:Ee,reset:_t}}function Y8(n,e,t,i,s,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ge,u=new WeakMap;let d;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(B,I){return p?new OffscreenCanvas(B,I):Ed("canvas")}function x(B,I,q){let ne=1;const se=Me(B);if((se.width>q||se.height>q)&&(ne=q/Math.max(se.width,se.height)),ne<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const Z=Math.floor(ne*se.width),Ce=Math.floor(ne*se.height);d===void 0&&(d=g(Z,Ce));const me=I?g(Z,Ce):d;return me.width=Z,me.height=Ce,me.getContext("2d").drawImage(B,0,0,Z,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+Z+"x"+Ce+")."),me}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),B;return B}function A(B){return B.generateMipmaps}function m(B){n.generateMipmap(B)}function y(B){return B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:B.isWebGL3DRenderTarget?n.TEXTURE_3D:B.isWebGLArrayRenderTarget||B.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function v(B,I,q,ne,se=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let Z=I;if(I===n.RED&&(q===n.FLOAT&&(Z=n.R32F),q===n.HALF_FLOAT&&(Z=n.R16F),q===n.UNSIGNED_BYTE&&(Z=n.R8)),I===n.RED_INTEGER&&(q===n.UNSIGNED_BYTE&&(Z=n.R8UI),q===n.UNSIGNED_SHORT&&(Z=n.R16UI),q===n.UNSIGNED_INT&&(Z=n.R32UI),q===n.BYTE&&(Z=n.R8I),q===n.SHORT&&(Z=n.R16I),q===n.INT&&(Z=n.R32I)),I===n.RG&&(q===n.FLOAT&&(Z=n.RG32F),q===n.HALF_FLOAT&&(Z=n.RG16F),q===n.UNSIGNED_BYTE&&(Z=n.RG8)),I===n.RG_INTEGER&&(q===n.UNSIGNED_BYTE&&(Z=n.RG8UI),q===n.UNSIGNED_SHORT&&(Z=n.RG16UI),q===n.UNSIGNED_INT&&(Z=n.RG32UI),q===n.BYTE&&(Z=n.RG8I),q===n.SHORT&&(Z=n.RG16I),q===n.INT&&(Z=n.RG32I)),I===n.RGB_INTEGER&&(q===n.UNSIGNED_BYTE&&(Z=n.RGB8UI),q===n.UNSIGNED_SHORT&&(Z=n.RGB16UI),q===n.UNSIGNED_INT&&(Z=n.RGB32UI),q===n.BYTE&&(Z=n.RGB8I),q===n.SHORT&&(Z=n.RGB16I),q===n.INT&&(Z=n.RGB32I)),I===n.RGBA_INTEGER&&(q===n.UNSIGNED_BYTE&&(Z=n.RGBA8UI),q===n.UNSIGNED_SHORT&&(Z=n.RGBA16UI),q===n.UNSIGNED_INT&&(Z=n.RGBA32UI),q===n.BYTE&&(Z=n.RGBA8I),q===n.SHORT&&(Z=n.RGBA16I),q===n.INT&&(Z=n.RGBA32I)),I===n.RGB&&q===n.UNSIGNED_INT_5_9_9_9_REV&&(Z=n.RGB9_E5),I===n.RGBA){const Ce=se?jp:tt.getTransfer(ne);q===n.FLOAT&&(Z=n.RGBA32F),q===n.HALF_FLOAT&&(Z=n.RGBA16F),q===n.UNSIGNED_BYTE&&(Z=Ce===vt?n.SRGB8_ALPHA8:n.RGBA8),q===n.UNSIGNED_SHORT_4_4_4_4&&(Z=n.RGBA4),q===n.UNSIGNED_SHORT_5_5_5_1&&(Z=n.RGB5_A1)}return(Z===n.R16F||Z===n.R32F||Z===n.RG16F||Z===n.RG32F||Z===n.RGBA16F||Z===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Z}function b(B,I){let q;return B?I===null||I===fa||I===nc?q=n.DEPTH24_STENCIL8:I===Zt?q=n.DEPTH32F_STENCIL8:I===yd&&(q=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):I===null||I===fa||I===nc?q=n.DEPTH_COMPONENT24:I===Zt?q=n.DEPTH_COMPONENT32F:I===yd&&(q=n.DEPTH_COMPONENT16),q}function w(B,I){return A(B)===!0||B.isFramebufferTexture&&B.minFilter!==un&&B.minFilter!==nt?Math.log2(Math.max(I.width,I.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?I.mipmaps.length:1}function S(B){const I=B.target;I.removeEventListener("dispose",S),M(I),I.isVideoTexture&&u.delete(I)}function C(B){const I=B.target;I.removeEventListener("dispose",C),E(I)}function M(B){const I=i.get(B);if(I.__webglInit===void 0)return;const q=B.source,ne=f.get(q);if(ne){const se=ne[I.__cacheKey];se.usedTimes--,se.usedTimes===0&&_(B),Object.keys(ne).length===0&&f.delete(q)}i.remove(B)}function _(B){const I=i.get(B);n.deleteTexture(I.__webglTexture);const q=B.source,ne=f.get(q);delete ne[I.__cacheKey],a.memory.textures--}function E(B){const I=i.get(B);if(B.depthTexture&&(B.depthTexture.dispose(),i.remove(B.depthTexture)),B.isWebGLCubeRenderTarget)for(let ne=0;ne<6;ne++){if(Array.isArray(I.__webglFramebuffer[ne]))for(let se=0;se<I.__webglFramebuffer[ne].length;se++)n.deleteFramebuffer(I.__webglFramebuffer[ne][se]);else n.deleteFramebuffer(I.__webglFramebuffer[ne]);I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer[ne])}else{if(Array.isArray(I.__webglFramebuffer))for(let ne=0;ne<I.__webglFramebuffer.length;ne++)n.deleteFramebuffer(I.__webglFramebuffer[ne]);else n.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&n.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let ne=0;ne<I.__webglColorRenderbuffer.length;ne++)I.__webglColorRenderbuffer[ne]&&n.deleteRenderbuffer(I.__webglColorRenderbuffer[ne]);I.__webglDepthRenderbuffer&&n.deleteRenderbuffer(I.__webglDepthRenderbuffer)}const q=B.textures;for(let ne=0,se=q.length;ne<se;ne++){const Z=i.get(q[ne]);Z.__webglTexture&&(n.deleteTexture(Z.__webglTexture),a.memory.textures--),i.remove(q[ne])}i.remove(B)}let R=0;function L(){R=0}function F(){const B=R;return B>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+s.maxTextures),R+=1,B}function U(B){const I=[];return I.push(B.wrapS),I.push(B.wrapT),I.push(B.wrapR||0),I.push(B.magFilter),I.push(B.minFilter),I.push(B.anisotropy),I.push(B.internalFormat),I.push(B.format),I.push(B.type),I.push(B.generateMipmaps),I.push(B.premultiplyAlpha),I.push(B.flipY),I.push(B.unpackAlignment),I.push(B.colorSpace),I.join()}function z(B,I){const q=i.get(B);if(B.isVideoTexture&&Ie(B),B.isRenderTargetTexture===!1&&B.version>0&&q.__version!==B.version){const ne=B.image;if(ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$(q,B,I);return}}t.bindTexture(n.TEXTURE_2D,q.__webglTexture,n.TEXTURE0+I)}function V(B,I){const q=i.get(B);if(B.version>0&&q.__version!==B.version){$(q,B,I);return}t.bindTexture(n.TEXTURE_2D_ARRAY,q.__webglTexture,n.TEXTURE0+I)}function G(B,I){const q=i.get(B);if(B.version>0&&q.__version!==B.version){$(q,B,I);return}t.bindTexture(n.TEXTURE_3D,q.__webglTexture,n.TEXTURE0+I)}function D(B,I){const q=i.get(B);if(B.version>0&&q.__version!==B.version){te(q,B,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,q.__webglTexture,n.TEXTURE0+I)}const W={[As]:n.REPEAT,[Jt]:n.CLAMP_TO_EDGE,[mo]:n.MIRRORED_REPEAT},K={[un]:n.NEAREST,[Gd]:n.NEAREST_MIPMAP_NEAREST,[qr]:n.NEAREST_MIPMAP_LINEAR,[nt]:n.LINEAR,[ro]:n.LINEAR_MIPMAP_NEAREST,[Zn]:n.LINEAR_MIPMAP_LINEAR},ee={[Dj]:n.NEVER,[Oj]:n.ALWAYS,[Lj]:n.LESS,[LB]:n.LEQUAL,[Pj]:n.EQUAL,[Uj]:n.GEQUAL,[Fj]:n.GREATER,[kj]:n.NOTEQUAL};function Q(B,I){if(I.type===Zt&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===nt||I.magFilter===ro||I.magFilter===qr||I.magFilter===Zn||I.minFilter===nt||I.minFilter===ro||I.minFilter===qr||I.minFilter===Zn)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,W[I.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,W[I.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,W[I.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,K[I.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,K[I.minFilter]),I.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,ee[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===un||I.minFilter!==qr&&I.minFilter!==Zn||I.type===Zt&&e.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||i.get(I).__currentAnisotropy){const q=e.get("EXT_texture_filter_anisotropic");n.texParameterf(B,q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,s.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy}}}function ae(B,I){let q=!1;B.__webglInit===void 0&&(B.__webglInit=!0,I.addEventListener("dispose",S));const ne=I.source;let se=f.get(ne);se===void 0&&(se={},f.set(ne,se));const Z=U(I);if(Z!==B.__cacheKey){se[Z]===void 0&&(se[Z]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,q=!0),se[Z].usedTimes++;const Ce=se[B.__cacheKey];Ce!==void 0&&(se[B.__cacheKey].usedTimes--,Ce.usedTimes===0&&_(I)),B.__cacheKey=Z,B.__webglTexture=se[Z].texture}return q}function $(B,I,q){let ne=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(ne=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(ne=n.TEXTURE_3D);const se=ae(B,I),Z=I.source;t.bindTexture(ne,B.__webglTexture,n.TEXTURE0+q);const Ce=i.get(Z);if(Z.version!==Ce.__version||se===!0){t.activeTexture(n.TEXTURE0+q);const me=tt.getPrimaries(tt.workingColorSpace),ve=I.colorSpace===Ui?null:tt.getPrimaries(I.colorSpace),ot=I.colorSpace===Ui||me===ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ot);let ce=x(I.image,!1,s.maxTextureSize);ce=Rt(I,ce);const we=r.convert(I.format,I.colorSpace),Le=r.convert(I.type);let Oe=v(I.internalFormat,we,Le,I.colorSpace,I.isVideoTexture);Q(ne,I);let Ee;const rt=I.mipmaps,We=I.isVideoTexture!==!0,_t=Ce.__version===void 0||se===!0,O=Z.dataReady,fe=w(I,ce);if(I.isDepthTexture)Oe=b(I.format===ic,I.type),_t&&(We?t.texStorage2D(n.TEXTURE_2D,1,Oe,ce.width,ce.height):t.texImage2D(n.TEXTURE_2D,0,Oe,ce.width,ce.height,0,we,Le,null));else if(I.isDataTexture)if(rt.length>0){We&&_t&&t.texStorage2D(n.TEXTURE_2D,fe,Oe,rt[0].width,rt[0].height);for(let J=0,ie=rt.length;J<ie;J++)Ee=rt[J],We?O&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Ee.width,Ee.height,we,Le,Ee.data):t.texImage2D(n.TEXTURE_2D,J,Oe,Ee.width,Ee.height,0,we,Le,Ee.data);I.generateMipmaps=!1}else We?(_t&&t.texStorage2D(n.TEXTURE_2D,fe,Oe,ce.width,ce.height),O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ce.width,ce.height,we,Le,ce.data)):t.texImage2D(n.TEXTURE_2D,0,Oe,ce.width,ce.height,0,we,Le,ce.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){We&&_t&&t.texStorage3D(n.TEXTURE_2D_ARRAY,fe,Oe,rt[0].width,rt[0].height,ce.depth);for(let J=0,ie=rt.length;J<ie;J++)if(Ee=rt[J],I.format!==Pt)if(we!==null)if(We){if(O)if(I.layerUpdates.size>0){const Ae=DS(Ee.width,Ee.height,I.format,I.type);for(const ge of I.layerUpdates){const He=Ee.data.subarray(ge*Ae/Ee.data.BYTES_PER_ELEMENT,(ge+1)*Ae/Ee.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,ge,Ee.width,Ee.height,1,we,He)}I.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,Ee.width,Ee.height,ce.depth,we,Ee.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,J,Oe,Ee.width,Ee.height,ce.depth,0,Ee.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else We?O&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,Ee.width,Ee.height,ce.depth,we,Le,Ee.data):t.texImage3D(n.TEXTURE_2D_ARRAY,J,Oe,Ee.width,Ee.height,ce.depth,0,we,Le,Ee.data)}else{We&&_t&&t.texStorage2D(n.TEXTURE_2D,fe,Oe,rt[0].width,rt[0].height);for(let J=0,ie=rt.length;J<ie;J++)Ee=rt[J],I.format!==Pt?we!==null?We?O&&t.compressedTexSubImage2D(n.TEXTURE_2D,J,0,0,Ee.width,Ee.height,we,Ee.data):t.compressedTexImage2D(n.TEXTURE_2D,J,Oe,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?O&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Ee.width,Ee.height,we,Le,Ee.data):t.texImage2D(n.TEXTURE_2D,J,Oe,Ee.width,Ee.height,0,we,Le,Ee.data)}else if(I.isDataArrayTexture)if(We){if(_t&&t.texStorage3D(n.TEXTURE_2D_ARRAY,fe,Oe,ce.width,ce.height,ce.depth),O)if(I.layerUpdates.size>0){const J=DS(ce.width,ce.height,I.format,I.type);for(const ie of I.layerUpdates){const Ae=ce.data.subarray(ie*J/ce.data.BYTES_PER_ELEMENT,(ie+1)*J/ce.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ie,ce.width,ce.height,1,we,Le,Ae)}I.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ce.width,ce.height,ce.depth,we,Le,ce.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Oe,ce.width,ce.height,ce.depth,0,we,Le,ce.data);else if(I.isData3DTexture)We?(_t&&t.texStorage3D(n.TEXTURE_3D,fe,Oe,ce.width,ce.height,ce.depth),O&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ce.width,ce.height,ce.depth,we,Le,ce.data)):t.texImage3D(n.TEXTURE_3D,0,Oe,ce.width,ce.height,ce.depth,0,we,Le,ce.data);else if(I.isFramebufferTexture){if(_t)if(We)t.texStorage2D(n.TEXTURE_2D,fe,Oe,ce.width,ce.height);else{let J=ce.width,ie=ce.height;for(let Ae=0;Ae<fe;Ae++)t.texImage2D(n.TEXTURE_2D,Ae,Oe,J,ie,0,we,Le,null),J>>=1,ie>>=1}}else if(rt.length>0){if(We&&_t){const J=Me(rt[0]);t.texStorage2D(n.TEXTURE_2D,fe,Oe,J.width,J.height)}for(let J=0,ie=rt.length;J<ie;J++)Ee=rt[J],We?O&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,we,Le,Ee):t.texImage2D(n.TEXTURE_2D,J,Oe,we,Le,Ee);I.generateMipmaps=!1}else if(We){if(_t){const J=Me(ce);t.texStorage2D(n.TEXTURE_2D,fe,Oe,J.width,J.height)}O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,we,Le,ce)}else t.texImage2D(n.TEXTURE_2D,0,Oe,we,Le,ce);A(I)&&m(ne),Ce.__version=Z.version,I.onUpdate&&I.onUpdate(I)}B.__version=I.version}function te(B,I,q){if(I.image.length!==6)return;const ne=ae(B,I),se=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+q);const Z=i.get(se);if(se.version!==Z.__version||ne===!0){t.activeTexture(n.TEXTURE0+q);const Ce=tt.getPrimaries(tt.workingColorSpace),me=I.colorSpace===Ui?null:tt.getPrimaries(I.colorSpace),ve=I.colorSpace===Ui||Ce===me?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);const ot=I.isCompressedTexture||I.image[0].isCompressedTexture,ce=I.image[0]&&I.image[0].isDataTexture,we=[];for(let ie=0;ie<6;ie++)!ot&&!ce?we[ie]=x(I.image[ie],!0,s.maxCubemapSize):we[ie]=ce?I.image[ie].image:I.image[ie],we[ie]=Rt(I,we[ie]);const Le=we[0],Oe=r.convert(I.format,I.colorSpace),Ee=r.convert(I.type),rt=v(I.internalFormat,Oe,Ee,I.colorSpace),We=I.isVideoTexture!==!0,_t=Z.__version===void 0||ne===!0,O=se.dataReady;let fe=w(I,Le);Q(n.TEXTURE_CUBE_MAP,I);let J;if(ot){We&&_t&&t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,rt,Le.width,Le.height);for(let ie=0;ie<6;ie++){J=we[ie].mipmaps;for(let Ae=0;Ae<J.length;Ae++){const ge=J[Ae];I.format!==Pt?Oe!==null?We?O&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae,0,0,ge.width,ge.height,Oe,ge.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae,rt,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):We?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae,0,0,ge.width,ge.height,Oe,Ee,ge.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae,rt,ge.width,ge.height,0,Oe,Ee,ge.data)}}}else{if(J=I.mipmaps,We&&_t){J.length>0&&fe++;const ie=Me(we[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,fe,rt,ie.width,ie.height)}for(let ie=0;ie<6;ie++)if(ce){We?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,we[ie].width,we[ie].height,Oe,Ee,we[ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,rt,we[ie].width,we[ie].height,0,Oe,Ee,we[ie].data);for(let Ae=0;Ae<J.length;Ae++){const He=J[Ae].image[ie].image;We?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae+1,0,0,He.width,He.height,Oe,Ee,He.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae+1,rt,He.width,He.height,0,Oe,Ee,He.data)}}else{We?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Oe,Ee,we[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,rt,Oe,Ee,we[ie]);for(let Ae=0;Ae<J.length;Ae++){const ge=J[Ae];We?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae+1,0,0,Oe,Ee,ge.image[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ae+1,rt,Oe,Ee,ge.image[ie])}}}A(I)&&m(n.TEXTURE_CUBE_MAP),Z.__version=se.version,I.onUpdate&&I.onUpdate(I)}B.__version=I.version}function de(B,I,q,ne,se,Z){const Ce=r.convert(q.format,q.colorSpace),me=r.convert(q.type),ve=v(q.internalFormat,Ce,me,q.colorSpace),ot=i.get(I),ce=i.get(q);if(ce.__renderTarget=I,!ot.__hasExternalTextures){const we=Math.max(1,I.width>>Z),Le=Math.max(1,I.height>>Z);se===n.TEXTURE_3D||se===n.TEXTURE_2D_ARRAY?t.texImage3D(se,Z,ve,we,Le,I.depth,0,Ce,me,null):t.texImage2D(se,Z,ve,we,Le,0,Ce,me,null)}t.bindFramebuffer(n.FRAMEBUFFER,B),st(I)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ne,se,ce.__webglTexture,0,it(I)):(se===n.TEXTURE_2D||se>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&se<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ne,se,ce.__webglTexture,Z),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(B,I,q){if(n.bindRenderbuffer(n.RENDERBUFFER,B),I.depthBuffer){const ne=I.depthTexture,se=ne&&ne.isDepthTexture?ne.type:null,Z=b(I.stencilBuffer,se),Ce=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=it(I);st(I)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,Z,I.width,I.height):q?n.renderbufferStorageMultisample(n.RENDERBUFFER,me,Z,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,Z,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ce,n.RENDERBUFFER,B)}else{const ne=I.textures;for(let se=0;se<ne.length;se++){const Z=ne[se],Ce=r.convert(Z.format,Z.colorSpace),me=r.convert(Z.type),ve=v(Z.internalFormat,Ce,me,Z.colorSpace),ot=it(I);q&&st(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ot,ve,I.width,I.height):st(I)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ot,ve,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,ve,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Re(B,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,B),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ne=i.get(I.depthTexture);ne.__renderTarget=I,(!ne.__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),z(I.depthTexture,0);const se=ne.__webglTexture,Z=it(I);if(I.depthTexture.format===Ul)st(I)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,se,0,Z):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,se,0);else if(I.depthTexture.format===ic)st(I)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,se,0,Z):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,se,0);else throw new Error("Unknown depthTexture format")}function Ue(B){const I=i.get(B),q=B.isWebGLCubeRenderTarget===!0;if(I.__boundDepthTexture!==B.depthTexture){const ne=B.depthTexture;if(I.__depthDisposeCallback&&I.__depthDisposeCallback(),ne){const se=()=>{delete I.__boundDepthTexture,delete I.__depthDisposeCallback,ne.removeEventListener("dispose",se)};ne.addEventListener("dispose",se),I.__depthDisposeCallback=se}I.__boundDepthTexture=ne}if(B.depthTexture&&!I.__autoAllocateDepthBuffer){if(q)throw new Error("target.depthTexture not supported in Cube render targets");Re(I.__webglFramebuffer,B)}else if(q){I.__webglDepthbuffer=[];for(let ne=0;ne<6;ne++)if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[ne]),I.__webglDepthbuffer[ne]===void 0)I.__webglDepthbuffer[ne]=n.createRenderbuffer(),ue(I.__webglDepthbuffer[ne],B,!1);else{const se=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=I.__webglDepthbuffer[ne];n.bindRenderbuffer(n.RENDERBUFFER,Z),n.framebufferRenderbuffer(n.FRAMEBUFFER,se,n.RENDERBUFFER,Z)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer===void 0)I.__webglDepthbuffer=n.createRenderbuffer(),ue(I.__webglDepthbuffer,B,!1);else{const ne=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,se=I.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,se),n.framebufferRenderbuffer(n.FRAMEBUFFER,ne,n.RENDERBUFFER,se)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(B,I,q){const ne=i.get(B);I!==void 0&&de(ne.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),q!==void 0&&Ue(B)}function Et(B){const I=B.texture,q=i.get(B),ne=i.get(I);B.addEventListener("dispose",C);const se=B.textures,Z=B.isWebGLCubeRenderTarget===!0,Ce=se.length>1;if(Ce||(ne.__webglTexture===void 0&&(ne.__webglTexture=n.createTexture()),ne.__version=I.version,a.memory.textures++),Z){q.__webglFramebuffer=[];for(let me=0;me<6;me++)if(I.mipmaps&&I.mipmaps.length>0){q.__webglFramebuffer[me]=[];for(let ve=0;ve<I.mipmaps.length;ve++)q.__webglFramebuffer[me][ve]=n.createFramebuffer()}else q.__webglFramebuffer[me]=n.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){q.__webglFramebuffer=[];for(let me=0;me<I.mipmaps.length;me++)q.__webglFramebuffer[me]=n.createFramebuffer()}else q.__webglFramebuffer=n.createFramebuffer();if(Ce)for(let me=0,ve=se.length;me<ve;me++){const ot=i.get(se[me]);ot.__webglTexture===void 0&&(ot.__webglTexture=n.createTexture(),a.memory.textures++)}if(B.samples>0&&st(B)===!1){q.__webglMultisampledFramebuffer=n.createFramebuffer(),q.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,q.__webglMultisampledFramebuffer);for(let me=0;me<se.length;me++){const ve=se[me];q.__webglColorRenderbuffer[me]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,q.__webglColorRenderbuffer[me]);const ot=r.convert(ve.format,ve.colorSpace),ce=r.convert(ve.type),we=v(ve.internalFormat,ot,ce,ve.colorSpace,B.isXRRenderTarget===!0),Le=it(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,we,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+me,n.RENDERBUFFER,q.__webglColorRenderbuffer[me])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(q.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(q.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Z){t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture),Q(n.TEXTURE_CUBE_MAP,I);for(let me=0;me<6;me++)if(I.mipmaps&&I.mipmaps.length>0)for(let ve=0;ve<I.mipmaps.length;ve++)de(q.__webglFramebuffer[me][ve],B,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve);else de(q.__webglFramebuffer[me],B,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0);A(I)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ce){for(let me=0,ve=se.length;me<ve;me++){const ot=se[me],ce=i.get(ot);t.bindTexture(n.TEXTURE_2D,ce.__webglTexture),Q(n.TEXTURE_2D,ot),de(q.__webglFramebuffer,B,ot,n.COLOR_ATTACHMENT0+me,n.TEXTURE_2D,0),A(ot)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let me=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(me=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(me,ne.__webglTexture),Q(me,I),I.mipmaps&&I.mipmaps.length>0)for(let ve=0;ve<I.mipmaps.length;ve++)de(q.__webglFramebuffer[ve],B,I,n.COLOR_ATTACHMENT0,me,ve);else de(q.__webglFramebuffer,B,I,n.COLOR_ATTACHMENT0,me,0);A(I)&&m(me),t.unbindTexture()}B.depthBuffer&&Ue(B)}function et(B){const I=B.textures;for(let q=0,ne=I.length;q<ne;q++){const se=I[q];if(A(se)){const Z=y(B),Ce=i.get(se).__webglTexture;t.bindTexture(Z,Ce),m(Z),t.unbindTexture()}}}const Tt=[],k=[];function Ii(B){if(B.samples>0){if(st(B)===!1){const I=B.textures,q=B.width,ne=B.height;let se=n.COLOR_BUFFER_BIT;const Z=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ce=i.get(B),me=I.length>1;if(me)for(let ve=0;ve<I.length;ve++)t.bindFramebuffer(n.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ce.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ce.__webglFramebuffer);for(let ve=0;ve<I.length;ve++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(se|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(se|=n.STENCIL_BUFFER_BIT)),me){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ce.__webglColorRenderbuffer[ve]);const ot=i.get(I[ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ot,0)}n.blitFramebuffer(0,0,q,ne,0,0,q,ne,se,n.NEAREST),l===!0&&(Tt.length=0,k.length=0,Tt.push(n.COLOR_ATTACHMENT0+ve),B.depthBuffer&&B.resolveDepthBuffer===!1&&(Tt.push(Z),k.push(Z),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,k)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Tt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),me)for(let ve=0;ve<I.length;ve++){t.bindFramebuffer(n.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,Ce.__webglColorRenderbuffer[ve]);const ot=i.get(I[ve]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ce.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,ot,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const I=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[I])}}}function it(B){return Math.min(s.maxSamples,B.samples)}function st(B){const I=i.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ie(B){const I=a.render.frame;u.get(B)!==I&&(u.set(B,I),B.update())}function Rt(B,I){const q=B.colorSpace,ne=B.format,se=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||q!==It&&q!==Ui&&(tt.getTransfer(q)===vt?(ne!==Pt||se!==tn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",q)),I}function Me(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=F,this.resetTextureUnits=L,this.setTexture2D=z,this.setTexture2DArray=V,this.setTexture3D=G,this.setTextureCube=D,this.rebindTextures=ze,this.setupRenderTarget=Et,this.updateRenderTargetMipmap=et,this.updateMultisampleRenderTarget=Ii,this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=de,this.useMultisampledRTT=st}function X8(n,e){function t(i,s=Ui){let r;const a=tt.getTransfer(s);if(i===tn)return n.UNSIGNED_BYTE;if(i===Ib)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Tb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===CB)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Cb)return n.BYTE;if(i===Mb)return n.SHORT;if(i===yd)return n.UNSIGNED_SHORT;if(i===Mm)return n.INT;if(i===fa)return n.UNSIGNED_INT;if(i===Zt)return n.FLOAT;if(i===cn)return n.HALF_FLOAT;if(i===MB)return n.ALPHA;if(i===IB)return n.RGB;if(i===Pt)return n.RGBA;if(i===TB)return n.LUMINANCE;if(i===RB)return n.LUMINANCE_ALPHA;if(i===Ul)return n.DEPTH_COMPONENT;if(i===ic)return n.DEPTH_STENCIL;if(i===Yr)return n.RED;if(i===Rb)return n.RED_INTEGER;if(i===Za)return n.RG;if(i===Bb)return n.RG_INTEGER;if(i===Nb)return n.RGBA_INTEGER;if(i===jf||i===Qu||i===Vf||i===ju)if(a===vt)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===jf)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Qu)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Vf)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ju)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===jf)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Qu)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Vf)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ju)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Dp||i===ty||i===Lp||i===ny)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===Dp)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===ty)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Lp)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===ny)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Pp||i===Fp||i===kp)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Pp||i===Fp)return a===vt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===kp)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===vd||i===iy||i===sy||i===ry||i===bd||i===ay||i===oy||i===ly||i===cy||i===uy||i===dy||i===hy||i===fy||i===py)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===vd)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===iy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===sy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===ry)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===bd)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ay)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===oy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ly)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===cy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===uy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===dy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===hy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===fy)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===py)return a===vt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Vu||i===my||i===Up)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===Vu)return a===vt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===my)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Up)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===BB||i===gy||i===Ay||i===xy)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===Vu)return r.COMPRESSED_RED_RGTC1_EXT;if(i===gy)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Ay)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===xy)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===nc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const K8={type:"move"};class rA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Xr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Xr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new P),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Xr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new P),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const x of e.hand.values()){const A=t.getJointPose(x,i),m=this._getHandJoint(c,x);A!==null&&(m.matrix.fromArray(A.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=A.radius),m.visible=A!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),p=.02,g=.005;c.inputState.pinching&&f>p+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(K8)))}return o!==null&&(o.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Xr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const J8=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Z8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class eH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new Ft,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Si({vertexShader:J8,fragmentShader:Z8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new bt(new Sr(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class tH extends xs{constructor(e,t){super();const i=this;let s=null,r=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,f=null,p=null,g=null;const x=new eH,A=t.getContextAttributes();let m=null,y=null;const v=[],b=[],w=new Ge;let S=null;const C=new Cn;C.viewport=new dt;const M=new Cn;M.viewport=new dt;const _=[C,M],E=new l6;let R=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let te=v[$];return te===void 0&&(te=new rA,v[$]=te),te.getTargetRaySpace()},this.getControllerGrip=function($){let te=v[$];return te===void 0&&(te=new rA,v[$]=te),te.getGripSpace()},this.getHand=function($){let te=v[$];return te===void 0&&(te=new rA,v[$]=te),te.getHandSpace()};function F($){const te=b.indexOf($.inputSource);if(te===-1)return;const de=v[te];de!==void 0&&(de.update($.inputSource,$.frame,c||a),de.dispatchEvent({type:$.type,data:$.inputSource}))}function U(){s.removeEventListener("select",F),s.removeEventListener("selectstart",F),s.removeEventListener("selectend",F),s.removeEventListener("squeeze",F),s.removeEventListener("squeezestart",F),s.removeEventListener("squeezeend",F),s.removeEventListener("end",U),s.removeEventListener("inputsourceschange",z);for(let $=0;$<v.length;$++){const te=b[$];te!==null&&(b[$]=null,v[$].disconnect(te))}R=null,L=null,x.reset(),e.setRenderTarget(m),p=null,f=null,d=null,s=null,y=null,ae.stop(),i.isPresenting=!1,e.setPixelRatio(S),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){r=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){o=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function($){c=$},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function($){if(s=$,s!==null){if(m=e.getRenderTarget(),s.addEventListener("select",F),s.addEventListener("selectstart",F),s.addEventListener("selectend",F),s.addEventListener("squeeze",F),s.addEventListener("squeezestart",F),s.addEventListener("squeezeend",F),s.addEventListener("end",U),s.addEventListener("inputsourceschange",z),A.xrCompatible!==!0&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(w),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let de=null,ue=null,Re=null;A.depth&&(Re=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,de=A.stencil?ic:Ul,ue=A.stencil?nc:fa);const Ue={colorFormat:t.RGBA8,depthFormat:Re,scaleFactor:r};d=new XRWebGLBinding(s,t),f=d.createProjectionLayer(Ue),s.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new $i(f.textureWidth,f.textureHeight,{format:Pt,type:tn,depthTexture:new $B(f.textureWidth,f.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}else{const de={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:r};p=new XRWebGLLayer(s,t,de),s.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),y=new $i(p.framebufferWidth,p.framebufferHeight,{format:Pt,type:tn,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await s.requestReferenceSpace(o),ae.setContext(s),ae.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function z($){for(let te=0;te<$.removed.length;te++){const de=$.removed[te],ue=b.indexOf(de);ue>=0&&(b[ue]=null,v[ue].disconnect(de))}for(let te=0;te<$.added.length;te++){const de=$.added[te];let ue=b.indexOf(de);if(ue===-1){for(let Ue=0;Ue<v.length;Ue++)if(Ue>=b.length){b.push(de),ue=Ue;break}else if(b[Ue]===null){b[Ue]=de,ue=Ue;break}if(ue===-1)break}const Re=v[ue];Re&&Re.connect(de)}}const V=new P,G=new P;function D($,te,de){V.setFromMatrixPosition(te.matrixWorld),G.setFromMatrixPosition(de.matrixWorld);const ue=V.distanceTo(G),Re=te.projectionMatrix.elements,Ue=de.projectionMatrix.elements,ze=Re[14]/(Re[10]-1),Et=Re[14]/(Re[10]+1),et=(Re[9]+1)/Re[5],Tt=(Re[9]-1)/Re[5],k=(Re[8]-1)/Re[0],Ii=(Ue[8]+1)/Ue[0],it=ze*k,st=ze*Ii,Ie=ue/(-k+Ii),Rt=Ie*-k;if(te.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(Rt),$.translateZ(Ie),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert(),Re[10]===-1)$.projectionMatrix.copy(te.projectionMatrix),$.projectionMatrixInverse.copy(te.projectionMatrixInverse);else{const Me=ze+Ie,B=Et+Ie,I=it-Rt,q=st+(ue-Rt),ne=et*Et/B*Me,se=Tt*Et/B*Me;$.projectionMatrix.makePerspective(I,q,ne,se,Me,B),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}}function W($,te){te===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(te.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(s===null)return;let te=$.near,de=$.far;x.texture!==null&&(x.depthNear>0&&(te=x.depthNear),x.depthFar>0&&(de=x.depthFar)),E.near=M.near=C.near=te,E.far=M.far=C.far=de,(R!==E.near||L!==E.far)&&(s.updateRenderState({depthNear:E.near,depthFar:E.far}),R=E.near,L=E.far),C.layers.mask=$.layers.mask|2,M.layers.mask=$.layers.mask|4,E.layers.mask=C.layers.mask|M.layers.mask;const ue=$.parent,Re=E.cameras;W(E,ue);for(let Ue=0;Ue<Re.length;Ue++)W(Re[Ue],ue);Re.length===2?D(E,C,M):E.projectionMatrix.copy(C.projectionMatrix),K($,E,ue)};function K($,te,de){de===null?$.matrix.copy(te.matrixWorld):($.matrix.copy(de.matrixWorld),$.matrix.invert(),$.matrix.multiply(te.matrixWorld)),$.matrix.decompose($.position,$.quaternion,$.scale),$.updateMatrixWorld(!0),$.projectionMatrix.copy(te.projectionMatrix),$.projectionMatrixInverse.copy(te.projectionMatrixInverse),$.isPerspectiveCamera&&($.fov=ac*2*Math.atan(1/$.projectionMatrix.elements[5]),$.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function($){l=$,f!==null&&(f.fixedFoveation=$),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=$)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(E)};let ee=null;function Q($,te){if(u=te.getViewerPose(c||a),g=te,u!==null){const de=u.views;p!==null&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));let ue=!1;de.length!==E.cameras.length&&(E.cameras.length=0,ue=!0);for(let Ue=0;Ue<de.length;Ue++){const ze=de[Ue];let Et=null;if(p!==null)Et=p.getViewport(ze);else{const Tt=d.getViewSubImage(f,ze);Et=Tt.viewport,Ue===0&&(e.setRenderTargetTextures(y,Tt.colorTexture,f.ignoreDepthValues?void 0:Tt.depthStencilTexture),e.setRenderTarget(y))}let et=_[Ue];et===void 0&&(et=new Cn,et.layers.enable(Ue),et.viewport=new dt,_[Ue]=et),et.matrix.fromArray(ze.transform.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale),et.projectionMatrix.fromArray(ze.projectionMatrix),et.projectionMatrixInverse.copy(et.projectionMatrix).invert(),et.viewport.set(Et.x,Et.y,Et.width,Et.height),Ue===0&&(E.matrix.copy(et.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),ue===!0&&E.cameras.push(et)}const Re=s.enabledFeatures;if(Re&&Re.includes("depth-sensing")){const Ue=d.getDepthInformation(de[0]);Ue&&Ue.isValid&&Ue.texture&&x.init(e,Ue,s.renderState)}}for(let de=0;de<v.length;de++){const ue=b[de],Re=v[de];ue!==null&&Re!==void 0&&Re.update(ue,te,c||a)}ee&&ee($,te),te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:te}),g=null}const ae=new nN;ae.setAnimationLoop(Q),this.setAnimationLoop=function($){ee=$},this.dispose=function(){}}}const Ma=new qi,nH=new ke;function iH(n,e){function t(A,m){A.matrixAutoUpdate===!0&&A.updateMatrix(),m.value.copy(A.matrix)}function i(A,m){m.color.getRGB(A.fogColor.value,jB(n)),m.isFog?(A.fogNear.value=m.near,A.fogFar.value=m.far):m.isFogExp2&&(A.fogDensity.value=m.density)}function s(A,m,y,v,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(A,m):m.isMeshToonMaterial?(r(A,m),d(A,m)):m.isMeshPhongMaterial?(r(A,m),u(A,m)):m.isMeshStandardMaterial?(r(A,m),f(A,m),m.isMeshPhysicalMaterial&&p(A,m,b)):m.isMeshMatcapMaterial?(r(A,m),g(A,m)):m.isMeshDepthMaterial?r(A,m):m.isMeshDistanceMaterial?(r(A,m),x(A,m)):m.isMeshNormalMaterial?r(A,m):m.isLineBasicMaterial?(a(A,m),m.isLineDashedMaterial&&o(A,m)):m.isPointsMaterial?l(A,m,y,v):m.isSpriteMaterial?c(A,m):m.isShadowMaterial?(A.color.value.copy(m.color),A.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function r(A,m){A.opacity.value=m.opacity,m.color&&A.diffuse.value.copy(m.color),m.emissive&&A.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(A.map.value=m.map,t(m.map,A.mapTransform)),m.alphaMap&&(A.alphaMap.value=m.alphaMap,t(m.alphaMap,A.alphaMapTransform)),m.bumpMap&&(A.bumpMap.value=m.bumpMap,t(m.bumpMap,A.bumpMapTransform),A.bumpScale.value=m.bumpScale,m.side===In&&(A.bumpScale.value*=-1)),m.normalMap&&(A.normalMap.value=m.normalMap,t(m.normalMap,A.normalMapTransform),A.normalScale.value.copy(m.normalScale),m.side===In&&A.normalScale.value.negate()),m.displacementMap&&(A.displacementMap.value=m.displacementMap,t(m.displacementMap,A.displacementMapTransform),A.displacementScale.value=m.displacementScale,A.displacementBias.value=m.displacementBias),m.emissiveMap&&(A.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,A.emissiveMapTransform)),m.specularMap&&(A.specularMap.value=m.specularMap,t(m.specularMap,A.specularMapTransform)),m.alphaTest>0&&(A.alphaTest.value=m.alphaTest);const y=e.get(m),v=y.envMap,b=y.envMapRotation;v&&(A.envMap.value=v,Ma.copy(b),Ma.x*=-1,Ma.y*=-1,Ma.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Ma.y*=-1,Ma.z*=-1),A.envMapRotation.value.setFromMatrix4(nH.makeRotationFromEuler(Ma)),A.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=m.reflectivity,A.ior.value=m.ior,A.refractionRatio.value=m.refractionRatio),m.lightMap&&(A.lightMap.value=m.lightMap,A.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,A.lightMapTransform)),m.aoMap&&(A.aoMap.value=m.aoMap,A.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,A.aoMapTransform))}function a(A,m){A.diffuse.value.copy(m.color),A.opacity.value=m.opacity,m.map&&(A.map.value=m.map,t(m.map,A.mapTransform))}function o(A,m){A.dashSize.value=m.dashSize,A.totalSize.value=m.dashSize+m.gapSize,A.scale.value=m.scale}function l(A,m,y,v){A.diffuse.value.copy(m.color),A.opacity.value=m.opacity,A.size.value=m.size*y,A.scale.value=v*.5,m.map&&(A.map.value=m.map,t(m.map,A.uvTransform)),m.alphaMap&&(A.alphaMap.value=m.alphaMap,t(m.alphaMap,A.alphaMapTransform)),m.alphaTest>0&&(A.alphaTest.value=m.alphaTest)}function c(A,m){A.diffuse.value.copy(m.color),A.opacity.value=m.opacity,A.rotation.value=m.rotation,m.map&&(A.map.value=m.map,t(m.map,A.mapTransform)),m.alphaMap&&(A.alphaMap.value=m.alphaMap,t(m.alphaMap,A.alphaMapTransform)),m.alphaTest>0&&(A.alphaTest.value=m.alphaTest)}function u(A,m){A.specular.value.copy(m.specular),A.shininess.value=Math.max(m.shininess,1e-4)}function d(A,m){m.gradientMap&&(A.gradientMap.value=m.gradientMap)}function f(A,m){A.metalness.value=m.metalness,m.metalnessMap&&(A.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,A.metalnessMapTransform)),A.roughness.value=m.roughness,m.roughnessMap&&(A.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,A.roughnessMapTransform)),m.envMap&&(A.envMapIntensity.value=m.envMapIntensity)}function p(A,m,y){A.ior.value=m.ior,m.sheen>0&&(A.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),A.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(A.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,A.sheenColorMapTransform)),m.sheenRoughnessMap&&(A.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,A.sheenRoughnessMapTransform))),m.clearcoat>0&&(A.clearcoat.value=m.clearcoat,A.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(A.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,A.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(A.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===In&&A.clearcoatNormalScale.value.negate())),m.dispersion>0&&(A.dispersion.value=m.dispersion),m.iridescence>0&&(A.iridescence.value=m.iridescence,A.iridescenceIOR.value=m.iridescenceIOR,A.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(A.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,A.iridescenceMapTransform)),m.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),m.transmission>0&&(A.transmission.value=m.transmission,A.transmissionSamplerMap.value=y.texture,A.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(A.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,A.transmissionMapTransform)),A.thickness.value=m.thickness,m.thicknessMap&&(A.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=m.attenuationDistance,A.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(A.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(A.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=m.specularIntensity,A.specularColor.value.copy(m.specularColor),m.specularColorMap&&(A.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,A.specularColorMapTransform)),m.specularIntensityMap&&(A.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,A.specularIntensityMapTransform))}function g(A,m){m.matcap&&(A.matcap.value=m.matcap)}function x(A,m){const y=e.get(m).light;A.referencePosition.value.setFromMatrixPosition(y.matrixWorld),A.nearDistance.value=y.shadow.camera.near,A.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function sH(n,e,t,i){let s={},r={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,v){const b=v.program;i.uniformBlockBinding(y,b)}function c(y,v){let b=s[y.id];b===void 0&&(g(y),b=u(y),s[y.id]=b,y.addEventListener("dispose",A));const w=v.program;i.updateUBOMapping(y,w);const S=e.render.frame;r[y.id]!==S&&(f(y),r[y.id]=S)}function u(y){const v=d();y.__bindingPointIndex=v;const b=n.createBuffer(),w=y.__size,S=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,w,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,b),b}function d(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const v=s[y.id],b=y.uniforms,w=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let S=0,C=b.length;S<C;S++){const M=Array.isArray(b[S])?b[S]:[b[S]];for(let _=0,E=M.length;_<E;_++){const R=M[_];if(p(R,S,_,w)===!0){const L=R.__offset,F=Array.isArray(R.value)?R.value:[R.value];let U=0;for(let z=0;z<F.length;z++){const V=F[z],G=x(V);typeof V=="number"||typeof V=="boolean"?(R.__data[0]=V,n.bufferSubData(n.UNIFORM_BUFFER,L+U,R.__data)):V.isMatrix3?(R.__data[0]=V.elements[0],R.__data[1]=V.elements[1],R.__data[2]=V.elements[2],R.__data[3]=0,R.__data[4]=V.elements[3],R.__data[5]=V.elements[4],R.__data[6]=V.elements[5],R.__data[7]=0,R.__data[8]=V.elements[6],R.__data[9]=V.elements[7],R.__data[10]=V.elements[8],R.__data[11]=0):(V.toArray(R.__data,U),U+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,L,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(y,v,b,w){const S=y.value,C=v+"_"+b;if(w[C]===void 0)return typeof S=="number"||typeof S=="boolean"?w[C]=S:w[C]=S.clone(),!0;{const M=w[C];if(typeof S=="number"||typeof S=="boolean"){if(M!==S)return w[C]=S,!0}else if(M.equals(S)===!1)return M.copy(S),!0}return!1}function g(y){const v=y.uniforms;let b=0;const w=16;for(let C=0,M=v.length;C<M;C++){const _=Array.isArray(v[C])?v[C]:[v[C]];for(let E=0,R=_.length;E<R;E++){const L=_[E],F=Array.isArray(L.value)?L.value:[L.value];for(let U=0,z=F.length;U<z;U++){const V=F[U],G=x(V),D=b%w,W=D%G.boundary,K=D+W;b+=W,K!==0&&w-K<G.storage&&(b+=w-K),L.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=b,b+=G.storage}}}const S=b%w;return S>0&&(b+=w-S),y.__size=b,y.__cache={},this}function x(y){const v={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(v.boundary=4,v.storage=4):y.isVector2?(v.boundary=8,v.storage=8):y.isVector3||y.isColor?(v.boundary=16,v.storage=12):y.isVector4?(v.boundary=16,v.storage=16):y.isMatrix3?(v.boundary=48,v.storage=48):y.isMatrix4?(v.boundary=64,v.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),v}function A(y){const v=y.target;v.removeEventListener("dispose",A);const b=a.indexOf(v.__bindingPointIndex);a.splice(b,1),n.deleteBuffer(s[v.id]),delete s[v.id],delete r[v.id]}function m(){for(const y in s)n.deleteBuffer(s[y]);a=[],s={},r={}}return{bind:l,update:c,dispose:m}}class oN{constructor(e={}){const{canvas:t=n5(),context:i=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=a;const g=new Uint32Array(4),x=new Int32Array(4);let A=null,m=null;const y=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ct,this.toneMapping=Ds,this.toneMappingExposure=1;const b=this;let w=!1,S=0,C=0,M=null,_=-1,E=null;const R=new dt,L=new dt;let F=null;const U=new Te(0);let z=0,V=t.width,G=t.height,D=1,W=null,K=null;const ee=new dt(0,0,V,G),Q=new dt(0,0,V,G);let ae=!1;const $=new Qb;let te=!1,de=!1;this.transmissionResolutionScale=1;const ue=new ke,Re=new ke,Ue=new P,ze=new dt,Et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let et=!1;function Tt(){return M===null?D:1}let k=i;function Ii(T,j){return t.getContext(T,j)}try{const T={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Sm}`),t.addEventListener("webglcontextlost",ie,!1),t.addEventListener("webglcontextrestored",Ae,!1),t.addEventListener("webglcontextcreationerror",ge,!1),k===null){const j="webgl2";if(k=Ii(j,T),k===null)throw Ii(j)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let it,st,Ie,Rt,Me,B,I,q,ne,se,Z,Ce,me,ve,ot,ce,we,Le,Oe,Ee,rt,We,_t,O;function fe(){it=new pG(k),it.init(),We=new X8(k,it),st=new lG(k,it,e,We),Ie=new q8(k,it),st.reverseDepthBuffer&&f&&Ie.buffers.depth.setReversed(!0),Rt=new AG(k),Me=new P8,B=new Y8(k,it,Ie,Me,st,We,Rt),I=new uG(b),q=new fG(b),ne=new _6(k),_t=new aG(k,ne),se=new mG(k,ne,Rt,_t),Z=new yG(k,se,ne,Rt),Oe=new xG(k,st,B),ce=new cG(Me),Ce=new L8(b,I,q,it,st,_t,ce),me=new iH(b,Me),ve=new k8,ot=new G8(it),Le=new rG(b,I,q,Ie,Z,p,l),we=new W8(b,Z,st),O=new sH(k,Rt,st,Ie),Ee=new oG(k,it,Rt),rt=new gG(k,it,Rt),Rt.programs=Ce.programs,b.capabilities=st,b.extensions=it,b.properties=Me,b.renderLists=ve,b.shadowMap=we,b.state=Ie,b.info=Rt}fe();const J=new tH(b,k);this.xr=J,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){const T=it.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=it.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(T){T!==void 0&&(D=T,this.setSize(V,G,!1))},this.getSize=function(T){return T.set(V,G)},this.setSize=function(T,j,Y=!0){if(J.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=T,G=j,t.width=Math.floor(T*D),t.height=Math.floor(j*D),Y===!0&&(t.style.width=T+"px",t.style.height=j+"px"),this.setViewport(0,0,T,j)},this.getDrawingBufferSize=function(T){return T.set(V*D,G*D).floor()},this.setDrawingBufferSize=function(T,j,Y){V=T,G=j,D=Y,t.width=Math.floor(T*Y),t.height=Math.floor(j*Y),this.setViewport(0,0,T,j)},this.getCurrentViewport=function(T){return T.copy(R)},this.getViewport=function(T){return T.copy(ee)},this.setViewport=function(T,j,Y,X){T.isVector4?ee.set(T.x,T.y,T.z,T.w):ee.set(T,j,Y,X),Ie.viewport(R.copy(ee).multiplyScalar(D).round())},this.getScissor=function(T){return T.copy(Q)},this.setScissor=function(T,j,Y,X){T.isVector4?Q.set(T.x,T.y,T.z,T.w):Q.set(T,j,Y,X),Ie.scissor(L.copy(Q).multiplyScalar(D).round())},this.getScissorTest=function(){return ae},this.setScissorTest=function(T){Ie.setScissorTest(ae=T)},this.setOpaqueSort=function(T){W=T},this.setTransparentSort=function(T){K=T},this.getClearColor=function(T){return T.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(T=!0,j=!0,Y=!0){let X=0;if(T){let H=!1;if(M!==null){const le=M.texture.format;H=le===Nb||le===Bb||le===Rb}if(H){const le=M.texture.type,pe=le===tn||le===fa||le===yd||le===nc||le===Ib||le===Tb,ye=Le.getClearColor(),_e=Le.getClearAlpha(),Qe=ye.r,je=ye.g,Be=ye.b;pe?(g[0]=Qe,g[1]=je,g[2]=Be,g[3]=_e,k.clearBufferuiv(k.COLOR,0,g)):(x[0]=Qe,x[1]=je,x[2]=Be,x[3]=_e,k.clearBufferiv(k.COLOR,0,x))}else X|=k.COLOR_BUFFER_BIT}j&&(X|=k.DEPTH_BUFFER_BIT),Y&&(X|=k.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),k.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ie,!1),t.removeEventListener("webglcontextrestored",Ae,!1),t.removeEventListener("webglcontextcreationerror",ge,!1),Le.dispose(),ve.dispose(),ot.dispose(),Me.dispose(),I.dispose(),q.dispose(),Z.dispose(),_t.dispose(),O.dispose(),Ce.dispose(),J.dispose(),J.removeEventListener("sessionstart",Zb),J.removeEventListener("sessionend",ew),ya.stop()};function ie(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const T=Rt.autoReset,j=we.enabled,Y=we.autoUpdate,X=we.needsUpdate,H=we.type;fe(),Rt.autoReset=T,we.enabled=j,we.autoUpdate=Y,we.needsUpdate=X,we.type=H}function ge(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function He(T){const j=T.target;j.removeEventListener("dispose",He),qt(j)}function qt(T){Rn(T),Me.remove(T)}function Rn(T){const j=Me.get(T).programs;j!==void 0&&(j.forEach(function(Y){Ce.releaseProgram(Y)}),T.isShaderMaterial&&Ce.releaseShaderCache(T))}this.renderBufferDirect=function(T,j,Y,X,H,le){j===null&&(j=Et);const pe=H.isMesh&&H.matrixWorld.determinant()<0,ye=TD(T,j,Y,X,H);Ie.setMaterial(X,pe);let _e=Y.index,Qe=1;if(X.wireframe===!0){if(_e=se.getWireframeAttribute(Y),_e===void 0)return;Qe=2}const je=Y.drawRange,Be=Y.attributes.position;let lt=je.start*Qe,ht=(je.start+je.count)*Qe;le!==null&&(lt=Math.max(lt,le.start*Qe),ht=Math.min(ht,(le.start+le.count)*Qe)),_e!==null?(lt=Math.max(lt,0),ht=Math.min(ht,_e.count)):Be!=null&&(lt=Math.max(lt,0),ht=Math.min(ht,Be.count));const sn=ht-lt;if(sn<0||sn===1/0)return;_t.setup(H,X,ye,Y,_e);let Yt,ut=Ee;if(_e!==null&&(Yt=ne.get(_e),ut=rt,ut.setIndex(Yt)),H.isMesh)X.wireframe===!0?(Ie.setLineWidth(X.wireframeLinewidth*Tt()),ut.setMode(k.LINES)):ut.setMode(k.TRIANGLES);else if(H.isLine){let Ne=X.linewidth;Ne===void 0&&(Ne=1),Ie.setLineWidth(Ne*Tt()),H.isLineSegments?ut.setMode(k.LINES):H.isLineLoop?ut.setMode(k.LINE_LOOP):ut.setMode(k.LINE_STRIP)}else H.isPoints?ut.setMode(k.POINTS):H.isSprite&&ut.setMode(k.TRIANGLES);if(H.isBatchedMesh)if(H._multiDrawInstances!==null)ut.renderMultiDrawInstances(H._multiDrawStarts,H._multiDrawCounts,H._multiDrawCount,H._multiDrawInstances);else if(it.get("WEBGL_multi_draw"))ut.renderMultiDraw(H._multiDrawStarts,H._multiDrawCounts,H._multiDrawCount);else{const Ne=H._multiDrawStarts,wn=H._multiDrawCounts,ft=H._multiDrawCount,Ki=_e?ne.get(_e).bytesPerElement:1,Eo=Me.get(X).currentProgram.getUniforms();for(let fi=0;fi<ft;fi++)Eo.setValue(k,"_gl_DrawID",fi),ut.render(Ne[fi]/Ki,wn[fi])}else if(H.isInstancedMesh)ut.renderInstances(lt,sn,H.count);else if(Y.isInstancedBufferGeometry){const Ne=Y._maxInstanceCount!==void 0?Y._maxInstanceCount:1/0,wn=Math.min(Y.instanceCount,Ne);ut.renderInstances(lt,sn,wn)}else ut.render(lt,sn)};function mt(T,j,Y){T.transparent===!0&&T.side===yn&&T.forceSinglePass===!1?(T.side=In,T.needsUpdate=!0,Xd(T,j,Y),T.side=gs,T.needsUpdate=!0,Xd(T,j,Y),T.side=yn):Xd(T,j,Y)}this.compile=function(T,j,Y=null){Y===null&&(Y=T),m=ot.get(Y),m.init(j),v.push(m),Y.traverseVisible(function(H){H.isLight&&H.layers.test(j.layers)&&(m.pushLight(H),H.castShadow&&m.pushShadow(H))}),T!==Y&&T.traverseVisible(function(H){H.isLight&&H.layers.test(j.layers)&&(m.pushLight(H),H.castShadow&&m.pushShadow(H))}),m.setupLights();const X=new Set;return T.traverse(function(H){if(!(H.isMesh||H.isPoints||H.isLine||H.isSprite))return;const le=H.material;if(le)if(Array.isArray(le))for(let pe=0;pe<le.length;pe++){const ye=le[pe];mt(ye,Y,H),X.add(ye)}else mt(le,Y,H),X.add(le)}),v.pop(),m=null,X},this.compileAsync=function(T,j,Y=null){const X=this.compile(T,j,Y);return new Promise(H=>{function le(){if(X.forEach(function(pe){Me.get(pe).currentProgram.isReady()&&X.delete(pe)}),X.size===0){H(T);return}setTimeout(le,10)}it.get("KHR_parallel_shader_compile")!==null?le():setTimeout(le,10)})};let Xi=null;function Vs(T){Xi&&Xi(T)}function Zb(){ya.stop()}function ew(){ya.start()}const ya=new nN;ya.setAnimationLoop(Vs),typeof self<"u"&&ya.setContext(self),this.setAnimationLoop=function(T){Xi=T,J.setAnimationLoop(T),T===null?ya.stop():ya.start()},J.addEventListener("sessionstart",Zb),J.addEventListener("sessionend",ew),this.render=function(T,j){if(j!==void 0&&j.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),j.parent===null&&j.matrixWorldAutoUpdate===!0&&j.updateMatrixWorld(),J.enabled===!0&&J.isPresenting===!0&&(J.cameraAutoUpdate===!0&&J.updateCamera(j),j=J.getCamera()),T.isScene===!0&&T.onBeforeRender(b,T,j,M),m=ot.get(T,v.length),m.init(j),v.push(m),Re.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),$.setFromProjectionMatrix(Re),de=this.localClippingEnabled,te=ce.init(this.clippingPlanes,de),A=ve.get(T,y.length),A.init(),y.push(A),J.enabled===!0&&J.isPresenting===!0){const le=b.xr.getDepthSensingMesh();le!==null&&Pm(le,j,-1/0,b.sortObjects)}Pm(T,j,0,b.sortObjects),A.finish(),b.sortObjects===!0&&A.sort(W,K),et=J.enabled===!1||J.isPresenting===!1||J.hasDepthSensing()===!1,et&&Le.addToRenderList(A,T),this.info.render.frame++,te===!0&&ce.beginShadows();const Y=m.state.shadowsArray;we.render(Y,T,j),te===!0&&ce.endShadows(),this.info.autoReset===!0&&this.info.reset();const X=A.opaque,H=A.transmissive;if(m.setupLights(),j.isArrayCamera){const le=j.cameras;if(H.length>0)for(let pe=0,ye=le.length;pe<ye;pe++){const _e=le[pe];nw(X,H,T,_e)}et&&Le.render(T);for(let pe=0,ye=le.length;pe<ye;pe++){const _e=le[pe];tw(A,T,_e,_e.viewport)}}else H.length>0&&nw(X,H,T,j),et&&Le.render(T),tw(A,T,j);M!==null&&C===0&&(B.updateMultisampleRenderTarget(M),B.updateRenderTargetMipmap(M)),T.isScene===!0&&T.onAfterRender(b,T,j),_t.resetDefaultState(),_=-1,E=null,v.pop(),v.length>0?(m=v[v.length-1],te===!0&&ce.setGlobalState(b.clippingPlanes,m.state.camera)):m=null,y.pop(),y.length>0?A=y[y.length-1]:A=null};function Pm(T,j,Y,X){if(T.visible===!1)return;if(T.layers.test(j.layers)){if(T.isGroup)Y=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(j);else if(T.isLight)m.pushLight(T),T.castShadow&&m.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||$.intersectsSprite(T)){X&&ze.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Re);const pe=Z.update(T),ye=T.material;ye.visible&&A.push(T,pe,ye,Y,ze.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||$.intersectsObject(T))){const pe=Z.update(T),ye=T.material;if(X&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),ze.copy(T.boundingSphere.center)):(pe.boundingSphere===null&&pe.computeBoundingSphere(),ze.copy(pe.boundingSphere.center)),ze.applyMatrix4(T.matrixWorld).applyMatrix4(Re)),Array.isArray(ye)){const _e=pe.groups;for(let Qe=0,je=_e.length;Qe<je;Qe++){const Be=_e[Qe],lt=ye[Be.materialIndex];lt&&lt.visible&&A.push(T,pe,lt,Y,ze.z,Be)}}else ye.visible&&A.push(T,pe,ye,Y,ze.z,null)}}const le=T.children;for(let pe=0,ye=le.length;pe<ye;pe++)Pm(le[pe],j,Y,X)}function tw(T,j,Y,X){const H=T.opaque,le=T.transmissive,pe=T.transparent;m.setupLightsView(Y),te===!0&&ce.setGlobalState(b.clippingPlanes,Y),X&&Ie.viewport(R.copy(X)),H.length>0&&Yd(H,j,Y),le.length>0&&Yd(le,j,Y),pe.length>0&&Yd(pe,j,Y),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function nw(T,j,Y,X){if((Y.isScene===!0?Y.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[X.id]===void 0&&(m.state.transmissionRenderTarget[X.id]=new $i(1,1,{generateMipmaps:!0,type:it.has("EXT_color_buffer_half_float")||it.has("EXT_color_buffer_float")?cn:tn,minFilter:Zn,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:tt.workingColorSpace}));const le=m.state.transmissionRenderTarget[X.id],pe=X.viewport||R;le.setSize(pe.z*b.transmissionResolutionScale,pe.w*b.transmissionResolutionScale);const ye=b.getRenderTarget();b.setRenderTarget(le),b.getClearColor(U),z=b.getClearAlpha(),z<1&&b.setClearColor(16777215,.5),b.clear(),et&&Le.render(Y);const _e=b.toneMapping;b.toneMapping=Ds;const Qe=X.viewport;if(X.viewport!==void 0&&(X.viewport=void 0),m.setupLightsView(X),te===!0&&ce.setGlobalState(b.clippingPlanes,X),Yd(T,Y,X),B.updateMultisampleRenderTarget(le),B.updateRenderTargetMipmap(le),it.has("WEBGL_multisampled_render_to_texture")===!1){let je=!1;for(let Be=0,lt=j.length;Be<lt;Be++){const ht=j[Be],sn=ht.object,Yt=ht.geometry,ut=ht.material,Ne=ht.group;if(ut.side===yn&&sn.layers.test(X.layers)){const wn=ut.side;ut.side=In,ut.needsUpdate=!0,iw(sn,Y,X,Yt,ut,Ne),ut.side=wn,ut.needsUpdate=!0,je=!0}}je===!0&&(B.updateMultisampleRenderTarget(le),B.updateRenderTargetMipmap(le))}b.setRenderTarget(ye),b.setClearColor(U,z),Qe!==void 0&&(X.viewport=Qe),b.toneMapping=_e}function Yd(T,j,Y){const X=j.isScene===!0?j.overrideMaterial:null;for(let H=0,le=T.length;H<le;H++){const pe=T[H],ye=pe.object,_e=pe.geometry,Qe=X===null?pe.material:X,je=pe.group;ye.layers.test(Y.layers)&&iw(ye,j,Y,_e,Qe,je)}}function iw(T,j,Y,X,H,le){T.onBeforeRender(b,j,Y,X,H,le),T.modelViewMatrix.multiplyMatrices(Y.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),H.onBeforeRender(b,j,Y,X,T,le),H.transparent===!0&&H.side===yn&&H.forceSinglePass===!1?(H.side=In,H.needsUpdate=!0,b.renderBufferDirect(Y,j,X,H,T,le),H.side=gs,H.needsUpdate=!0,b.renderBufferDirect(Y,j,X,H,T,le),H.side=yn):b.renderBufferDirect(Y,j,X,H,T,le),T.onAfterRender(b,j,Y,X,H,le)}function Xd(T,j,Y){j.isScene!==!0&&(j=Et);const X=Me.get(T),H=m.state.lights,le=m.state.shadowsArray,pe=H.state.version,ye=Ce.getParameters(T,H.state,le,j,Y),_e=Ce.getProgramCacheKey(ye);let Qe=X.programs;X.environment=T.isMeshStandardMaterial?j.environment:null,X.fog=j.fog,X.envMap=(T.isMeshStandardMaterial?q:I).get(T.envMap||X.environment),X.envMapRotation=X.environment!==null&&T.envMap===null?j.environmentRotation:T.envMapRotation,Qe===void 0&&(T.addEventListener("dispose",He),Qe=new Map,X.programs=Qe);let je=Qe.get(_e);if(je!==void 0){if(X.currentProgram===je&&X.lightsStateVersion===pe)return rw(T,ye),je}else ye.uniforms=Ce.getUniforms(T),T.onBeforeCompile(ye,b),je=Ce.acquireProgram(ye,_e),Qe.set(_e,je),X.uniforms=ye.uniforms;const Be=X.uniforms;return(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(Be.clippingPlanes=ce.uniform),rw(T,ye),X.needsLights=BD(T),X.lightsStateVersion=pe,X.needsLights&&(Be.ambientLightColor.value=H.state.ambient,Be.lightProbe.value=H.state.probe,Be.directionalLights.value=H.state.directional,Be.directionalLightShadows.value=H.state.directionalShadow,Be.spotLights.value=H.state.spot,Be.spotLightShadows.value=H.state.spotShadow,Be.rectAreaLights.value=H.state.rectArea,Be.ltc_1.value=H.state.rectAreaLTC1,Be.ltc_2.value=H.state.rectAreaLTC2,Be.pointLights.value=H.state.point,Be.pointLightShadows.value=H.state.pointShadow,Be.hemisphereLights.value=H.state.hemi,Be.directionalShadowMap.value=H.state.directionalShadowMap,Be.directionalShadowMatrix.value=H.state.directionalShadowMatrix,Be.spotShadowMap.value=H.state.spotShadowMap,Be.spotLightMatrix.value=H.state.spotLightMatrix,Be.spotLightMap.value=H.state.spotLightMap,Be.pointShadowMap.value=H.state.pointShadowMap,Be.pointShadowMatrix.value=H.state.pointShadowMatrix),X.currentProgram=je,X.uniformsList=null,je}function sw(T){if(T.uniformsList===null){const j=T.currentProgram.getUniforms();T.uniformsList=zf.seqWithValue(j.seq,T.uniforms)}return T.uniformsList}function rw(T,j){const Y=Me.get(T);Y.outputColorSpace=j.outputColorSpace,Y.batching=j.batching,Y.batchingColor=j.batchingColor,Y.instancing=j.instancing,Y.instancingColor=j.instancingColor,Y.instancingMorph=j.instancingMorph,Y.skinning=j.skinning,Y.morphTargets=j.morphTargets,Y.morphNormals=j.morphNormals,Y.morphColors=j.morphColors,Y.morphTargetsCount=j.morphTargetsCount,Y.numClippingPlanes=j.numClippingPlanes,Y.numIntersection=j.numClipIntersection,Y.vertexAlphas=j.vertexAlphas,Y.vertexTangents=j.vertexTangents,Y.toneMapping=j.toneMapping}function TD(T,j,Y,X,H){j.isScene!==!0&&(j=Et),B.resetTextureUnits();const le=j.fog,pe=X.isMeshStandardMaterial?j.environment:null,ye=M===null?b.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:It,_e=(X.isMeshStandardMaterial?q:I).get(X.envMap||pe),Qe=X.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,je=!!Y.attributes.tangent&&(!!X.normalMap||X.anisotropy>0),Be=!!Y.morphAttributes.position,lt=!!Y.morphAttributes.normal,ht=!!Y.morphAttributes.color;let sn=Ds;X.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(sn=b.toneMapping);const Yt=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,ut=Yt!==void 0?Yt.length:0,Ne=Me.get(X),wn=m.state.lights;if(te===!0&&(de===!0||T!==E)){const Vn=T===E&&X.id===_;ce.setState(X,T,Vn)}let ft=!1;X.version===Ne.__version?(Ne.needsLights&&Ne.lightsStateVersion!==wn.state.version||Ne.outputColorSpace!==ye||H.isBatchedMesh&&Ne.batching===!1||!H.isBatchedMesh&&Ne.batching===!0||H.isBatchedMesh&&Ne.batchingColor===!0&&H.colorTexture===null||H.isBatchedMesh&&Ne.batchingColor===!1&&H.colorTexture!==null||H.isInstancedMesh&&Ne.instancing===!1||!H.isInstancedMesh&&Ne.instancing===!0||H.isSkinnedMesh&&Ne.skinning===!1||!H.isSkinnedMesh&&Ne.skinning===!0||H.isInstancedMesh&&Ne.instancingColor===!0&&H.instanceColor===null||H.isInstancedMesh&&Ne.instancingColor===!1&&H.instanceColor!==null||H.isInstancedMesh&&Ne.instancingMorph===!0&&H.morphTexture===null||H.isInstancedMesh&&Ne.instancingMorph===!1&&H.morphTexture!==null||Ne.envMap!==_e||X.fog===!0&&Ne.fog!==le||Ne.numClippingPlanes!==void 0&&(Ne.numClippingPlanes!==ce.numPlanes||Ne.numIntersection!==ce.numIntersection)||Ne.vertexAlphas!==Qe||Ne.vertexTangents!==je||Ne.morphTargets!==Be||Ne.morphNormals!==lt||Ne.morphColors!==ht||Ne.toneMapping!==sn||Ne.morphTargetsCount!==ut)&&(ft=!0):(ft=!0,Ne.__version=X.version);let Ki=Ne.currentProgram;ft===!0&&(Ki=Xd(X,j,H));let Eo=!1,fi=!1,Mc=!1;const Ut=Ki.getUniforms(),Ti=Ne.uniforms;if(Ie.useProgram(Ki.program)&&(Eo=!0,fi=!0,Mc=!0),X.id!==_&&(_=X.id,fi=!0),Eo||E!==T){Ie.buffers.depth.getReversed()?(ue.copy(T.projectionMatrix),s5(ue),r5(ue),Ut.setValue(k,"projectionMatrix",ue)):Ut.setValue(k,"projectionMatrix",T.projectionMatrix),Ut.setValue(k,"viewMatrix",T.matrixWorldInverse);const si=Ut.map.cameraPosition;si!==void 0&&si.setValue(k,Ue.setFromMatrixPosition(T.matrixWorld)),st.logarithmicDepthBuffer&&Ut.setValue(k,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&Ut.setValue(k,"isOrthographic",T.isOrthographicCamera===!0),E!==T&&(E=T,fi=!0,Mc=!0)}if(H.isSkinnedMesh){Ut.setOptional(k,H,"bindMatrix"),Ut.setOptional(k,H,"bindMatrixInverse");const Vn=H.skeleton;Vn&&(Vn.boneTexture===null&&Vn.computeBoneTexture(),Ut.setValue(k,"boneTexture",Vn.boneTexture,B))}H.isBatchedMesh&&(Ut.setOptional(k,H,"batchingTexture"),Ut.setValue(k,"batchingTexture",H._matricesTexture,B),Ut.setOptional(k,H,"batchingIdTexture"),Ut.setValue(k,"batchingIdTexture",H._indirectTexture,B),Ut.setOptional(k,H,"batchingColorTexture"),H._colorsTexture!==null&&Ut.setValue(k,"batchingColorTexture",H._colorsTexture,B));const Ri=Y.morphAttributes;if((Ri.position!==void 0||Ri.normal!==void 0||Ri.color!==void 0)&&Oe.update(H,Y,Ki),(fi||Ne.receiveShadow!==H.receiveShadow)&&(Ne.receiveShadow=H.receiveShadow,Ut.setValue(k,"receiveShadow",H.receiveShadow)),X.isMeshGouraudMaterial&&X.envMap!==null&&(Ti.envMap.value=_e,Ti.flipEnvMap.value=_e.isCubeTexture&&_e.isRenderTargetTexture===!1?-1:1),X.isMeshStandardMaterial&&X.envMap===null&&j.environment!==null&&(Ti.envMapIntensity.value=j.environmentIntensity),fi&&(Ut.setValue(k,"toneMappingExposure",b.toneMappingExposure),Ne.needsLights&&RD(Ti,Mc),le&&X.fog===!0&&me.refreshFogUniforms(Ti,le),me.refreshMaterialUniforms(Ti,X,D,G,m.state.transmissionRenderTarget[T.id]),zf.upload(k,sw(Ne),Ti,B)),X.isShaderMaterial&&X.uniformsNeedUpdate===!0&&(zf.upload(k,sw(Ne),Ti,B),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&Ut.setValue(k,"center",H.center),Ut.setValue(k,"modelViewMatrix",H.modelViewMatrix),Ut.setValue(k,"normalMatrix",H.normalMatrix),Ut.setValue(k,"modelMatrix",H.matrixWorld),X.isShaderMaterial||X.isRawShaderMaterial){const Vn=X.uniformsGroups;for(let si=0,Fm=Vn.length;si<Fm;si++){const va=Vn[si];O.update(va,Ki),O.bind(va,Ki)}}return Ki}function RD(T,j){T.ambientLightColor.needsUpdate=j,T.lightProbe.needsUpdate=j,T.directionalLights.needsUpdate=j,T.directionalLightShadows.needsUpdate=j,T.pointLights.needsUpdate=j,T.pointLightShadows.needsUpdate=j,T.spotLights.needsUpdate=j,T.spotLightShadows.needsUpdate=j,T.rectAreaLights.needsUpdate=j,T.hemisphereLights.needsUpdate=j}function BD(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(T,j,Y){Me.get(T.texture).__webglTexture=j,Me.get(T.depthTexture).__webglTexture=Y;const X=Me.get(T);X.__hasExternalTextures=!0,X.__autoAllocateDepthBuffer=Y===void 0,X.__autoAllocateDepthBuffer||it.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),X.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(T,j){const Y=Me.get(T);Y.__webglFramebuffer=j,Y.__useDefaultFramebuffer=j===void 0};const ND=k.createFramebuffer();this.setRenderTarget=function(T,j=0,Y=0){M=T,S=j,C=Y;let X=!0,H=null,le=!1,pe=!1;if(T){const _e=Me.get(T);if(_e.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(k.FRAMEBUFFER,null),X=!1;else if(_e.__webglFramebuffer===void 0)B.setupRenderTarget(T);else if(_e.__hasExternalTextures)B.rebindTextures(T,Me.get(T.texture).__webglTexture,Me.get(T.depthTexture).__webglTexture);else if(T.depthBuffer){const Be=T.depthTexture;if(_e.__boundDepthTexture!==Be){if(Be!==null&&Me.has(Be)&&(T.width!==Be.image.width||T.height!==Be.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");B.setupDepthRenderbuffer(T)}}const Qe=T.texture;(Qe.isData3DTexture||Qe.isDataArrayTexture||Qe.isCompressedArrayTexture)&&(pe=!0);const je=Me.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(je[j])?H=je[j][Y]:H=je[j],le=!0):T.samples>0&&B.useMultisampledRTT(T)===!1?H=Me.get(T).__webglMultisampledFramebuffer:Array.isArray(je)?H=je[Y]:H=je,R.copy(T.viewport),L.copy(T.scissor),F=T.scissorTest}else R.copy(ee).multiplyScalar(D).floor(),L.copy(Q).multiplyScalar(D).floor(),F=ae;if(Y!==0&&(H=ND),Ie.bindFramebuffer(k.FRAMEBUFFER,H)&&X&&Ie.drawBuffers(T,H),Ie.viewport(R),Ie.scissor(L),Ie.setScissorTest(F),le){const _e=Me.get(T.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+j,_e.__webglTexture,Y)}else if(pe){const _e=Me.get(T.texture),Qe=j;k.framebufferTextureLayer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,_e.__webglTexture,Y,Qe)}else if(T!==null&&Y!==0){const _e=Me.get(T.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,_e.__webglTexture,Y)}_=-1},this.readRenderTargetPixels=function(T,j,Y,X,H,le,pe){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ye=Me.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&pe!==void 0&&(ye=ye[pe]),ye){Ie.bindFramebuffer(k.FRAMEBUFFER,ye);try{const _e=T.texture,Qe=_e.format,je=_e.type;if(!st.textureFormatReadable(Qe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!st.textureTypeReadable(je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}j>=0&&j<=T.width-X&&Y>=0&&Y<=T.height-H&&k.readPixels(j,Y,X,H,We.convert(Qe),We.convert(je),le)}finally{const _e=M!==null?Me.get(M).__webglFramebuffer:null;Ie.bindFramebuffer(k.FRAMEBUFFER,_e)}}},this.readRenderTargetPixelsAsync=async function(T,j,Y,X,H,le,pe){if(!(T&&T.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ye=Me.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&pe!==void 0&&(ye=ye[pe]),ye){const _e=T.texture,Qe=_e.format,je=_e.type;if(!st.textureFormatReadable(Qe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!st.textureTypeReadable(je))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(j>=0&&j<=T.width-X&&Y>=0&&Y<=T.height-H){Ie.bindFramebuffer(k.FRAMEBUFFER,ye);const Be=k.createBuffer();k.bindBuffer(k.PIXEL_PACK_BUFFER,Be),k.bufferData(k.PIXEL_PACK_BUFFER,le.byteLength,k.STREAM_READ),k.readPixels(j,Y,X,H,We.convert(Qe),We.convert(je),0);const lt=M!==null?Me.get(M).__webglFramebuffer:null;Ie.bindFramebuffer(k.FRAMEBUFFER,lt);const ht=k.fenceSync(k.SYNC_GPU_COMMANDS_COMPLETE,0);return k.flush(),await i5(k,ht,4),k.bindBuffer(k.PIXEL_PACK_BUFFER,Be),k.getBufferSubData(k.PIXEL_PACK_BUFFER,0,le),k.deleteBuffer(Be),k.deleteSync(ht),le}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(T,j=null,Y=0){T.isTexture!==!0&&(il("WebGLRenderer: copyFramebufferToTexture function signature has changed."),j=arguments[0]||null,T=arguments[1]);const X=Math.pow(2,-Y),H=Math.floor(T.image.width*X),le=Math.floor(T.image.height*X),pe=j!==null?j.x:0,ye=j!==null?j.y:0;B.setTexture2D(T,0),k.copyTexSubImage2D(k.TEXTURE_2D,Y,0,0,pe,ye,H,le),Ie.unbindTexture()};const DD=k.createFramebuffer(),LD=k.createFramebuffer();this.copyTextureToTexture=function(T,j,Y=null,X=null,H=0,le=null){T.isTexture!==!0&&(il("WebGLRenderer: copyTextureToTexture function signature has changed."),X=arguments[0]||null,T=arguments[1],j=arguments[2],le=arguments[3]||0,Y=null),le===null&&(H!==0?(il("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),le=H,H=0):le=0);let pe,ye,_e,Qe,je,Be,lt,ht,sn;const Yt=T.isCompressedTexture?T.mipmaps[le]:T.image;if(Y!==null)pe=Y.max.x-Y.min.x,ye=Y.max.y-Y.min.y,_e=Y.isBox3?Y.max.z-Y.min.z:1,Qe=Y.min.x,je=Y.min.y,Be=Y.isBox3?Y.min.z:0;else{const Ri=Math.pow(2,-H);pe=Math.floor(Yt.width*Ri),ye=Math.floor(Yt.height*Ri),T.isDataArrayTexture?_e=Yt.depth:T.isData3DTexture?_e=Math.floor(Yt.depth*Ri):_e=1,Qe=0,je=0,Be=0}X!==null?(lt=X.x,ht=X.y,sn=X.z):(lt=0,ht=0,sn=0);const ut=We.convert(j.format),Ne=We.convert(j.type);let wn;j.isData3DTexture?(B.setTexture3D(j,0),wn=k.TEXTURE_3D):j.isDataArrayTexture||j.isCompressedArrayTexture?(B.setTexture2DArray(j,0),wn=k.TEXTURE_2D_ARRAY):(B.setTexture2D(j,0),wn=k.TEXTURE_2D),k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,j.flipY),k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),k.pixelStorei(k.UNPACK_ALIGNMENT,j.unpackAlignment);const ft=k.getParameter(k.UNPACK_ROW_LENGTH),Ki=k.getParameter(k.UNPACK_IMAGE_HEIGHT),Eo=k.getParameter(k.UNPACK_SKIP_PIXELS),fi=k.getParameter(k.UNPACK_SKIP_ROWS),Mc=k.getParameter(k.UNPACK_SKIP_IMAGES);k.pixelStorei(k.UNPACK_ROW_LENGTH,Yt.width),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,Yt.height),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Qe),k.pixelStorei(k.UNPACK_SKIP_ROWS,je),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Be);const Ut=T.isDataArrayTexture||T.isData3DTexture,Ti=j.isDataArrayTexture||j.isData3DTexture;if(T.isDepthTexture){const Ri=Me.get(T),Vn=Me.get(j),si=Me.get(Ri.__renderTarget),Fm=Me.get(Vn.__renderTarget);Ie.bindFramebuffer(k.READ_FRAMEBUFFER,si.__webglFramebuffer),Ie.bindFramebuffer(k.DRAW_FRAMEBUFFER,Fm.__webglFramebuffer);for(let va=0;va<_e;va++)Ut&&(k.framebufferTextureLayer(k.READ_FRAMEBUFFER,k.COLOR_ATTACHMENT0,Me.get(T).__webglTexture,H,Be+va),k.framebufferTextureLayer(k.DRAW_FRAMEBUFFER,k.COLOR_ATTACHMENT0,Me.get(j).__webglTexture,le,sn+va)),k.blitFramebuffer(Qe,je,pe,ye,lt,ht,pe,ye,k.DEPTH_BUFFER_BIT,k.NEAREST);Ie.bindFramebuffer(k.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(k.DRAW_FRAMEBUFFER,null)}else if(H!==0||T.isRenderTargetTexture||Me.has(T)){const Ri=Me.get(T),Vn=Me.get(j);Ie.bindFramebuffer(k.READ_FRAMEBUFFER,DD),Ie.bindFramebuffer(k.DRAW_FRAMEBUFFER,LD);for(let si=0;si<_e;si++)Ut?k.framebufferTextureLayer(k.READ_FRAMEBUFFER,k.COLOR_ATTACHMENT0,Ri.__webglTexture,H,Be+si):k.framebufferTexture2D(k.READ_FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,Ri.__webglTexture,H),Ti?k.framebufferTextureLayer(k.DRAW_FRAMEBUFFER,k.COLOR_ATTACHMENT0,Vn.__webglTexture,le,sn+si):k.framebufferTexture2D(k.DRAW_FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,Vn.__webglTexture,le),H!==0?k.blitFramebuffer(Qe,je,pe,ye,lt,ht,pe,ye,k.COLOR_BUFFER_BIT,k.NEAREST):Ti?k.copyTexSubImage3D(wn,le,lt,ht,sn+si,Qe,je,pe,ye):k.copyTexSubImage2D(wn,le,lt,ht,Qe,je,pe,ye);Ie.bindFramebuffer(k.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(k.DRAW_FRAMEBUFFER,null)}else Ti?T.isDataTexture||T.isData3DTexture?k.texSubImage3D(wn,le,lt,ht,sn,pe,ye,_e,ut,Ne,Yt.data):j.isCompressedArrayTexture?k.compressedTexSubImage3D(wn,le,lt,ht,sn,pe,ye,_e,ut,Yt.data):k.texSubImage3D(wn,le,lt,ht,sn,pe,ye,_e,ut,Ne,Yt):T.isDataTexture?k.texSubImage2D(k.TEXTURE_2D,le,lt,ht,pe,ye,ut,Ne,Yt.data):T.isCompressedTexture?k.compressedTexSubImage2D(k.TEXTURE_2D,le,lt,ht,Yt.width,Yt.height,ut,Yt.data):k.texSubImage2D(k.TEXTURE_2D,le,lt,ht,pe,ye,ut,Ne,Yt);k.pixelStorei(k.UNPACK_ROW_LENGTH,ft),k.pixelStorei(k.UNPACK_IMAGE_HEIGHT,Ki),k.pixelStorei(k.UNPACK_SKIP_PIXELS,Eo),k.pixelStorei(k.UNPACK_SKIP_ROWS,fi),k.pixelStorei(k.UNPACK_SKIP_IMAGES,Mc),le===0&&j.generateMipmaps&&k.generateMipmap(wn),Ie.unbindTexture()},this.copyTextureToTexture3D=function(T,j,Y=null,X=null,H=0){return T.isTexture!==!0&&(il("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Y=arguments[0]||null,X=arguments[1]||null,T=arguments[2],j=arguments[3],H=arguments[4]||0),il('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(T,j,Y,X,H)},this.initRenderTarget=function(T){Me.get(T).__webglFramebuffer===void 0&&B.setupRenderTarget(T)},this.initTexture=function(T){T.isCubeTexture?B.setTextureCube(T,0):T.isData3DTexture?B.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?B.setTexture2DArray(T,0):B.setTexture2D(T,0),Ie.unbindTexture()},this.resetState=function(){S=0,C=0,M=null,Ie.reset(),_t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ur}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=tt._getDrawingBufferColorSpace(e),t.unpackColorSpace=tt._getUnpackColorSpace()}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wu=globalThis,Wp=Wu.trustedTypes,s1=Wp?Wp.createPolicy("lit-html",{createHTML:n=>n}):void 0,lN="$lit$",Gr=`lit$${Math.random().toFixed(9).slice(2)}$`,cN="?"+Gr,rH=`<${cN}>`,Ao=document,Cd=()=>Ao.createComment(""),Md=n=>n===null||typeof n!="object"&&typeof n!="function",Wb=Array.isArray,aH=n=>Wb(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",aA=`[ 	
\f\r]`,Wc=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,r1=/-->/g,a1=/>/g,Ia=RegExp(`>|${aA}(?:([^\\s"'>=/]+)(${aA}*=${aA}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),o1=/'/g,l1=/"/g,uN=/^(?:script|style|textarea|title)$/i,oH=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Rm=oH(1),dc=Symbol.for("lit-noChange"),An=Symbol.for("lit-nothing"),c1=new WeakMap,eo=Ao.createTreeWalker(Ao,129);function dN(n,e){if(!Wb(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return s1!==void 0?s1.createHTML(e):e}const lH=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":e===3?"<math>":"",a=Wc;for(let o=0;o<t;o++){const l=n[o];let c,u,d=-1,f=0;for(;f<l.length&&(a.lastIndex=f,u=a.exec(l),u!==null);)f=a.lastIndex,a===Wc?u[1]==="!--"?a=r1:u[1]!==void 0?a=a1:u[2]!==void 0?(uN.test(u[2])&&(s=RegExp("</"+u[2],"g")),a=Ia):u[3]!==void 0&&(a=Ia):a===Ia?u[0]===">"?(a=s??Wc,d=-1):u[1]===void 0?d=-2:(d=a.lastIndex-u[2].length,c=u[1],a=u[3]===void 0?Ia:u[3]==='"'?l1:o1):a===l1||a===o1?a=Ia:a===r1||a===a1?a=Wc:(a=Ia,s=void 0);const p=a===Ia&&n[o+1].startsWith("/>")?" ":"";r+=a===Wc?l+rH:d>=0?(i.push(c),l.slice(0,d)+lN+l.slice(d)+Gr+p):l+Gr+(d===-2?o:p)}return[dN(n,r+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class Id{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,a=0;const o=e.length-1,l=this.parts,[c,u]=lH(e,t);if(this.el=Id.createElement(c,i),eo.currentNode=this.el.content,t===2||t===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=eo.nextNode())!==null&&l.length<o;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(lN)){const f=u[a++],p=s.getAttribute(d).split(Gr),g=/([.?@])?(.*)/.exec(f);l.push({type:1,index:r,name:g[2],strings:p,ctor:g[1]==="."?uH:g[1]==="?"?dH:g[1]==="@"?hH:Bm}),s.removeAttribute(d)}else d.startsWith(Gr)&&(l.push({type:6,index:r}),s.removeAttribute(d));if(uN.test(s.tagName)){const d=s.textContent.split(Gr),f=d.length-1;if(f>0){s.textContent=Wp?Wp.emptyScript:"";for(let p=0;p<f;p++)s.append(d[p],Cd()),eo.nextNode(),l.push({type:2,index:++r});s.append(d[f],Cd())}}}else if(s.nodeType===8)if(s.data===cN)l.push({type:2,index:r});else{let d=-1;for(;(d=s.data.indexOf(Gr,d+1))!==-1;)l.push({type:7,index:r}),d+=Gr.length-1}r++}}static createElement(e,t){const i=Ao.createElement("template");return i.innerHTML=e,i}}function hc(n,e,t=n,i){var a,o;if(e===dc)return e;let s=i!==void 0?(a=t._$Co)==null?void 0:a[i]:t._$Cl;const r=Md(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==r&&((o=s==null?void 0:s._$AO)==null||o.call(s,!1),r===void 0?s=void 0:(s=new r(n),s._$AT(n,t,i)),i!==void 0?(t._$Co??(t._$Co=[]))[i]=s:t._$Cl=s),s!==void 0&&(e=hc(n,s._$AS(n,e.values),s,i)),e}class cH{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,s=((e==null?void 0:e.creationScope)??Ao).importNode(t,!0);eo.currentNode=s;let r=eo.nextNode(),a=0,o=0,l=i[0];for(;l!==void 0;){if(a===l.index){let c;l.type===2?c=new $b(r,r.nextSibling,this,e):l.type===1?c=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(c=new fH(r,this,e)),this._$AV.push(c),l=i[++o]}a!==(l==null?void 0:l.index)&&(r=eo.nextNode(),a++)}return eo.currentNode=Ao,s}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}let $b=class hN{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,i,s){this.type=2,this._$AH=An,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=hc(this,e,t),Md(e)?e===An||e==null||e===""?(this._$AH!==An&&this._$AR(),this._$AH=An):e!==this._$AH&&e!==dc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):aH(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==An&&Md(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ao.createTextNode(e)),this._$AH=e}$(e){var r;const{values:t,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Id.createElement(dN(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)==null?void 0:r._$AD)===s)this._$AH.p(t);else{const a=new cH(s,this),o=a.u(this.options);a.p(t),this.T(o),this._$AH=a}}_$AC(e){let t=c1.get(e.strings);return t===void 0&&c1.set(e.strings,t=new Id(e)),t}k(e){Wb(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new hN(this.O(Cd()),this.O(Cd()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,t);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}};class Bm{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,s,r){this.type=1,this._$AH=An,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=An}_$AI(e,t=this,i,s){const r=this.strings;let a=!1;if(r===void 0)e=hc(this,e,t,0),a=!Md(e)||e!==this._$AH&&e!==dc,a&&(this._$AH=e);else{const o=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=hc(this,o[i+l],t,l),c===dc&&(c=this._$AH[l]),a||(a=!Md(c)||c!==this._$AH[l]),c===An?e=An:e!==An&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}a&&!s&&this.j(e)}j(e){e===An?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class uH extends Bm{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===An?void 0:e}}let dH=class extends Bm{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==An)}};class hH extends Bm{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){if((e=hc(this,e,t,0)??An)===dc)return;const i=this._$AH,s=e===An&&i!==An||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==An&&(i===An||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class fH{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){hc(this,e)}}const oA=Wu.litHtmlPolyfillSupport;oA==null||oA(Id,$b),(Wu.litHtmlVersions??(Wu.litHtmlVersions=[])).push("3.3.1");const fN=(n,e,t)=>{const i=(t==null?void 0:t.renderBefore)??e;let s=i._$litPart$;if(s===void 0){const r=(t==null?void 0:t.renderBefore)??null;i._$litPart$=s=new $b(e.insertBefore(Cd(),r),r,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oo=globalThis;let Wf=class extends za{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=fN(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return dc}};var eI;Wf._$litElement$=!0,Wf.finalized=!0,(eI=oo.litElementHydrateSupport)==null||eI.call(oo,{LitElement:Wf});const lA=oo.litElementPolyfillSupport;lA==null||lA({LitElement:Wf});(oo.litElementVersions??(oo.litElementVersions=[])).push("4.2.1");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,mN=pN&&self.XRSession.prototype.requestHitTestSource!=null,cA=self.ResizeObserver!=null,uA=self.IntersectionObserver!=null,gN=mN;(()=>{const n=navigator.userAgent||navigator.vendor||self.opera;let e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(e=!0),e})();const pH=/android/i.test(navigator.userAgent),mH=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,gH=/firefox/i.test(navigator.userAgent),AH=/OculusBrowser/.test(navigator.userAgent),xH=pH&&!gH&&!AH,yH=!!(window.webkit&&window.webkit.messageHandlers),u1=(()=>{if(mH){if(yH)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const n=document.createElement("a");return!!(n.relList&&n.relList.supports&&n.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=n=>n&&n!=="null"?vH(n):null,d1=()=>{if(gN)return;const n=[];throw pN||n.push("WebXR Device API"),mN||n.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${n.join(", ")}`)},vH=n=>new URL(n,window.location.toString()).toString(),bH=(n,e)=>{let t=null;const i=(...s)=>{t==null&&(n(...s),t=self.setTimeout(()=>t=null,e))};return i.flush=()=>{t!=null&&(self.clearTimeout(t),t=null)},i},h1=(n,e)=>{let t=null;return(...i)=>{t!=null&&self.clearTimeout(t),t=self.setTimeout(()=>{t=null,n(...i)},e)}},Cs=(n,e,t)=>Math.max(e,Math.min(t,n)),f1=(()=>{const n="model-viewer-debug-mode",e=new RegExp(`[?&]${n}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),wH=(n=0)=>new Promise(e=>setTimeout(e,n)),EH=(n,e,t=null)=>new Promise(i=>{function s(r){(!t||t(r))&&(i(r),n.removeEventListener(e,s))}n.addEventListener(e,s)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ta=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const _H=.5,SH=0,CH=1,MH=1,xu=Symbol("currentEnvironmentMap"),yu=Symbol("currentBackground"),$p=Symbol("updateEnvironment"),$h=Symbol("cancelEnvironmentUpdate"),IH=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=SH,this.shadowSoftness=CH,this.exposure=MH,this.toneMapping="auto",this.skyboxHeight="0",this[e]=null,this[t]=null,this[i]=null}updated(a){super.updated(a),a.has("shadowIntensity")&&(this[re].setShadowIntensity(this.shadowIntensity*_H),this[vn]()),a.has("shadowSoftness")&&(this[re].setShadowSoftness(this.shadowSoftness),this[vn]()),a.has("exposure")&&(this[re].exposure=this.exposure,this[vn]()),a.has("toneMapping")&&(this[re].toneMapping=this.toneMapping==="aces"?_B:this.toneMapping==="agx"?SB:this.toneMapping==="reinhard"?wB:this.toneMapping==="cineon"?EB:this.toneMapping==="linear"?bB:this.toneMapping==="none"?Ds:xd,this[vn]()),(a.has("environmentImage")||a.has("skyboxImage"))&&this[fc]()&&this[$p](),a.has("skyboxHeight")&&(this[re].setGroundedSkybox(),this[vn]())}hasBakedShadow(){return this[re].bakedShadows.size>0}async[(e=xu,t=yu,i=$h,$p)](){const{skyboxImage:a,environmentImage:o}=this;this[$h]!=null&&(this[$h](),this[$h]=null);const{textureUtils:l}=this[xt];if(l==null)return;const c=this[xo].beginActivity("environment-update");try{const{environmentMap:u,skybox:d}=await l.generateEnvironmentMapAndSkybox(AN(a),o,f=>c(Cs(f,0,1)),this.withCredentials);this[xu]!==u&&(this[xu]=u,this.dispatchEvent(new CustomEvent("environment-change"))),d!=null?this[yu]=d.name===u.name?u:d:this[yu]=null,this[re].setEnvironmentAndSkybox(this[xu],this[yu])}catch(u){if(u instanceof Error)throw this[re].setEnvironmentAndSkybox(null,null),u}finally{c(1)}}}return Ta([De({type:String,attribute:"environment-image"})],s.prototype,"environmentImage",void 0),Ta([De({type:String,attribute:"skybox-image"})],s.prototype,"skyboxImage",void 0),Ta([De({type:Number,attribute:"shadow-intensity"})],s.prototype,"shadowIntensity",void 0),Ta([De({type:Number,attribute:"shadow-softness"})],s.prototype,"shadowSoftness",void 0),Ta([De({type:Number})],s.prototype,"exposure",void 0),Ta([De({type:String,attribute:"tone-mapping"})],s.prototype,"toneMapping",void 0),Ta([De({type:String,attribute:"skybox-height"})],s.prototype,"skyboxHeight",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH=Rm`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=Rm`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=Rm`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=Rm`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${BH}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${RH}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${TH}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,DH=n=>{fN(NH,n)};var p1=function(){var n="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var s=WebAssembly.validate(t)?e:n,r,a=WebAssembly.instantiate(o(s),{}).then(function(m){r=m.instance,r.exports.__wasm_call_ctors()});function o(m){for(var y=new Uint8Array(m.length),v=0;v<m.length;++v){var b=m.charCodeAt(v);y[v]=b>96?b-97:b>64?b-39:b+4}for(var w=0,v=0;v<m.length;++v)y[w++]=y[v]<60?i[y[v]]:(y[v]-60)*64+y[++v];return y.buffer.slice(0,w)}function l(m,y,v,b,w,S){var C=r.exports.sbrk,M=v+3&-4,_=C(M*b),E=C(w.length),R=new Uint8Array(r.exports.memory.buffer);R.set(w,E);var L=m(_,v,b,E,w.length);if(L==0&&S&&S(_,M,b),y.set(R.subarray(_,_+v*b)),C(_-C(0)),L!=0)throw new Error("Malformed buffer data: "+L)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},d=[],f=0;function p(m){var y={object:new Worker(m),pending:0,requests:{}};return y.object.onmessage=function(v){var b=v.data;y.pending-=b.count,y.requests[b.id][b.action](b.value),delete y.requests[b.id]},y}function g(m){for(var y="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o(s))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+l.toString()+A.toString(),v=new Blob([y],{type:"text/javascript"}),b=URL.createObjectURL(v),w=0;w<m;++w)d[w]=p(b);URL.revokeObjectURL(b)}function x(m,y,v,b,w){for(var S=d[0],C=1;C<d.length;++C)d[C].pending<S.pending&&(S=d[C]);return new Promise(function(M,_){var E=new Uint8Array(v),R=f++;S.pending+=m,S.requests[R]={resolve:M,reject:_},S.object.postMessage({id:R,count:m,size:y,source:E,mode:b,filter:w},[E.buffer])})}function A(m){a.then(function(){var y=m.data;try{var v=new Uint8Array(y.count*y.size);l(r.exports[y.mode],v,y.count,y.size,y.source,r.exports[y.filter]),self.postMessage({id:y.id,count:y.count,action:"resolve",value:v},[v.buffer])}catch(b){self.postMessage({id:y.id,count:y.count,action:"reject",value:b})}})}return{ready:a,supported:!0,useWorkers:function(m){g(m)},decodeVertexBuffer:function(m,y,v,b,w){l(r.exports.meshopt_decodeVertexBuffer,m,y,v,b,r.exports[c[w]])},decodeIndexBuffer:function(m,y,v,b){l(r.exports.meshopt_decodeIndexBuffer,m,y,v,b)},decodeIndexSequence:function(m,y,v,b){l(r.exports.meshopt_decodeIndexSequence,m,y,v,b)},decodeGltfBuffer:function(m,y,v,b,w,S){l(r.exports[u[w]],m,y,v,b,r.exports[c[S]])},decodeGltfBufferAsync:function(m,y,v,b,w){return d.length>0?x(m,y,v,u[b],c[w]):a.then(function(){var S=new Uint8Array(m*y);return l(r.exports[u[b]],S,m,y,v,r.exports[c[w]]),S})}}}();const dA=new WeakMap;class LH extends js{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new mr(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,a=>{this.parse(a,t,s)},i,s)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,Ct,i).catch(i)}decodeDracoFile(e,t,i,s,r=It,a=()=>{}){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,o).then(t).catch(a)}decodeGeometry(e,t){const i=JSON.stringify(t);if(dA.has(e)){const l=dA.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(r,a).then(l=>(s=l,new Promise((c,u)=>{s._callbacks[r]={resolve:c,reject:u},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),dA.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new hi;e.index&&t.setIndex(new kt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,a=s.array,o=s.itemSize,l=new kt(a,o);r==="color"&&(this._assignVertexColorSpace(l,s.vertexColorSpace),l.normalized=!(a instanceof Float32Array)),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==Ct)return;const i=new Te;for(let s=0,r=e.count;s<r;s++)i.fromBufferAttribute(e,s),tt.toWorkingColorSpace(i,Ct),e.setXYZ(s,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new mr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=PH.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function PH(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const d=u.draco,f=new d.Decoder;try{const p=t(d,f,new Int8Array(l),c),g=p.attributes.map(x=>x.array.buffer);p.index&&g.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},g)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(f)}});break}};function t(a,o,l,c){const u=c.attributeIDs,d=c.attributeTypes;let f,p;const g=o.GetEncodedGeometryType(l);if(g===a.TRIANGULAR_MESH)f=new a.Mesh,p=o.DecodeArrayToMesh(l,l.byteLength,f);else if(g===a.POINT_CLOUD)f=new a.PointCloud,p=o.DecodeArrayToPointCloud(l,l.byteLength,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const x={index:null,attributes:[]};for(const A in u){const m=self[d[A]];let y,v;if(c.useUniqueIDs)v=u[A],y=o.GetAttributeByUniqueId(f,v);else{if(v=o.GetAttributeId(f,a[u[A]]),v===-1)continue;y=o.GetAttribute(f,v)}const b=s(a,o,f,A,m,y);A==="color"&&(b.vertexColorSpace=c.vertexColorSpace),x.attributes.push(b)}return g===a.TRIANGULAR_MESH&&(x.index=i(a,o,f)),a.destroy(f),x}function i(a,o,l){const u=l.num_faces()*3,d=u*4,f=a._malloc(d);o.GetTrianglesUInt32Array(l,d,f);const p=new Uint32Array(a.HEAPF32.buffer,f,u).slice();return a._free(f),{array:p,itemSize:1}}function s(a,o,l,c,u,d){const f=d.num_components(),g=l.num_points()*f,x=g*u.BYTES_PER_ELEMENT,A=r(a,u),m=a._malloc(x);o.GetAttributeDataArrayForAllPoints(l,d,A,x,m);const y=new u(a.HEAPF32.buffer,m,g).slice();return a._free(m),{name:c,array:y,itemSize:f}}function r(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}function m1(n,e){if(e===Tj)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===yy||e===NB){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===yy)for(let a=1;a<=i;a++)s.push(t.getX(0)),s.push(t.getX(a)),s.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(s.push(t.getX(a)),s.push(t.getX(a+1)),s.push(t.getX(a+2))):(s.push(t.getX(a+2)),s.push(t.getX(a+1)),s.push(t.getX(a)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class FH extends js{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new jH(t)}),this.register(function(t){return new VH(t)}),this.register(function(t){return new KH(t)}),this.register(function(t){return new JH(t)}),this.register(function(t){return new ZH(t)}),this.register(function(t){return new HH(t)}),this.register(function(t){return new zH(t)}),this.register(function(t){return new WH(t)}),this.register(function(t){return new $H(t)}),this.register(function(t){return new QH(t)}),this.register(function(t){return new qH(t)}),this.register(function(t){return new GH(t)}),this.register(function(t){return new XH(t)}),this.register(function(t){return new YH(t)}),this.register(function(t){return new UH(t)}),this.register(function(t){return new ez(t)}),this.register(function(t){return new tz(t)})}load(e,t,i,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=zu.extractUrlBase(e);a=zu.resolveURL(c,this.path)}else a=zu.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new mr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,a,function(u){t(u),r.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const a={},o={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===xN){try{a[Je.KHR_BINARY_GLTF]=new nz(e)}catch(d){s&&s(d);return}r=JSON.parse(a[Je.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new mz(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[d.name]=d,a[d.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const d=r.extensionsUsed[u],f=r.extensionsRequired||[];switch(d){case Je.KHR_MATERIALS_UNLIT:a[d]=new OH;break;case Je.KHR_DRACO_MESH_COMPRESSION:a[d]=new iz(r,this.dracoLoader);break;case Je.KHR_TEXTURE_TRANSFORM:a[d]=new sz;break;case Je.KHR_MESH_QUANTIZATION:a[d]=new rz;break;default:f.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function kH(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Je={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class UH{constructor(e){this.parser=e,this.name=Je.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new Te(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],It);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new tN(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new eN(u),c.distance=d;break;case"spot":c=new n6(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,rr(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],o=(r.extensions&&r.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}let OH=class{constructor(){this.name=Je.KHR_MATERIALS_UNLIT}getMaterialType(){return Vi}extendParams(e,t,i){const s=[];e.color=new Te(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],It),e.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Ct))}return Promise.all(s)}},QH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}},jH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ge(o,o)}return Promise.all(r)}},VH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}},GH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}},HH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Te(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],It)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Ct)),a.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}},zH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}},WH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Te().setRGB(o[0],o[1],o[2],It),Promise.all(r)}},$H=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}},qH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Te().setRGB(o[0],o[1],o[2],It),a.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,Ct)),Promise.all(r)}},YH=class{constructor(e){this.parser=e,this.name=Je.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(r)}},XH=class{constructor(e){this.parser=e,this.name=Je.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Os}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}};class KH{constructor(e){this.parser=e,this.name=Je.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class JH{constructor(e){this.parser=e,this.name=Je.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=s.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class ZH{constructor(e){this.parser=e,this.name=Je.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=s.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,a.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class ez{constructor(e){this.name=Je.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(o){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,d=s.byteStride,f=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,d,f,s.mode,s.filter).then(function(p){return p.buffer}):a.ready.then(function(){const p=new ArrayBuffer(u*d);return a.decodeGltfBuffer(new Uint8Array(p),u,d,f,s.mode,s.filter),p})})}else return null}}let tz=class{constructor(e){this.name=Je.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==Pi.TRIANGLES&&c.mode!==Pi.TRIANGLE_STRIP&&c.mode!==Pi.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=i.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],f=c[0].count,p=[];for(const g of d){const x=new ke,A=new P,m=new ti,y=new P(1,1,1),v=new D5(g.geometry,g.material,f);for(let b=0;b<f;b++)l.TRANSLATION&&A.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,b),l.SCALE&&y.fromBufferAttribute(l.SCALE,b),v.setMatrixAt(b,x.compose(A,m,y));for(const b in l)if(b==="_COLOR_0"){const w=l[b];v.instanceColor=new wy(w.array,w.itemSize,w.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&g.geometry.setAttribute(b,l[b]);wt.prototype.copy.call(v,g),this.parser.assignFinalMaterial(v),p.push(v)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}};const xN="glTF",$c=12,g1={JSON:1313821514,BIN:5130562};class nz{constructor(e){this.name=Je.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,$c),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==xN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-$c,r=new DataView(e,$c);let a=0;for(;a<s;){const o=r.getUint32(a,!0);a+=4;const l=r.getUint32(a,!0);if(a+=4,l===g1.JSON){const c=new Uint8Array(e,$c+a,o);this.content=i.decode(c)}else if(l===g1.BIN){const c=$c+a;this.body=e.slice(c,c+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class iz{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Je.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const d=My[u]||u.toLowerCase();o[d]=a[u]}for(const u in e.attributes){const d=My[u]||u.toLowerCase();if(a[u]!==void 0){const f=i.accessors[e.attributes[u]],p=jl[f.componentType];c[d]=p.name,l[d]=f.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(d,f){s.decodeDracoFile(u,function(p){for(const g in p.attributes){const x=p.attributes[g],A=l[g];A!==void 0&&(x.normalized=A)}d(p)},o,c,It,f)})})}}class sz{constructor(){this.name=Je.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class rz{constructor(){this.name=Je.KHR_MESH_QUANTIZATION}}class yN extends Wd{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let a=0;a!==s;a++)t[a]=i[r+a];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=s-t,d=(i-t)/u,f=d*d,p=f*d,g=e*c,x=g-c,A=-2*p+3*f,m=p-f,y=1-A,v=m-f+d;for(let b=0;b!==o;b++){const w=a[x+b+o],S=a[x+b+l]*u,C=a[g+b+o],M=a[g+b]*u;r[b]=y*w+v*S+A*C+m*M}return r}}const az=new ti;class oz extends yN{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return az.fromArray(r).normalize().toArray(r),r}}const Pi={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},jl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A1={9728:un,9729:nt,9984:Gd,9985:ro,9986:qr,9987:Zn},x1={33071:Jt,33648:mo,10497:As},hA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},My={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Dr={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},lz={CUBICSPLINE:void 0,LINEAR:rc,STEP:sc},fA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function cz(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Sd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:gs})),n.DefaultMaterial}function Ra(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function rr(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function uz(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;a.push(f)}if(s){const f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(f)}if(r){const f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=d),r&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function dz(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hz(n){let e;const t=n.extensions&&n.extensions[Je.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+pA(t.attributes):e=n.indices+":"+pA(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+pA(n.targets[i]);return e}function pA(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Iy(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fz(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const pz=new ke;class mz{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new kH,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(o)===!0;const l=o.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=o.indexOf("Firefox")>-1,a=r?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&a<98?this.textureLoader=new ZB(this.options.manager):this.textureLoader=new o6(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new mr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:i,userData:{}};return Ra(r,o,s),rr(o,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const a=t[s].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const a=e[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())r(u,o.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Je.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){i.load(zu.resolveURL(t.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const a=hA[s.type],o=jl[s.componentType],l=s.normalized===!0,c=new o(s.count*a);return Promise.resolve(new kt(c,a,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const o=a[0],l=hA[s.type],c=jl[s.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,f=s.byteOffset||0,p=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,g=s.normalized===!0;let x,A;if(p&&p!==d){const m=Math.floor(f/p),y="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+m+":"+s.count;let v=t.cache.get(y);v||(x=new c(o,m*p,s.count*p/u),v=new I5(x,p/u),t.cache.add(y,v)),A=new Ub(v,l,f%p/u,g)}else o===null?x=new c(s.count*l):x=new c(o,f,s.count*l),A=new kt(x,l,g);if(s.sparse!==void 0){const m=hA.SCALAR,y=jl[s.sparse.indices.componentType],v=s.sparse.indices.byteOffset||0,b=s.sparse.values.byteOffset||0,w=new y(a[1],v,s.sparse.count*m),S=new c(a[2],b,s.sparse.count*l);o!==null&&(A=new kt(A.array.slice(),A.itemSize,A.normalized)),A.normalized=!1;for(let C=0,M=w.length;C<M;C++){const _=w[C];if(A.setX(_,S[C*l]),l>=2&&A.setY(_,S[C*l+1]),l>=3&&A.setZ(_,S[C*l+2]),l>=4&&A.setW(_,S[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}A.normalized=g}return A})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,a=t.images[r];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,i){const s=this,r=this.json,a=r.textures[e],o=r.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const f=(r.samplers||{})[a.sampler]||{};return u.magFilter=A1[f.magFilter]||nt,u.minFilter=A1[f.minFilter]||Zn,u.wrapS=x1[f.wrapS]||As,u.wrapT=x1[f.wrapT]||As,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==un&&u.minFilter!==nt,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=s.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,p){let g=f;t.isImageBitmapLoader===!0&&(g=function(x){const A=new Ft(x);A.needsUpdate=!0,f(A)}),t.load(zu.resolveURL(d,r.path),g,void 0,p)})}).then(function(d){return c===!0&&o.revokeObjectURL(l),rr(d,a),d.userData.mimeType=a.mimeType||fz(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),r.extensions[Je.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[Je.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=r.associations.get(a);a=r.extensions[Je.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),r.associations.set(a,l)}}return s!==void 0&&(a.colorSpace=s),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new WB,fs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new zB,fs.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(s||r||a){let o="ClonedMaterial:"+i.uuid+":";s&&(o+="derivative-tangents:"),r&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),r&&(l.vertexColors=!0),a&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Sd}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let a;const o={},l=r.extensions||{},c=[];if(l[Je.KHR_MATERIALS_UNLIT]){const d=s[Je.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,r,t))}else{const d=r.pbrMetallicRoughness||{};if(o.color=new Te(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;o.color.setRGB(f[0],f[1],f[2],It),o.opacity=f[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,Ct)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}r.doubleSided===!0&&(o.side=yn);const u=r.alphaMode||fA.OPAQUE;if(u===fA.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===fA.MASK&&(o.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==Vi&&(c.push(t.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new Ge(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;o.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&a!==Vi&&(c.push(t.assignTexture(o,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==Vi){const d=r.emissiveFactor;o.emissive=new Te().setRGB(d[0],d[1],d[2],It)}return r.emissiveTexture!==void 0&&a!==Vi&&c.push(t.assignTexture(o,"emissiveMap",r.emissiveTexture,Ct)),Promise.all(c).then(function(){const d=new a(o);return r.name&&(d.name=r.name),rr(d,r),t.associations.set(d,{materials:e}),r.extensions&&Ra(s,d,r),d})}createUniqueName(e){const t=at.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(o){return i[Je.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return y1(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=hz(c),d=s[u];if(d)a.push(d.promise);else{let f;c.extensions&&c.extensions[Je.KHR_DRACO_MESH_COMPRESSION]?f=r(c):f=y1(new hi,c,t),s[u]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],a=r.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?cz(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let p=0,g=u.length;p<g;p++){const x=u[p],A=a[p];let m;const y=c[p];if(A.mode===Pi.TRIANGLES||A.mode===Pi.TRIANGLE_STRIP||A.mode===Pi.TRIANGLE_FAN||A.mode===void 0)m=r.isSkinnedMesh===!0?new R5(x,y):new bt(x,y),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),A.mode===Pi.TRIANGLE_STRIP?m.geometry=m1(m.geometry,NB):A.mode===Pi.TRIANGLE_FAN&&(m.geometry=m1(m.geometry,yy));else if(A.mode===Pi.LINES)m=new F5(x,y);else if(A.mode===Pi.LINE_STRIP)m=new _d(x,y);else if(A.mode===Pi.LINE_LOOP)m=new k5(x,y);else if(A.mode===Pi.POINTS)m=new U5(x,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(m.geometry.morphAttributes).length>0&&dz(m,r),m.name=t.createUniqueName(r.name||"mesh_"+e),rr(m,r),A.extensions&&Ra(s,m,A),t.assignFinalMaterial(m),d.push(m)}for(let p=0,g=d.length;p<g;p++)t.associations.set(d[p],{meshes:e,primitives:p});if(d.length===1)return r.extensions&&Ra(s,d[0],r),d[0];const f=new Xr;r.extensions&&Ra(s,f,r),t.associations.set(f,{meshes:e});for(let p=0,g=d.length;p<g;p++)f.add(d[p]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Cn(Gp.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new _c(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),rr(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),a=s,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const d=a[c];if(d){o.push(d);const f=new ke;r!==null&&f.fromArray(r.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Ob(o,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let d=0,f=s.channels.length;d<f;d++){const p=s.channels[d],g=s.samplers[p.sampler],x=p.target,A=x.node,m=s.parameters!==void 0?s.parameters[g.input]:g.input,y=s.parameters!==void 0?s.parameters[g.output]:g.output;x.node!==void 0&&(a.push(this.getDependency("node",A)),o.push(this.getDependency("accessor",m)),l.push(this.getDependency("accessor",y)),c.push(g),u.push(x))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const f=d[0],p=d[1],g=d[2],x=d[3],A=d[4],m=[];for(let y=0,v=f.length;y<v;y++){const b=f[y],w=p[y],S=g[y],C=x[y],M=A[y];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const _=i._createAnimationTracks(b,w,S,C,M);if(_)for(let E=0;E<_.length;E++)m.push(_[E])}return new _y(r,void 0,m)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const a=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=s.weights.length;l<c;l++)o.morphTargetInfluences[l]=s.weights[l]}),a})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),a=[],o=s.children||[];for(let c=0,u=o.length;c<u;c++)a.push(i.getDependency("node",o[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),l]).then(function(c){const u=c[0],d=c[1],f=c[2];f!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(f,pz)});for(let p=0,g=d.length;p<g;p++)u.add(d[p]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],a=r.name?s.createUniqueName(r.name):"",o=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),r.camera!==void 0&&o.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(r.isBone===!0?u=new HB:c.length>1?u=new Xr:c.length===1?u=c[0]:u=new wt,u!==c[0])for(let d=0,f=c.length;d<f;d++)u.add(c[d]);if(r.name&&(u.userData.name=r.name,u.name=a),rr(u,r),r.extensions&&Ra(i,u,r),r.matrix!==void 0){const d=new ke;d.fromArray(r.matrix),u.applyMatrix4(d)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Xr;i.name&&(r.name=s.createUniqueName(i.name)),rr(r,i),i.extensions&&Ra(t,r,i);const a=i.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(s.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,d=l.length;u<d;u++)r.add(l[u]);const c=u=>{const d=new Map;for(const[f,p]of s.associations)(f instanceof fs||f instanceof Ft)&&d.set(f,p);return u.traverse(f=>{const p=s.associations.get(f);p!=null&&d.set(f,p)}),d};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const a=[],o=e.name?e.name:e.uuid,l=[];Dr[r.path]===Dr.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(o);let c;switch(Dr[r.path]){case Dr.weights:c=lc;break;case Dr.rotation:c=cc;break;case Dr.position:case Dr.scale:c=uc;break;default:switch(i.itemSize){case 1:c=lc;break;case 2:case 3:default:c=uc;break}break}const u=s.interpolation!==void 0?lz[s.interpolation]:rc,d=this._getArrayFromAccessor(i);for(let f=0,p=l.length;f<p;f++){const g=new c(l[f]+"."+Dr[r.path],t.array,d,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Iy(t.constructor),s=new Float32Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof cc?oz:yN;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function gz(n,e,t){const i=e.attributes,s=new Kn;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(s.set(new P(l[0],l[1],l[2]),new P(c[0],c[1],c[2])),o.normalized){const u=Iy(jl[o.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const o=new P,l=new P;for(let c=0,u=r.length;c<u;c++){const d=r[c];if(d.POSITION!==void 0){const f=t.json.accessors[d.POSITION],p=f.min,g=f.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),f.normalized){const x=Iy(jl[f.componentType]);l.multiplyScalar(x)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(o)}n.boundingBox=s;const a=new Yi;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=a}function y1(n,e,t){const i=e.attributes,s=[];function r(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=My[a]||a.toLowerCase();o in n.attributes||s.push(r(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});s.push(a)}return tt.workingColorSpace!==It&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${tt.workingColorSpace}" not supported.`),rr(n,e),gz(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?uz(n,e.targets,t):n})}class Az{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:s,msg:r,transfer:a}=this.queue.shift();this.workersResolve[e]=s,this.workers[e].postMessage(r,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const s=this._getIdleWorker();s!==-1?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=i,this.workers[s].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const xz=0,v1=2,yz=1,b1=2,vz=0,bz=1,wz=10,Ez=0,vN=9,bN=15,wN=16,EN=22,_N=37,SN=43,CN=76,MN=83,IN=97,TN=100,RN=103,BN=109,NN=165,DN=166,qb=1000066e3;class _z{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class qc{constructor(e,t,i,s){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=s,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const i=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,s)}}const Hn=[171,75,84,88,32,50,48,187,13,10,26,10];function w1(n){return new TextDecoder().decode(n)}function Sz(n){const e=new Uint8Array(n.buffer,n.byteOffset,Hn.length);if(e[0]!==Hn[0]||e[1]!==Hn[1]||e[2]!==Hn[2]||e[3]!==Hn[3]||e[4]!==Hn[4]||e[5]!==Hn[5]||e[6]!==Hn[6]||e[7]!==Hn[7]||e[8]!==Hn[8]||e[9]!==Hn[9]||e[10]!==Hn[10]||e[11]!==Hn[11])throw new Error("Missing KTX 2.0 identifier.");const t=new _z,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new qc(n,Hn.length,i,!0);t.vkFormat=s._nextUint32(),t.typeSize=s._nextUint32(),t.pixelWidth=s._nextUint32(),t.pixelHeight=s._nextUint32(),t.pixelDepth=s._nextUint32(),t.layerCount=s._nextUint32(),t.faceCount=s._nextUint32();const r=s._nextUint32();t.supercompressionScheme=s._nextUint32();const a=s._nextUint32(),o=s._nextUint32(),l=s._nextUint32(),c=s._nextUint32(),u=s._nextUint64(),d=s._nextUint64(),f=new qc(n,Hn.length+i,3*r*8,!0);for(let G=0;G<r;G++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});const p=new qc(n,a,o,!0),g={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},x=(g.descriptorBlockSize/4-6)/4;for(let G=0;G<x;G++){const D={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&D.channelType?(D.sampleLower=p._nextInt32(),D.sampleUpper=p._nextInt32()):(D.sampleLower=p._nextUint32(),D.sampleUpper=p._nextUint32()),g.samples[G]=D}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(g);const A=new qc(n,l,c,!0);for(;A._offset<c;){const G=A._nextUint32(),D=A._scan(G),W=w1(D);if(t.keyValue[W]=A._nextUint8Array(G-D.byteLength-1),W.match(/^ktx/i)){const K=w1(t.keyValue[W]);t.keyValue[W]=K.substring(0,K.lastIndexOf("\0"))}A._skip(G%4?4-G%4:0)}if(d<=0)return t;const m=new qc(n,u,d,!0),y=m._nextUint16(),v=m._nextUint16(),b=m._nextUint32(),w=m._nextUint32(),S=m._nextUint32(),C=m._nextUint32(),M=[];for(let G=0;G<r;G++)M.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});const _=u+m._offset,E=_+b,R=E+w,L=R+S,F=new Uint8Array(n.buffer,n.byteOffset+_,b),U=new Uint8Array(n.buffer,n.byteOffset+E,w),z=new Uint8Array(n.buffer,n.byteOffset+R,S),V=new Uint8Array(n.buffer,n.byteOffset+L,C);return t.globalData={endpointCount:y,selectorCount:v,imageDescs:M,endpointsData:F,selectorsData:U,tablesData:z,extendedData:V},t}let mA,ir,Ty;const gA={env:{emscripten_notify_memory_growth:function(n){Ty=new Uint8Array(ir.exports.memory.buffer)}}};class Cz{init(){return mA||(mA=typeof fetch<"u"?fetch("data:application/wasm;base64,"+E1).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,gA)).then(this._init):WebAssembly.instantiate(Buffer.from(E1,"base64"),gA).then(this._init),mA)}_init(e){ir=e.instance,gA.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!ir)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,s=ir.exports.malloc(i);Ty.set(e,s),t=t||Number(ir.exports.ZSTD_findDecompressedSize(s,i));const r=ir.exports.malloc(t),a=ir.exports.ZSTD_decompress(r,t,s,i),o=Ty.slice(r,r+a);return ir.exports.free(s),ir.exports.free(r),o}}const E1="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",Mz="display-p3",Iz="display-p3-linear",AA=new WeakMap;let xA=0,yA;class Oi extends js{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Az,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new mr(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new mr(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const s=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(([r,a])=>{const o=Oi.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(Oi.EngineFormat),"let _EngineType = "+JSON.stringify(Oi.EngineType),"let _TranscoderFormat = "+JSON.stringify(Oi.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Oi.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),xA>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),xA++}return this.transcoderPending}load(e,t,i,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new mr(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,a=>{this.parse(a,t,s)},i,s)}parse(e,t,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(AA.has(e))return AA.get(e).promise.then(t).catch(i);this._createTexture(e).then(s=>t?t(s):null).catch(i)}_createTextureFrom(e,t){const{type:i,error:s,data:{faces:r,width:a,height:o,format:l,type:c,dfdFlags:u}}=e;if(i==="error")return Promise.reject(s);let d;if(t.faceCount===6)d=new j5(r,l,c);else{const f=r[0].mipmaps;d=t.layerCount>1?new Q5(f,a,o,t.layerCount,l,c):new ao(f,a,o,l,c)}return d.minFilter=r[0].mipmaps.length===1?nt:Zn,d.magFilter=nt,d.generateMipmaps=!1,d.needsUpdate=!0,d.colorSpace=LN(t),d.premultiplyAlpha=!!(u&yz),d}async _createTexture(e,t={}){const i=Sz(new Uint8Array(e)),s=i.vkFormat===qb&&i.dataFormatDescriptor[0].colorModel===167;if(!(i.vkFormat===Ez||s&&!this.workerConfig.astcHDRSupported))return Rz(i);const a=t,o=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:a},[e])).then(l=>this._createTextureFrom(l.data,i));return AA.set(e,{promise:o}),o}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),xA--,this}}Oi.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2};Oi.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25};Oi.EngineFormat={RGBAFormat:Pt,RGBA_ASTC_4x4_Format:vd,RGB_BPTC_UNSIGNED_Format:Up,RGBA_BPTC_Format:Vu,RGBA_ETC2_EAC_Format:kp,RGBA_PVRTC_4BPPV1_Format:Lp,RGBA_S3TC_DXT5_Format:ju,RGB_ETC1_Format:Pp,RGB_ETC2_Format:Fp,RGB_PVRTC_4BPPV1_Format:Dp,RGBA_S3TC_DXT1_Format:Qu};Oi.EngineType={UnsignedByteType:tn,HalfFloatType:cn,FloatType:Zt};Oi.BasisWorker=function(){let n,e,t;const i=_EngineFormat,s=_EngineType,r=_TranscoderFormat,a=_BasisFormat;self.addEventListener("message",function(g){const x=g.data;switch(x.type){case"init":n=x.config,o(x.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:A,buffers:m,width:y,height:v,hasAlpha:b,format:w,type:S,dfdFlags:C}=l(x.buffer);self.postMessage({type:"transcode",id:x.id,data:{faces:A,width:y,height:v,hasAlpha:b,format:w,type:S,dfdFlags:C}},m)}catch(A){console.error(A),self.postMessage({type:"error",id:x.id,error:A.message})}});break}});function o(g){e=new Promise(x=>{t={wasmBinary:g,onRuntimeInitialized:x},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function l(g){const x=new t.KTX2File(new Uint8Array(g));function A(){x.close(),x.delete()}if(!x.isValid())throw A(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let m;if(x.isUASTC())m=a.UASTC;else if(x.isETC1S())m=a.ETC1S;else if(x.isHDR())m=a.UASTC_HDR;else throw new Error("THREE.KTX2Loader: Unknown Basis encoding");const y=x.getWidth(),v=x.getHeight(),b=x.getLayers()||1,w=x.getLevels(),S=x.getFaces(),C=x.getHasAlpha(),M=x.getDFDFlags(),{transcoderFormat:_,engineFormat:E,engineType:R}=d(m,y,v,C);if(!y||!v||!w)throw A(),new Error("THREE.KTX2Loader:	Invalid texture");if(!x.startTranscoding())throw A(),new Error("THREE.KTX2Loader: .startTranscoding failed");const L=[],F=[];for(let U=0;U<S;U++){const z=[];for(let V=0;V<w;V++){const G=[];let D,W;for(let ee=0;ee<b;ee++){const Q=x.getImageLevelInfo(V,ee,U);U===0&&V===0&&ee===0&&(Q.origWidth%4!==0||Q.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),w>1?(D=Q.origWidth,W=Q.origHeight):(D=Q.width,W=Q.height);let ae=new Uint8Array(x.getImageTranscodedSizeInBytes(V,ee,0,_));const $=x.transcodeImage(ae,V,ee,U,_,0,-1,-1);if(R===s.HalfFloatType&&(ae=new Uint16Array(ae.buffer,ae.byteOffset,ae.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!$)throw A(),new Error("THREE.KTX2Loader: .transcodeImage failed.");G.push(ae)}const K=p(G);z.push({data:K,width:D,height:W}),F.push(K.buffer)}L.push({mipmaps:z,width:y,height:v,format:E,type:R})}return A(),{faces:L,buffers:F,width:y,height:v,hasAlpha:C,dfdFlags:M,format:E,type:R}}const c=[{if:"astcSupported",basisFormat:[a.UASTC],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[s.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[s.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[s.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[s.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[s.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[s.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[a.UASTC_HDR],transcoderFormat:[r.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[s.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[r.RGBA32,r.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[s.UnsignedByteType,s.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[a.UASTC_HDR],transcoderFormat:[r.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[s.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],u={[a.ETC1S]:c.filter(g=>g.basisFormat.includes(a.ETC1S)).sort((g,x)=>g.priorityUASTC-x.priorityUASTC),[a.UASTC]:c.filter(g=>g.basisFormat.includes(a.UASTC)).sort((g,x)=>g.priorityUASTC-x.priorityUASTC),[a.UASTC_HDR]:c.filter(g=>g.basisFormat.includes(a.UASTC_HDR)).sort((g,x)=>g.priorityHDR-x.priorityHDR)};function d(g,x,A,m){const y=u[g];for(let v=0;v<y.length;v++){const b=y[v];if(b.if&&!n[b.if]||!b.basisFormat.includes(g)||m&&b.transcoderFormat.length<2||b.needsPowerOfTwo&&!(f(x)&&f(A)))continue;const w=b.transcoderFormat[m?1:0],S=b.engineFormat[m?1:0],C=b.engineType[0];return{transcoderFormat:w,engineFormat:S,engineType:C}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}function f(g){return g<=2?!0:(g&g-1)===0&&g!==0}function p(g){if(g.length===1)return g[0];let x=0;for(let y=0;y<g.length;y++){const v=g[y];x+=v.byteLength}const A=new Uint8Array(x);let m=0;for(let y=0;y<g.length;y++){const v=g[y];A.set(v,m),m+=v.byteLength}return A}};const Tz=new Set([Pt,Za,Yr]),vA={[BN]:Pt,[IN]:Pt,[_N]:Pt,[SN]:Pt,[RN]:Za,[MN]:Za,[wN]:Za,[EN]:Za,[TN]:Yr,[CN]:Yr,[bN]:Yr,[vN]:Yr,[qb]:vd,[DN]:bd,[NN]:bd},bA={[BN]:Zt,[IN]:cn,[_N]:tn,[SN]:tn,[RN]:Zt,[MN]:cn,[wN]:tn,[EN]:tn,[TN]:Zt,[CN]:cn,[bN]:tn,[vN]:tn,[qb]:cn,[DN]:tn,[NN]:tn};async function Rz(n){const{vkFormat:e}=n;if(vA[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;n.supercompressionScheme===v1&&(yA||(yA=new Promise(async r=>{const a=new Cz;await a.init(),r(a)})),t=await yA);const i=[];for(let r=0;r<n.levels.length;r++){const a=Math.max(1,n.pixelWidth>>r),o=Math.max(1,n.pixelHeight>>r),l=n.pixelDepth?Math.max(1,n.pixelDepth>>r):0,c=n.levels[r];let u;if(n.supercompressionScheme===xz)u=c.levelData;else if(n.supercompressionScheme===v1)u=t.decode(c.levelData,c.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let d;bA[e]===Zt?d=new Float32Array(u.buffer,u.byteOffset,u.byteLength/Float32Array.BYTES_PER_ELEMENT):bA[e]===cn?d=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT):d=u,i.push({data:d,width:a,height:o,depth:l})}let s;if(Tz.has(vA[e]))s=n.pixelDepth===0?new zd(i[0].data,n.pixelWidth,n.pixelHeight):new kB(i[0].data,n.pixelWidth,n.pixelHeight,n.pixelDepth);else{if(n.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");s=new ao(i,n.pixelWidth,n.pixelHeight),s.minFilter=i.length===1?nt:Zn,s.magFilter=nt}return s.mipmaps=i,s.type=bA[e],s.format=vA[e],s.colorSpace=LN(n),s.needsUpdate=!0,Promise.resolve(s)}function LN(n){const e=n.dataFormatDescriptor[0];return e.colorPrimaries===bz?e.transferFunction===b1?Ct:It:e.colorPrimaries===wz?e.transferFunction===b1?Mz:Iz:(e.colorPrimaries===vz||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),Ui)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _1,S1;const ns=Symbol("retainerCount"),Ys=Symbol("recentlyUsed"),qh=Symbol("evict"),Yc=Symbol("evictionThreshold"),wA=Symbol("cache");class Bz{constructor(e,t=5){this[_1]=new Map,this[S1]=[],this[wA]=e,this[Yc]=t}set evictionThreshold(e){this[Yc]=e,this[qh]()}get evictionThreshold(){return this[Yc]}get cache(){return this[wA]}retainerCount(e){return this[ns].get(e)||0}reset(){this[ns].clear(),this[Ys]=[]}retain(e){this[ns].has(e)||this[ns].set(e,0),this[ns].set(e,this[ns].get(e)+1);const t=this[Ys].indexOf(e);t!==-1&&this[Ys].splice(t,1),this[Ys].unshift(e),this[qh]()}release(e){this[ns].has(e)&&this[ns].set(e,Math.max(this[ns].get(e)-1,0)),this[qh]()}[(_1=ns,S1=Ys,qh)](){if(!(this[Ys].length<this[Yc]))for(let e=this[Ys].length-1;e>=this[Yc];--e){const t=this[Ys][e];this[ns].get(t)===0&&(this[wA].delete(t),this[Ys].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz=n=>{const e=[],t=new Set;for(const i of n){let s=i,r=0;for(;t.has(s);)s=i+"."+ ++r;t.add(s),e.push(s)}return e},Dz=n=>{const e=new Map;for(const t of n.mappings)for(const i of t.variants)e.set(i,{material:null,gltfMaterialIndex:t.material});return e};class Lz{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,i=t.json;if(i.extensions===void 0||i.extensions[this.name]===void 0)return null;const r=i.extensions[this.name].variants||[],a=Nz(r.map(o=>o.name));for(const o of e.scenes)o.traverse(l=>{const c=l;if(!c.material)return;const u=t.associations.get(c);if(u==null||u.meshes==null||u.primitives==null)return;const g=i.meshes[u.meshes].primitives[u.primitives].extensions;!g||!g[this.name]||(c.userData.variantMaterials=Dz(g[this.name]))});return e.userData.variants=a,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PN,C1;Ft.DEFAULT_ANISOTROPY=4;const Pz=(n,e,t=()=>{})=>{const i=s=>{const r=s.loaded/s.total;t(Math.max(0,Math.min(1,isFinite(r)?r:1)))};return new Promise((s,r)=>{e.load(n,s,i,r)})},Fz=n=>new Promise((e,t)=>{const i=document.createElement("script");document.body.appendChild(i),i.onload=e,i.onerror=t,i.async=!0,i.src=n}),Xs=new Map,EA=new Map;let M1;const I1=new LH;let T1;const _A=new Oi;let SA,CA;const Qa=Symbol("loader"),Qr=Symbol("evictionPolicy"),R1=Symbol("GLTFInstance");class Yn extends xs{static setDRACODecoderLocation(e){M1=e,I1.setDecoderPath(e)}static getDRACODecoderLocation(){return M1}static setKTX2TranscoderLocation(e){T1=e,_A.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return T1}static setMeshoptDecoderLocation(e){SA!==e&&(SA=e,CA=Fz(e).then(()=>p1.ready).then(()=>p1))}static getMeshoptDecoderLocation(){return SA}static initializeKTX2Loader(e){_A.detectSupport(e)}static get cache(){return Xs}static clearCache(){Xs.forEach((e,t)=>{this.delete(t)}),this[Qr].reset()}static has(e){return Xs.has(e)}static async delete(e){if(!this.has(e))return;const t=Xs.get(e);EA.delete(e),Xs.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!EA.get(e)}constructor(e){super(),this[C1]=new FH().register(t=>new Lz(t)),this[R1]=e,this[Qa].setDRACOLoader(I1),this[Qa].setKTX2Loader(_A)}get[(PN=Qr,C1=Qa,Qr)](){return this.constructor[Qr]}async preload(e,t,i=()=>{}){if(this[Qa].setWithCredentials(t.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!Xs.has(e)){CA!=null&&this[Qa].setMeshoptDecoder(await CA);const s=Pz(e,this[Qa],o=>{i(o*.8)}),r=this[R1],a=s.then(o=>r.prepare(o)).then(o=>(i(.9),new r(o))).catch(o=>(console.error(o),new r));Xs.set(e,a)}await Xs.get(e),EA.set(e,!0),i&&i(1)}async load(e,t,i=()=>{}){await this.preload(e,t,i);const r=await(await Xs.get(e)).clone();return this[Qr].retain(e),r.dispose=()=>{this[Qr].release(e)},r}}Yn[PN]=new Bz(Yn);class kz extends wt{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ge(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Qo=new P,B1=new ke,N1=new ke,D1=new P,L1=new P;class Uz{constructor(e={}){const t=this;let i,s,r,a;const o={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:s}},this.render=function(g,x){g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),x.parent===null&&x.matrixWorldAutoUpdate===!0&&x.updateMatrixWorld(),B1.copy(x.matrixWorldInverse),N1.multiplyMatrices(x.projectionMatrix,B1),u(g,g,x),p(g)},this.setSize=function(g,x){i=g,s=x,r=i/2,a=s/2,l.style.width=g+"px",l.style.height=x+"px"};function c(g){g.isCSS2DObject&&(g.element.style.display="none");for(let x=0,A=g.children.length;x<A;x++)c(g.children[x])}function u(g,x,A){if(g.visible===!1){c(g);return}if(g.isCSS2DObject){Qo.setFromMatrixPosition(g.matrixWorld),Qo.applyMatrix4(N1);const m=Qo.z>=-1&&Qo.z<=1&&g.layers.test(A.layers)===!0,y=g.element;y.style.display=m===!0?"":"none",m===!0&&(g.onBeforeRender(t,x,A),y.style.transform="translate("+-100*g.center.x+"%,"+-100*g.center.y+"%)translate("+(Qo.x*r+r)+"px,"+(-Qo.y*a+a)+"px)",y.parentNode!==l&&l.appendChild(y),g.onAfterRender(t,x,A));const v={distanceToCameraSquared:d(A,g)};o.objects.set(g,v)}for(let m=0,y=g.children.length;m<y;m++)u(g.children[m],x,A)}function d(g,x){return D1.setFromMatrixPosition(g.matrixWorld),L1.setFromMatrixPosition(x.matrixWorld),D1.distanceToSquared(L1)}function f(g){const x=[];return g.traverseVisible(function(A){A.isCSS2DObject&&x.push(A)}),x}function p(g){const x=f(g).sort(function(m,y){if(m.renderOrder!==y.renderOrder)return y.renderOrder-m.renderOrder;const v=o.objects.get(m).distanceToCameraSquared,b=o.objects.get(y).distanceToCameraSquared;return v-b}),A=x.length;for(let m=0,y=x.length;m<y;m++)x[m].element.style.zIndex=A-m}}}function Yh(n,e,t){let i=t;const s=new P;return n.updateWorldMatrix(!0,!0),n.traverseVisible(r=>{const{geometry:a}=r;if(a!==void 0){const{position:o}=a.attributes;if(o!==void 0)for(let l=0,c=o.count;l<c;l++)r.isMesh?r.getVertexPosition(l,s):s.fromBufferAttribute(o,l),r.isSkinnedMesh||s.applyMatrix4(r.matrixWorld),i=e(i,s)}}),i}const P1={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class qp{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new qz(e)}),this.register(function(e){return new Yz(e)}),this.register(function(e){return new Zz(e)}),this.register(function(e){return new eW(e)}),this.register(function(e){return new tW(e)}),this.register(function(e){return new nW(e)}),this.register(function(e){return new Xz(e)}),this.register(function(e){return new Kz(e)}),this.register(function(e){return new Jz(e)}),this.register(function(e){return new iW(e)}),this.register(function(e){return new sW(e)}),this.register(function(e){return new rW(e)}),this.register(function(e){return new aW(e)}),this.register(function(e){return new oW(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,t,i,s){const r=new $z,a=[];for(let o=0,l=this.pluginCallbacks.length;o<l;o++)a.push(this.pluginCallbacks[o](r));r.setPlugins(a),r.setTextureUtils(this.textureUtils),r.writeAsync(e,t,s).catch(i)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,s,r,t)})}}const Ke={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},MA="KHR_mesh_quantization",vi={};vi[un]=Ke.NEAREST;vi[Gd]=Ke.NEAREST_MIPMAP_NEAREST;vi[qr]=Ke.NEAREST_MIPMAP_LINEAR;vi[nt]=Ke.LINEAR;vi[ro]=Ke.LINEAR_MIPMAP_NEAREST;vi[Zn]=Ke.LINEAR_MIPMAP_LINEAR;vi[Jt]=Ke.CLAMP_TO_EDGE;vi[As]=Ke.REPEAT;vi[mo]=Ke.MIRRORED_REPEAT;const F1={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Oz=new Te,k1=12,Qz=1179937895,jz=2,U1=8,Vz=1313821514,Gz=5130562;function vu(n,e){return n.length===e.length&&n.every(function(t,i){return t===e[i]})}function Hz(n){return new TextEncoder().encode(n).buffer}function zz(n){return vu(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Wz(n,e,t){const i={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+t;s++)for(let r=0;r<n.itemSize;r++){let a;n.itemSize>4?a=n.array[s*n.itemSize+r]:(r===0?a=n.getX(s):r===1?a=n.getY(s):r===2?a=n.getZ(s):r===3&&(a=n.getW(s)),n.normalized===!0&&(a=Gp.normalize(a,n.array))),i.min[r]=Math.min(i.min[r],a),i.max[r]=Math.max(i.max[r],a)}return i}function FN(n){return Math.ceil(n/4)*4}function IA(n,e=0){const t=FN(n.byteLength);if(t!==n.byteLength){const i=new Uint8Array(t);if(i.set(new Uint8Array(n)),e!==0)for(let s=n.byteLength;s<t;s++)i[s]=e;return i.buffer}return n}function O1(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function Q1(n,e){if(n.toBlob!==void 0)return new Promise(i=>n.toBlob(i,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class $z{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+Sm}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const s=this,r=s.buffers,a=s.json;i=s.options;const o=s.extensionsUsed,l=s.extensionsRequired,c=new Blob(r,{type:"application/octet-stream"}),u=Object.keys(o),d=Object.keys(l);if(u.length>0&&(a.extensionsUsed=u),d.length>0&&(a.extensionsRequired=d),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=c.size),i.binary===!0){const f=new FileReader;f.readAsArrayBuffer(c),f.onloadend=function(){const p=IA(f.result),g=new DataView(new ArrayBuffer(U1));g.setUint32(0,p.byteLength,!0),g.setUint32(4,Gz,!0);const x=IA(Hz(JSON.stringify(a)),32),A=new DataView(new ArrayBuffer(U1));A.setUint32(0,x.byteLength,!0),A.setUint32(4,Vz,!0);const m=new ArrayBuffer(k1),y=new DataView(m);y.setUint32(0,Qz,!0),y.setUint32(4,jz,!0);const v=k1+A.byteLength+x.byteLength+g.byteLength+p.byteLength;y.setUint32(8,v,!0);const b=new Blob([m,A,x,g,p],{type:"application/octet-stream"}),w=new FileReader;w.readAsArrayBuffer(b),w.onloadend=function(){t(w.result)}}}else if(a.buffers&&a.buffers.length>0){const f=new FileReader;f.readAsDataURL(c),f.onloadend=function(){const p=f.result;a.buffers[0].uri=p,t(a)}}else t(a)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const i=this.options,s=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const a in r.gltfExtensions)t.extensions[a]=r.gltfExtensions[a],s[a]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const s=new Map;s.set(!0,this.uid++),s.set(!1,this.uid++),this.uids.set(e,s)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const i=new P;for(let s=0,r=e.count;s<r;s++)if(Math.abs(i.fromBufferAttribute(e,s).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),s=new P;for(let r=0,a=i.count;r<a;r++)s.fromBufferAttribute(i,r),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),i.setXYZ(r,s.x,s.y,s.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const s={};(t.offset.x!==0||t.offset.y!==0)&&(s.offset=t.offset.toArray(),i=!0),t.rotation!==0&&(s.rotation=t.rotation,i=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(s.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,t){if(e===t)return e;function i(p){return p.colorSpace===Ct?function(x){return x<.04045?x*.0773993808:Math.pow(x*.9478672986+.0521327014,2.4)}:function(x){return x}}e instanceof ao&&(e=await this.decompressTextureAsync(e)),t instanceof ao&&(t=await this.decompressTextureAsync(t));const s=e?e.image:null,r=t?t.image:null,a=Math.max(s?s.width:0,r?r.width:0),o=Math.max(s?s.height:0,r?r.height:0),l=O1();l.width=a,l.height=o;const c=l.getContext("2d",{willReadFrequently:!0});c.fillStyle="#00ffff",c.fillRect(0,0,a,o);const u=c.getImageData(0,0,a,o);if(s){c.drawImage(s,0,0,a,o);const p=i(e),g=c.getImageData(0,0,a,o).data;for(let x=2;x<g.length;x+=4)u.data[x]=p(g[x]/256)*256}if(r){c.drawImage(r,0,0,a,o);const p=i(t),g=c.getImageData(0,0,a,o).data;for(let x=1;x<g.length;x+=4)u.data[x]=p(g[x]/256)*256}c.putImageData(u,0,0);const f=(e||t).clone();return f.source=new Pb(l),f.colorSpace=Ui,f.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),f}async decompressTextureAsync(e,t=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,t)}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,s,r){const a=this.json;a.bufferViews||(a.bufferViews=[]);let o;switch(t){case Ke.BYTE:case Ke.UNSIGNED_BYTE:o=1;break;case Ke.SHORT:case Ke.UNSIGNED_SHORT:o=2;break;default:o=4}let l=e.itemSize*o;r===Ke.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const c=FN(s*l),u=new DataView(new ArrayBuffer(c));let d=0;for(let g=i;g<i+s;g++){for(let x=0;x<e.itemSize;x++){let A;e.itemSize>4?A=e.array[g*e.itemSize+x]:(x===0?A=e.getX(g):x===1?A=e.getY(g):x===2?A=e.getZ(g):x===3&&(A=e.getW(g)),e.normalized===!0&&(A=Gp.normalize(A,e.array))),t===Ke.FLOAT?u.setFloat32(d,A,!0):t===Ke.INT?u.setInt32(d,A,!0):t===Ke.UNSIGNED_INT?u.setUint32(d,A,!0):t===Ke.SHORT?u.setInt16(d,A,!0):t===Ke.UNSIGNED_SHORT?u.setUint16(d,A,!0):t===Ke.BYTE?u.setInt8(d,A):t===Ke.UNSIGNED_BYTE&&u.setUint8(d,A),d+=o}d%l!==0&&(d+=l-d%l)}const f={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:c};return r!==void 0&&(f.target=r),r===Ke.ARRAY_BUFFER&&(f.byteStride=l),this.byteOffset+=c,a.bufferViews.push(f),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(s){const r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){const a=IA(r.result),o={buffer:t.processBuffer(a),byteOffset:t.byteOffset,byteLength:a.byteLength};t.byteOffset+=a.byteLength,s(i.bufferViews.push(o)-1)}})}processAccessor(e,t,i,s){const r=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let o;if(e.array.constructor===Float32Array)o=Ke.FLOAT;else if(e.array.constructor===Int32Array)o=Ke.INT;else if(e.array.constructor===Uint32Array)o=Ke.UNSIGNED_INT;else if(e.array.constructor===Int16Array)o=Ke.SHORT;else if(e.array.constructor===Uint16Array)o=Ke.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)o=Ke.BYTE;else if(e.array.constructor===Uint8Array)o=Ke.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(i===void 0&&(i=0),(s===void 0||s===1/0)&&(s=e.count),s===0)return null;const l=Wz(e,i,s);let c;t!==void 0&&(c=e===t.index?Ke.ELEMENT_ARRAY_BUFFER:Ke.ARRAY_BUFFER);const u=this.processBufferView(e,o,i,s,c),d={bufferView:u.id,byteOffset:u.byteOffset,componentType:o,count:s,max:l.max,min:l.min,type:a[e.itemSize]};return e.normalized===!0&&(d.normalized=!0),r.accessors||(r.accessors=[]),r.accessors.push(d)-1}processImage(e,t,i,s="image/png"){if(e!==null){const r=this,a=r.cache,o=r.json,l=r.options,c=r.pending;a.images.has(e)||a.images.set(e,{});const u=a.images.get(e),d=s+":flipY/"+i.toString();if(u[d]!==void 0)return u[d];o.images||(o.images=[]);const f={mimeType:s},p=O1();p.width=Math.min(e.width,l.maxTextureSize),p.height=Math.min(e.height,l.maxTextureSize);const g=p.getContext("2d",{willReadFrequently:!0});if(i===!0&&(g.translate(0,p.height),g.scale(1,-1)),e.data!==void 0){t!==Pt&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const A=new Uint8ClampedArray(e.height*e.width*4);for(let m=0;m<A.length;m+=4)A[m+0]=e.data[m+0],A[m+1]=e.data[m+1],A[m+2]=e.data[m+2],A[m+3]=e.data[m+3];g.putImageData(new ImageData(A,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)g.drawImage(e,0,0,p.width,p.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");l.binary===!0?c.push(Q1(p,s).then(A=>r.processBufferViewImage(A)).then(A=>{f.bufferView=A})):p.toDataURL!==void 0?f.uri=p.toDataURL(s):c.push(Q1(p,s).then(A=>new FileReader().readAsDataURL(A)).then(A=>{f.uri=A}));const x=o.images.push(f)-1;return u[d]=x,x}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:vi[e.magFilter],minFilter:vi[e.minFilter],wrapS:vi[e.wrapS],wrapT:vi[e.wrapT]};return t.samplers.push(i)-1}async processTextureAsync(e){const i=this.options,s=this.cache,r=this.json;if(s.textures.has(e))return s.textures.get(e);r.textures||(r.textures=[]),e instanceof ao&&(e=await this.decompressTextureAsync(e,i.maxTextureSize));let a=e.userData.mimeType;a==="image/webp"&&(a="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,a)};e.name&&(o.name=e.name),await this._invokeAllAsync(async function(c){c.writeTexture&&await c.writeTexture(e,o)});const l=r.textures.push(o)-1;return s.textures.set(e,l),l}async processMaterialAsync(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=e.color.toArray().concat([e.opacity]);if(vu(r,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=0,s.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const o=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),l={index:await this.processTextureAsync(o),texCoord:o.channel};this.applyTextureTransform(l,o),s.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const o={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(o,e.map),s.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){const o=e.emissive;if(Math.max(o.r,o.g,o.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),s.emissiveTexture=c}}if(e.normalMap){const o={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(o.scale=e.normalScale.x),this.applyTextureTransform(o,e.normalMap),s.normalTexture=o}if(e.aoMap){const o={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(o.strength=e.aoMapIntensity),this.applyTextureTransform(o,e.aoMap),s.occlusionTexture=o}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===yn&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),await this._invokeAllAsync(async function(o){o.writeMaterialAsync&&await o.writeMaterialAsync(e,s)});const a=i.materials.push(s)-1;return t.materials.set(e,a),a}async processMeshAsync(e){const t=this.cache,i=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let b=0,w=e.material.length;b<w;b++)s.push(e.material[b].uuid);else s.push(e.material.uuid);const r=s.join(":");if(t.meshes.has(r))return t.meshes.get(r);const a=e.geometry;let o;e.isLineSegments?o=Ke.LINES:e.isLineLoop?o=Ke.LINE_LOOP:e.isLine?o=Ke.LINE_STRIP:e.isPoints?o=Ke.POINTS:o=e.material.wireframe?Ke.LINES:Ke.TRIANGLES;const l={},c={},u=[],d=[],f={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=a.getAttribute("normal");p!==void 0&&!this.isNormalizedNormalAttribute(p)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(p)));let g=null;for(let b in a.attributes){if(b.slice(0,5)==="morph")continue;const w=a.attributes[b];if(b=f[b]||b.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(b)||(b="_"+b),t.attributes.has(this.getUID(w))){c[b]=t.attributes.get(this.getUID(w));continue}g=null;const C=w.array;b==="JOINTS_0"&&!(C instanceof Uint16Array)&&!(C instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new kt(new Uint16Array(C),w.itemSize,w.normalized)):(C instanceof Uint32Array||C instanceof Int32Array)&&!b.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${b}" converted to type FLOAT.`),g=qp.Utils.toFloat32BufferAttribute(w));const M=this.processAccessor(g||w,a);M!==null&&(b.startsWith("_")||this.detectMeshQuantization(b,w),c[b]=M,t.attributes.set(this.getUID(w),M))}if(p!==void 0&&a.setAttribute("normal",p),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const b=[],w=[],S={};if(e.morphTargetDictionary!==void 0)for(const C in e.morphTargetDictionary)S[e.morphTargetDictionary[C]]=C;for(let C=0;C<e.morphTargetInfluences.length;++C){const M={};let _=!1;for(const E in a.morphAttributes){if(E!=="position"&&E!=="normal"){_||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),_=!0);continue}const R=a.morphAttributes[E][C],L=E.toUpperCase(),F=a.attributes[E];if(t.attributes.has(this.getUID(R,!0))){M[L]=t.attributes.get(this.getUID(R,!0));continue}const U=R.clone();if(!a.morphTargetsRelative)for(let z=0,V=R.count;z<V;z++)for(let G=0;G<R.itemSize;G++)G===0&&U.setX(z,R.getX(z)-F.getX(z)),G===1&&U.setY(z,R.getY(z)-F.getY(z)),G===2&&U.setZ(z,R.getZ(z)-F.getZ(z)),G===3&&U.setW(z,R.getW(z)-F.getW(z));M[L]=this.processAccessor(U,a),t.attributes.set(this.getUID(F,!0),M[L])}d.push(M),b.push(e.morphTargetInfluences[C]),e.morphTargetDictionary!==void 0&&w.push(S[C])}l.weights=b,w.length>0&&(l.extras={},l.extras.targetNames=w)}const x=Array.isArray(e.material);if(x&&a.groups.length===0)return null;let A=!1;if(x&&a.index===null){const b=[];for(let w=0,S=a.attributes.position.count;w<S;w++)b[w]=w;a.setIndex(b),A=!0}const m=x?e.material:[e.material],y=x?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let b=0,w=y.length;b<w;b++){const S={mode:o,attributes:c};if(this.serializeUserData(a,S),d.length>0&&(S.targets=d),a.index!==null){let M=this.getUID(a.index);(y[b].start!==void 0||y[b].count!==void 0)&&(M+=":"+y[b].start+":"+y[b].count),t.attributes.has(M)?S.indices=t.attributes.get(M):(S.indices=this.processAccessor(a.index,a,y[b].start,y[b].count),t.attributes.set(M,S.indices)),S.indices===null&&delete S.indices}const C=await this.processMaterialAsync(m[y[b].materialIndex]);C!==null&&(S.material=C),u.push(S)}A===!0&&a.setIndex(null),l.primitives=u,i.meshes||(i.meshes=[]),await this._invokeAllAsync(function(b){b.writeMesh&&b.writeMesh(e,l)});const v=i.meshes.push(l)-1;return t.meshes.set(r,v),v}detectMeshQuantization(e,t){if(this.extensionsUsed[MA])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const s=e.split("_",1)[0];P1[s]&&P1[s].includes(i)&&(this.extensionsUsed[MA]=!0,this.extensionsRequired[MA]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,s={type:i?"orthographic":"perspective"};return i?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:Gp.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),t.cameras.push(s)-1}processAnimation(e,t){const i=this.json,s=this.nodeMap;i.animations||(i.animations=[]),e=qp.Utils.mergeMorphTargetTracks(e.clone(),t);const r=e.tracks,a=[],o=[];for(let l=0;l<r.length;++l){const c=r[l],u=at.parseTrackName(c.name);let d=at.findNode(t,u.nodeName);const f=F1[u.propertyName];if(u.objectName==="bones"&&(d.isSkinnedMesh===!0?d=d.skeleton.getBoneByName(u.objectIndex):d=void 0),!d||!f){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name);continue}const p=1;let g=c.values.length/c.times.length;f===F1.morphTargetInfluences&&(g/=d.morphTargetInfluences.length);let x;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(x="CUBICSPLINE",g/=3):c.getInterpolation()===sc?x="STEP":x="LINEAR",o.push({input:this.processAccessor(new kt(c.times,p)),output:this.processAccessor(new kt(c.values,g)),interpolation:x}),a.push({sampler:o.length-1,target:{node:s.get(d),path:f}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:o,channels:a}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,s=t.nodes[i.get(e)],r=e.skeleton;if(r===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const o=[],l=new Float32Array(r.bones.length*16),c=new ke;for(let d=0;d<r.bones.length;++d)o.push(i.get(r.bones[d])),c.copy(r.boneInverses[d]),c.multiply(e.bindMatrix).toArray(l,d*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new kt(l,16)),joints:o,skeleton:i.get(a)}),s.skin=t.skins.length-1}async processNodeAsync(e){const t=this.json,i=this.options,s=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(i.trs){const o=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();vu(o,[0,0,0,1])||(r.rotation=o),vu(l,[0,0,0])||(r.translation=l),vu(c,[1,1,1])||(r.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),zz(e.matrix)===!1&&(r.matrix=e.matrix.elements);if(e.name!==""&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){const o=await this.processMeshAsync(e);o!==null&&(r.mesh=o)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const o=[];for(let l=0,c=e.children.length;l<c;l++){const u=e.children[l];if(u.visible||i.onlyVisible===!1){const d=await this.processNodeAsync(u);d!==null&&o.push(d)}}o.length>0&&(r.children=o)}await this._invokeAllAsync(function(o){o.writeNode&&o.writeNode(e,r)});const a=t.nodes.push(r)-1;return s.set(e,a),a}async processSceneAsync(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const s={};e.name!==""&&(s.name=e.name),t.scenes.push(s);const r=[];for(let a=0,o=e.children.length;a<o;a++){const l=e.children[a];if(l.visible||i.onlyVisible===!1){const c=await this.processNodeAsync(l);c!==null&&r.push(c)}}r.length>0&&(s.nodes=r),this.serializeUserData(e,s)}async processObjectsAsync(e){const t=new go;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);await this.processSceneAsync(t)}async processInputAsync(e){const t=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync(function(s){s.beforeParse&&s.beforeParse(e)});const i=[];for(let s=0;s<e.length;s++)e[s]instanceof go?await this.processSceneAsync(e[s]):i.push(e[s]);i.length>0&&await this.processObjectsAsync(i);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<t.animations.length;++s)this.processAnimation(t.animations[s],e[0]);await this._invokeAllAsync(function(s){s.afterParse&&s.afterParse(e)})}async _invokeAllAsync(e){for(let t=0,i=this.plugins.length;t<i;t++)await e(this.plugins[t])}}class qz{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const i=this.writer,s=i.json,r=i.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(1-e.penumbra)*e.angle,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},r[this.name]=!0);const o=s.extensions[this.name].lights;o.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}}class Yz{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,t){if(!e.isMeshBasicMaterial)return;const s=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},s[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Xz{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){const a={index:await i.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(a,e.clearcoatMap),r.clearcoatTexture=a}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const a={index:await i.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(a,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){const a={index:await i.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(a.scale=e.clearcoatNormalScale.x),i.applyTextureTransform(a,e.clearcoatNormalMap),r.clearcoatNormalTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Kz{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const s=this.writer.extensionsUsed,r={};r.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Jz{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){const a={index:await i.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(a,e.iridescenceMap),r.iridescenceTexture=a}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const a={index:await i.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(a,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Zz{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){const a={index:await i.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(a,e.transmissionMap),r.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class eW{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){const a={index:await i.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(a,e.thicknessMap),r.thicknessTexture=a}e.attenuationDistance!==1/0&&(r.attenuationDistance=e.attenuationDistance),r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class tW{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const s=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class nW{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(Oz)&&!e.specularIntensityMap&&!e.specularColorMap)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.specularIntensityMap){const a={index:await i.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(a,e.specularIntensityMap),r.specularTexture=a}if(e.specularColorMap){const a={index:await i.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(a,e.specularColorMap),r.specularColorTexture=a}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class iW{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.sheenRoughnessMap){const a={index:await i.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(a,e.sheenRoughnessMap),r.sheenRoughnessTexture=a}if(e.sheenColorMap){const a={index:await i.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(a,e.sheenColorMap),r.sheenColorTexture=a}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class sW{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.anisotropyMap){const a={index:await i.processTextureAsync(e.anisotropyMap)};i.applyTextureTransform(a,e.anisotropyMap),r.anisotropyTexture=a}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class rW{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const s=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class aW{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.bumpMap){const a={index:await i.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(a,e.bumpMap),r.bumpTexture=a}r.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class oW{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const i=this.writer,s=e,r=new Float32Array(s.count*3),a=new Float32Array(s.count*4),o=new Float32Array(s.count*3),l=new ke,c=new P,u=new ti,d=new P;for(let p=0;p<s.count;p++)s.getMatrixAt(p,l),l.decompose(c,u,d),c.toArray(r,p*3),u.toArray(a,p*4),d.toArray(o,p*3);const f={TRANSLATION:i.processAccessor(new kt(r,3)),ROTATION:i.processAccessor(new kt(a,4)),SCALE:i.processAccessor(new kt(o,3))};s.instanceColor&&(f._COLOR_0=i.processAccessor(s.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:f},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}}qp.Utils={insertKeyframe:function(n,e){const i=n.getValueSize(),s=new n.TimeBufferType(n.times.length+1),r=new n.ValueBufferType(n.values.length+i),a=n.createInterpolant(new n.ValueBufferType(i));let o;if(n.times.length===0){s[0]=e;for(let l=0;l<i;l++)r[l]=0;o=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;s[0]=e,s.set(n.times,1),r.set(a.evaluate(e),0),r.set(n.values,i),o=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;s[s.length-1]=e,s.set(n.times,0),r.set(n.values,0),r.set(a.evaluate(e),n.values.length),o=s.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){s.set(n.times.slice(0,l+1),0),s[l+1]=e,s.set(n.times.slice(l+1),l+2),r.set(n.values.slice(0,(l+1)*i),0),r.set(a.evaluate(e),(l+1)*i),r.set(n.values.slice((l+1)*i),(l+2)*i),o=l+1;break}}return n.times=s,n.values=r,o},mergeMorphTargetTracks:function(n,e){const t=[],i={},s=n.tracks;for(let r=0;r<s.length;++r){let a=s[r];const o=at.parseTrackName(a.name),l=at.findNode(e,o.nodeName);if(o.propertyName!=="morphTargetInfluences"||o.propertyIndex===void 0){t.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(rc)}const c=l.morphTargetInfluences.length,u=l.morphTargetDictionary[o.propertyIndex];if(u===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let d;if(i[l.uuid]===void 0){d=a.clone();const p=new d.ValueBufferType(c*d.times.length);for(let g=0;g<d.times.length;g++)p[g*c+u]=d.values[g];d.name=(o.nodeName||"")+".morphTargetInfluences",d.values=p,i[l.uuid]=d,t.push(d);continue}const f=a.createInterpolant(new a.ValueBufferType(1));d=i[l.uuid];for(let p=0;p<d.times.length;p++)d.values[p*c+u]=f.evaluate(d.times[p]);for(let p=0;p<a.times.length;p++){const g=this.insertKeyframe(d,a.times[p]);d.values[g*c+u]=a.values[p]}}return n.tracks=t,n},toFloat32BufferAttribute:function(n){const e=new kt(new Float32Array(n.count*n.itemSize),n.itemSize,!1);if(!n.normalized&&!n.isInterleavedBufferAttribute)return e.array.set(n.array),e;for(let t=0,i=n.count;t<i;t++)for(let s=0;s<n.itemSize;s++)e.setComponent(t,s,n.getComponent(t,s));return e}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=n=>n.material!==void 0&&n.userData&&n.userData.variantMaterials&&!!Array.from(n.userData.variantMaterials.values()).filter(e=>$f(e.material)),$f=n=>n&&n.isMaterial&&!Array.isArray(n);class lW{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set,i=s=>{if(!j1(s))return;const r=s.userData.variantMaterials,a=s.userData.variantData;for(const[o,l]of a){const c=r.get(l.index);c&&$f(c.material)&&t.add(o)}};if(Array.isArray(e))for(const s of e)s.traverse(i);else e.traverse(i);t.forEach(s=>this.variantNames.push(s))}async writeMesh(e,t){if(!j1(e))return;const i=e.userData,s=i.variantMaterials,r=i.variantData,a=new Map,o=new Map,l=Array.from(r.values()).sort((d,f)=>d.index-f.index);for(const[d,f]of l.entries())o.set(f.index,d);for(const d of r.values()){const f=s.get(d.index);if(!f||!$f(f.material))continue;const p=await this.writer.processMaterialAsync(f.material);a.has(p)||a.set(p,{material:p,variants:[]}),a.get(p).variants.push(o.get(d.index))}const c=Array.from(a.values()).map(d=>d.variants.sort((f,p)=>f-p)&&d).sort((d,f)=>d.material-f.material);if(c.length===0)return;const u=$f(i.originalMaterial)?await this.writer.processMaterialAsync(i.originalMaterial):-1;for(const d of t.primitives)u>=0&&(d.material=u),d.extensions=d.extensions||{},d.extensions[this.name]={mappings:c}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map(i=>({name:i}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class cW{constructor(e,t,i,s,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const a=t.xr.getSession();if(s&&"XRWebGLBinding"in window){const o=new kb(16);e.environment=o.texture;const l=t.getContext();switch(a.preferredReflectionFormat){case"srgba8":l.getExtension("EXT_sRGB");break;case"rgba16f":l.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(a,l),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}a.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const s=t.getLightEstimate(this.lightProbe);if(s){this.xrLight.lightProbe.sh.fromArray(s.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const r=Math.max(1,Math.max(s.primaryLightIntensity.x,Math.max(s.primaryLightIntensity.y,s.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(s.primaryLightIntensity.x/r,s.primaryLightIntensity.y/r,s.primaryLightIntensity.z/r),this.xrLight.directionalLight.intensity=r,this.xrLight.directionalLight.position.copy(s.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class uW extends Xr{constructor(e,t=!0){super(),this.lightProbe=new a6,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new tN,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,s=!1;e.xr.addEventListener("sessionstart",()=>{const r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then(a=>{i=new cW(this,e,a,t,()=>{s=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{i&&(i.dispose(),i=null),s&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1e4,dW=.001,UN=50;class Xn{constructor(e=UN){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(dW,e)}update(e,t,i,s){const r=2e-4*this.naturalFrequency;if(e==null||s===0||e===t&&this.velocity===0)return t;if(i<0)return e;const a=e-t,o=this.velocity+this.naturalFrequency*a,l=a+i*o,c=Math.exp(-this.naturalFrequency*i),u=(o-this.naturalFrequency*l)*c,d=-this.naturalFrequency*(u+o*c);return Math.abs(u)<r*Math.abs(s)&&d*a>=0?(this.velocity=0,t):(this.velocity=u,t+l*c)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=.2,V1=.03,hW=.75,ON=12,fW=Math.PI/(2*ON),G1=new Ge,Xh=(n,e,t)=>{let i=e>0?t>0?0:-Math.PI/2:t>0?Math.PI/2:Math.PI;for(let s=0;s<=ON;++s)n.push(e+(_s-V1)*Math.cos(i),t+(_s-V1)*Math.sin(i),0,e+_s*Math.cos(i),t+_s*Math.sin(i),0),i+=fW};class H1 extends bt{constructor(e,t){const i=new hi,s=[],r=[],{size:a,boundingBox:o}=e,l=a.x/2,c=(t==="back"?a.y:a.z)/2;Xh(r,l,c),Xh(r,-l,c),Xh(r,-l,-c),Xh(r,l,-c);const u=r.length/3;for(let p=0;p<u-2;p+=2)s.push(p,p+1,p+3,p,p+3,p+2);const d=u-2;s.push(d,d+1,1,d,1,0),i.setAttribute("position",new Ei(r,3)),i.setIndex(s),super(i),this.side=t;const f=this.material;switch(f.side=yn,f.transparent=!0,f.opacity=0,this.goalOpacity=0,this.opacityDamper=new Xn,this.hitPlane=new bt(new Sr(2*(l+_s),2*(c+_s))),this.hitPlane.visible=!1,this.hitPlane.material.side=yn,this.add(this.hitPlane),this.hitBox=new bt(new _r(a.x+2*_s,a.y+_s,a.z+2*_s)),this.hitBox.visible=!1,this.hitBox.material.side=yn,this.add(this.hitBox),o.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=o.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=o.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(a.y+_s)/2+o.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,t,i){G1.set(t,-i),this.hitPlane.visible=!0;const s=e.positionAndNormalFromPoint(G1,this.hitPlane);return this.hitPlane.visible=!1,s==null?null:s.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const s=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),s}controllerIntersection(e,t){this.hitBox.visible=!0;const i=e.hitFromController(t,this.hitBox);return this.hitBox.visible=!1,i}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?hW:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){const{geometry:e,material:t}=this.hitPlane;e.dispose(),t.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=(n,e)=>({type:"number",number:n,unit:e}),dr=(()=>{const n={};return t=>{const i=t;if(i in n)return n[i];const s=[];let r=0;for(;t;){if(++r>1e3){t="";break}const a=QN(t),o=a.nodes[0];if(o==null||o.terms.length===0)break;s.push(o),t=a.remainingInput}return n[i]=s}})(),QN=(()=>{const n=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,t=/^[\),]/,i="(",s="#";return r=>{const a=[];for(;r.length&&(r=r.trim(),!t.test(r));)if(r[0]===i){const{nodes:o,remainingInput:l}=z1(r);r=l,a.push({type:"function",name:{type:"ident",value:"calc"},arguments:o})}else if(n.test(r)){const o=pW(r),l=o.nodes[0];if(r=o.remainingInput,r[0]===i){const{nodes:c,remainingInput:u}=z1(r);a.push({type:"function",name:l,arguments:c}),r=u}else a.push(l)}else if(e.test(r))a.push({type:"operator",value:r[0]}),r=r.slice(1);else{const{nodes:o,remainingInput:l}=r[0]===s?gW(r):mW(r);if(o.length===0)break;a.push(o[0]),r=l}return{nodes:[{type:"expression",terms:a}],remainingInput:r}}})(),pW=(()=>{const n=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const t=e.match(n),i=t==null?e:e.substr(0,t.index),s=t==null?"":e.substr(t.index);return{nodes:[{type:"ident",value:i}],remainingInput:s}}})(),mW=(()=>{const n=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,t=/^(m|mm|cm|rad|deg|[%])$/;return i=>{const s=i.match(n),r=s==null?"0":s[0];i=r==null?i:i.slice(r.length);const a=i.match(e);let o=a!=null&&a[0]!==""?a[0]:null;const l=a==null?i:i.slice(o.length);return o!=null&&!t.test(o)&&(o=null),{nodes:[{type:"number",number:parseFloat(r)||0,unit:o}],remainingInput:l}}})(),gW=(()=>{const n=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();const t=e.match(n);return{nodes:t==null?[]:[{type:"hex",value:t[0]}],remainingInput:t==null?e:e.slice(t[0].length)}}})(),z1=n=>{const e=[];for(n=n.slice(1).trim();n.length;){const t=QN(n);if(e.push(t.nodes[0]),n=t.remainingInput.trim(),n[0]===",")n=n.slice(1).trim();else if(n[0]===")"){n=n.slice(1);break}}return{nodes:e,remainingInput:n}},W1=Symbol("visitedTypes");class AW{constructor(e){this[W1]=e}walk(e,t){const i=e.slice();for(;i.length;){const s=i.shift();switch(this[W1].indexOf(s.type)>-1&&t(s),s.type){case"expression":i.unshift(...s.terms);break;case"function":i.unshift(s.name,...s.arguments);break}}}}const pa=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=(n,e=0)=>{let{number:t,unit:i}=n;if(!isFinite(t))t=e,i="rad";else if(n.unit==="rad"||n.unit==null)return n;return{type:"number",number:(i==="deg"&&t!=null?t:0)*Math.PI/180,unit:"rad"}},$1=(n,e=0)=>{let{number:t,unit:i}=n;if(!isFinite(t))t=e,i="m";else if(n.unit==="m")return n;let s;switch(i){default:s=1;break;case"cm":s=1/100;break;case"mm":s=1/1e3;break}return{type:"number",number:s*t,unit:"m"}},Ms=(()=>{const n=t=>t,e={rad:n,deg:Nm,m:n,mm:$1,cm:$1};return(t,i=pa)=>{isFinite(t.number)||(t.number=i.number,t.unit=i.unit);const{unit:s}=t;if(s==null)return t;const r=e[s];return r==null?i:r(t)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jN,q1,Y1;const Cc=Symbol("evaluate"),qf=Symbol("lastValue");class Ot{constructor(){this[jN]=null}static evaluatableFor(e,t=pa){if(e instanceof Ot)return e;if(e.type==="number")return e.unit==="%"?new xW(e,t):e;switch(e.name.value){case"calc":return new bW(e,t);case"env":return new yW(e)}return pa}static evaluate(e){return e instanceof Ot?e.evaluate():e}static isConstant(e){return e instanceof Ot?e.isConstant:!0}static applyIntrinsics(e,t){const{basis:i,keywords:s}=t,{auto:r}=s;return i.map((a,o)=>{const l=r[o]==null?a:r[o];let c=e[o]?e[o]:l;if(c.type==="ident"){const u=c.value;u in s&&(c=s[u][o])}return(c==null||c.type==="ident")&&(c=l),c.unit==="%"?On(c.number/100*a.number,a.unit):(c=Ms(c,a),c.unit!==a.unit?a:c)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[qf]==null)&&(this[qf]=this[Cc]()),this[qf]}}jN=qf;const X1=Symbol("percentage"),TA=Symbol("basis");class xW extends Ot{constructor(e,t){super(),this[X1]=e,this[TA]=t}get isConstant(){return!0}[Cc](){return On(this[X1].number/100*this[TA].number,this[TA].unit)}}const Kh=Symbol("identNode");class yW extends Ot{constructor(e){super(),this[q1]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;t!=null&&t.type==="ident"&&(this[Kh]=t)}get isConstant(){return!1}[(q1=Kh,Cc)](){if(this[Kh]!=null)switch(this[Kh].value){case"window-scroll-y":const e=window.pageYOffset,t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:e/(t-window.innerHeight)||0,unit:null}}return pa}}const vW=/[\*\/]/,jo=Symbol("evaluator");class bW extends Ot{constructor(e,t=pa){if(super(),this[Y1]=null,e.arguments.length!==1)return;const i=e.arguments[0].terms.slice(),s=[];for(;i.length;){const r=i.shift();if(s.length>0){const a=s[s.length-1];if(a.type==="operator"&&vW.test(a.value)){const o=s.pop(),l=s.pop();if(l==null)return;s.push(new J1(o,Ot.evaluatableFor(l,t),Ot.evaluatableFor(r,t)));continue}}s.push(r.type==="operator"?r:Ot.evaluatableFor(r,t))}for(;s.length>2;){const[r,a,o]=s.splice(0,3);if(a.type!=="operator")return;s.unshift(new J1(a,Ot.evaluatableFor(r,t),Ot.evaluatableFor(o,t)))}s.length===1&&(this[jo]=s[0])}get isConstant(){return this[jo]==null||Ot.isConstant(this[jo])}[(Y1=jo,Cc)](){return this[jo]!=null?Ot.evaluate(this[jo]):pa}}const K1=Symbol("operator"),RA=Symbol("left"),BA=Symbol("right");class J1 extends Ot{constructor(e,t,i){super(),this[K1]=e,this[RA]=t,this[BA]=i}get isConstant(){return Ot.isConstant(this[RA])&&Ot.isConstant(this[BA])}[Cc](){const e=Ms(Ot.evaluate(this[RA])),t=Ms(Ot.evaluate(this[BA])),{number:i,unit:s}=e,{number:r,unit:a}=t;if(a!=null&&s!=null&&a!=s)return pa;const o=s||a;let l;switch(this[K1].value){case"+":l=i+r;break;case"-":l=i-r;break;case"/":l=i/r;break;case"*":l=i*r;break;default:return pa}return{type:"number",number:l,unit:o}}}const NA=Symbol("evaluatables"),Z1=Symbol("intrinsics");class VN extends Ot{constructor(e,t){super(),this[Z1]=t;const i=e[0],s=i!=null?i.terms:[];this[NA]=t.basis.map((r,a)=>{const o=s[a];return o==null?{type:"ident",value:"auto"}:o.type==="ident"?o:Ot.evaluatableFor(o,r)})}get isConstant(){for(const e of this[NA])if(!Ot.isConstant(e))return!1;return!0}[Cc](){const e=this[NA].map(t=>Ot.evaluate(t));return Ot.applyIntrinsics(e,this[Z1]).map(t=>t.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GN,HN,zN,WN;const Vo=Symbol("instances"),eC=Symbol("activateListener"),tC=Symbol("deactivateListener"),DA=Symbol("notifyInstances"),nC=Symbol("notify"),iC=Symbol("callback");class ws{static[DA](){for(const e of ws[Vo])e[nC]()}static[(GN=Vo,eC)](){window.addEventListener("scroll",this[DA],{passive:!0})}static[tC](){window.removeEventListener("scroll",this[DA])}constructor(e){this[iC]=e}observe(){ws[Vo].size===0&&ws[eC](),ws[Vo].add(this)}disconnect(){ws[Vo].delete(this),ws[Vo].size===0&&ws[tC]()}[nC](){this[iC]()}}ws[GN]=new Set;const sC=Symbol("computeStyleCallback"),$N=Symbol("astWalker"),bu=Symbol("dependencies"),qN=Symbol("onScroll");class wW{constructor(e){this[HN]={},this[zN]=new AW(["function"]),this[WN]=()=>{this[sC]({relatedState:"window-scroll"})},this[sC]=e}observeEffectsFor(e){const t={},i=this[bu];this[$N].walk(e,s=>{const{name:r}=s,o=s.arguments[0].terms[0];if(!(r.value!=="env"||o==null||o.type!=="ident"))switch(o.value){case"window-scroll-y":if(t["window-scroll"]==null){const l="window-scroll"in i?i["window-scroll"]:new ws(this[qN]);l.observe(),delete i["window-scroll"],t["window-scroll"]=l}break}});for(const s in i)i[s].disconnect();this[bu]=t}dispose(){for(const e in this[bu])this[bu][e].disconnect()}}HN=bu,zN=$N,WN=qN;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=n=>{const e=n.observeEffects||!1,t=n.intrinsics instanceof Function?n.intrinsics:()=>n.intrinsics;return(i,s)=>{const r=i.updated,a=i.connectedCallback,o=i.disconnectedCallback,l=Symbol(`${s}StyleEffector`),c=Symbol(`${s}StyleEvaluator`),u=Symbol(`${s}UpdateEvaluator`),d=Symbol(`${s}EvaluateAndSync`);Object.defineProperties(i,{[l]:{value:null,writable:!0},[c]:{value:null,writable:!0},[u]:{value:function(){const f=dr(this[s]);this[c]=new VN(f,t(this)),this[l]==null&&e&&(this[l]=new wW(()=>this[d]())),this[l]!=null&&this[l].observeEffectsFor(f)}},[d]:{value:function(){if(this[c]==null)return;const f=this[c].evaluate();this[n.updateHandler](f)}},updated:{value:function(f){f.has(s)&&(this[u](),this[d]()),r.call(this,f)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(s,this[s])}},disconnectedCallback:{value:function(){o.call(this),this[l]!=null&&(this[l].dispose(),this[l]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=n=>n<.5?2*n*n:-1+(4-2*n)*n,EW=(n,e,t=YN)=>i=>n+(e-n)*t(i),_W=(n,e)=>{const t=s=>r=>s+=r,i=e.map(t(0));return s=>{s=Cs(s,0,1),s*=i[i.length-1];const r=i.findIndex(l=>l>=s),a=r<1?0:i[r-1],o=i[r];return n[r]((s-a)/(o-a))}},Cl=n=>{const e=[],t=[];let i=n.initialValue;for(let s=0;s<n.keyframes.length;++s){const r=n.keyframes[s],{value:a,frames:o}=r,l=r.ease||YN,c=EW(i,a,l);e.push(c),t.push(o),i=a}return _W(e,t)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const SW=5e3,CW=Cl({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),MW=Cl({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),IW=30,TW=12,XN="0deg 75deg 105%",RW="auto auto auto",BW="auto",NW=2.2,DW=["front","right","back","left"],LW=["upper-","","lower-"],PW=3e3,FW=". Use mouse, touch or arrow keys to move.",Jh={AUTO:"auto",NONE:"none"},LA={BASIC:"basic",WIGGLE:"wiggle"},kW={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},rC=()=>({basis:[Nm(On(IW,"deg"))],keywords:{auto:[null]}}),UW=()=>({basis:[Nm(On(TW,"deg"))],keywords:{auto:[null]}}),KN=(()=>{const n=dr(XN)[0].terms,e=Ms(n[0]),t=Ms(n[1]);return i=>{const s=i[re].idealCameraDistance();return{basis:[e,t,On(s,"m")],keywords:{auto:[null,null,On(105,"%")]}}}})(),OW=n=>{const e=NW*n[re].boundingSphere.radius;return{basis:[On(-1/0,"rad"),On(0,"rad"),On(e,"m")],keywords:{auto:[null,null,null]}}},QW=n=>{const e=KN(n),i=new VN([],e).evaluate()[2];return{basis:[On(1/0,"rad"),On(Math.PI,"rad"),On(i,"m")],keywords:{auto:[null,null,null]}}},jW=n=>{const e=n[re].boundingBox.getCenter(new P);return{basis:[On(e.x,"m"),On(e.y,"m"),On(e.z,"m")],keywords:{auto:[null,null,null]}}},JN=Math.PI/2,VW=Math.PI/3,GW=JN/2,HW=2*Math.PI,gt=Symbol("controls"),Yf=Symbol("panElement"),PA=Symbol("promptElement"),Zh=Symbol("promptAnimatedContainer"),FA=Symbol("fingerAnimatedContainers"),ef=Symbol("deferInteractionPrompt"),aC=Symbol("updateAria"),Ks=Symbol("a11y"),oC=Symbol("updateA11y"),lC=Symbol("updateCameraForRadius"),Go=Symbol("cancelPrompts"),kA=Symbol("onChange"),Xc=Symbol("onPointerChange"),Ba=Symbol("waitingToPromptUser"),tf=Symbol("userHasInteracted"),Ho=Symbol("promptElementVisibleTime"),Kc=Symbol("lastPromptOffset"),nf=Symbol("cancellationSource"),UA=Symbol("lastSpherical"),Jc=Symbol("jumpCamera"),OA=Symbol("initialized"),Zc=Symbol("maintainThetaPhi"),cC=Symbol("syncCameraOrbit"),uC=Symbol("syncFieldOfView"),dC=Symbol("syncCameraTarget"),hC=Symbol("syncMinCameraOrbit"),fC=Symbol("syncMaxCameraOrbit"),pC=Symbol("syncMinFieldOfView"),mC=Symbol("syncMaxFieldOfView"),zW=n=>{var e,t,i,s,r,a,o,l,c,u,d,f,p,g,x,A,m,y;class v extends n{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=XN,this.cameraTarget=RW,this.fieldOfView=BW,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=PW,this.interactionPrompt=Jh.AUTO,this.interactionPromptStyle=LA.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=kW.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=UN,this.a11y=null,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[t]=this.shadowRoot.querySelector("#prompt"),this[i]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[s]=this.shadowRoot.querySelector(".pan-target"),this[r]=0,this[a]=1/0,this[o]=!1,this[l]=!1,this[c]=Vt.AUTOMATIC,this[u]=new YW(this[re].camera,this[ls],this[re]),this[d]=new Hf,this[f]=!1,this[p]=!1,this[g]=!1,this[x]={},this[A]=()=>{const w=this[gt].changeSource;this[nf]=w,w===Vt.USER_INTERACTION&&(this[tf]=!0,this[ef]())},this[m]=()=>{this[aC](),this[vn]();const w=this[gt].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:w}}))},this[y]=w=>{this[Jf].classList.toggle("pointer-tumbling",w.type==="pointer-change-start")}}get inputSensitivity(){return this[gt].inputSensitivity}set inputSensitivity(w){this[gt].inputSensitivity=w}getCameraOrbit(){const{theta:w,phi:S,radius:C}=this[UA];return{theta:w,phi:S,radius:C,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return zr(this[xt].isPresenting?this[xt].arRenderer.target:this[re].getDynamicTarget())}getFieldOfView(){return this[gt].getFieldOfView()}getMinimumFieldOfView(){return this[gt].options.minimumFieldOfView}getMaximumFieldOfView(){return this[gt].options.maximumFieldOfView}getIdealAspect(){return this[re].idealAspect}jumpCameraToGoal(){this[Jc]=!0,this.requestUpdate(Jc,!1)}resetInteractionPrompt(){this[Kc]=0,this[Ho]=1/0,this[tf]=!1,this[Ba]=this.interactionPrompt===Jh.AUTO&&this.cameraControls}zoom(w){const S=new WheelEvent("wheel",{deltaY:-30*w});this[ls].dispatchEvent(S)}connectedCallback(){super.connectedCallback(),this[gt].addEventListener("user-interaction",this[Go]),this[gt].addEventListener("pointer-change-start",this[Xc]),this[gt].addEventListener("pointer-change-end",this[Xc])}disconnectedCallback(){super.disconnectedCallback(),this[gt].removeEventListener("user-interaction",this[Go]),this[gt].removeEventListener("pointer-change-start",this[Xc]),this[gt].removeEventListener("pointer-change-end",this[Xc])}updated(w){super.updated(w);const S=this[gt],C=this[re];if(w.has("cameraControls")&&(this.cameraControls?(S.enableInteraction(),this.interactionPrompt===Jh.AUTO&&(this[Ba]=!0)):(S.disableInteraction(),this[ef]()),this[ls].setAttribute("aria-label",this[Il])),w.has("disableZoom")&&(S.disableZoom=this.disableZoom),w.has("disablePan")&&(S.enablePan=!this.disablePan),w.has("disableTap")&&(S.enableTap=!this.disableTap),(w.has("interactionPrompt")||w.has("cameraControls")||w.has("src"))&&(this.interactionPrompt===Jh.AUTO&&this.cameraControls&&!this[tf]?this[Ba]=!0:this[ef]()),w.has("interactionPromptStyle")&&(this[Zh].style.opacity=this.interactionPromptStyle==LA.BASIC?"1":"0"),w.has("touchAction")){const M=this.touchAction;S.applyOptions({touchAction:M}),S.updateTouchActionStyle()}w.has("orbitSensitivity")&&(S.orbitSensitivity=this.orbitSensitivity),w.has("zoomSensitivity")&&(S.zoomSensitivity=this.zoomSensitivity),w.has("panSensitivity")&&(S.panSensitivity=this.panSensitivity),w.has("interpolationDecay")&&(S.setDamperDecayTime(this.interpolationDecay),C.setTargetDamperDecayTime(this.interpolationDecay)),w.has("a11y")&&this[oC](),this[Jc]===!0&&Promise.resolve().then(()=>{S.jumpToGoal(),C.jumpToGoal(),this[kA](),this[Jc]=!1})}async updateFraming(){const w=this[re],S=w.adjustedFoV(w.framedFoVDeg);await w.updateFraming();const C=w.adjustedFoV(w.framedFoVDeg),M=this[gt].getFieldOfView()/S;this[gt].setFieldOfView(C*M),this[Zc]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(w,S,C){const M=this[ls],_=this[FA];if(_[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const E=new Array;E.push({x:Cl(S.x),y:Cl(S.y)});const R=[{x:E[0].x(0),y:E[0].y(0)}];C!=null&&(E.push({x:Cl(C.x),y:Cl(C.y)}),R.push({x:E[1].x(0),y:E[1].y(0)}));let L=performance.now();const{width:F,height:U}=this[re],z=this.getBoundingClientRect(),V=W=>{for(const[K,ee]of R.entries()){const{style:Q}=_[K];Q.transform=`translateX(${F*ee.x}px) translateY(${U*ee.y}px)`,W==="pointerdown"?Q.opacity="1":W==="pointerup"&&(Q.opacity="0");const ae={pointerId:K-5678,pointerType:"touch",target:M,clientX:F*ee.x+z.x,clientY:U*ee.y+z.y,altKey:!0};M.dispatchEvent(new PointerEvent(W,ae))}},G=()=>{const W=this[nf];if(W!==Vt.AUTOMATIC||!M.isConnected){for(const ee of this[FA])ee.style.opacity="0";V("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:W}})),document.removeEventListener("visibilitychange",D);return}const K=Math.min(1,(performance.now()-L)/w);for(const[ee,Q]of R.entries())Q.x=E[ee].x(K),Q.y=E[ee].y(K);V("pointermove"),K<1?requestAnimationFrame(G):(V("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Vt.AUTOMATIC}})),document.removeEventListener("visibilitychange",D))},D=()=>{let W=0;document.visibilityState==="hidden"?W=performance.now()-L:L=performance.now()-W};document.addEventListener("visibilitychange",D),V("pointerdown"),this[nf]=Vt.AUTOMATIC,requestAnimationFrame(G)}[(e=PA,t=Zh,i=FA,s=Yf,r=Kc,a=Ho,o=tf,l=Ba,c=nf,u=gt,d=UA,f=Jc,p=OA,g=Zc,x=Ks,uC)](w){const S=this[gt],C=this[re];C.framedFoVDeg=w[0]*180/Math.PI,S.changeSource=Vt.NONE,S.setFieldOfView(C.adjustedFoV(C.framedFoVDeg)),this[Go]()}[cC](w){const S=this[gt];if(this[Zc]){const{theta:C,phi:M}=this.getCameraOrbit();w[0]=C,w[1]=M,this[Zc]=!1}S.changeSource=Vt.NONE,S.setOrbit(w[0],w[1],w[2]),this[Go]()}[hC](w){this[gt].applyOptions({minimumAzimuthalAngle:w[0],minimumPolarAngle:w[1],minimumRadius:w[2]}),this.jumpCameraToGoal()}[fC](w){this[gt].applyOptions({maximumAzimuthalAngle:w[0],maximumPolarAngle:w[1],maximumRadius:w[2]}),this[lC](w[2]),this.jumpCameraToGoal()}[pC](w){this[gt].applyOptions({minimumFieldOfView:w[0]*180/Math.PI}),this.jumpCameraToGoal()}[mC](w){const S=this[re].adjustedFoV(w[0]*180/Math.PI);this[gt].applyOptions({maximumFieldOfView:S}),this.jumpCameraToGoal()}[dC](w){const[S,C,M]=w;this[xt].arRenderer.isPresenting||this[re].setTarget(S,C,M),this[gt].changeSource=Vt.NONE,this[xt].arRenderer.updateTarget(),this[Go]()}[Ls](w,S){if(super[Ls](w,S),this[xt].isPresenting||!this[yo]())return;const C=this[gt],M=this[re],_=performance.now();if(this[Ba]&&this.loaded&&_>this[_u]+this.interactionPromptThreshold&&(this[Ba]=!1,this[Ho]=_,this[PA].classList.add("visible")),isFinite(this[Ho])&&this.interactionPromptStyle===LA.WIGGLE){const L=(_-this[Ho])/SW%1,F=CW(L),U=MW(L);if(this[Zh].style.opacity=`${U}`,F!==this[Kc]){const z=F*M.width*.05,V=(F-this[Kc])*Math.PI/16;this[Zh].style.transform=`translateX(${z}px)`,C.changeSource=Vt.AUTOMATIC,C.adjustOrbit(V,0,0),this[Kc]=F}}const E=C.update(w,S),R=M.updateTarget(S);(E||R)&&this[kA]()}[ef](){this[Ba]=!1,this[PA].classList.remove("visible"),this[Ho]=1/0}[lC](w){const S=Math.max(this[re].farRadius(),w),C=0,M=Math.abs(2*S);this[gt].updateNearFar(C,M)}[aC](){const{theta:w,phi:S}=this[gt].getCameraSpherical(this[UA]),C=(4+Math.floor((w%HW+GW)/JN))%4,M=Math.floor(S/VW),_=DW[C],R=`${LW[M]}${_}`,L=R;L in this[Ks]?this[Jp](this[Ks][L]):this[Jp](`View from stage ${R}`)}get[Il](){let w=FW;return"interaction-prompt"in this[Ks]&&(w=`. ${this[Ks]["interaction-prompt"]}`),super[Il].replace(/\.$/,"")+(this.cameraControls?w:"")}async[Zp](w){const S=this[gt],C=this[re],M=C.adjustedFoV(C.framedFoVDeg);super[Zp](w);const _=C.adjustedFoV(C.framedFoVDeg)/M,E=S.getFieldOfView()*(isFinite(_)?_:1);S.updateAspect(this[re].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[gt].setFieldOfView(E),this.jumpCameraToGoal()}[Ps](){super[Ps](),this[OA]?this[Zc]=!0:this[OA]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(A=Go,m=kA,y=Xc,oC)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[Ks]=JSON.parse(this.a11y)}catch(w){console.warn("Error parsing a11y JSON:",w)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[Ks]={};else typeof this.a11y=="object"&&this.a11y!=null?this[Ks]=Object.assign({},this.a11y):this[Ks]={};this[ls].setAttribute("aria-label",this[Il])}}return an([De({type:Boolean,attribute:"camera-controls"})],v.prototype,"cameraControls",void 0),an([kr({intrinsics:KN,observeEffects:!0,updateHandler:cC}),De({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],v.prototype,"cameraOrbit",void 0),an([kr({intrinsics:jW,observeEffects:!0,updateHandler:dC}),De({type:String,attribute:"camera-target",hasChanged:()=>!0})],v.prototype,"cameraTarget",void 0),an([kr({intrinsics:rC,observeEffects:!0,updateHandler:uC}),De({type:String,attribute:"field-of-view",hasChanged:()=>!0})],v.prototype,"fieldOfView",void 0),an([kr({intrinsics:OW,updateHandler:hC}),De({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],v.prototype,"minCameraOrbit",void 0),an([kr({intrinsics:QW,updateHandler:fC}),De({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],v.prototype,"maxCameraOrbit",void 0),an([kr({intrinsics:UW,updateHandler:pC}),De({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],v.prototype,"minFieldOfView",void 0),an([kr({intrinsics:rC,updateHandler:mC}),De({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],v.prototype,"maxFieldOfView",void 0),an([De({type:Number,attribute:"interaction-prompt-threshold"})],v.prototype,"interactionPromptThreshold",void 0),an([De({type:String,attribute:"interaction-prompt"})],v.prototype,"interactionPrompt",void 0),an([De({type:String,attribute:"interaction-prompt-style"})],v.prototype,"interactionPromptStyle",void 0),an([De({type:Number,attribute:"orbit-sensitivity"})],v.prototype,"orbitSensitivity",void 0),an([De({type:Number,attribute:"zoom-sensitivity"})],v.prototype,"zoomSensitivity",void 0),an([De({type:Number,attribute:"pan-sensitivity"})],v.prototype,"panSensitivity",void 0),an([De({type:String,attribute:"touch-action"})],v.prototype,"touchAction",void 0),an([De({type:Boolean,attribute:"disable-zoom"})],v.prototype,"disableZoom",void 0),an([De({type:Boolean,attribute:"disable-pan"})],v.prototype,"disablePan",void 0),an([De({type:Boolean,attribute:"disable-tap"})],v.prototype,"disableTap",void 0),an([De({type:Number,attribute:"interpolation-decay"})],v.prototype,"interpolationDecay",void 0),an([De()],v.prototype,"a11y",void 0),v};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=.018,gC=2,$W=300,qW=new Ge,AC=new P,xC=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),sf=Math.PI/8,rf=.04,af=10,Vt={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class YW extends xs{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=Vt.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Ve,this.panPerPixel=0,this.spherical=new Hf,this.goalSpherical=new Hf,this.thetaDamper=new Xn,this.phiDamper=new Xn,this.radiusDamper=new Xn,this.logFov=Math.log(xC.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Xn,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=s=>{if(this.enablePan)s.preventDefault();else for(const r of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:r.id})))},this.touchModeZoom=(s,r)=>{if(!this._disableZoom){const a=this.twoTouchDistance(this.pointers[0],this.pointers[1]),o=rf*this.zoomSensitivity*(this.lastSeparation-a)*50/this.scene.height;this.lastSeparation=a,this.userAdjustOrbit(0,0,o)}this.panPerPixel>0&&this.movePan(s,r)},this.disableScroll=s=>{s.preventDefault()},this.touchModeRotate=(s,r)=>{const{touchAction:a}=this._options;if(!this.touchDecided&&a!=="none"){this.touchDecided=!0;const o=Math.abs(s),l=Math.abs(r);if(this.changeSource===Vt.USER_INTERACTION&&(a==="pan-y"&&l>o||a==="pan-x"&&o>l)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(s,r)},this.onPointerDown=s=>{if(this.pointers.length>2)return;const{element:r}=this;this.pointers.length===0&&(r.addEventListener("pointermove",this.onPointerMove),r.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=s.clientX,this.startPointerPosition.clientY=s.clientY,this.startTime=performance.now());try{r.setPointerCapture(s.pointerId)}catch{}this.pointers.push({clientX:s.clientX,clientY:s.clientY,id:s.pointerId}),this.isUserPointing=!1,s.pointerType==="touch"?(this.changeSource=s.altKey?Vt.AUTOMATIC:Vt.USER_INTERACTION,this.onTouchChange(s)):(this.changeSource=Vt.USER_INTERACTION,this.onMouseDown(s)),this.changeSource===Vt.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=s=>{const r=this.pointers.find(c=>c.id===s.pointerId);if(r==null)return;if(s.pointerType==="mouse"&&s.buttons===0){this.onPointerUp(s);return}const a=this.pointers.length,o=(s.clientX-r.clientX)/a,l=(s.clientY-r.clientY)/a;o===0&&l===0||(r.clientX=s.clientX,r.clientY=s.clientY,s.pointerType==="touch"?(this.changeSource=s.altKey?Vt.AUTOMATIC:Vt.USER_INTERACTION,this.touchMode!==null&&this.touchMode(o,l)):(this.changeSource=Vt.USER_INTERACTION,this.panPerPixel>0?this.movePan(o,l):this.handleSinglePointerMove(o,l)))},this.onPointerUp=s=>{const{element:r}=this,a=this.pointers.findIndex(o=>o.id===s.pointerId);a!==-1&&this.pointers.splice(a,1),this.panPerPixel>0&&!s.altKey&&this.resetRadius(),this.pointers.length===0?(r.removeEventListener("pointermove",this.onPointerMove),r.removeEventListener("pointerup",this.onPointerUp),r.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(s)):this.touchMode!==null&&this.onTouchChange(s),this.scene.element[Yf].style.opacity=0,r.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=s=>{this.changeSource=Vt.USER_INTERACTION;const r=s.deltaY*(s.deltaMode==1?18:1)*rf*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,r),s.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=s=>{const{changeSource:r}=this;this.changeSource=Vt.USER_INTERACTION,(s.shiftKey&&this.enablePan?this.panKeyCodeHandler(s):this.orbitZoomKeyCodeHandler(s))?(s.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=r},this._options=Object.assign({},xC),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new Hf){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=t===0?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,i=this.goalSpherical.radius){const{minimumAzimuthalAngle:s,maximumAzimuthalAngle:r,minimumPolarAngle:a,maximumPolarAngle:o,minimumRadius:l,maximumRadius:c}=this._options,{theta:u,phi:d,radius:f}=this.goalSpherical,p=Cs(e,s,r);!isFinite(s)&&!isFinite(r)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-p)+p);const g=Cs(t,a,o),x=Cs(i,l,c);return p===u&&g===d&&x===f||!isFinite(p)||!isFinite(g)||!isFinite(x)?!1:(this.goalSpherical.theta=p,this.goalSpherical.phi=g,this.goalSpherical.radius=x,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=Cs(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){const{theta:s,phi:r,radius:a}=this.goalSpherical,{minimumRadius:o,maximumRadius:l,minimumFieldOfView:c,maximumFieldOfView:u}=this._options,d=this.spherical.theta-s,f=Math.PI-.001,p=s-Cs(e,-f-d,f-d),g=r-t,x=i===0?0:((i>0?l:o)-a)/(Math.log(i>0?u:c)-this.goalLogFov),A=a+i*(isFinite(x)?x:(l-o)*2);if(this.setOrbit(p,g,A),i!==0){const m=this.goalLogFov+i;this.setFieldOfView(Math.exp(m))}}jumpToGoal(){this.update(0,kN)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:i,maximumRadius:s}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(r)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,s),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&t!=="none"?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new qi(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return(t-Math.floor(t))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:i,clientY:s}=e,{clientX:r,clientY:a}=t,o=r-i,l=a-s;return Math.sqrt(o*o+l*l)}handleSinglePointerMove(e,t){const i=this.pixelLengthToSphericalAngle(e),s=this.pixelLengthToSphericalAngle(t);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,s,0)}initializePan(){const{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=WW*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){const{scene:i}=this,s=AC.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;s.multiplyScalar(r);const a=i.getTarget();a.add(s.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(a,a),i.setTarget(a.x,a.y,a.z)}recenter(e){if(performance.now()>this.startTime+$W||Math.abs(e.clientX-this.startPointerPosition.clientX)>gC||Math.abs(e.clientY-this.startPointerPosition.clientY)>gC)return;const{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(i==null){const{cameraTarget:s}=t.element;t.element.cameraTarget="",t.element.cameraTarget=s,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(qW.set(0,0));if(t==null)return;e.target.worldToLocal(t.position);const i=e.getTarget(),{theta:s,phi:r}=this.spherical,a=s-e.yaw,o=AC.set(Math.sin(r)*Math.sin(a),Math.cos(r),Math.sin(r)*Math.cos(a)),l=o.dot(t.position.sub(i));i.add(o.multiplyScalar(l)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-l)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[Yf].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[Yf].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,rf*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*rf*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-sf,0);break;case"ArrowDown":this.userAdjustOrbit(0,sf,0);break;case"ArrowLeft":this.userAdjustOrbit(-sf,0,0);break;case"ArrowRight":this.userAdjustOrbit(sf,0,0);break;default:t=!1;break}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-1*af);break;case"ArrowDown":this.movePan(0,af);break;case"ArrowLeft":this.movePan(-1*af,0);break;case"ArrowRight":this.movePan(af,0);break;default:t=!1;break}return t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW=30,yC=.8,vC=1.5,KW=20,JW=.2,ZW=.25,e7=10,zo=150,bC=5,t7=.1,Hr={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},Ry={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},eu=new P,Wo=new ti,n7=new ke,i7=new P,s7=new Cn(45,1,.1,100),wC=new hi().setFromPoints([new P(0,0,0),new P(0,0,-1)]),r7=new _r;class a7 extends xs{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new P,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new P,this.relativeOrientation=new ti,this.scaleLine=new _d(wC),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new P,this.goalYaw=0,this.goalScale=1,this.xDamper=new Xn,this.yDamper=new Xn,this.zDamper=new Xn,this.yawDamper=new Xn,this.pitchDamper=new Xn,this.rollDamper=new Xn,this.scaleDamper=new Xn,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=t=>{const i=this.presentedScene,s=t.target;if(this.placementBox.controllerIntersection(i,s)!=null)this.selectedController!=null&&(this.selectedController.userData.line.visible=!1,i.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/i.pivot.scale.x,this.scaleLine.visible=!0)),s.attach(i.pivot),this.selectedController=s,i.setShadowIntensity(.01);else{const r=s===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(s.quaternion).invert().multiply(i.pivot.getWorldQuaternion(Wo)),r.userData.turning=!1,s.userData.turning=!0,s.userData.line.visible=!1}},this.onControllerSelectEnd=t=>{const i=t.target;if(i.userData.turning=!1,i.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,this.selectedController!=null&&this.selectedController!=i)return;const s=this.presentedScene;s.attach(s.pivot),this.selectedController=null,this.goalYaw=Math.atan2(s.pivot.matrix.elements[8],s.pivot.matrix.elements[10]),this.goalPosition.x=s.pivot.position.x,this.goalPosition.z=s.pivot.position.z},this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new H1(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const i=this.transientHitTestSource;if(i==null)return;const s=this.frame.getHitTestResultsForTransientInput(i),r=this.presentedScene,a=this.placementBox;if(s.length===1){this.inputSource=t.inputSource;const{axes:o}=this.inputSource.gamepad,l=a.getHit(this.presentedScene,o[0],o[1]);a.show=!0,l!=null?(this.isTranslating=!0,this.lastDragPosition.copy(l)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=o[0]*vC)}else if(s.length===2){a.show=!0,this.isTwoFingering=!0;const{separation:o}=this.fingerPolar(s);this.firstRatio=o/r.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){d1();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:[],optionalFeatures:["hit-test","dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return d1(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise((c,u)=>{requestAnimationFrame(()=>c())});e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),t===!0&&(this.xrLight=new uW(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const c=this.presentedScene;c.add(this.xrLight),c.environment=this.xrLight.environment}));const s=await this.resolveARSession();s.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;const a=await s.requestReferenceSpace("viewer");this.xrMode=s.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const o=KW*Math.PI/180,l=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(o),z:-Math.cos(o)});s.requestHitTestSource({space:a,offsetRay:l}).then(c=>{this.initialHitSource=c}),this.xrMode!=="screen-space"&&(this.setupControllers(),this.xDamper.setDecayTime(zo),this.yDamper.setDecayTime(zo),this.zDamper.setDecayTime(zo),this.yawDamper.setDecayTime(zo),this.pitchDamper.setDecayTime(zo),this.rollDamper.setDecayTime(zo)),this.currentSession=s,this.placementBox=new H1(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:Hr.SESSION_STARTED})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const t=new _d(wC);t.name="line",t.scale.z=bC,this.controller1.userData.turning=!1,this.controller1.userData.line=t,this.controller1.add(t),this.controller2.userData.turning=!1;const i=t.clone();this.controller2.userData.line=i,this.controller2.add(i),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:s}=e,r=t7/Math.max(s.x,s.y,s.z),a=new bt(r7);a.name="box",a.scale.copy(s).multiplyScalar(r),a.visible=!1,this.controller1.userData.box=a,e.add(a);const o=a.clone();this.controller2.userData.box=o,e.add(o)}}hover(e){if(this.xrMode==="screen-space"||this.selectedController==e)return!1;const t=this.presentedScene,i=this.placementBox.controllerIntersection(t,e);return e.userData.box.visible=(i==null||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=i==null?bC:i.distance,i!=null}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,t!=null){const{element:a}=t;this.xrLight!=null&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.add(t.pivot),t.pivot.quaternion.set(0,0,0,1),t.pivot.position.set(0,0,0),t.pivot.scale.set(1,1,1),t.setShadowOffset(0);const o=this.turntableRotation;o!=null&&(t.yaw=o);const l=this.oldShadowIntensity;l!=null&&t.setShadowIntensity(l),t.setEnvironmentAndSkybox(a[xu],a[yu]);const c=this.oldTarget;t.setTarget(c.x,c.y,c.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0);const{width:u,height:d}=a.getBoundingClientRect();t.setSize(u,d),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Vt.NONE}}))})}this.renderer.height=0;const i=this.exitWebXRButtonContainer;i!=null&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const s=this.transientHitTestSource;s!=null&&(s.cancel(),this.transientHitTestSource=null);const r=this.initialHitSource;r!=null&&(r.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.xrMode!=="screen-space"&&(this.controller1!=null&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),this.controller2!=null&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:Hr.NOT_PRESENTING})}updateView(e){const t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(s7),t.xrCamera=i.getCamera();const{elements:s}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(s[1],s[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const a=e.recommendedViewportScale;e.requestViewportScale(Math.max(a,ZW))}const r=i.getBaseLayer();if(r!=null){const a=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(a.x,a.y,a.width,a.height)}}placeInitially(){const e=this.presentedScene,{pivot:t,element:i}=e,{position:s}=t,r=e.getCamera(),{width:a,height:o}=this.overlay.getBoundingClientRect();e.setSize(a,o),r.projectionMatrixInverse.copy(r.projectionMatrix).invert();const{theta:l}=i.getCameraOrbit(),c=r.getWorldDirection(eu);e.yaw=Math.atan2(-c.x,-c.z)-l,this.goalYaw=e.yaw;const u=Math.max(1,2*e.boundingSphere.radius);s.copy(r.position).add(c.multiplyScalar(u)),this.updateTarget();const d=e.getTarget();if(s.add(d).sub(this.oldTarget),this.goalPosition.copy(s),e.setHotspotsVisibility(!0),this.xrMode==="screen-space"){const{session:f}=this.frame;f.addEventListener("selectstart",this.onSelectStart),f.addEventListener("selectend",this.onSelectEnd),f.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(p=>{this.transientHitTestSource=p})}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return t!=null&&(eu.copy(t).sub(this.presentedScene.getCamera().position),eu.length()>e7)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(i==null)return null;const s=n7.fromArray(i.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(s.elements[4],s.elements[6])),s.elements[5]>.75!==this.placeOnWall?i7.setFromMatrixPosition(s):null}moveToFloor(e){const t=this.initialHitSource;if(t==null)return;const i=e.getHitTestResults(t);if(i.length==0)return;const s=i[0],r=this.getHitPoint(s);r!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:Hr.OBJECT_PLACED}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,s=i[0]-t[0],r=i[1]-t[1],a=Math.atan2(r,s);let o=this.lastAngle-a;return o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),this.lastAngle=a,{separation:Math.sqrt(s*s+r*r),deltaYaw:o}}setScale(e){const t=e/this.firstRatio;this.goalScale=Math.abs(t-1)<JW?1:t}processInput(e){const t=this.transientHitTestSource;if(t==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const i=e.getHitTestResultsForTransientInput(t),s=this.presentedScene,r=s.pivot.scale.x;if(this.isTwoFingering){if(i.length<2)this.isTwoFingering=!1;else{const{separation:a,deltaYaw:o}=this.fingerPolar(i);this.placeOnWall===!1&&(this.goalYaw+=o),s.canScale&&this.setScale(a)}return}else if(i.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:a}=this.fingerPolar(i);this.firstRatio=a/r;return}if(this.isRotating){const a=this.inputSource.gamepad.axes[0]*vC;this.goalYaw+=a-this.lastAngle,this.lastAngle=a}else this.isTranslating&&i.forEach(a=>{if(a.inputSource!==this.inputSource)return;let o=null;if(a.results.length>0&&(o=this.getHitPoint(a.results[0])),o==null&&(o=this.getTouchLocation()),o!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const l=o.y-this.lastDragPosition.y;if(l<0){this.placementBox.offsetHeight=l/r,this.presentedScene.setShadowOffset(l);const c=eu.copy(s.getCamera().position),u=-l/(c.y-o.y);c.multiplyScalar(u),o.multiplyScalar(1-u).add(c)}}this.goalPosition.add(o),this.lastDragPosition.copy(o)}})}moveScene(e){const t=this.presentedScene,{pivot:i}=t,s=this.placementBox;if(s.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(i.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&i.quaternion.premultiply(Wo.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),i.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(i.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&i.quaternion.premultiply(Wo.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),i.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const f=this.controllerSeparation();this.setScale(f),this.scaleLine.scale.z=-f,this.scaleLine.lookAt(this.controller2.position)}const r=t.pivot.scale.x;if(this.goalScale!==r){const f=this.scaleDamper.update(r,this.goalScale,e,1);t.pivot.scale.set(f,f,f)}if(i.parent!==t)return;const{position:a}=i,o=t.boundingSphere.radius,l=this.goalPosition;let c=Vt.NONE;if(!l.equals(a)){c=Vt.USER_INTERACTION;let{x:f,y:p,z:g}=a;if(f=this.xDamper.update(f,l.x,e,o),p=this.yDamper.update(p,l.y,e,o),g=this.zDamper.update(g,l.z,e,o),a.set(f,p,g),this.xrMode==="screen-space"&&!this.isTranslating){const x=l.y-p;this.placementComplete&&this.placeOnWall===!1?(s.offsetHeight=x/t.pivot.scale.x,t.setShadowOffset(x)):x===0&&(this.placementComplete=!0,s.show=!1,t.setShadowIntensity(yC))}this.xrMode!=="screen-space"&&l.equals(a)&&t.setShadowIntensity(yC)}t.updateTarget(e),Wo.setFromAxisAngle(eu.set(0,1,0),this.goalYaw);const u=t.pivot.quaternion.angleTo(Wo),d=u-this.yawDamper.update(u,0,e,Math.PI);t.pivot.quaternion.rotateTowards(Wo,d),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:c}}))}onWebXRFrame(e,t){if(this.xrMode!=="screen-space"){const o=this.hover(this.controller1),l=this.hover(this.controller2);this.placementBox.show=(o||l)&&!this.isTwoFingering}this.frame=t,++this.frames;const i=this.threeRenderer.xr.getReferenceSpace(),s=t.getViewerPose(i);s==null&&this.tracking===!0&&this.frames>XW&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:Ry.NOT_TRACKING}));const r=this.presentedScene;if(s==null||r==null||!r.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:Ry.TRACKING}));let a=!0;for(const o of s.views){if(this.updateView(o),a){this.moveToFloor(t),this.processInput(t);const l=e-this.lastTick;this.moveScene(l),this.renderer.preRender(r,e,l),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),a=!1}}}function o7(n){const e=new Map,t=new Map,i=n.clone();return ZN(n,i,function(s,r){e.set(r,s),t.set(s,r)}),i.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,a=e.get(s),o=a.skeleton.bones;r.skeleton=a.skeleton.clone(),r.bindMatrix.copy(a.bindMatrix),r.skeleton.bones=o.map(function(l){return t.get(l)}),r.bind(r.skeleton,r.bindMatrix)}),i}function ZN(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)ZN(n.children[i],e.children[i],t)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=Symbol("prepared"),Yp=Symbol("prepare"),vs=Symbol("preparedGLTF"),Xp=Symbol("clone");class l7{static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[EC])return e;const t=this[Yp](e);return t[EC]=!0,t}static[Yp](e){const{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[vs].parser}get animations(){return this[vs].animations}get scene(){return this[vs].scene}get scenes(){return this[vs].scenes}get cameras(){return this[vs].cameras}get asset(){return this[vs].asset}get userData(){return this[vs].userData}constructor(e){this[vs]=e}clone(){const e=this.constructor,t=this[Xp]();return new e(t)}dispose(){this.scenes.forEach(e=>{e.traverse(t=>{const i=t;if(!i.material)return;(Array.isArray(i.material)?i.material:[i.material]).forEach(r=>{for(const a in r){const o=r[a];if(o instanceof Ft){const l=o.source.data;l.close!=null&&l.close(),o.dispose()}}r.dispose()}),i.geometry.dispose()})})}[Xp](){const e=this[vs],t=o7(this.scene);c7(t,this.scene);const i=[t],s=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:s})}}const c7=(n,e)=>{eD(n,e,(t,i)=>{i.userData.variantMaterials!==void 0&&(t.userData.variantMaterials=new Map(i.userData.variantMaterials)),i.userData.variantData!==void 0&&(t.userData.variantData=i.userData.variantData),i.userData.originalMaterial!==void 0&&(t.userData.originalMaterial=i.userData.originalMaterial)})},eD=(n,e,t)=>{t(n,e);for(let i=0;i<n.children.length;i++)eD(n.children[i],e.children[i],t)},_C=Symbol("threeGLTF"),SC=Symbol("gltf"),CC=Symbol("gltfElementMap"),MC=Symbol("threeObjectMap"),IC=Symbol("parallelTraverseThreeScene"),TC=Symbol("correlateOriginalThreeGLTF"),RC=Symbol("correlateCloneThreeGLTF");class Td{static from(e,t){return t!=null?this[RC](e,t):this[TC](e)}static[TC](e){const t=e.parser.json,i=e.parser.associations,s=new Map,r={name:"Default"},a={type:"materials",index:-1};for(const o of i.keys())o instanceof fs&&i.get(o)==null&&(a.index<0&&(t.materials==null&&(t.materials=[]),a.index=t.materials.length,t.materials.push(r)),o.name=r.name,i.set(o,{materials:a.index}));for(const[o,l]of i){l&&(o.userData=o.userData||{},o.userData.associations=l);for(const c in l)if(c!=null&&c!=="primitives"){const u=c,f=(t[u]||[])[l[u]];if(f==null)continue;let p=s.get(f);p==null&&(p=new Set,s.set(f,p)),p.add(o)}}return new Td(e,t,i,s)}static[RC](e,t){const i=t.threeGLTF,s=t.gltf,r=JSON.parse(JSON.stringify(s)),a=new Map,o=new Map;for(let l=0;l<i.scenes.length;l++)this[IC](i.scenes[l],e.scenes[l],(c,u)=>{const d=t.threeObjectMap.get(c);if(d!=null){for(const f in d)if(f!=null&&f!=="primitives"){const p=f,g=d[p],x=r[p][g],A=a.get(u)||{};A[p]=g,a.set(u,A);const m=o.get(x)||new Set;m.add(u),o.set(x,m)}}});return new Td(e,r,a,o)}static[IC](e,t,i){const s=(r,a)=>{if(i(r,a),r.isObject3D){const o=r,l=a;if(o.material)if(Array.isArray(o.material))for(let c=0;c<o.material.length;++c)i(o.material[c],l.material[c]);else i(o.material,l.material);for(let c=0;c<r.children.length;++c)s(r.children[c],a.children[c])}};s(e,t)}get threeGLTF(){return this[_C]}get gltf(){return this[SC]}get gltfElementMap(){return this[CC]}get threeObjectMap(){return this[MC]}constructor(e,t,i,s){this[_C]=e,this[SC]=t,this[CC]=s,this[MC]=i}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=Symbol("correlatedSceneGraph");class u7 extends l7{static[Yp](e){const t=super[Yp](e);t[tu]==null&&(t[tu]=Td.from(t));const{scene:i}=t,s=new Yi(void 0,1/0);return i.traverse(r=>{r.renderOrder=1e3,r.frustumCulled=!1,r.name||(r.name=r.uuid);const a=r;if(a.material){const{geometry:o}=a;a.castShadow=!0,a.isSkinnedMesh&&(o.boundingSphere=s,o.boundingBox=null);const l=a.material;if(l.isMeshBasicMaterial===!0&&(l.toneMapped=!1),l.shadowSide=gs,l.aoMap){const{gltf:c,threeObjectMap:u}=t[tu],d=u.get(l);if(c.materials!=null&&d!=null&&d.materials!=null){const f=c.materials[d.materials];f.occlusionTexture&&f.occlusionTexture.texCoord===0&&o.attributes.uv!=null&&o.setAttribute("uv2",o.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[vs][tu]}[Xp](){const e=super[Xp](),t=new Map;return e.scene.traverse(i=>{const s=i;if(s.material){const a=s.material;if(a!=null){if(t.has(a.uuid)){s.material=t.get(a.uuid);return}s.material=a.clone(),t.set(a.uuid,s.material)}}const r=i;r.target!==void 0&&r.add(r.target)}),e[tu]=Td.from(e,this.correlatedSceneGraph),e}}const tD=(n,e,t)=>{let i;switch(n){case tn:i=new Uint8ClampedArray(e*t*4);break;case cn:i=new Uint16Array(e*t*4);break;case fa:i=new Uint32Array(e*t*4);break;case Cb:i=new Int8Array(e*t*4);break;case Mb:i=new Int16Array(e*t*4);break;case Mm:i=new Int32Array(e*t*4);break;case Zt:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let of;const d7=(n,e,t,i)=>{if(of!==void 0)return of;const s=new $i(1,1,i);e.setRenderTarget(s);const r=new bt(new Sr,new Vi({color:16777215}));e.render(r,t),e.setRenderTarget(null);const a=tD(n,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,a),s.dispose(),r.geometry.dispose(),r.material.dispose(),of=a[0]!==0,of};class Yb{constructor(e){var t,i,s,r,a,o,l,c,u,d,f,p,g,x,A,m;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(v){throw this._renderer.setRenderTarget(null),v}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const y={format:Pt,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:nt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:nt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS:Jt,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.wrapT:Jt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Yb.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new go,this._camera=new _c,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!d7(this._type,this._renderer,this._camera,y)){let v;switch(this._type){case cn:v=this._renderer.extensions.has("EXT_color_buffer_float")?Zt:void 0;break}v!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Zt}`),this._type=v):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new bt(new Sr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new $i(this.width,this.height,y),this._renderTarget.texture.mapping=((A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.mapping:ec}static instantiateRenderer(){const e=new oN;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=tD(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new zd(this.toArray(),this.width,this.height,Pt,this._type,(e==null?void 0:e.mapping)||ec,(e==null?void 0:e.wrapS)||Jt,(e==null?void 0:e.wrapT)||Jt,(e==null?void 0:e.magFilter)||nt,(e==null?void 0:e.minFilter)||nt,(e==null?void 0:e.anisotropy)||1,It);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Si&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Ft&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Ft&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const h7=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,f7=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class p7 extends Si{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:s,gainMapMax:r,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:h7,fragmentShader:f7,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new P(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new P().fromArray(t)},offsetSdr:{value:new P().fromArray(i)},gainMapMin:{value:new P().fromArray(s)},gainMapMax:{value:new P().fromArray(r)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:Ns,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class nD extends Error{}class iD extends Error{}const nu=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(a=>a.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},m7=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),s=e.slice(t,i+10);try{const r=nu(s,"hdrgm:GainMapMin","0"),a=nu(s,"hdrgm:GainMapMax"),o=nu(s,"hdrgm:Gamma","1"),l=nu(s,"hdrgm:OffsetSDR","0.015625"),c=nu(s,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),d=u?u[1]:"0",f=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!f)throw new Error("Incomplete gainmap metadata");const p=f[1];return{gainMapMin:Array.isArray(r)?r.map(g=>parseFloat(g)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(d),hdrCapacityMax:parseFloat(p)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class g7{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const a=r.byteLength;let o=2,l=0,c;for(;o<a;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(r.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${r.getUint8(o).toString(16)}`));return}if(c=r.getUint8(o+1),s&&console.log(`Marker: ${c.toString(16)}`),c===226){s&&console.log("Found APP2 marker (0xffe2)");const u=o+4;if(r.getUint32(u)===1297106432){const d=u+4;let f;if(r.getUint16(d)===18761)f=!1;else if(r.getUint16(d)===19789)f=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(d+2,!f)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const p=r.getUint32(d+4,!f);if(p<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=d+p,x=r.getUint16(g,!f),A=g+2;let m=0;for(let w=A;w<A+12*x;w+=12)r.getUint16(w,!f)===45057&&(m=r.getUint32(w+8,!f));const v=g+2+x*12+4,b=[];for(let w=v;w<v+m*16;w+=16){const S={MPType:r.getUint32(w,!f),size:r.getUint32(w+4,!f),dataOffset:r.getUint32(w+8,!f),dependantImages:r.getUint32(w+12,!f),start:-1,end:-1,isFII:!1};S.dataOffset?(S.start=d+S.dataOffset,S.isFII=!1):(S.start=0,S.isFII=!0),S.end=S.start+S.size,b.push(S)}if(this.options.extractNonFII&&b.length){const w=new Blob([r]),S=[];for(const C of b){if(C.isFII&&!this.options.extractFII)continue;const M=w.slice(C.start,C.end+1,"image/jpeg");S.push(M)}t(S)}}}o+=2+r.getUint16(o+2)}})}}const A7=async n=>{const e=m7(n);if(!e)throw new iD("Gain map XMP metadata not found");const i=await new g7({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new nD("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},BC=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=s=>{t(s)},i.src=URL.createObjectURL(n)});class x7 extends js{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new JB}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new p7({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ft,sdr:new Ft});return new Yb({width:16,height:16,type:cn,colorSpace:It,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let o,l,c=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([r?BC(r):Promise.resolve(void 0),BC(a)]);l=f[0],o=f[1],c=!0}else{const f=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);l=f[0],o=f[1]}const u=new Ft(l||new ImageData(2,2),ec,Jt,Jt,nt,W_,Pt,tn,1,It);u.flipY=c,u.needsUpdate=!0;const d=new Ft(o,ec,Jt,Jt,nt,W_,Pt,tn,1,Ct);d.flipY=c,d.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=u,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class y7 extends x7{load(e,t,i,s){const r=this.prepareQuadRenderer(),a=new mr(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let c,u,d;try{const f=await A7(l);c=f.sdr,u=f.gainMap,d=f.metadata}catch(f){if(f instanceof iD||f instanceof nD)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw f}try{await this.render(r,d,c,u)}catch(f){this.manager.itemError(e),typeof s=="function"&&s(f),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof s=="function"&&s(o)}),r}}class v7 extends e6{constructor(e){super(e),this.type=cn}parse(e){const a=function(M,_){switch(M){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(_||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(_||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(_||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(_||""))}},u=`
`,d=function(M,_,E){_=_||1024;let L=M.pos,F=-1,U=0,z="",V=String.fromCharCode.apply(null,new Uint16Array(M.subarray(L,L+128)));for(;0>(F=V.indexOf(u))&&U<_&&L<M.byteLength;)z+=V,U+=V.length,L+=128,V+=String.fromCharCode.apply(null,new Uint16Array(M.subarray(L,L+128)));return-1<F?(M.pos+=U+F+1,z+V.slice(0,F)):!1},f=function(M){const _=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*FORMAT=(\S+)\s*$/,F=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,U={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let z,V;for((M.pos>=M.byteLength||!(z=d(M)))&&a(1,"no header found"),(V=z.match(_))||a(3,"bad initial token"),U.valid|=1,U.programtype=V[1],U.string+=z+`
`;z=d(M),z!==!1;){if(U.string+=z+`
`,z.charAt(0)==="#"){U.comments+=z+`
`;continue}if((V=z.match(E))&&(U.gamma=parseFloat(V[1])),(V=z.match(R))&&(U.exposure=parseFloat(V[1])),(V=z.match(L))&&(U.valid|=2,U.format=V[1]),(V=z.match(F))&&(U.valid|=4,U.height=parseInt(V[1],10),U.width=parseInt(V[2],10)),U.valid&2&&U.valid&4)break}return U.valid&2||a(3,"missing format specifier"),U.valid&4||a(3,"missing image size specifier"),U},p=function(M,_,E){const R=_;if(R<8||R>32767||M[0]!==2||M[1]!==2||M[2]&128)return new Uint8Array(M);R!==(M[2]<<8|M[3])&&a(3,"wrong scanline width");const L=new Uint8Array(4*_*E);L.length||a(4,"unable to allocate buffer space");let F=0,U=0;const z=4*R,V=new Uint8Array(4),G=new Uint8Array(z);let D=E;for(;D>0&&U<M.byteLength;){U+4>M.byteLength&&a(1),V[0]=M[U++],V[1]=M[U++],V[2]=M[U++],V[3]=M[U++],(V[0]!=2||V[1]!=2||(V[2]<<8|V[3])!=R)&&a(3,"bad rgbe scanline format");let W=0,K;for(;W<z&&U<M.byteLength;){K=M[U++];const Q=K>128;if(Q&&(K-=128),(K===0||W+K>z)&&a(3,"bad scanline data"),Q){const ae=M[U++];for(let $=0;$<K;$++)G[W++]=ae}else G.set(M.subarray(U,U+K),W),W+=K,U+=K}const ee=R;for(let Q=0;Q<ee;Q++){let ae=0;L[F]=G[Q+ae],ae+=R,L[F+1]=G[Q+ae],ae+=R,L[F+2]=G[Q+ae],ae+=R,L[F+3]=G[Q+ae],F+=4}D--}return L},g=function(M,_,E,R){const L=M[_+3],F=Math.pow(2,L-128)/255;E[R+0]=M[_+0]*F,E[R+1]=M[_+1]*F,E[R+2]=M[_+2]*F,E[R+3]=1},x=function(M,_,E,R){const L=M[_+3],F=Math.pow(2,L-128)/255;E[R+0]=Mh.toHalfFloat(Math.min(M[_+0]*F,65504)),E[R+1]=Mh.toHalfFloat(Math.min(M[_+1]*F,65504)),E[R+2]=Mh.toHalfFloat(Math.min(M[_+2]*F,65504)),E[R+3]=Mh.toHalfFloat(1)},A=new Uint8Array(e);A.pos=0;const m=f(A),y=m.width,v=m.height,b=p(A.subarray(A.pos),y,v);let w,S,C;switch(this.type){case Zt:C=b.length/4;const M=new Float32Array(C*4);for(let E=0;E<C;E++)g(b,E*4,M,E*4);w=M,S=Zt;break;case cn:C=b.length/4;const _=new Uint16Array(C*4);for(let E=0;E<C;E++)x(b,E*4,_,E*4);w=_,S=cn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:y,height:v,data:w,header:m.string,gamma:m.gamma,exposure:m.exposure,type:S}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(a,o){switch(a.type){case Zt:case cn:a.colorSpace=It,a.minFilter=nt,a.magFilter=nt,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,r,i,s)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},w7={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class NC extends go{constructor(e){super(),this.position.y=-3.5;const t=new _r;t.deleteAttribute("uv");const i=new Sd({metalness:0,side:In}),s=new Sd({metalness:0}),r=e=="legacy"?b7:w7,a=new eN(16777215,r.topLight.intensity,28,2);a.position.set(...r.topLight.position),this.add(a);const o=new bt(t,i);o.position.set(...r.room.position),o.scale.set(...r.room.scale),this.add(o);for(const l of r.boxes){const c=new bt(t,s);c.position.set(...l.position),c.rotation.set(0,l.rotation,0),c.scale.set(...l.scale),this.add(c)}for(const l of r.lights){const c=new bt(t,this.createAreaLightMaterial(l.intensity));c.position.set(...l.position),c.scale.set(...l.scale),this.add(c)}}createAreaLightMaterial(e){const t=new Vi;return t.color.setScalar(e),t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=.04,$o=20,_7=/\.hdr(\.js)?$/;class DC{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return this._ldrLoader==null&&(this._ldrLoader=new ZB),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return this._imageLoader==null&&(this._imageLoader=new y7(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return this._hdrLoader==null&&(this._hdrLoader=new v7,this._hdrLoader.setDataType(cn)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(this._lottieLoader==null){const{LottieLoader:t}=await import(this.lottieLoaderUrl);this._lottieLoader=new t}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,t){const i=await new Promise((s,r)=>this.ldrLoader(t).load(e,s,()=>{},r));return i.name=e,i.flipY=!1,i}async loadLottie(e,t,i){const s=await this.getLottieLoader(i);s.setQuality(t);const r=await new Promise((a,o)=>s.load(e,a,()=>{},o));return r.name=e,r}async loadEquirect(e,t=!1,i=()=>{}){try{const s=_7.test(e),r=s?this.hdrLoader(t):this.imageLoader(t),a=await new Promise((o,l)=>r.load(e,c=>{const{renderTarget:u}=c;if(u!=null){const{texture:d}=u;c.dispose(!1),o(d)}else o(c)},c=>{i(c.loaded/c.total*.9)},l));return i(1),a.name=e,a.mapping=Np,s||(a.colorSpace=Ct),a}finally{i&&i(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,i=()=>{},s=!1){const r=t!=="legacy";(t==="legacy"||t==="neutral")&&(t=null),t=AN(t);let a=Promise.resolve(null),o;e&&(a=this.loadEquirectFromUrl(e,s,i)),t?o=this.loadEquirectFromUrl(t,s,i):e?o=this.loadEquirectFromUrl(e,s,i):o=r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[l,c]=await Promise.all([o,a]);if(l==null)throw new Error("Failed to load environment map.");return{environmentMap:l,skybox:c}}async loadEquirectFromUrl(e,t,i){if(!this.skyboxCache.has(e)){const s=this.loadEquirect(e,t,i);this.skyboxCache.set(e,s)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await wH();const i=this.threeRenderer,s=new kb(256,{generateMipmaps:!1,type:cn,format:Pt,colorSpace:It,depthBuffer:!0}),r=new by(.1,100,s),a=r.renderTarget.texture;a.name=t;const o=i.outputColorSpace,l=i.toneMapping;return i.toneMapping=Ds,i.outputColorSpace=It,r.update(i,e),this.blurCubemap(s,E7),i.toneMapping=l,i.outputColorSpace=o,a}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new NC("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new NC("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader($o);const s=new _r,r=new bt(s,this.blurMaterial);this.blurScene=new go,this.blurScene.add(r)}const i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,s){const a=e.width,o=isFinite(i)?Math.PI/(2*a):2*Math.PI/(2*$o-1),l=i/o,c=isFinite(i)?1+Math.floor(3*l):$o;c>$o&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${$o}`);const u=[];let d=0;for(let g=0;g<$o;++g){const x=g/l,A=Math.exp(-x*x/2);u.push(A),g==0?d+=A:g<c&&(d+=2*A)}for(let g=0;g<u.length;g++)u[g]=u[g]/d;const f=this.blurMaterial.uniforms;f.envMap.value=e.texture,f.samples.value=c,f.weights.value=u,f.latitudinal.value=s==="latitudinal",f.dTheta.value=o,new by(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),i=new P(0,1,0);return new Si({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:Ns,depthTest:!1,depthWrite:!1,side:In})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=.2,QA=40,jA=60,LC=5,qo=[1,.79,.62,.5,.4,.31,.25],C7=3,PC="high-performance",M7=1.3;class cs extends xs{static get singleton(){return this._singleton||(this._singleton=new cs({powerPreference:(self.ModelViewerElement||{}).powerPreference||PC,debug:f1()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new cs({powerPreference:(self.ModelViewerElement||{}).powerPreference||PC,debug:f1()});for(const t of e)t.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return qo[this.scaleStep]}set minScale(e){let t=1;for(;t<qo.length&&!(qo[t]<e);)++t;this.lastStep=t-1}constructor(e){super(),this.loader=new Yn(u7),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=C7,this.avgFrameDuration=(jA+QA)/2,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;(t=this.textureUtils)===null||t===void 0||t.dispose(),this.textureUtils=new DC(this.threeRenderer);for(const i of this.scenes)i.element[$p]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new oN({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=xd}catch(t){console.warn(t)}this.arRenderer=new a7(this),this.textureUtils=this.canRender?new DC(this.threeRenderer):null,Yn.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new Ge;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((i,s)=>this.render(i,s))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[Fy]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,i=null;for(const r of this.scenes){const{element:a}=r;a.modelIsVisible&&r.externalRenderer==null&&++t,e.parentElement===r.canvas.parentElement&&(i=r)}const s=t>1;if(i!=null){const r=s&&!this.multipleScenesVisible,a=!i.element.modelIsVisible;if(r||a){const{width:o,height:l}=this.sceneSize(i);this.copyPixels(i,o,l),e.parentElement.removeChild(e)}}this.multipleScenesVisible=s}updateRendererSize(){var e;const t=window.devicePixelRatio;if(t!==this.dpr)for(const r of this.scenes){const{element:a}=r;a[sl](a.getBoundingClientRect())}let i=0,s=0;for(const r of this.scenes)i=Math.max(i,r.width),s=Math.max(s,r.height);if(!(i===this.width&&s===this.height&&t===this.dpr)){this.width=i,this.height=s,this.dpr=t,i=Math.ceil(i*t),s=Math.ceil(s*t),this.canRender&&this.threeRenderer.setSize(i,s,!1);for(const r of this.scenes){const{canvas:a}=r;a.width=i,a.height=s,r.forceRescale(),(e=r.effectRenderer)===null||e===void 0||e.setSize(i,s)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=Cs(S7*(e-this.avgFrameDuration),-LC,LC),this.avgFrameDuration>jA?++this.scaleStep:this.avgFrameDuration<QA&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=(jA+QA)/2)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else if(e.scaleStep!=0)e.scaleStep=0,this.rescaleCanvas(e);else return!1;return!0}rescaleCanvas(e){const t=qo[e.scaleStep],i=Math.ceil(this.width/t),s=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${s}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${s}px`;const a=this.dpr*t,o=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:a,minimumDpr:this.dpr*qo[this.lastStep],pixelWidth:Math.ceil(e.width*a),pixelHeight:Math.ceil(e.height*a),reason:o}}))}sceneSize(e){const{dpr:t}=this,i=qo[e.scaleStep],s=Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),r=Math.min(Math.ceil(e.height*i*t),this.canvas3D.height);return{width:s,height:r}}copyPixels(e,t,i){const s=e.context;if(s==null){console.log("could not acquire 2d context");return}s.clearRect(0,0,t,i),s.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){const{element:s,exposure:r,toneMapping:a}=e;s[Ls](t,i);const o=typeof r=="number"&&!Number.isNaN(r),l=s.environmentImage,c=s.skyboxImage,u=a===xd&&(l==="neutral"||l==="legacy"||!l&&!c);this.threeRenderer.toneMappingExposure=(o?r:1)*(u?M7:1)}render(e,t){if(t!=null){this.arRenderer.onWebXRFrame(e,t);return}const i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);const{canvas3D:s}=this;for(const r of this.orderedScenes()){const{element:a}=r;if(!a.loaded||!a.modelIsVisible&&r.renderCount>0||(this.preRender(r,e,i),!this.shouldRender(r)))continue;if(r.externalRenderer!=null){const c=r.getCamera();c.updateMatrix();const{matrix:u,projectionMatrix:d}=c,f=u.elements.slice(),p=r.getTarget();f[12]+=p.x,f[13]+=p.y,f[14]+=p.z,r.externalRenderer.render({viewMatrix:f,projectionMatrix:d.elements});continue}if(!a.modelIsVisible&&!this.multipleScenesVisible)for(const c of this.scenes)c.element.modelIsVisible&&c.queueRender();const{width:o,height:l}=this.sceneSize(r);r.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-l,o,l),r.effectRenderer!=null?r.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=r.toneMapping,this.threeRenderer.render(r,r.camera)),this.multipleScenesVisible||!r.element.modelIsVisible&&r.renderCount===0?this.copyPixels(r,o,l):s.parentElement!==r.canvas.parentElement&&(r.canvas.parentElement.appendChild(s),r.canvas.classList.remove("show")),r.hasRendered(),++r.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe=Symbol("correlatedObjects"),pt=Symbol("onUpdate");class $d{constructor(e,t){this[pt]=e,this[qe]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Vi,I7=new Sr(2,2);let T7=0;const $n=Symbol("threeTexture"),kC=Symbol("threeTextures");let R7=class extends $d{get[$n](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}get[kC](){return this[qe]}constructor(e,t){super(e,new Set(t?[t]:[])),this[$n].image.src||(this[$n].image.src=t.name?t.name:"adhoc_image"+T7++),this[$n].image.name||(this[$n].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[$n].image.name||""}get uri(){return this[$n].image.src}get bufferView(){return this[$n].image.bufferView}get element(){const e=this[$n];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[$n];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const t of this[kC])t.image.name=e}update(){const e=this[$n];e&&e.isCanvasTexture&&!e.animation&&(this[$n].needsUpdate=!0,this[pt]())}async createThumbnail(e,t){const i=new go;FC.map=this[$n];const s=new bt(I7,FC);i.add(s);const r=new _c(-1,1,1,-1,0,1),{threeRenderer:a}=cs.singleton,o=new $i(e,t);a.setRenderTarget(o),a.render(i,r),a.setRenderTarget(null);const l=new Uint8Array(e*t*4);a.readRenderTargetPixels(o,0,0,e,t,l),Jr.width=e,Jr.height=t;const c=Jr.getContext("2d"),u=c.createImageData(e,t);return u.data.set(l),c.putImageData(u,0,0),new Promise(async(d,f)=>{Jr.toBlob(p=>{if(!p)return f("Failed to capture thumbnail.");d(URL.createObjectURL(p))},"image/png")})}};var xn;(function(n){n[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.NearestMipmapNearest=9984]="NearestMipmapNearest",n[n.LinearMipmapNearest=9985]="LinearMipmapNearest",n[n.NearestMipmapLinear=9986]="NearestMipmapLinear",n[n.LinearMipmapLinear=9987]="LinearMipmapLinear"})(xn||(xn={}));var la;(function(n){n[n.ClampToEdge=33071]="ClampToEdge",n[n.MirroredRepeat=33648]="MirroredRepeat",n[n.Repeat=10497]="Repeat"})(la||(la={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Map([[la.Repeat,As],[la.ClampToEdge,Jt],[la.MirroredRepeat,mo]]),By=new Map([[As,la.Repeat],[Jt,la.ClampToEdge],[mo,la.MirroredRepeat]]),B7=new Map([[xn.Nearest,un],[xn.Linear,nt],[xn.NearestMipmapNearest,Gd],[xn.LinearMipmapNearest,ro],[xn.NearestMipmapLinear,qr],[xn.LinearMipmapLinear,Zn]]),sD=new Map([[un,xn.Nearest],[nt,xn.Linear],[Gd,xn.NearestMipmapNearest],[ro,xn.LinearMipmapNearest],[qr,xn.NearestMipmapLinear],[Zn,xn.LinearMipmapLinear]]),N7=new Map([[xn.Nearest,un],[xn.Linear,nt]]),rD=new Map([[un,xn.Nearest],[nt,xn.Linear]]),D7=n=>sD.has(n),L7=n=>rD.has(n),P7=n=>By.has(n),F7=(n,e)=>{switch(n){case"minFilter":return D7(e);case"magFilter":return L7(e);case"wrapS":case"wrapT":return P7(e);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${n}" on Sampler`)}},Js=Symbol("threeTexture"),OC=Symbol("threeTextures"),Lr=Symbol("setProperty");class k7 extends $d{get[Js](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}get[OC](){return this[qe]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[Js].name||""}get minFilter(){return sD.get(this[Js].minFilter)}get magFilter(){return rD.get(this[Js].magFilter)}get wrapS(){return By.get(this[Js].wrapS)}get wrapT(){return By.get(this[Js].wrapT)}get rotation(){return this[Js].rotation}get scale(){return ky(this[Js].repeat)}get offset(){return ky(this[Js].offset)}setMinFilter(e){this[Lr]("minFilter",B7.get(e))}setMagFilter(e){this[Lr]("magFilter",N7.get(e))}setWrapS(e){this[Lr]("wrapS",UC.get(e))}setWrapT(e){this[Lr]("wrapT",UC.get(e))}setRotation(e){e==null&&(e=0),this[Lr]("rotation",e)}setScale(e){e==null&&(e={u:1,v:1}),this[Lr]("repeat",new Ge(e.u,e.v))}setOffset(e){e==null&&(e={u:0,v:0}),this[Lr]("offset",new Ge(e.u,e.v))}[Lr](e,t){if(F7(e,t))for(const i of this[OC])i[e]=t,i.needsUpdate=!0;this[pt]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=Symbol("image"),jC=Symbol("sampler"),VC=Symbol("threeTexture");class aD extends $d{get[VC](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,new Set(t?[t]:[])),this[jC]=new k7(e,t),this[QC]=new R7(e,t)}get name(){return this[VC].name||""}set name(e){for(const t of this[qe])t.name=e}get sampler(){return this[jC]}get source(){return this[QC]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oD,lD,cD;const ja=Symbol("texture"),Va=Symbol("transform"),VA=Symbol("materials"),GC=Symbol("usage"),Yo=Symbol("onUpdate"),wu=Symbol("activeVideo");var Fe;(function(n){n[n.Base=0]="Base",n[n.MetallicRoughness=1]="MetallicRoughness",n[n.Normal=2]="Normal",n[n.Occlusion=3]="Occlusion",n[n.Emissive=4]="Emissive",n[n.Clearcoat=5]="Clearcoat",n[n.ClearcoatRoughness=6]="ClearcoatRoughness",n[n.ClearcoatNormal=7]="ClearcoatNormal",n[n.SheenColor=8]="SheenColor",n[n.SheenRoughness=9]="SheenRoughness",n[n.Transmission=10]="Transmission",n[n.Thickness=11]="Thickness",n[n.Specular=12]="Specular",n[n.SpecularColor=13]="SpecularColor",n[n.Iridescence=14]="Iridescence",n[n.IridescenceThickness=15]="IridescenceThickness",n[n.Anisotropy=16]="Anisotropy"})(Fe||(Fe={}));class Ml{constructor(e,t,i,s){this[oD]=null,this[lD]={rotation:0,scale:new Ge(1,1),offset:new Ge(0,0)},this[cD]=!1,i&&(this[Va].rotation=i.rotation,this[Va].scale.copy(i.repeat),this[Va].offset.copy(i.offset),this[ja]=new aD(e,i)),this[Yo]=e,this[VA]=s,this[GC]=t}get texture(){return this[ja]}setTexture(e){var t,i;const s=e!=null?e.source[$n]:null,r=(t=this[ja])===null||t===void 0?void 0:t.source[$n];if(r!=null&&r.isVideoTexture?this[wu]=!1:!((i=this[ja])===null||i===void 0)&&i.source.animation&&this[ja].source.animation.removeEventListener("enterFrame",this[Yo]),this[ja]=e,s!=null&&s.isVideoTexture){const o=s.image;if(this[wu]=!0,o.requestVideoFrameCallback!=null){const l=()=>{this[wu]&&(this[Yo](),o.requestVideoFrameCallback(l))};o.requestVideoFrameCallback(l)}else{const l=()=>{this[wu]&&(this[Yo](),requestAnimationFrame(l))};requestAnimationFrame(l)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[Yo]);let a=Ct;if(this[VA])for(const o of this[VA]){switch(this[GC]){case Fe.Base:o.map=s;break;case Fe.MetallicRoughness:a=It,o.metalnessMap=s,o.roughnessMap=s;break;case Fe.Normal:a=It,o.normalMap=s;break;case Fe.Occlusion:a=It,o.aoMap=s;break;case Fe.Emissive:o.emissiveMap=s;break;case Fe.Clearcoat:o.clearcoatMap=s;break;case Fe.ClearcoatRoughness:o.clearcoatRoughnessMap=s;break;case Fe.ClearcoatNormal:o.clearcoatNormalMap=s;break;case Fe.SheenColor:o.sheenColorMap=s;break;case Fe.SheenRoughness:o.sheenRoughnessMap=s;break;case Fe.Transmission:o.transmissionMap=s;break;case Fe.Thickness:o.thicknessMap=s;break;case Fe.Specular:o.specularIntensityMap=s;break;case Fe.SpecularColor:o.specularColorMap=s;break;case Fe.Iridescence:o.iridescenceMap=s;break;case Fe.IridescenceThickness:o.iridescenceThicknessMap=s;break;case Fe.Anisotropy:o.anisotropyMap=s;break}o.needsUpdate=!0}s&&(s.colorSpace=a,s.rotation=this[Va].rotation,s.repeat=this[Va].scale,s.offset=this[Va].offset),this[Yo]()}}oD=ja,lD=Va,cD=wu;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=Symbol("threeMaterial"),lf=Symbol("threeMaterials"),HC=Symbol("baseColorTexture"),zC=Symbol("metallicRoughnessTexture");class U7 extends $d{get[lf](){return this[qe]}get[iu](){var e;return(e=this[qe])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,t);const{map:i,metalnessMap:s}=t.values().next().value;this[HC]=new Ml(e,Fe.Base,i,t),this[zC]=new Ml(e,Fe.MetallicRoughness,s,t)}get baseColorFactor(){const e=[0,0,0,this[iu].opacity];return this[iu].color.toArray(e),e}get metallicFactor(){return this[iu].metalness}get roughnessFactor(){return this[iu].roughness}get baseColorTexture(){return this[HC]}get metallicRoughnessTexture(){return this[zC]}setBaseColorFactor(e){const t=new Te;e instanceof Array?t.fromArray(e):t.set(e);for(const i of this[lf])i.color.set(t),e instanceof Array&&e.length>3?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[pt]()}setMetallicFactor(e){for(const t of this[lf])t.metalness=e;this[pt]()}setRoughnessFactor(e){for(const t of this[lf])t.roughness=e;this[pt]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WC,$C;const qC=Symbol("pbrMetallicRoughness"),YC=Symbol("normalTexture"),XC=Symbol("occlusionTexture"),KC=Symbol("emissiveTexture"),Bt=Symbol("backingThreeMaterial"),JC=Symbol("applyAlphaCutoff"),GA=Symbol("getAlphaMode"),Xo=Symbol("lazyLoadGLTFInfo"),HA=Symbol("initialize"),Ny=Symbol("getLoadedMaterial"),be=Symbol("ensureMaterialIsLoaded"),ZC=Symbol("gltfIndex"),Eu=Symbol("setActive"),Vl=Symbol("variantIndices"),zA=Symbol("isActive"),eM=Symbol("modelVariants"),WA=Symbol("name"),ri=Symbol("pbrTextures");class $A extends $d{get[(WC=Vl,$C=ri,Bt)](){return this[qe].values().next().value}constructor(e,t,i,s,r,a,o=void 0){super(e,r),this[WC]=new Set,this[$C]=new Map,this[ZC]=t,this[zA]=i,this[eM]=s,this[WA]=a,o==null?this[HA]():this[Xo]=o}[HA](){const e=this[pt],t=this[qe];this[qC]=new U7(e,t);const{normalMap:i,aoMap:s,emissiveMap:r}=t.values().next().value;this[YC]=new Ml(e,Fe.Normal,i,t),this[XC]=new Ml(e,Fe.Occlusion,s,t),this[KC]=new Ml(e,Fe.Emissive,r,t);const a=o=>{this[ri].set(o,new Ml(e,o,null,t))};a(Fe.Clearcoat),a(Fe.ClearcoatRoughness),a(Fe.ClearcoatNormal),a(Fe.SheenColor),a(Fe.SheenRoughness),a(Fe.Transmission),a(Fe.Thickness),a(Fe.Specular),a(Fe.SpecularColor),a(Fe.Iridescence),a(Fe.IridescenceThickness),a(Fe.Anisotropy)}async[Ny](){if(this[Xo]!=null){const e=await this[Xo].doLazyLoad();return this[HA](),this[Xo]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const t=new Te;return e instanceof Array?t.fromArray(e):t.set(e),t}[be](){if(this[Xo]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[Ny]()}get isLoaded(){return this[Xo]==null}get isActive(){return this[zA]}[Eu](e){this[zA]=e}get name(){return this[WA]||""}set name(e){if(this[WA]=e,this[qe]!=null)for(const t of this[qe])t.name=e}get pbrMetallicRoughness(){return this[be](),this[qC]}get normalTexture(){return this[be](),this[YC]}get occlusionTexture(){return this[be](),this[XC]}get emissiveTexture(){return this[be](),this[KC]}get emissiveFactor(){return this[be](),this[Bt].emissive.toArray()}get index(){return this[ZC]}hasVariant(e){const t=this[eM].get(e);return t!=null&&this[Vl].has(t.index)}setEmissiveFactor(e){this[be]();const t=this.colorFromRgb(e);for(const i of this[qe])i.emissive.set(t);this[pt]()}[GA](){return this[Bt].transparent?"BLEND":this[Bt].alphaTest>0?"MASK":"OPAQUE"}[JC](){this[be]();for(const e of this[qe])this[GA]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[be]();for(const t of this[qe])t.alphaTest=e,t.needsUpdate=!0;this[JC](),this[pt]()}getAlphaCutoff(){return this[be](),this[Bt].alphaTest}setDoubleSided(e){this[be]();for(const t of this[qe])t.side=e?yn:gs,t.needsUpdate=!0;this[pt]()}getDoubleSided(){return this[be](),this[Bt].side==yn}setAlphaMode(e){this[be]();const t=(i,s)=>{i.transparent=s,i.depthWrite=!s};for(const i of this[qe])t(i,e==="BLEND"),e==="MASK"?i.alphaTest=.5:i.alphaTest=void 0,i.needsUpdate=!0;this[pt]()}getAlphaMode(){return this[be](),this[GA]()}get emissiveStrength(){return this[be](),this[Bt].emissiveIntensity}setEmissiveStrength(e){this[be]();for(const t of this[qe])t.emissiveIntensity=e;this[pt]()}get clearcoatFactor(){return this[be](),this[Bt].clearcoat}get clearcoatRoughnessFactor(){return this[be](),this[Bt].clearcoatRoughness}get clearcoatTexture(){return this[be](),this[ri].get(Fe.Clearcoat)}get clearcoatRoughnessTexture(){return this[be](),this[ri].get(Fe.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[be](),this[ri].get(Fe.ClearcoatNormal)}get clearcoatNormalScale(){return this[be](),this[Bt].clearcoatNormalScale.x}setClearcoatFactor(e){this[be]();for(const t of this[qe])t.clearcoat=e;this[pt]()}setClearcoatRoughnessFactor(e){this[be]();for(const t of this[qe])t.clearcoatRoughness=e;this[pt]()}setClearcoatNormalScale(e){this[be]();for(const t of this[qe])t.clearcoatNormalScale=new Ge(e,e);this[pt]()}get ior(){return this[be](),this[Bt].ior}setIor(e){this[be]();for(const t of this[qe])t.ior=e;this[pt]()}get sheenColorFactor(){return this[be](),this[Bt].sheenColor.toArray()}get sheenColorTexture(){return this[be](),this[ri].get(Fe.SheenColor)}get sheenRoughnessFactor(){return this[be](),this[Bt].sheenRoughness}get sheenRoughnessTexture(){return this[be](),this[ri].get(Fe.SheenRoughness)}setSheenColorFactor(e){this[be]();const t=this.colorFromRgb(e);for(const i of this[qe])i.sheenColor.set(t),i.sheen=1;this[pt]()}setSheenRoughnessFactor(e){this[be]();for(const t of this[qe])t.sheenRoughness=e,t.sheen=1;this[pt]()}get transmissionFactor(){return this[be](),this[Bt].transmission}get transmissionTexture(){return this[be](),this[ri].get(Fe.Transmission)}setTransmissionFactor(e){this[be]();for(const t of this[qe])t.transmission=e;this[pt]()}get thicknessFactor(){return this[be](),this[Bt].thickness}get thicknessTexture(){return this[be](),this[ri].get(Fe.Thickness)}get attenuationDistance(){return this[be](),this[Bt].attenuationDistance}get attenuationColor(){return this[be](),this[Bt].attenuationColor.toArray()}setThicknessFactor(e){this[be]();for(const t of this[qe])t.thickness=e;this[pt]()}setAttenuationDistance(e){this[be]();for(const t of this[qe])t.attenuationDistance=e;this[pt]()}setAttenuationColor(e){this[be]();const t=this.colorFromRgb(e);for(const i of this[qe])i.attenuationColor.set(t);this[pt]()}get specularFactor(){return this[be](),this[Bt].specularIntensity}get specularTexture(){return this[be](),this[ri].get(Fe.Specular)}get specularColorFactor(){return this[be](),this[Bt].specularColor.toArray()}get specularColorTexture(){return this[be](),this[ri].get(Fe.SheenColor)}setSpecularFactor(e){this[be]();for(const t of this[qe])t.specularIntensity=e;this[pt]()}setSpecularColorFactor(e){this[be]();const t=this.colorFromRgb(e);for(const i of this[qe])i.specularColor.set(t);this[pt]()}get iridescenceFactor(){return this[be](),this[Bt].iridescence}get iridescenceTexture(){return this[be](),this[ri].get(Fe.Iridescence)}get iridescenceIor(){return this[be](),this[Bt].iridescenceIOR}get iridescenceThicknessMinimum(){return this[be](),this[Bt].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[be](),this[Bt].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[be](),this[ri].get(Fe.IridescenceThickness)}setIridescenceFactor(e){this[be]();for(const t of this[qe])t.iridescence=e;this[pt]()}setIridescenceIor(e){this[be]();for(const t of this[qe])t.iridescenceIOR=e;this[pt]()}setIridescenceThicknessMinimum(e){this[be]();for(const t of this[qe])t.iridescenceThicknessRange[0]=e;this[pt]()}setIridescenceThicknessMaximum(e){this[be]();for(const t of this[qe])t.iridescenceThicknessRange[1]=e;this[pt]()}get anisotropyStrength(){return this[be](),this[Bt].anisotropy}get anisotropyRotation(){return this[be](),this[Bt].anisotropyRotation}get anisotropyTexture(){return this[be](),this[ri].get(Fe.Anisotropy)}setAnisotropyStrength(e){this[be]();for(const t of this[qe])t.anisotropy=e;this[pt]()}setAnisotropyRotation(e){this[be]();for(const t of this[qe])t.anisotropyRotation=e;this[pt]()}}let uD=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class qA extends uD{constructor(e,t,i,s){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:r,threeGLTF:a,threeObjectMap:o}=s;this.parser=a.parser,this.modelVariants=i,this.mesh.userData.variantData=i;const l=o.get(e.material);l.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=l.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const c=e.userData.associations||{};if(c.meshes==null){console.error("Mesh is missing primitive index association");return}const f=((r.meshes||[])[c.meshes].primitives||[])[c.primitives];if(f==null){console.error("Mesh primitive definition is missing.");return}if(f.material!=null)this.materials.set(f.material,t[f.material]);else{const p=t.findIndex(g=>g.name==="Default");p>=0?this.materials.set(p,t[p]):console.warn("gltfPrimitive has no material!")}if(f.extensions&&f.extensions.KHR_materials_variants){const p=f.extensions.KHR_materials_variants,x=a.parser.json.extensions.KHR_materials_variants.variants;for(const A of p.mappings){const m=t[A.material];this.materials.set(A.material,m);for(const y of A.variants){const{name:v}=x[y];this.variantToMaterialMap.set(y,m),m[Vl].add(y),i.has(v)||i.set(v,{name:v,index:y})}}}}async setActiveMaterial(e){const t=this.materials.get(e);if(e!==this.activeMaterialIdx){const i=t[qe],s=await t[Ny]();s!=null?this.mesh.material=s:this.mesh.material=i.values().next().value,this.parser.assignFinalMaterial(this.mesh),i.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const t=this.variantToMaterialMap.get(e);if(t!=null)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(t.material!=null)continue;const i=await this.enableVariantHelper(e);i!=null&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const s=this.modelVariants.get(t).index;return e[Vl].add(s),this.variantToMaterialMap.set(s,e),this.materials.set(e.index,e),this.updateVariantUserData(s,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;t!=null&&t.delete(e)}}updateVariantUserData(e,t){t[Vl].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[qe].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return t!=null&&this.variantInfo.has(t.index)?(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tM,nM,iM,sM,rM,aM;const Na=Symbol("materials"),cf=Symbol("hierarchy"),oM=Symbol("roots"),Zs=Symbol("primitives"),dD=Symbol("prepareVariantsForExport"),hD=Symbol("switchVariant"),fD=Symbol("materialFromPoint"),Dy=Symbol("nodeFromPoint"),pD=Symbol("nodeFromIndex"),Pn=Symbol("variantData"),Ly=Symbol("availableVariants"),YA=Symbol("modelOnUpdate"),lM=Symbol("cloneMaterial");class O7{constructor(e,t,i,s){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=s}}class Q7{constructor(e,t=()=>{}){this[tM]=new Array,this[nM]=new Array,this[iM]=new Array,this[sM]=new Array,this[rM]=()=>{},this[aM]=new Map,this[YA]=t;const{gltf:i,threeGLTF:s,gltfElementMap:r}=e;for(const[l,c]of i.materials.entries()){const u=r.get(c);if(u!=null)this[Na].push(new $A(t,l,!0,this[Pn],u,c.name));else{const f=(i.materials||[])[l],p=new Set;r.set(f,p);const g=async()=>{const x=await s.parser.getDependency("material",l);return p.add(x),x};this[Na].push(new $A(t,l,!1,this[Pn],p,c.name,new O7(i,r,f,g)))}}const a=new Map,o=new Array;for(const l of s.scene.children)o.push(l);for(;o.length>0;){const l=o.pop();let c=null;l instanceof bt?(c=new qA(l,this.materials,this[Pn],e),this[Zs].push(c)):c=new uD(l.name);const u=a.get(l);u!=null?u.children.push(c):this[oM].push(c),this[cf].push(c);for(const d of l.children)o.push(d),a.set(l,c)}}get materials(){return this[Na]}[(tM=Na,nM=cf,iM=oM,sM=Zs,rM=YA,aM=Pn,Ly)](){const e=Array.from(this[Pn].values());return e.sort((t,i)=>t.index-i.index),e.map(t=>t.name)}getMaterialByName(e){const t=this[Na].filter(i=>i.name===e);return t.length>0?t[0]:null}[pD](e,t){const i=this[cf].find(s=>{if(s instanceof qA){const{meshes:r,primitives:a}=s.mesh.userData.associations;if(r==e&&a==t)return!0}return!1});return i??null}[Dy](e){return this[cf].find(t=>t instanceof qA&&t.mesh===e.object)}[fD](e){return this[Dy](e).getActiveMaterial()}async[hD](e){for(const t of this[Zs])await t.enableVariant(e);for(const t of this.materials)t[Eu](!1);for(const t of this[Zs])this.materials[t.getActiveMaterial().index][Eu](!0)}async[dD](){const e=new Array;for(const t of this[Zs])e.push(t.instantiateVariants());await Promise.all(e)}[lM](e,t){const i=this.materials[e];i.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const s=i[qe],r=new Set;for(const[o,l]of s.entries()){const c=l.clone();c.name=t+(s.size>1?"_inst"+o:""),r.add(c)}const a=new $A(this[YA],this[Na].length,!1,this[Pn],r,t);return this[Na].push(a),a}createMaterialInstanceForVariant(e,t,i,s=!0){let r=null;for(const a of this[Zs]){const o=this[Pn].get(i);o!=null&&a.variantInfo.has(o.index)||a.getMaterial(e)!=null&&(this.hasVariant(i)||this.createVariant(i),r==null&&(r=this[lM](e,t)),a.addVariant(r,i))}if(s&&r!=null){r[Eu](!0),this.materials[e][Eu](!1);for(const a of this[Zs])a.enableVariant(i)}return r}createVariant(e){this[Pn].has(e)?console.warn(`Variant '${e}'' already exists`):this[Pn].set(e,{name:e,index:this[Pn].size})}hasVariant(e){return this[Pn].has(e)}setMaterialToVariant(e,t){if(this[Ly]().find(i=>i===t)==null){console.warn(`Can't add material to '${t}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const i of this[Zs]){const s=i.getMaterial(e);s!=null&&i.addVariant(s,t)}}updateVariantName(e,t){const i=this[Pn].get(e);i!=null&&(i.name=t,this[Pn].set(t,i),this[Pn].delete(e))}deleteVariant(e){const t=this[Pn].get(e);if(t!=null){for(const i of this.materials)i.hasVariant(e)&&i[Vl].delete(t.index);for(const i of this[Zs])i.deleteVariant(t.index);this[Pn].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XA=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Xf=Symbol("currentGLTF"),Kf=Symbol("originalGltfJson"),Ga=Symbol("model"),KA=Symbol("getOnUpdateMethod"),su=Symbol("buildTexture"),j7=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this[e]=void 0,this[t]=null,this[i]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[Ga]}get availableVariants(){return this.model?this.model[Ly]():[]}get originalGltfJson(){return this[Kf]}[(e=Ga,t=Xf,i=Kf,KA)](){return()=>{this[vn]()}}[su](a){return a.colorSpace=Ct,a.wrapS=As,a.wrapT=As,new aD(this[KA](),a)}async createTexture(a,o="image/png"){const{textureUtils:l}=this[xt],c=await l.loadImage(a,this.withCredentials);return c.userData.mimeType=o,this[su](c)}async createLottieTexture(a,o=1){const{textureUtils:l}=this[xt],c=await l.loadLottie(a,o,this.withCredentials);return this[su](c)}createVideoTexture(a){const o=document.createElement("video");o.crossOrigin=this.withCredentials?"use-credentials":"anonymous",o.src=a,o.muted=!0,o.playsInline=!0,o.loop=!0,o.play();const l=new O5(o);return this[su](l)}createCanvasTexture(){const a=document.createElement("canvas"),o=new V5(a);return this[su](o)}async updated(a){if(super.updated(a),a.has("variantName")){const o=this[xo].beginActivity("variant-update");o(.1);const l=this[Ga],{variantName:c}=this;l!=null&&(await l[hD](c),this[vn](),this.dispatchEvent(new CustomEvent("variant-applied"))),o(1)}if(a.has("orientation")||a.has("scale")){if(!this.loaded)return;const o=this[re];o.applyTransform(),o.updateBoundingBox(),o.updateShadow(),this[xt].arRenderer.onUpdateScene(),this[vn]()}}[Ps](){super[Ps]();const{currentGLTF:a}=this[re];if(a!=null){const{correlatedSceneGraph:o}=a;o!=null&&a!==this[Xf]&&(this[Ga]=new Q7(o,this[KA]()),this[Kf]=JSON.parse(JSON.stringify(o.gltf))),"variants"in a.userData&&this.requestUpdate("variantName")}this[Xf]=a}async exportScene(a){const o=this[re];return new Promise(async(l,c)=>{const u={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(u,a),u.animations=o.animations,u.truncateDrawRange=!0;const d=o.shadow;let f=!1;d!=null&&(f=d.visible,d.visible=!1),await this[Ga][dD](),new qp().register(g=>new lW(g)).parse(o.model,g=>l(new Blob([u.binary?g:JSON.stringify(g)],{type:u.binary?"application/octet-stream":"application/json"})),()=>c("glTF export failed"),u),d!=null&&(d.visible=f)})}materialFromPoint(a,o){const l=this[Ga];if(l==null)return null;const c=this[re],u=c.getNDC(a,o),d=c.hitFromPoint(u);return d==null||d.face==null?null:l[fD](d)}}return XA([De({type:String,attribute:"variant-name"})],s.prototype,"variantName",void 0),XA([De({type:String,attribute:"orientation"})],s.prototype,"orientation",void 0),XA([De({type:String,attribute:"scale"})],s.prototype,"scale",void 0),s};/* @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7 extends bt{constructor(){super(void 0,new Vi({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(e=this.height,t=this.radius,i=128){(e!=this.height||t!=this.radius||i!=this.resolution)&&(this.height=e,this.radius=t,this.resolution=i,e>0&&t>0&&(this.geometry.dispose(),this.geometry=G7(e,t,i)))}}function G7(n,e,t){const i=new jb(e,2*t,t);i.scale(1,1,-1);const s=i.getAttribute("position"),r=new P;for(let a=0;a<s.count;++a)if(r.fromBufferAttribute(s,a),r.y<0){const o=-n*3/2,l=r.y<o?-n/r.y:1-r.y*r.y/(3*o*o);r.multiplyScalar(l),r.toArray(s.array,3*a)}return s.needsUpdate=!0,i}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new P,JA=new P,ZA=new P,df=new Ve,cM=new xi,uM=new ti;class mD extends kz{constructor(e){super(document.createElement("div")),this.normal=new P(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const t=dr(e)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,Ms(t[i]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const t=dr(e)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,t[i].number)}updateSurface(){const{mesh:e,tri:t,bary:i}=this;if(e==null||t==null||i==null)return;e.getVertexPosition(t.x,uf),e.getVertexPosition(t.y,JA),e.getVertexPosition(t.z,ZA),uf.toArray(df.elements,0),JA.toArray(df.elements,3),ZA.toArray(df.elements,6),this.position.copy(i).applyMatrix3(df);const s=this.parent;s.worldToLocal(e.localToWorld(this.position)),cM.set(uf,JA,ZA),cM.getNormal(this.normal).transformDirection(e.matrixWorld);const r=s.parent;uM.setFromAxisAngle(uf.set(0,1,0),-r.rotation.y),this.normal.applyQuaternion(uM)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const i=t,s=i.dataset.visibilityAttribute;if(s!=null){const r=`data-${s}`;i.toggleAttribute(r,e)}i.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const H7={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},z7={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function dM(n,e,t){return(1-t)*n+t*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=9,W7=6,e0=2,$7=.3;class q7 extends wt{constructor(e,t,i){super(),this.camera=new _c,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new qB,this.horizontalBlurMaterial=new Si(H7),this.verticalBlurMaterial=new Si(z7),this.intensity=0,this.softness=1,this.boundingBox=new Kn,this.size=new P,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:s}=this;s.rotation.x=Math.PI/2,s.left=-.5,s.right=.5,s.bottom=-.5,s.top=.5,this.add(s);const r=new Sr,a=new Vi({opacity:1,transparent:!0,side:In});this.floor=new bt(r,a),this.floor.userData.noHit=!0,s.add(this.floor),this.blurPlane=new bt(r),this.blurPlane.visible=!1,s.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(o){o.fragmentShader=o.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.depthMaterial.side=yn,this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){const{boundingBox:s,size:r,rotation:a,position:o}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?e0:1),this.boundingBox.getCenter(o),i==="back"){const{min:l,max:c}=s;[l.y,l.z]=[l.z,l.y],[c.y,c.z]=[c.z,c.y],[r.y,r.z]=[r.z,r.y],a.x=Math.PI/2,a.y=Math.PI}else a.x=0,a.y=0;if(this.isAnimated){const l=s.min.y,c=s.max.y;r.y=this.maxDimension,s.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),s.min.y=l,s.max.y=c,r.set(this.maxDimension,c-l,this.maxDimension)}i==="bottom"?o.y=s.min.y:o.z=s.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:i}=this,s=this.isAnimated?e0:1,r=s*Math.pow(2,hM-e*(hM-W7));this.setMapSize(r);const a=t.y/2,o=t.y*s;i.near=0,i.far=dM(o,a,e),this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=e0);const i=Math.floor(t.x>t.z?e:e*t.x/t.z),s=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10,a=r+i,o=r+s;if(this.renderTarget!=null&&(this.renderTarget.width!==a||this.renderTarget.height!==o)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const l={format:Pt};this.renderTarget=new $i(a,o,l),this.renderTargetBlur=new $i(a,o,l),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+r/i),t.z*(1+r/s),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*dM($7,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return .001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const s=e.xr.enabled;e.xr.enabled=!1;const r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=s,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){const{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:s,renderTarget:r,renderTargetBlur:a,blurPlane:o}=this;o.visible=!0,o.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(a),e.render(o,t),o.material=s,s.uniforms.v.value=1/this.renderTarget.height,s.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(o,t),o.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=10,t0=100,n0=new P,pM=new P,mM=new P,hf=new w6,Y7=new P,ru=new Ge;class X7 extends go{constructor({canvas:e,element:t,width:i,height:s}){super(),this.annotationRenderer=new Uz,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.appendedAnimations=[],this.markedAnimations=[],this.camera=new Cn(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new wt,this.target=new wt,this.animationNames=[],this.boundingBox=new Kn,this.boundingSphere=new Yi,this.size=new P,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=xd,this.canScale=!0,this.isDirty=!1,this.goalTarget=new P,this.targetDamperX=new Xn,this.targetDamperY=new Xn,this.targetDamperZ=new Xn,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new V7,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new Cn(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(i,s),this.target.name="Target",this.mixer=new b6(this.target);const{domElement:r}=this.annotationRenderer,{style:a}=r;a.display="none",a.pointerEvents="none",a.position="absolute",a.top="0",this.element.shadowRoot.querySelector(".default").appendChild(r),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){if(!e||e===this.url){t(1);return}if(this.reset(),this.url=e,this.externalRenderer!=null){const o=await this.externalRenderer.load(t);this.boundingSphere.radius=o.framedRadius,this.idealAspect=o.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let i;try{i=await new Promise(async(o,l)=>{this.cancelPendingSourceChange=()=>l();try{const c=await this.element[xt].loader.load(e,this.element,t);o(c)}catch(c){l(c)}})}catch(o){if(o==null)return;throw o}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=i,i!=null&&(this._model=i.scene,this.target.add(i.scene));const{animations:s}=i,r=new Map,a=[];for(const o of s)r.set(o.name,o),a.push(o.name);this.animations=s,this.animationsByName=r,this.animationNames=a,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;t!=null&&(t.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[Xf]=null,this.element[Kf]=null,this.element[Ga]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(!(this.width===e&&this.height===t)){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.externalRenderer!=null){const i=window.devicePixelRatio;this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Kn;e.traverse(i=>{const s=i;if(!s.material||!s.material.transparent)return;t.setFromObject(s);const a=t.getSize(Y7),o=Math.min(a.x,a.y,a.z);Math.max(a.x,a.y,a.z)<t0*o||this.markBakedShadow(s)})}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,i=new Kn;this.boundingBox.getSize(this.size);for(const s of this.bakedShadows)i.setFromObject(s),!(i.min.y<e.y+this.size.y/t0&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z)&&(i.min.z<e.z+this.size.z/t0&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(s))}applyTransform(){const{model:e}=this;if(e==null)return;const t=dr(this.element.orientation)[0].terms,i=Ms(t[0]).number,s=Ms(t[1]).number,r=Ms(t[2]).number;e.quaternion.setFromEuler(new qi(s,r,i,"YXZ"));const a=dr(this.element.scale)[0].terms;e.scale.set(a[0].number,a[1].number,a[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const t=(i,s)=>i.expandByPoint(s);this.setBakedShadowVisibility(!1),this.boundingBox=Yh(e,t,new Kn),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(i=>this.unmarkBakedShadow(i)),this.boundingBox=Yh(e,t,new Kn)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget());const i=(r,a)=>Math.max(r,t.distanceToSquared(a));this.boundingSphere.radius=Math.sqrt(Yh(e,i,0));const s=(r,a)=>{a.sub(t);const o=Math.sqrt(a.x*a.x+a.z*a.z);return Math.max(r,o/(this.idealCameraDistance()-Math.abs(a.y)))};this.idealAspect=Yh(e,s,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(this.xrCamera!=null)ru.set(e/window.screen.width,t/window.screen.height);else{const i=this.element.getBoundingClientRect();ru.set((e-i.x)/this.width,(t-i.y)/this.height)}return ru.multiplyScalar(2).subScalar(1),ru.y*=-1,ru}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[xt].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?fM:1)}setGroundedSkybox(){const e=dr(this.element.skyboxHeight)[0].terms[0],t=Ms(e).number,i=fM*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,i),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(kN)}updateTarget(e){const t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{const s=this.boundingSphere.radius/10;let{x:r,y:a,z:o}=i;return r=this.targetDamperX.update(r,t.x,e,s),a=this.targetDamperY.update(a,t.y,e,s),o=this.targetDamperZ.update(o,t.z,e,s),this.groundedSkybox.position.x=-r,this.groundedSkybox.position.z=-o,this.target.position.set(r,a,o),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:i,z:s}=this.position;this.yaw=Math.atan2(e-i,t-s)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===Op&&(e&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,t=0,i=Ol,s=1/0){if(this._currentGLTF==null)return;const{animations:r}=this;if(r==null||r.length===0)return;let a=null;if(e!=null&&(a=this.animationsByName.get(e),a==null)){const o=parseInt(e);!isNaN(o)&&o>=0&&o<r.length&&(a=r[o])}a==null&&(a=r[0]);try{const{currentAnimationAction:o}=this,l=this.mixer.clipAction(a,this);l.timeScale!=this.element.timeScale&&(l.timeScale=this.element.timeScale),this.currentAnimationAction=l,this.element.paused?this.mixer.stopAllAction():(l.paused=!1,o!=null&&l!==o?l.crossFadeFrom(o,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),l.setLoop(i,s),l.enabled=!0,l.clampWhenFinished=!0,l.play()}catch(o){console.error(o)}}appendAnimation(e="",t=Ol,i=1/0,s=1,r=1,a=!1,o=!1,l=!0,c=null,u=!1){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:d}=this;if(d==null||d.length===0)return;let f=null;const p=1.25;if(e&&(f=this.animationsByName.get(e)),f!=null){typeof i=="string"?isNaN(i)?(i=1/0,console.warn("Invalid repetitionCount value, repetitionCount is set to Infinity")):i=Math.max(parseInt(i),1):typeof i=="number"&&i<1&&(i=1),i===1&&t!==wd&&(t=wd),typeof s=="string"&&(isNaN(s)?(s=1,console.warn("Invalid weight value, weight is set to 1")):s=parseFloat(s)),typeof r=="string"&&(isNaN(r)?(r=1,console.warn("Invalid timeScale value, timeScale is set to 1")):r=parseFloat(r)),typeof a=="string"&&(a.toLowerCase().trim()==="true"?a=!0:a.toLowerCase().trim()==="false"?a=!1:isNaN(a)?(a=!1,console.warn("Invalid fade value, fade is set to false")):a=parseFloat(a)),typeof o=="string"&&(o.toLowerCase().trim()==="true"?o=!0:o.toLowerCase().trim()==="false"?o=!1:isNaN(o)?(o=!1,console.warn("Invalid warp value, warp is set to false")):o=parseFloat(o)),typeof c=="string"&&(isNaN(c)||(c=parseFloat(c)));try{const g=this.mixer.existingAction(f)||this.mixer.clipAction(f,this),x=g.timeScale;u&&this.appendedAnimations.includes(e)&&(this.markedAnimations.map(A=>A.name).includes(e)||this.markedAnimations.push({name:e,loopMode:t,repetitionCount:i})),typeof c=="number"&&(g.time=Math.min(Math.max(c,0),f.duration)),typeof a=="boolean"&&a?g.fadeIn(p):typeof a=="number"?g.fadeIn(Math.max(a,0)):s>=0&&(g.weight=Math.min(Math.max(s,0),1)),typeof o=="boolean"&&o?g.warp(l?x:0,r,p):typeof o=="number"?g.warp(l?x:0,r,Math.max(o,0)):g.timeScale=r,g.isRunning()||(g.time==f.duration&&g.stop(),g.setLoop(t,i),g.paused=!1,g.enabled=!0,g.clampWhenFinished=!0,g.play()),this.appendedAnimations.includes(e)||this.element[re].appendedAnimations.push(e)}catch(g){console.error(g)}}}detachAnimation(e="",t=!0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:i}=this;if(i==null||i.length===0)return;let s=null;const r=1.5;if(e&&(s=this.animationsByName.get(e)),s!=null){typeof t=="string"&&(t.toLowerCase().trim()==="true"?t=!0:t.toLowerCase().trim()==="false"?t=!1:isNaN(t)?(t=!0,console.warn("Invalid fade value, fade is set to true")):t=parseFloat(t));try{const a=this.mixer.existingAction(s)||this.mixer.clipAction(s,this);typeof t=="boolean"&&t?a.fadeOut(r):typeof t=="number"?a.fadeOut(Math.max(t,0)):a.stop();const o=this.element[re].appendedAnimations.filter(l=>l!==e);this.element[re].appendedAnimations=o}catch(a){console.error(a)}}}updateAnimationLoop(e="",t=Ol,i=1/0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:s}=this;if(s==null||s.length===0)return;let r=null;if(e&&(r=this.animationsByName.get(e)),r!=null)try{const a=this.mixer.existingAction(r)||this.mixer.clipAction(r,this);a.stop(),a.setLoop(t,i),a.play()}catch(a){console.error(a)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(e!=null){const t=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;t!=null&&t.needsUpdate==!0&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const t=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new q7(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;t!=null&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;t!=null&&t.setOffset(e)}getHit(e=this){return hf.intersectObject(e,!0).find(i=>i.object.visible&&!i.object.userData.noHit)}hitFromController(e,t=this){return hf.setFromXRController(e),this.getHit(t)}hitFromPoint(e,t=this){return hf.setFromCamera(e,this.getCamera()),this.getHit(t)}positionAndNormalFromPoint(e,t=this){var i;const s=this.hitFromPoint(e,t);if(s==null)return null;const r=s.point,a=s.face!=null?s.face.normal.clone().applyNormalMatrix(new Ve().getNormalMatrix(s.object.matrixWorld)):hf.ray.direction.clone().multiplyScalar(-1),o=(i=s.uv)!==null&&i!==void 0?i:null;return{position:r,normal:a,uv:o}}surfaceFromPoint(e,t=this){const i=this.element.model;if(i==null)return null;const s=this.hitFromPoint(e,t);if(s==null||s.face==null)return null;const r=i[Dy](s),{meshes:a,primitives:o}=r.mesh.userData.associations,l=new P,c=new P,u=new P,{a:d,b:f,c:p}=s.face,g=s.object;g.getVertexPosition(d,l),g.getVertexPosition(f,c),g.getVertexPosition(p,u);const x=new xi(l,c,u),A=new P;return x.getBarycoord(g.worldToLocal(s.point),A),`${a} ${o} ${d} ${f} ${p} ${A.x.toFixed(3)} ${A.y.toFixed(3)} ${A.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let i=0,s=t.length;i<s;i++){const r=t[i];r instanceof mD&&e(r)}}updateSurfaceHotspot(e){if(e.surface==null||this.element.model==null)return;const t=dr(e.surface)[0].terms;if(t.length!=8){console.warn(e.surface+" does not have exactly 8 numbers.");return}const i=this.element.model[pD](t[0].number,t[1].number);if(i==null){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const s=i.mesh.geometry.attributes.position.count,r=new P(t[2].number,t[3].number,t[4].number);if(r.x>=s||r.y>=s||r.z>=s){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const a=new P(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=r,e.bary=a,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots(e=>{e.updateSurface()})}updateHotspotsVisibility(e){this.forHotspots(t=>{n0.copy(e),pM.setFromMatrixPosition(t.matrixWorld),n0.sub(pM),mM.copy(t.normal).transformDirection(this.target.matrixWorld),n0.dot(mM)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;const{schemaElement:i,element:s}=this,{alt:r,poster:a,iosSrc:o}=s;if(e!=null){const l=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((t=e.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];o&&l.push({"@type":"MediaObject",contentUrl:o,encodingFormat:"model/vnd.usdz+zip"});const c={"@context":"http://schema.org/","@type":"3DModel",image:a??void 0,name:r??void 0,encoding:l};i.textContent=JSON.stringify(c),document.head.appendChild(i)}else i.parentElement!=null&&i.parentElement.removeChild(i)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7 extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),this.ongoingActivityCount===1&&this.announceTotalProgress(t,0,e),i=>{let s;return s=Math.max(Cs(i,0,1),t.progress),s!==t.progress&&this.announceTotalProgress(t,s,e),t.progress}}announceTotalProgress(e,t,i){let s=0,r=0;t==1&&(e.completed=!0);for(const l of this.ongoingActivities){const{progress:c}=l;s+=1-c,l.completed&&r++}const a=e.progress;e.progress=t,this.totalProgress+=(t-a)*(1-this.totalProgress)/s;const o=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:o,reason:i}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dm=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gM,AM,xM,yM,vM,bM,wM,EM,_M,SM,CM,MM,IM;const J7=10,Z7=50,e$=0,t$=300,n$=150,Jr=document.createElement("canvas"),i0=Symbol("fallbackResizeHandler"),TM=Symbol("defaultAriaLabel"),ff=Symbol("resizeObserver"),Ko=Symbol("clearModelTimeout"),s0=Symbol("onContextLost"),Jo=Symbol("loaded"),r0=Symbol("status"),a0=Symbol("onFocus"),o0=Symbol("onBlur"),sl=Symbol("updateSize"),pf=Symbol("intersectionObserver"),Ha=Symbol("isElementInViewport"),Kp=Symbol("announceModelVisibility"),Il=Symbol("ariaLabel"),Py=Symbol("altDefaulted"),au=Symbol("statusElement"),Jp=Symbol("updateStatus"),_u=Symbol("loadedTime"),Gl=Symbol("updateSource"),RM=Symbol("markLoaded"),Jf=Symbol("container"),ls=Symbol("input"),Fy=Symbol("canvas"),re=Symbol("scene"),vn=Symbol("needsRender"),Ls=Symbol("tick"),Ps=Symbol("onModelLoad"),Zp=Symbol("onResize"),xt=Symbol("renderer"),xo=Symbol("progressTracker"),BM=Symbol("getLoaded"),yo=Symbol("getModelIsVisible"),fc=Symbol("shouldAttemptPreload"),zr=n=>({x:n.x,y:n.y,z:n.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),ky=n=>({u:n.x,v:n.y,toString(){return`${this.u} ${this.v}`}});class qd extends za{static get is(){return"model-viewer"}static set modelCacheSize(e){Yn[Qr].evictionThreshold=e}static get modelCacheSize(){return Yn[Qr].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),cs.singleton.minScale=e}static get minimumRenderScale(){return cs.singleton.minScale}get loaded(){return this[BM]()}get[(gM=Ha,AM=Jo,xM=_u,yM=r0,vM=Ko,bM=i0,wM=Kp,EM=ff,_M=pf,SM=xo,xt)](){return cs.singleton}get modelIsVisible(){return this[yo]()}constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[gM]=!1,this[AM]=!1,this[xM]=0,this[yM]="",this[vM]=null,this[bM]=h1(()=>{const s=this.getBoundingClientRect();this[sl](s)},Z7),this[wM]=h1(s=>{const r=this.modelIsVisible;r!==s&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:r}}))},e$),this[EM]=null,this[_M]=null,this[SM]=new K7,this[CM]=()=>{this[au].textContent=this[r0]},this[MM]=()=>{this[au].textContent=""},this[IM]=s=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:s.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;DH(e),this[Jf]=e.querySelector(".container"),this[ls]=e.querySelector(".userInput"),this[Fy]=e.querySelector("canvas"),this[au]=e.querySelector("#status"),this[TM]=this[ls].getAttribute("aria-label");let t,i;if(this.isConnected){const s=this.getBoundingClientRect();t=s.width,i=s.height}else t=t$,i=n$;this[re]=new X7({canvas:this[Fy],element:this,width:t,height:i}),Promise.resolve().then(()=>{this[sl](this.getBoundingClientRect())}),cA&&(this[ff]=new ResizeObserver(s=>{if(!this[xt].isPresenting)for(let r of s)r.target===this&&this[sl](r.contentRect)})),uA?this[pf]=new IntersectionObserver(s=>{for(let r of s)if(r.target===this){const a=this.modelIsVisible;this[Ha]=r.isIntersecting,this[Kp](a),this[Ha]&&!this.loaded&&this[Gl]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[Ha]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),cA?this[ff].observe(this):self.addEventListener("resize",this[i0]),uA&&this[pf].observe(this),this.addEventListener("focus",this[a0]),this.addEventListener("blur",this[o0]);const e=this[xt];e.addEventListener("contextlost",this[s0]),e.registerScene(this[re]),this[Ko]!=null&&(self.clearTimeout(this[Ko]),this[Ko]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),cA?this[ff].unobserve(this):self.removeEventListener("resize",this[i0]),uA&&this[pf].unobserve(this),this.removeEventListener("focus",this[a0]),this.removeEventListener("blur",this[o0]);const e=this[xt];e.removeEventListener("contextlost",this[s0]),e.unregisterScene(this[re]),this[Ko]=self.setTimeout(()=>{this[re].dispose(),this[Ko]=null},J7)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[Jo]=!1,this[_u]=0,this[re].reset()):this.src!==this[re].url&&(this[Jo]=!1,this[_u]=0,this[Gl]())),e.has("alt")&&this[ls].setAttribute("aria-label",this[Il]),e.has("generateSchema")&&(this.generateSchema?this[re].updateSchema(this.src):this[re].updateSchema(null))}toDataURL(e,t){return this[xt].displayCanvas(this[re]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:r,height:a,idealAspect:o,aspect:l}=this[re],{dpr:c,scaleFactor:u}=this[xt];let d=r*u*c,f=a*u*c,p=0,g=0;if(s===!0)if(o>l){const x=f;f=Math.round(d/o),g=(x-f)/2}else{const x=d;d=Math.round(f*o),p=(x-d)/2}Jr.width=d,Jr.height=f;try{return new Promise(async(x,A)=>{Jr.getContext("2d").drawImage(this[xt].displayCanvas(this[re]),p,g,d,f,0,0,d,f),Jr.toBlob(m=>{if(!m)return A(new Error("Unable to retrieve canvas blob"));x(m)},t,i)})}finally{this[sl]({width:r,height:a})}}registerEffectComposer(e){e.setRenderer(this[xt].threeRenderer),e.setMainCamera(this[re].getCamera()),e.setMainScene(this[re]),this[re].effectRenderer=e}unregisterEffectComposer(){this[re].effectRenderer=null}registerRenderer(e){this[re].externalRenderer=e}unregisterRenderer(){this[re].externalRenderer=null}get[Il](){return this[Py]}get[Py](){return this.alt==null||this.alt==="null"?this[TM]:this.alt}[BM](){return this[Jo]}[yo](){return this.loaded&&this[Ha]}[fc](){return!!this.src&&this[Ha]}[sl]({width:e,height:t}){e===0||t===0||(this[Jf].style.width=`${e}px`,this[Jf].style.height=`${t}px`,this[Zp]({width:e,height:t}))}[Ls](e,t){var i;(i=this[re].effectRenderer)===null||i===void 0||i.beforeRender(e,t)}[RM](){this[Jo]||(this[Jo]=!0,this[_u]=performance.now())}[vn](){this[re].queueRender()}[Ps](){}[Jp](e){this[r0]=e;const t=this.getRootNode();t!=null&&t.activeElement===this&&this[au].textContent!=e&&(this[au].textContent=e)}[(CM=a0,MM=o0,Zp)](e){this[re].setSize(e.width,e.height)}async[(IM=s0,Gl)](){const e=this[re];if(this.loaded||!this[fc]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[Jp]("Loading"),e.stopAnimation();const t=this[xo].beginActivity("model-load"),i=this.src;try{const s=e.setSource(i,a=>t(Cs(a,0,1)*.95)),r=this[$p]();await Promise.all([s,r]),this[RM](),this[Ps](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(a=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),a()})})})}catch(s){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:s}}))}finally{t(1)}}}Dm([De({type:String})],qd.prototype,"alt",void 0);Dm([De({type:String})],qd.prototype,"src",void 0);Dm([De({type:Boolean,attribute:"with-credentials"})],qd.prototype,"withCredentials",void 0);Dm([De({type:Boolean,attribute:"generate-schema"})],qd.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const NM=1e3,mf=Symbol("changeAnimation"),DM=Symbol("appendAnimation"),LM=Symbol("detachAnimation"),gi=Symbol("paused"),i$={repetitions:1/0,pingpong:!1},s$={pingpong:!1,repetitions:null,weight:1,timeScale:1,fade:!1,warp:!1,relativeWarp:!0,time:null},r$={fade:!0},a$=n=>{var e;class t extends n{constructor(...s){super(s),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[re].subscribeMixerEvent("loop",r=>{const a=r.action._loopCount,o=r.action._clip.name,l=r.action._clip.uuid,c=this[re].markedAnimations.find(u=>u.name===o);if(c){this[re].updateAnimationLoop(c.name,c.loopMode,c.repetitionCount);const u=this[re].markedAnimations.filter(d=>d.name!==o);this[re].markedAnimations=u}this.dispatchEvent(new CustomEvent("loop",{detail:{count:a,name:o,uuid:l}}))}),this[re].subscribeMixerEvent("finished",r=>{if(!this[re].appendedAnimations.includes(r.action._clip.name))this[gi]=!0;else{const a=this[re].appendedAnimations.filter(o=>o!==r.action._clip.name);this[re].appendedAnimations=a}this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[re].animationNames:[]}get duration(){return this[re].duration}get paused(){return this[gi]}get currentTime(){return this[re].animationTime}get appendedAnimations(){return this[re].appendedAnimations}set currentTime(s){this[re].animationTime=s,this[vn]()}get timeScale(){return this[re].animationTimeScale}set timeScale(s){this[re].animationTimeScale=s}pause(){this[gi]||(this[gi]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(s){this.availableAnimations.length>0&&(this[gi]=!1,this[mf](s),this.dispatchEvent(new CustomEvent("play")))}appendAnimation(s,r){this.availableAnimations.length>0&&(this[gi]=!1,this[DM](s,r),this.dispatchEvent(new CustomEvent("append-animation")))}detachAnimation(s,r){this.availableAnimations.length>0&&(this[gi]=!1,this[LM](s,r),this.dispatchEvent(new CustomEvent("detach-animation")))}[(e=gi,Ps)](){super[Ps](),this[gi]=!0,this.animationName!=null&&this[mf](),this.autoplay&&this.play()}[Ls](s,r){super[Ls](s,r),!(this[gi]||!this[yo]()&&!this[xt].isPresenting)&&(this[re].updateAnimation(r/NM),this[vn]())}updated(s){super.updated(s),s.has("autoplay")&&this.autoplay&&this.play(),s.has("animationName")&&this[mf]()}[mf](s=i$){var r;const a=(r=s.repetitions)!==null&&r!==void 0?r:1/0,o=s.pingpong?Op:a===1?wd:Ol;this[re].playAnimation(this.animationName,this.animationCrossfadeDuration/NM,o,a),this[gi]&&(this[re].updateAnimation(0),this[vn]())}[DM](s="",r=s$){var a;const o=(a=r.repetitions)!==null&&a!==void 0?a:1/0,l=r.pingpong?Op:o===1?wd:Ol,c=!!r.repetitions||"pingpong"in r;this[re].appendAnimation(s||this.animationName,l,o,r.weight,r.timeScale,r.fade,r.warp,r.relativeWarp,r.time,c),this[gi]&&(this[re].updateAnimation(0),this[vn]())}[LM](s="",r=r$){this[re].detachAnimation(s||this.animationName,r.fade),this[gi]&&(this[re].updateAnimation(0),this[vn]())}}return l0([De({type:Boolean})],t.prototype,"autoplay",void 0),l0([De({type:String,attribute:"animation-name"})],t.prototype,"animationName",void 0),l0([De({type:Number,attribute:"animation-crossfade-duration"})],t.prototype,"animationCrossfadeDuration",void 0),t};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=Symbol("hotspotMap"),c0=Symbol("mutationCallback"),ou=Symbol("observer"),u0=Symbol("addHotspot"),PM=Symbol("removeHotspot"),d0=new ke,o$=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this[e]=new Map,this[t]=a=>{a.forEach(o=>{(!(o instanceof MutationRecord)||o.type==="childList")&&(o.addedNodes.forEach(l=>{this[u0](l)}),o.removedNodes.forEach(l=>{this[PM](l)}),this[vn]())})},this[i]=new MutationObserver(this[c0])}connectedCallback(){super.connectedCallback();for(let o=0;o<this.children.length;++o)this[u0](this.children[o]);const{ShadyDOM:a}=self;a==null?this[ou].observe(this,{childList:!0}):this[ou]=a.observeChildren(this,this[c0])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:a}=self;a==null?this[ou].disconnect():a.unobserveChildren(this[ou])}[(e=Da,t=c0,i=ou,Ps)](){super[Ps]();const a=this[re];a.forHotspots(o=>{a.updateSurfaceHotspot(o)})}[Ls](a,o){super[Ls](a,o);const l=this[re],{annotationRenderer:c}=l,u=l.getCamera();l.shouldRender()&&(l.animateSurfaceHotspots(),l.updateHotspotsVisibility(u.position),c.domElement.style.display="",c.render(l,u))}updateHotspot(a){const o=this[Da].get(a.name);o!=null&&(o.updatePosition(a.position),o.updateNormal(a.normal),o.surface=a.surface,this[re].updateSurfaceHotspot(o),this[vn]())}queryHotspot(a){const o=this[Da].get(a);if(o==null)return null;const l=zr(o.position),c=zr(o.normal),u=o.facingCamera,d=this[re],f=d.getCamera(),p=new P;p.setFromMatrixPosition(o.matrixWorld),p.project(f);const g=d.width/2,x=d.height/2;p.x=p.x*g+g,p.y=-(p.y*x)+x;const A=zr(new P(p.x,p.y,p.z));return!Number.isFinite(A.x)||!Number.isFinite(A.y)?null:{position:l,normal:c,canvasPosition:A,facingCamera:u}}positionAndNormalFromPoint(a,o){const l=this[re],c=l.getNDC(a,o),u=l.positionAndNormalFromPoint(c);if(u==null)return null;d0.copy(l.target.matrixWorld).invert();const d=zr(u.position.applyMatrix4(d0)),f=zr(u.normal.transformDirection(d0));let p=null;return u.uv!=null&&(p=ky(u.uv)),{position:d,normal:f,uv:p}}surfaceFromPoint(a,o){const l=this[re],c=l.getNDC(a,o);return l.surfaceFromPoint(c)}[u0](a){if(!(a instanceof HTMLElement&&a.slot.indexOf("hotspot")===0))return;let o=this[Da].get(a.slot);o!=null?o.increment():(o=new mD({name:a.slot,position:a.dataset.position,normal:a.dataset.normal,surface:a.dataset.surface}),this[Da].set(a.slot,o),this[re].addHotspot(o)),this[re].queueRender()}[PM](a){if(!(a instanceof HTMLElement))return;const o=this[Da].get(a.slot);o&&(o.decrement()&&(this[re].removeHotspot(o),this[Da].delete(a.slot)),this[re].queueRender())}}return s};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var jn=Uint8Array,bi=Uint16Array,Xb=Int32Array,Kb=new jn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jb=new jn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),FM=new jn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gD=function(n,e){for(var t=new bi(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new Xb(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return{b:t,r:s}},AD=gD(Kb,2),l$=AD.b,Uy=AD.r;l$[28]=258,Uy[258]=28;var c$=gD(Jb,0),kM=c$.r,Oy=new bi(32768);for(var Dt=0;Dt<32768;++Dt){var Pr=(Dt&43690)>>1|(Dt&21845)<<1;Pr=(Pr&52428)>>2|(Pr&13107)<<2,Pr=(Pr&61680)>>4|(Pr&3855)<<4,Oy[Dt]=((Pr&65280)>>8|(Pr&255)<<8)>>1}var $u=function(n,e,t){for(var i=n.length,s=0,r=new bi(e);s<i;++s)n[s]&&++r[n[s]-1];var a=new bi(e);for(s=1;s<e;++s)a[s]=a[s-1]+r[s-1]<<1;var o;if(t){o=new bi(1<<e);var l=15-e;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],u=e-n[s],d=a[n[s]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[Oy[d]>>l]=c}else for(o=new bi(i),s=0;s<i;++s)n[s]&&(o[s]=Oy[a[n[s]-1]++]>>15-n[s]);return o},vo=new jn(288);for(var Dt=0;Dt<144;++Dt)vo[Dt]=8;for(var Dt=144;Dt<256;++Dt)vo[Dt]=9;for(var Dt=256;Dt<280;++Dt)vo[Dt]=7;for(var Dt=280;Dt<288;++Dt)vo[Dt]=8;var em=new jn(32);for(var Dt=0;Dt<32;++Dt)em[Dt]=5;var u$=$u(vo,9,0),d$=$u(em,5,0),xD=function(n){return(n+7)/8|0},yD=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new jn(n.subarray(e,t))},h$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Lm=function(n,e,t){var i=new Error(e||h$[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Lm),!t)throw i;return i},er=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},lu=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},h0=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var s=t.length,r=t.slice();if(!s)return{t:bD,l:0};if(s==1){var a=new jn(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(w,S){return w.f-S.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=s-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=r[0].s,i=1;i<s;++i)r[i].s>f&&(f=r[i].s);var p=new bi(f+1),g=Qy(t[u-1],p,0);if(g>e){var i=0,x=0,A=g-e,m=1<<A;for(r.sort(function(S,C){return p[C.s]-p[S.s]||S.f-C.f});i<s;++i){var y=r[i].s;if(p[y]>e)x+=m-(1<<g-p[y]),p[y]=e;else break}for(x>>=A;x>0;){var v=r[i].s;p[v]<e?x-=1<<e-p[v]++-1:++i}for(;i>=0&&x;--i){var b=r[i].s;p[b]==e&&(--p[b],++x)}g=e}return{t:new jn(p),l:g}},Qy=function(n,e,t){return n.s==-1?Math.max(Qy(n.l,e,t+1),Qy(n.r,e,t+1)):e[n.s]=t},UM=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new bi(++e),i=0,s=n[0],r=1,a=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==s&&o!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(s),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(s);r=1,s=n[o]}return{c:t.subarray(0,i),n:e}},cu=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},vD=function(n,e,t){var i=t.length,s=xD(e+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var r=0;r<i;++r)n[s+r+4]=t[r];return(s+4+i)*8},OM=function(n,e,t,i,s,r,a,o,l,c,u){er(e,u++,t),++s[256];for(var d=h0(s,15),f=d.t,p=d.l,g=h0(r,15),x=g.t,A=g.l,m=UM(f),y=m.c,v=m.n,b=UM(x),w=b.c,S=b.n,C=new bi(19),M=0;M<y.length;++M)++C[y[M]&31];for(var M=0;M<w.length;++M)++C[w[M]&31];for(var _=h0(C,7),E=_.t,R=_.l,L=19;L>4&&!E[FM[L-1]];--L);var F=c+5<<3,U=cu(s,vo)+cu(r,em)+a,z=cu(s,f)+cu(r,x)+a+14+3*L+cu(C,E)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&F<=U&&F<=z)return vD(e,u,n.subarray(l,l+c));var V,G,D,W;if(er(e,u,1+(z<U)),u+=2,z<U){V=$u(f,p,0),G=f,D=$u(x,A,0),W=x;var K=$u(E,R,0);er(e,u,v-257),er(e,u+5,S-1),er(e,u+10,L-4),u+=14;for(var M=0;M<L;++M)er(e,u+3*M,E[FM[M]]);u+=3*L;for(var ee=[y,w],Q=0;Q<2;++Q)for(var ae=ee[Q],M=0;M<ae.length;++M){var $=ae[M]&31;er(e,u,K[$]),u+=E[$],$>15&&(er(e,u,ae[M]>>5&127),u+=ae[M]>>12)}}else V=u$,G=vo,D=d$,W=em;for(var M=0;M<o;++M){var te=i[M];if(te>255){var $=te>>18&31;lu(e,u,V[$+257]),u+=G[$+257],$>7&&(er(e,u,te>>23&31),u+=Kb[$]);var de=te&31;lu(e,u,D[de]),u+=W[de],de>3&&(lu(e,u,te>>5&8191),u+=Jb[de])}else lu(e,u,V[te]),u+=G[te]}return lu(e,u,V[256]),u+G[256]},f$=new Xb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bD=new jn(0),p$=function(n,e,t,i,s,r){var a=r.z||n.length,o=new jn(i+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(i,o.length-s),c=r.l,u=(r.r||0)&7;if(e){u&&(l[0]=r.r>>3);for(var d=f$[e-1],f=d>>13,p=d&8191,g=(1<<t)-1,x=r.p||new bi(32768),A=r.h||new bi(g+1),m=Math.ceil(t/3),y=2*m,v=function(k){return(n[k]^n[k+1]<<m^n[k+2]<<y)&g},b=new Xb(25e3),w=new bi(288),S=new bi(32),C=0,M=0,_=r.i||0,E=0,R=r.w||0,L=0;_+2<a;++_){var F=v(_),U=_&32767,z=A[F];if(x[U]=z,A[F]=U,R<=_){var V=a-_;if((C>7e3||E>24576)&&(V>423||!c)){u=OM(n,l,0,b,w,S,M,E,L,_-L,u),E=C=M=0,L=_;for(var G=0;G<286;++G)w[G]=0;for(var G=0;G<30;++G)S[G]=0}var D=2,W=0,K=p,ee=U-z&32767;if(V>2&&F==v(_-ee))for(var Q=Math.min(f,V)-1,ae=Math.min(32767,_),$=Math.min(258,V);ee<=ae&&--K&&U!=z;){if(n[_+D]==n[_+D-ee]){for(var te=0;te<$&&n[_+te]==n[_+te-ee];++te);if(te>D){if(D=te,W=ee,te>Q)break;for(var de=Math.min(ee,te-2),ue=0,G=0;G<de;++G){var Re=_-ee+G&32767,Ue=x[Re],ze=Re-Ue&32767;ze>ue&&(ue=ze,z=Re)}}}U=z,z=x[U],ee+=U-z&32767}if(W){b[E++]=268435456|Uy[D]<<18|kM[W];var Et=Uy[D]&31,et=kM[W]&31;M+=Kb[Et]+Jb[et],++w[257+Et],++S[et],R=_+D,++C}else b[E++]=n[_],++w[n[_]]}}for(_=Math.max(_,R);_<a;++_)b[E++]=n[_],++w[n[_]];u=OM(n,l,c,b,w,S,M,E,L,_-L,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=A,r.p=x,r.i=_,r.w=R)}else{for(var _=r.w||0;_<a+c;_+=65535){var Tt=_+65535;Tt>=a&&(l[u/8|0]=c,Tt=a),u=vD(l,u+1,n.subarray(_,Tt))}r.i=a}return yD(o,0,i+xD(u)+s)},m$=function(){for(var n=new Int32Array(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&-306674912)^t>>>1;n[e]=t}return n}(),g$=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=m$[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},A$=function(n,e,t,i,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),a=new jn(r.length+n.length);a.set(r),a.set(n,r.length),n=a,s.w=r.length}return p$(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,s)},wD=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},_n=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};function x$(n,e){return A$(n,e||{},0,0)}var ED=function(n,e,t,i){for(var s in n){var r=n[s],a=e+s,o=i;Array.isArray(r)&&(o=wD(i,r[1]),r=r[0]),r instanceof jn?t[a]=[r,o]:(t[a+="/"]=[new jn(0),o],ED(r,a,t,i))}},QM=typeof TextEncoder<"u"&&new TextEncoder,y$=typeof TextDecoder<"u"&&new TextDecoder,v$=0;try{y$.decode(bD,{stream:!0}),v$=1}catch{}function tm(n,e){var t;if(QM)return QM.encode(n);for(var i=n.length,s=new jn(n.length+(n.length>>1)),r=0,a=function(c){s[r++]=c},t=0;t<i;++t){if(r+5>s.length){var o=new jn(r+8+(i-t<<1));o.set(s),s=o}var l=n.charCodeAt(t);l<128||e?a(l):l<2048?(a(192|l>>6),a(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|n.charCodeAt(++t)&1023,a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63)):(a(224|l>>12),a(128|l>>6&63),a(128|l&63))}return yD(s,0,r)}var jy=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;i>65535&&Lm(9),e+=i+4}return e},jM=function(n,e,t,i,s,r,a,o){var l=i.length,c=t.extra,u=o&&o.length,d=jy(c);_n(n,e,a!=null?33639248:67324752),e+=4,a!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(r<0&&8),n[e++]=s&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),p=f.getFullYear()-1980;if((p<0||p>119)&&Lm(10),_n(n,e,p<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),e+=4,r!=-1&&(_n(n,e,t.crc),_n(n,e+4,r<0?-r-2:r),_n(n,e+8,t.size)),_n(n,e+12,l),_n(n,e+14,d),e+=16,a!=null&&(_n(n,e,u),_n(n,e+6,t.attrs),_n(n,e+10,a),e+=14),n.set(i,e),e+=l,d)for(var g in c){var x=c[g],A=x.length;_n(n,e,+g),_n(n,e+2,A),n.set(x,e+4),e+=4+A}return u&&(n.set(o,e),e+=u),e},b$=function(n,e,t,i,s){_n(n,e,101010256),_n(n,e+8,t),_n(n,e+10,t),_n(n,e+12,i),_n(n,e+16,s)};function w$(n,e){e||(e={});var t={},i=[];ED(n,"",t,e);var s=0,r=0;for(var a in t){var o=t[a],l=o[0],c=o[1],u=c.level==0?0:8,d=tm(a),f=d.length,p=c.comment,g=p&&tm(p),x=g&&g.length,A=jy(c.extra);f>65535&&Lm(11);var m=u?x$(l,c):l,y=m.length,v=g$();v.p(l),i.push(wD(c,{size:l.length,crc:v.d(),c:m,f:d,m:g,u:f!=a.length||g&&p.length!=x,o:s,compression:u})),s+=30+f+A+y,r+=76+2*(f+A)+(x||0)+y}for(var b=new jn(r+22),w=s,S=r-s,C=0;C<i.length;++C){var d=i[C];jM(b,d.o,d,d.f,d.u,d.c.length);var M=30+d.f.length+jy(d.extra);b.set(d.c,d.o+M),jM(b,s,d,d.f,d.u,d.c.length,d.o,d.m),s+=16+M+(d.m?d.m.length:0)}return b$(b,s,i.length,S,w),b}class E${constructor(){this.textureUtils=null}setTextureUtils(e){this.textureUtils=e}parse(e,t,i,s){this.parseAsync(e,s).then(t).catch(i)}async parseAsync(e,t={}){t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},t);const i={},s="model.usda";i[s]=null;let r=_D();r+=S$(t);const a={},o={};e.traverseVisible(c=>{if(c.isMesh){const u=c.geometry,d=c.material;if(d.isMeshStandardMaterial){const f="geometries/Geometry_"+u.id+".usda";if(!(f in i)){const p=T$(u);i[f]=M$(p)}d.uuid in a||(a[d.uuid]=d),r+=I$(c,u,d)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",c)}else c.isCamera&&(r+=U$(c))}),r+=C$(),r+=P$(a,o,t.quickLookCompatible),i[s]=tm(r),r=null;for(const c in o){let u=o[c];if(u.isCompressedTexture===!0){if(this.textureUtils===null)throw new Error("THREE.USDZExporter: setTextureUtils() must be called to process compressed textures.");u=await this.textureUtils.decompress(u)}const d=_$(u.image,u.flipY,t.maxTextureSize),f=await new Promise(p=>d.toBlob(p,"image/png",1));i[`textures/Texture_${c}.png`]=new Uint8Array(await f.arrayBuffer())}let l=0;for(const c in i){const u=i[c],d=34+c.length;l+=d;const f=l&63;if(f!==4){const p=64-f,g=new Uint8Array(p);i[c]=[u,{extra:{12345:g}}]}l=u.length}return w$(i,{level:0})}}function _$(n,e,t){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const i=t/Math.max(n.width,n.height),s=document.createElement("canvas");s.width=n.width*Math.min(1,i),s.height=n.height*Math.min(1,i);const r=s.getContext("2d");return e===!0&&(r.translate(0,s.height),r.scale(1,-1)),r.drawImage(n,0,0,s.width,s.height),s}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Fn=7;function _D(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`}function S$(n){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{${n.includeAnchoringProperties===!0?`
		token preliminary:anchoring:type = "${n.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${n.ar.planeAnchoring.alignment}"
	`:""}
`}function C$(){return`
		}
	}
}

`}function M$(n){let e=_D();return e+=n,tm(e)}function I$(n,e,t){const i="Object_"+n.id,s=SD(n.matrixWorld);return n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),`def Xform "${i}" (
	prepend references = @./geometries/Geometry_${e.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${s}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${t.id}>
}

`}function SD(n){const e=n.elements;return`( ${gf(e,0)}, ${gf(e,4)}, ${gf(e,8)}, ${gf(e,12)} )`}function gf(n,e){return`(${n[e+0]}, ${n[e+1]}, ${n[e+2]}, ${n[e+3]})`}function T$(n){return`
def "Geometry"
{
${R$(n)}
}
`}function R$(n){const e="Geometry",t=n.attributes,i=t.position.count;return`
	def Mesh "${e}"
	{
		int[] faceVertexCounts = [${B$(n)}]
		int[] faceVertexIndices = [${N$(n)}]
		normal3f[] normals = [${Vy(t.normal,i)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${Vy(t.position,i)}]
${L$(t)}
		uniform token subdivisionScheme = "none"
	}
`}function B$(n){const e=n.index!==null?n.index.count:n.attributes.position.count;return Array(e/3).fill(3).join(", ")}function N$(n){const e=n.index,t=[];if(e!==null)for(let i=0;i<e.count;i++)t.push(e.getX(i));else{const i=n.attributes.position.count;for(let s=0;s<i;s++)t.push(s)}return t.join(", ")}function Vy(n,e){if(n===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const t=[];for(let i=0;i<n.count;i++){const s=n.getX(i),r=n.getY(i),a=n.getZ(i);t.push(`(${s.toPrecision(Fn)}, ${r.toPrecision(Fn)}, ${a.toPrecision(Fn)})`)}return t.join(", ")}function D$(n){const e=[];for(let t=0;t<n.count;t++){const i=n.getX(t),s=n.getY(t);e.push(`(${i.toPrecision(Fn)}, ${1-s.toPrecision(Fn)})`)}return e.join(", ")}function L$(n){let e="";for(let i=0;i<4;i++){const s=i>0?i:"",r=n["uv"+s];r!==void 0&&(e+=`
		texCoord2f[] primvars:st${s} = [${D$(r)}] (
			interpolation = "vertex"
		)`)}const t=n.color;if(t!==void 0){const i=t.count;e+=`
	color3f[] primvars:displayColor = [${Vy(t,i)}] (
		interpolation = "vertex"
		)`}return e}function P$(n,e,t=!1){const i=[];for(const s in n){const r=n[s];i.push(F$(r,e,t))}return`def "Materials"
{
${i.join("")}
}

`}function F$(n,e,t=!1){const i="			",s=[],r=[];function a(o,l,c){const u=o.source.id+"_"+o.flipY;e[u]=o;const d=o.channel>0?"st"+o.channel:"st",f={1e3:"repeat",1001:"clamp",1002:"mirror"},p=o.repeat.clone(),g=o.offset.clone(),x=o.rotation,A=Math.sin(x),m=Math.cos(x);return g.y=1-g.y-p.y,t?(g.x=g.x/p.x,g.y=g.y/p.y,g.x+=A/p.x,g.y+=m-1):(g.x+=A*p.x,g.y+=(1-m)*p.y),`
		def Shader "PrimvarReader_${l}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${d}"
			float2 outputs:result
		}

		def Shader "Transform2d_${l}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${n.id}/PrimvarReader_${l}.outputs:result>
			float inputs:rotation = ${(x*(180/Math.PI)).toFixed(Fn)}
			float2 inputs:scale = ${GM(p)}
			float2 inputs:translation = ${GM(g)}
			float2 outputs:result
		}

		def Shader "Texture_${o.id}_${l}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${u}.png@
			float2 inputs:st.connect = </Materials/Material_${n.id}/Transform2d_${l}.outputs:result>
			${c!==void 0?"float4 inputs:scale = "+k$(c):""}
			token inputs:sourceColorSpace = "${o.colorSpace===Ui?"raw":"sRGB"}"
			token inputs:wrapS = "${f[o.wrapS]}"
			token inputs:wrapT = "${f[o.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${n.transparent||n.alphaTest>0?"float outputs:a":""}
		}`}return n.side===yn&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",n),n.map!==null?(s.push(`${i}color3f inputs:diffuseColor.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:rgb>`),n.transparent?s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:a>`):n.alphaTest>0&&(s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:a>`),s.push(`${i}float inputs:opacityThreshold = ${n.alphaTest}`)),r.push(a(n.map,"diffuse",n.color))):s.push(`${i}color3f inputs:diffuseColor = ${VM(n.color)}`),n.emissiveMap!==null?(s.push(`${i}color3f inputs:emissiveColor.connect = </Materials/Material_${n.id}/Texture_${n.emissiveMap.id}_emissive.outputs:rgb>`),r.push(a(n.emissiveMap,"emissive",new Te(n.emissive.r*n.emissiveIntensity,n.emissive.g*n.emissiveIntensity,n.emissive.b*n.emissiveIntensity)))):n.emissive.getHex()>0&&s.push(`${i}color3f inputs:emissiveColor = ${VM(n.emissive)}`),n.normalMap!==null&&(s.push(`${i}normal3f inputs:normal.connect = </Materials/Material_${n.id}/Texture_${n.normalMap.id}_normal.outputs:rgb>`),r.push(a(n.normalMap,"normal"))),n.aoMap!==null&&(s.push(`${i}float inputs:occlusion.connect = </Materials/Material_${n.id}/Texture_${n.aoMap.id}_occlusion.outputs:r>`),r.push(a(n.aoMap,"occlusion",new Te(n.aoMapIntensity,n.aoMapIntensity,n.aoMapIntensity)))),n.roughnessMap!==null?(s.push(`${i}float inputs:roughness.connect = </Materials/Material_${n.id}/Texture_${n.roughnessMap.id}_roughness.outputs:g>`),r.push(a(n.roughnessMap,"roughness",new Te(n.roughness,n.roughness,n.roughness)))):s.push(`${i}float inputs:roughness = ${n.roughness}`),n.metalnessMap!==null?(s.push(`${i}float inputs:metallic.connect = </Materials/Material_${n.id}/Texture_${n.metalnessMap.id}_metallic.outputs:b>`),r.push(a(n.metalnessMap,"metallic",new Te(n.metalness,n.metalness,n.metalness)))):s.push(`${i}float inputs:metallic = ${n.metalness}`),n.alphaMap!==null?(s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.alphaMap.id}_opacity.outputs:r>`),s.push(`${i}float inputs:opacityThreshold = 0.0001`),r.push(a(n.alphaMap,"opacity"))):s.push(`${i}float inputs:opacity = ${n.opacity}`),n.isMeshPhysicalMaterial&&(n.clearcoatMap!==null?(s.push(`${i}float inputs:clearcoat.connect = </Materials/Material_${n.id}/Texture_${n.clearcoatMap.id}_clearcoat.outputs:r>`),r.push(a(n.clearcoatMap,"clearcoat",new Te(n.clearcoat,n.clearcoat,n.clearcoat)))):s.push(`${i}float inputs:clearcoat = ${n.clearcoat}`),n.clearcoatRoughnessMap!==null?(s.push(`${i}float inputs:clearcoatRoughness.connect = </Materials/Material_${n.id}/Texture_${n.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),r.push(a(n.clearcoatRoughnessMap,"clearcoatRoughness",new Te(n.clearcoatRoughness,n.clearcoatRoughness,n.clearcoatRoughness)))):s.push(`${i}float inputs:clearcoatRoughness = ${n.clearcoatRoughness}`),s.push(`${i}float inputs:ior = ${n.ior}`)),`
	def Material "Material_${n.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${s.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${n.id}/PreviewSurface.outputs:surface>

${r.join(`
`)}

	}
`}function VM(n){return`(${n.r}, ${n.g}, ${n.b})`}function k$(n){return`(${n.r}, ${n.g}, ${n.b}, 1.0)`}function GM(n){return`(${n.x}, ${n.y})`}function U$(n){const e=n.name?n.name:"Camera_"+n.id,t=SD(n.matrixWorld);return n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),n.isOrthographicCamera?`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${n.near.toPrecision(Fn)}, ${n.far.toPrecision(Fn)})
			float horizontalAperture = ${((Math.abs(n.left)+Math.abs(n.right))*10).toPrecision(Fn)}
			float verticalAperture = ${((Math.abs(n.top)+Math.abs(n.bottom))*10).toPrecision(Fn)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${n.near.toPrecision(Fn)}, ${n.far.toPrecision(Fn)})
			float focalLength = ${n.getFocalLength().toPrecision(Fn)}
			float focusDistance = ${n.focus.toPrecision(Fn)}
			float horizontalAperture = ${n.getFilmWidth().toPrecision(Fn)}
			token projection = "perspective"
			float verticalAperture = ${n.getFilmHeight().toPrecision(Fn)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$=n=>e=>{try{const t=dr(e),i=(t.length?t[0].terms:[]).filter(s=>s&&s.type==="ident").map(s=>s.value).filter(s=>n.indexOf(s)>-1);return new Set(i)}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var La=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let HM=!1,zM=!1;const WM="#model-viewer-no-ar-fallback",Q$=O$(["quick-look","scene-viewer","webxr","none"]),j$="webxr scene-viewer quick-look",Di={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},tr=Symbol("arButtonContainer"),$M=Symbol("enterARWithWebXR"),qM=Symbol("openSceneViewer"),YM=Symbol("openIOSARQuickLook"),V$=Symbol("canActivateAR"),Af=Symbol("arMode"),f0=Symbol("arModes"),Zo=Symbol("arAnchor"),xf=Symbol("preload"),yf=Symbol("onARButtonContainerClick"),p0=Symbol("onARStatus"),m0=Symbol("onARTracking"),g0=Symbol("onARTap"),uu=Symbol("selectARMode"),A0=Symbol("triggerLoad"),G$=n=>{var e,t,i,s,r,a,o,l,c,u;class d extends n{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arUsdzMaxTextureSize="auto",this.arPlacement="floor",this.arModes=j$,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[t]=this.shadowRoot.querySelector(".ar-button"),this[i]=document.createElement("a"),this[s]=new Set,this[r]=Di.NONE,this[a]=!1,this[o]=p=>{p.preventDefault(),this.activateAR()},this[l]=({status:p})=>{(p===Hr.NOT_PRESENTING||this[xt].arRenderer.presentedScene===this[re])&&(this.setAttribute("ar-status",p),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:p}})),p===Hr.NOT_PRESENTING?this.removeAttribute("ar-tracking"):p===Hr.SESSION_STARTED&&this.setAttribute("ar-tracking",Ry.TRACKING))},this[c]=({status:p})=>{this.setAttribute("ar-tracking",p),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:p}}))},this[u]=p=>{p.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[Af]!==Di.NONE}connectedCallback(){super.connectedCallback(),this[xt].arRenderer.addEventListener("status",this[p0]),this.setAttribute("ar-status",Hr.NOT_PRESENTING),this[xt].arRenderer.addEventListener("tracking",this[m0]),this[Zo].addEventListener("message",this[g0])}disconnectedCallback(){super.disconnectedCallback(),this[xt].arRenderer.removeEventListener("status",this[p0]),this[xt].arRenderer.removeEventListener("tracking",this[m0]),this[Zo].removeEventListener("message",this[g0])}update(p){super.update(p),p.has("arScale")&&(this[re].canScale=this.arScale!=="fixed"),p.has("arPlacement")&&(this[re].updateShadow(),this[vn]()),p.has("arModes")&&(this[f0]=Q$(this.arModes)),(p.has("ar")||p.has("arModes")||p.has("src")||p.has("iosSrc")||p.has("arUsdzMaxTextureSize"))&&this[uu]()}async activateAR(){switch(this[Af]){case Di.QUICK_LOOK:await this[YM]();break;case Di.WEBXR:await this[$M]();break;case Di.SCENE_VIEWER:this[qM]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(e=V$,t=tr,i=Zo,s=f0,r=Af,a=xf,o=yf,l=p0,c=m0,u=g0,uu)](){var p;let g=Di.NONE;if(this.ar){if(this.src!=null)for(const x of this[f0]){if(x==="webxr"&&gN&&!HM&&await this[xt].arRenderer.supportsPresentation()){g=Di.WEBXR;break}if(x==="scene-viewer"&&!zM&&(xH||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((p=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||p===void 0)&&p.includes("XR")))){g=Di.SCENE_VIEWER;break}if(x==="quick-look"&&u1){g=Di.QUICK_LOOK;break}}g===Di.NONE&&this.iosSrc!=null&&u1&&(g=Di.QUICK_LOOK)}if(g!==Di.NONE)this[tr].classList.add("enabled"),this[tr].addEventListener("click",this[yf]);else if(this[tr].classList.contains("enabled")){this[tr].removeEventListener("click",this[yf]),this[tr].classList.remove("enabled");const x=Hr.FAILED;this.setAttribute("ar-status",x),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:x}}))}this[Af]=g}async[$M](){console.log("Attempting to present in AR with WebXR..."),await this[A0]();try{this[tr].removeEventListener("click",this[yf]);const{arRenderer:p}=this[xt];p.placeOnWall=this.arPlacement==="wall",await p.present(this[re],this.xrEnvironment)}catch(p){console.warn("Error while trying to present in AR with WebXR"),console.error(p),await this[xt].arRenderer.stopPresenting(),HM=!0,console.warn("Falling back to next ar-mode"),await this[uu](),this.activateAR()}finally{this[uu]()}}async[A0](){this.loaded||(this[xf]=!0,this[Gl](),await EH(this,"load"),this[xf]=!1)}[fc](){return super[fc]()||this[xf]}[qM](){const p=self.location.toString(),g=new URL(p),x=new URL(this.src,p);x.hash&&(x.hash="");const A=new URLSearchParams(x.search);if(g.hash=WM,A.set("mode","ar_preferred"),A.has("disable_occlusion")||A.set("disable_occlusion","true"),this.arScale==="fixed"&&A.set("resizable","false"),this.arPlacement==="wall"&&A.set("enable_vertical_placement","true"),A.has("sound")){const v=new URL(A.get("sound"),p);A.set("sound",v.toString())}if(A.has("link")){const v=new URL(A.get("link"),p);A.set("link",v.toString())}const m=`intent://arvr.google.com/scene-viewer/1.2?${A.toString()+"&file="+encodeURIComponent(x.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(g.toString())};end;`,y=()=>{self.location.hash===WM&&(zM=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[uu]())};self.addEventListener("hashchange",y,{once:!0}),this[Zo].setAttribute("href",m),console.log("Attempting to present in AR with Scene Viewer..."),this[Zo].click()}async[YM](){const p=!this.iosSrc;this[tr].classList.remove("enabled");const g=p?await this.prepareUSDZ():this.iosSrc,x=new URL(g,self.location.toString());if(p){const y=self.location.toString(),v=new URL(y),b=new URL(this.src,v);b.hash&&(x.hash=b.hash)}this.arScale==="fixed"&&(x.hash&&(x.hash+="&"),x.hash+="allowsContentScaling=0");const A=this[Zo];A.setAttribute("rel","ar");const m=document.createElement("img");A.appendChild(m),A.setAttribute("href",x.toString()),p&&A.setAttribute("download","model.usdz"),A.style.display="none",A.isConnected||this.shadowRoot.appendChild(A),console.log("Attempting to present in AR with Quick Look..."),A.click(),A.removeChild(m),p&&URL.revokeObjectURL(g),this[tr].classList.add("enabled")}async prepareUSDZ(){const p=this[xo].beginActivity("usdz-conversion");await this[A0]();const{model:g,shadow:x,target:A}=this[re];if(g==null)return"";let m=!1;x!=null&&(m=x.visible,x.visible=!1),p(.2);const y=new E$;A.remove(g),g.position.copy(A.position),g.updateWorldMatrix(!1,!0);const v=await y.parseAsync(g,{maxTextureSize:isNaN(this.arUsdzMaxTextureSize)?1/0:Math.max(parseInt(this.arUsdzMaxTextureSize),16)});g.position.set(0,0,0),A.add(g);const b=new Blob([v],{type:"model/vnd.usdz+zip"}),w=URL.createObjectURL(b);return p(1),x!=null&&(x.visible=m),w}}return La([De({type:Boolean,attribute:"ar"})],d.prototype,"ar",void 0),La([De({type:String,attribute:"ar-scale"})],d.prototype,"arScale",void 0),La([De({type:String,attribute:"ar-usdz-max-texture-size"})],d.prototype,"arUsdzMaxTextureSize",void 0),La([De({type:String,attribute:"ar-placement"})],d.prototype,"arPlacement",void 0),La([De({type:String,attribute:"ar-modes"})],d.prototype,"arModes",void 0),La([De({type:String,attribute:"ios-src"})],d.prototype,"iosSrc",void 0),La([De({type:Boolean,attribute:"xr-environment"})],d.prototype,"xrEnvironment",void 0),d};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const H$=100,z$="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",W$="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",$$="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",y0={AUTO:"auto",MANUAL:"manual"},XM={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},el=Symbol("defaultProgressBarElement"),v0=Symbol("posterContainerElement"),tl=Symbol("defaultPosterElement"),du=Symbol("shouldDismissPoster"),b0=Symbol("hidePoster"),vf=Symbol("modelIsRevealed"),w0=Symbol("updateProgressBar"),q$=Symbol("ariaLabelCallToAction"),E0=Symbol("onProgress"),Y$=n=>{var e,t,i,s,r,a,o,l;class c extends n{static set dracoDecoderLocation(d){Yn.setDRACODecoderLocation(d)}static get dracoDecoderLocation(){return Yn.getDRACODecoderLocation()}static set ktx2TranscoderLocation(d){Yn.setKTX2TranscoderLocation(d)}static get ktx2TranscoderLocation(){return Yn.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(d){Yn.setMeshoptDecoderLocation(d)}static get meshoptDecoderLocation(){return Yn.getMeshoptDecoderLocation()}static set lottieLoaderLocation(d){cs.singleton.textureUtils.lottieLoaderUrl=d}static get lottieLoaderLocation(){return cs.singleton.textureUtils.lottieLoaderUrl}static mapURLs(d){cs.singleton.loader[Qa].manager.setURLModifier(d)}dismissPoster(){this.loaded?this[b0]():(this[du]=!0,this[Gl]())}showPoster(){const d=this[v0];if(d.classList.contains("show"))return;d.classList.add("show"),this[ls].classList.remove("show");const f=this[tl];f.removeAttribute("tabindex"),f.removeAttribute("aria-hidden");const p=this.modelIsVisible;this[vf]=!1,this[Kp](p)}getDimensions(){return zr(this[re].size)}getBoundingBoxCenter(){return zr(this[re].boundingBox.getCenter(new P))}constructor(...d){super(...d),this.poster=null,this.reveal=y0.AUTO,this.loading=XM.AUTO,this[e]=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".slot.poster"),this[s]=this.shadowRoot.querySelector("#default-poster"),this[r]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[a]=this[tl].getAttribute("aria-label"),this[o]=bH(A=>{const m=this[el].parentNode;requestAnimationFrame(()=>{this[el].style.transform=`scaleX(${A})`,A===0&&(m.removeChild(this[el]),m.appendChild(this[el])),this[el].classList.toggle("hide",A===1)})},H$),this[l]=A=>{const m=A.detail.totalProgress,y=A.detail.reason;m===1&&(this[w0].flush(),this.loaded&&(this[du]||this.reveal===y0.AUTO)&&this[b0]()),this[w0](m),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:m,reason:y}}))};const f=self.ModelViewerElement||{},p=f.dracoDecoderLocation||z$;Yn.setDRACODecoderLocation(p);const g=f.ktx2TranscoderLocation||W$;Yn.setKTX2TranscoderLocation(g),f.meshoptDecoderLocation&&Yn.setMeshoptDecoderLocation(f.meshoptDecoderLocation);const x=f.lottieLoaderLocation||$$;cs.singleton.textureUtils.lottieLoaderUrl=x}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[xo].addEventListener("progress",this[E0])}disconnectedCallback(){super.disconnectedCallback(),this[xo].removeEventListener("progress",this[E0])}async updated(d){super.updated(d),d.has("poster")&&this.poster!=null&&(this[tl].style.backgroundImage=`url(${this.poster})`),d.has("alt")&&this[tl].setAttribute("aria-label",this[Py]),(d.has("reveal")||d.has("loading"))&&this[Gl]()}[(e=vf,t=du,i=v0,s=tl,r=el,a=q$,o=w0,l=E0,fc)](){return!!this.src&&(this[du]||this.loading===XM.EAGER||this.reveal===y0.AUTO&&this[Ha])}[b0](){this[du]=!1;const d=this[v0];if(!d.classList.contains("show"))return;d.classList.remove("show"),this[ls].classList.add("show");const f=this.modelIsVisible;this[vf]=!0,this[Kp](f);const p=this.getRootNode();p&&p.activeElement===this&&this[ls].focus();const g=this[tl];g.setAttribute("aria-hidden","true"),g.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[yo](){return super[yo]()&&this[vf]}}return x0([De({type:String})],c.prototype,"poster",void 0),x0([De({type:String})],c.prototype,"reveal",void 0),x0([De({type:String})],c.prototype,"loading",void 0),c};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _0=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var o=n.length-1;o>=0;o--)(a=n[o])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const X$=Math.PI/32,K$=3e3,J$={basis:[Nm(On(X$,"rad"))],keywords:{auto:[null]}},nl=Symbol("autoRotateStartTime"),S0=Symbol("radiansPerSecond"),KM=Symbol("syncRotationRate"),C0=Symbol("onCameraChange"),Z$=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=K$,this.rotationPerSecond="auto",this[e]=performance.now(),this[t]=0,this[i]=a=>{this.autoRotate&&a.detail.source==="user-interaction"&&(this[nl]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[C0]),this[nl]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[C0]),this[nl]=performance.now()}updated(a){super.updated(a),a.has("autoRotate")&&(this[nl]=performance.now())}[(e=nl,t=S0,KM)](a){this[S0]=a[0]}[Ls](a,o){if(super[Ls](a,o),!this.autoRotate||!this[yo]()||this[xt].isPresenting)return;const l=Math.min(o,a-this[nl]-this.autoRotateDelay);l>0&&(this[re].yaw=this.turntableRotation+this[S0]*l*.001)}get turntableRotation(){return this[re].yaw}resetTurntableRotation(a=0){this[re].yaw=a}}return i=C0,_0([De({type:Boolean,attribute:"auto-rotate"})],s.prototype,"autoRotate",void 0),_0([De({type:Number,attribute:"auto-rotate-delay"})],s.prototype,"autoRotateDelay",void 0),_0([kr({intrinsics:J$,updateHandler:KM}),De({type:String,attribute:"rotation-per-second"})],s.prototype,"rotationPerSecond",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq=o$(j7(Z$(IH(zW(G$(Y$(a$(qd))))))));customElements.define("model-viewer",eq);const tq=[{id:1,name:"Spicy Paneer Kebab",category:"Main Courses",price:"",description:"Tandoori paneer, mint chutney. **Vegetarian delight**",image:"/images/Spicy Paneer Kebab.png",videoPath:"/videos/Spicy Paneer Kebab.mp4",modelPath:"/models/Spicy Paneer Kebab.glb"},{id:2,name:"Slow Cooked Short Ribs",category:"Main Courses",price:"",description:"Red wine jus, truffle mash. ** 3-hour preparation**",image:"/images/Slow Cooked Short Ribs.png",videoPath:"/videos/Slow Cooked Short Ribs.mp4",modelPath:"/models/Slow Cooked Short Ribs.glb"},{id:3,name:"Yakitori Skewers",category:"Main Courses",price:"",description:"Grilled chicken skewers, tare glaze. ** Today's special**",image:"/images/Yakitori Skewers.png",videoPath:"/videos/Yakitori Skewers.mp4",modelPath:"/models/Yakitori Skewers.glb"}];function nq(){const[n,e]=N.useState(null),[t,i]=N.useState(null);return h.jsx("div",{className:"min-h-screen bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12 py-24",children:[h.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[h.jsx("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Experience the Demo Menu"}),h.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Scan the QR code below to see how The Visuplate transforms your menu with interactive features."}),h.jsxs("div",{className:"inline-block bg-gradient-to-br from-emerald-50 to-teal-50 rounded-3xl p-8 border-2 border-emerald-200",children:[h.jsx("img",{src:"/images/New Demo QR.png",alt:"QR",className:"w-64 h-64"}),h.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Scan with your phone camera"})]}),h.jsx("div",{className:"mt-10",children:h.jsx("a",{href:"https://him12.github.io/Web_Menu_QR_Demo/",target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-2 px-6 py-3 rounded-full 
               bg-gradient-to-r from-emerald-600 to-teal-500 
               text-white font-semibold shadow-lg shadow-emerald-200 
               hover:scale-105 hover:shadow-xl hover:from-emerald-700 hover:to-teal-600 
               transition-all duration-300`,children:" Try Our Web Demo"})})]}),h.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-12 text-center",children:"Sample Menu Items"}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-20",children:tq.map(s=>h.jsxs("div",{className:"bg-white rounded-2xl border-2 border-gray-200 overflow-hidden hover:border-emerald-400 hover:shadow-xl transition-all duration-300",children:[h.jsx("div",{className:"h-40 bg-gray-100 flex items-center justify-center",children:h.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-bold text-gray-900 flex-1",children:s.name}),h.jsx("span",{className:"text-emerald-600 font-bold text-lg whitespace-nowrap ml-2",children:s.price})]}),h.jsx("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:s.description}),h.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[s.videoPath&&h.jsxs("div",{onClick:()=>e(s.videoPath),className:"flex items-center space-x-1 text-blue-600 text-xs font-semibold bg-blue-50 px-3 py-1.5 rounded-full cursor-pointer hover:bg-blue-100",children:[h.jsx(UR,{className:"w-3.5 h-3.5"}),h.jsx("span",{children:"Video"})]}),s.modelPath&&h.jsxs("div",{onClick:()=>i(s.modelPath),className:"flex items-center space-x-1 text-purple-600 text-xs font-semibold bg-purple-50 px-3 py-1.5 rounded-full cursor-pointer hover:bg-purple-100",children:[h.jsx(NR,{className:"w-3.5 h-3.5"}),h.jsx("span",{children:"AR 3D"})]})]})]})]},s.id))}),n&&h.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-xl p-4 w-[400px] shadow-xl",children:[h.jsx("video",{src:n,controls:!0,autoPlay:!0,className:"w-full h-full rounded-lg"}),h.jsx("button",{onClick:()=>e(null),className:"mt-4 w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600",children:"Close"})]})}),t&&h.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-xl p-4 w-[400px] shadow-xl",children:[h.jsx("model-viewer",{src:t,alt:"3D Model",ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0,"auto-rotate":!0,style:{width:"100%",height:"350px"},"quick-look-browsers":"safari chrome",children:h.jsx("button",{slot:"ar-button",className:"mt-4 w-full bg-emerald-600 text-white py-2 rounded-lg font-semibold hover:bg-emerald-700",children:"View in your space"})}),h.jsx("button",{onClick:()=>i(null),className:"mt-4 w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600",children:"Close"})]})})]})})}function iq(){const n=new Date().getFullYear();return h.jsx("footer",{className:"bg-gray-900 text-gray-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12 py-16",children:[h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-5 gap-12 mb-12",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-xl font-bold text-white",children:"The Visuplate"}),h.jsx("p",{className:"text-gray-400 leading-relaxed mt-4 mb-6",children:"Transforming restaurant menus with AR technology, video previews, and eco-friendly digital solutions."}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("a",{href:"https://www.facebook.com/profile.php?id=61583994267915",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-emerald-600 transition-colors duration-200","aria-label":"Facebook",children:h.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"w-5 h-5 text-white",children:h.jsx("path",{d:"M22.676 0H1.324C.593 0 0 .593 0 1.326v21.348C0 23.407.593 24 1.324 24h11.495v-9.294H9.691v-3.622h3.129V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.464.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.714-1.795 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116c.731 0 1.324-.593 1.324-1.326V1.326C24 .593 23.407 0 22.676 0z"})})}),h.jsx("a",{href:"https://www.instagram.com/thevisuplate/?hl=en",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-emerald-600 transition-colors duration-200","aria-label":"Instagram",children:h.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"w-5 h-5 text-white",children:h.jsx("path",{d:"M12 2.163c3.204 0 3.584.013 4.85.07 1.366.062 2.633.35 3.608 1.325.975.975 1.263 2.242 1.325 3.608.057 1.266.07 1.646.07 4.85s-.013 3.584-.07 4.85c-.062 1.366-.35 2.633-1.325 3.608-.975.975-2.242 1.263-3.608 1.325-1.266.057-1.646.07-4.85.07s-3.584-.013-4.85-.07c-1.366-.062-2.633-.35-3.608-1.325-.975-.975-1.263-2.242-1.325-3.608-.057-1.266-.07-1.646-.07-4.85s.013-3.584.07-4.85c.062-1.366.35-2.633 1.325-3.608.975-.975 2.242-1.263 3.608-1.325 1.266-.057 1.646-.07 4.85-.07zm0 3.675a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm6.406-11.845a1.44 1.44 0 11-2.88 0 1.44 1.44 0 012.88 0z"})})}),h.jsx("a",{href:"https://x.com/TheVisuPlate",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-emerald-600 transition-colors duration-200","aria-label":"X (Twitter)",children:h.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"w-5 h-5 text-white",children:h.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),h.jsx("a",{href:"https://www.linkedin.com/in/the-visu-plate-1308ab38b/",target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-emerald-600 transition-colors duration-200","aria-label":"LinkedIn",children:h.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"w-5 h-5 text-white",children:h.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452z"})})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold mb-6",children:"Product"}),h.jsxs("ul",{className:"space-y-3",children:[h.jsx("li",{children:h.jsx(St,{to:"/demo-menu",className:"hover:text-emerald-400",children:"How It Works"})}),h.jsx("li",{children:h.jsx(St,{to:"/pricing",className:"hover:text-emerald-400",children:"Pricing"})}),h.jsx("li",{children:h.jsx(St,{to:"/demo-menu",className:"hover:text-emerald-400",children:"Demo"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold mb-6",children:"Company"}),h.jsxs("ul",{className:"space-y-3",children:[h.jsx("li",{children:h.jsx(St,{to:"/about",className:"hover:text-emerald-400",children:"About Us"})}),h.jsx("li",{children:h.jsx(St,{to:"/careers",className:"hover:text-emerald-400",children:"Careers"})}),h.jsx("li",{children:h.jsx(St,{to:"/contact",className:"hover:text-emerald-400",children:"Contact"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold mb-6",children:"Blogs"}),h.jsxs("ul",{className:"space-y-3",children:[h.jsx("li",{children:h.jsx(St,{to:"/digital-menu",className:"hover:text-emerald-400",children:"Digital Menu"})}),h.jsx("li",{children:h.jsx(St,{to:"/qr-menu",className:"hover:text-emerald-400",children:"QR Menu"})}),h.jsx("li",{children:h.jsx(St,{to:"/online-menu",className:"hover:text-emerald-400",children:"Online Menu"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold mb-6",children:"Contact"}),h.jsxs("ul",{className:"space-y-4",children:[h.jsxs("li",{className:"flex items-start space-x-3",children:[h.jsx(vm,{className:"w-5 h-5 text-emerald-400 mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Email"}),h.jsx("a",{href:"mailto:thevisuplate@gmail.com",className:"hover:text-emerald-400",children:"thevisuplate@gmail.com"})]})]}),h.jsxs("li",{className:"flex items-start space-x-3",children:[h.jsx(Pl,{className:"w-5 h-5 text-emerald-400 mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Phone"}),h.jsx("a",{href:"https://wa.me/918851796110",target:"_blank",rel:"noopener noreferrer",className:"hover:text-emerald-400",children:"+91-8851796110"})]})]}),h.jsxs("li",{className:"flex items-start space-x-3",children:[h.jsx(Vv,{className:"w-5 h-5 text-emerald-400 mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Location"}),h.jsx("div",{children:"Delhi, INDIA"})]})]})]})]})]}),h.jsx("div",{className:"pt-8 border-t border-gray-800",children:h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[h.jsxs("div",{className:"text-gray-400 text-sm",children:[" ",n," The Visuplate. All rights reserved."]}),h.jsxs("div",{className:"flex space-x-6 text-sm",children:[h.jsx(St,{to:"/privacy",className:"hover:text-emerald-400",children:"Privacy Policy"}),h.jsx(St,{to:"/terms",className:"hover:text-emerald-400",children:"Terms of Service"}),h.jsx(St,{to:"/cookies",className:"hover:text-emerald-400",children:"Cookie Policy"})]})]})})]})})}function sq(){const[n,e]=N.useState(!1),[t,i]=N.useState([]),s=ER();return N.useEffect(()=>{fetch("/jobs.json").then(r=>r.json()).then(r=>i(r)).catch(()=>i([]))},[]),h.jsxs("div",{className:"relative min-h-screen bg-white py-28 px-6 overflow-hidden",children:[h.jsx(Se.div,{animate:{opacity:.25},className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(16,185,129,0.15),transparent_70%)] blur-3xl"}),h.jsxs(Se.h1,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center text-6xl font-bold text-gray-900 mb-10 tracking-tight",children:["Build Something"," ",h.jsx("span",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-transparent bg-clip-text",children:"That Matters"})]}),h.jsx(Se.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7},className:"max-w-3xl mx-auto text-center text-gray-600 text-lg leading-relaxed mb-20",children:"Were looking for the first builders. The people who shape the energy, the culture, and the future of The Visuplate."}),h.jsxs(Se.div,{initial:{opacity:0,y:40,scale:.97},animate:{opacity:1,y:0,scale:1},transition:{delay:.3,duration:.8},className:"relative mx-auto bg-white border border-emerald-200 shadow-xl rounded-3xl p-14 max-w-3xl",children:[h.jsx("h2",{className:"text-3xl font-bold text-emerald-700 mb-4",children:"Join Us Early"}),h.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Early teammates shape everything. If you want to help build the foundation of something meaningful, wed love to know you."}),h.jsxs("p",{className:"text-gray-800 mb-8",children:["Reach us at ",h.jsx("span",{className:"text-emerald-600 font-semibold",children:"thevisuplate@gmail.com"})]}),h.jsx("button",{onClick:()=>e(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white font-semibold px-10 py-4 rounded-xl shadow-lg transition-all",children:"I Want To Build This"})]}),h.jsxs("div",{className:"max-w-6xl mx-auto mt-16 px-4",children:[h.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Open Positions"}),t.length===0?h.jsx("p",{className:"text-gray-600",children:"No active openings right now  you can still apply above."}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(r=>h.jsxs("article",{className:"p-6 border rounded-2xl shadow-sm hover:shadow-lg transition cursor-pointer",onClick:()=>s(`/careers/${r.id}`),role:"button",tabIndex:0,onKeyDown:a=>a.key==="Enter"?s(`/careers/${r.id}`):void 0,children:[h.jsx("h4",{className:"text-xl font-semibold mb-1",children:r.title}),h.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.short}),h.jsxs("div",{className:"flex items-center justify-between text-sm text-emerald-600 font-medium",children:[h.jsx("span",{children:r.location}),h.jsx("span",{children:r.type})]})]},r.id))})]}),n&&h.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:h.jsxs(Se.div,{initial:{scale:.85,opacity:0},animate:{scale:1,opacity:1},className:"bg-white p-8 rounded-3xl max-w-lg text-center shadow-2xl",children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"A note from the founders"}),h.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"Thank you for wanting to be part of this story. Were building something that will redefine how people see food and connect with restaurants."}),h.jsxs("div",{className:"flex justify-center gap-4",children:[h.jsx("button",{onClick:()=>{e(!1),s("/apply")},className:"bg-emerald-600 hover:bg-emerald-700 text-white font-semibold px-6 py-2 rounded-xl",children:"Continue"}),h.jsx("button",{onClick:()=>e(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-6 py-2 rounded-xl",children:"Cancel"})]})]})}),h.jsx(Se.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:1},className:"text-center text-gray-500 text-sm mt-14",children:"Great stories start before the world notices."})]})}const rq=()=>{const[n,e]=N.useState("silver"),[t,i]=N.useState(12),s={silver:{ourSetup:5999,ourMonthly:599,competitorSetup:15e3,competitorMonthly:1499},gold:{ourSetup:6999,ourMonthly:699,competitorSetup:18e3,competitorMonthly:1799},platinum:{ourSetup:9999,ourMonthly:999,competitorSetup:25e3,competitorMonthly:2499}},a=(()=>{const o=s[n],l=o.ourSetup+o.ourMonthly*t,c=o.competitorSetup+o.competitorMonthly*t,u=c-l,d=Math.round(u/c*100);return{ourTotal:l,competitorTotal:c,savings:u,savingsPercent:d,price:o}})();return h.jsxs("div",{className:"space-y-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Digital Menu Savings Calculator"}),h.jsx("p",{className:"text-gray-600",children:"See exactly how much you'll save compared to other providers"}),h.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6",children:[h.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Your Plan"}),h.jsxs("select",{value:n,onChange:o=>e(o.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[h.jsx("option",{value:"silver",children:"Silver Plan (5,999 + 599/month)"}),h.jsx("option",{value:"gold",children:"Gold Plan (6,999 + 699/month)"}),h.jsx("option",{value:"platinum",children:"Platinum Plan (9,999 + 999/month)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Months"}),h.jsx("input",{type:"range",min:"12",max:"36",value:t,onChange:o=>i(parseInt(o.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),h.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[h.jsx("span",{children:"1 Year"}),h.jsxs("span",{className:"font-semibold",children:[t," Month",t>1?"s":""]}),h.jsx("span",{children:"3 Years"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[h.jsx("h3",{className:"font-bold text-red-700 text-sm mb-2",children:" Other Providers"}),h.jsxs("div",{className:"space-y-1 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Setup:"}),h.jsxs("span",{className:"font-semibold",children:["",a.price.competitorSetup.toLocaleString()]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Monthly:"}),h.jsxs("span",{className:"font-semibold",children:["",a.price.competitorMonthly.toLocaleString()]})]}),h.jsxs("div",{className:"flex justify-between border-t border-red-200 pt-1 mt-1",children:[h.jsx("span",{className:"font-bold",children:"Total:"}),h.jsxs("span",{className:"font-bold text-red-700",children:["",a.competitorTotal.toLocaleString()]})]})]})]}),h.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 relative",children:[h.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"OUR PRICE"}),h.jsx("h3",{className:"font-bold text-green-700 text-sm mb-2",children:" The VisuPlate"}),h.jsxs("div",{className:"space-y-1 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Setup:"}),h.jsxs("span",{className:"font-semibold",children:["",a.price.ourSetup.toLocaleString()]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Monthly:"}),h.jsxs("span",{className:"font-semibold",children:["",a.price.ourMonthly.toLocaleString()]})]}),h.jsxs("div",{className:"flex justify-between border-t border-green-200 pt-1 mt-1",children:[h.jsx("span",{className:"font-bold",children:"Total:"}),h.jsxs("span",{className:"font-bold text-green-700",children:["",a.ourTotal.toLocaleString()]})]})]})]})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[h.jsx("h3",{className:"font-bold text-blue-700 text-sm mb-1",children:" Your Total Savings"}),h.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:["",a.savings.toLocaleString()]}),h.jsxs("div",{className:"text-blue-600 text-sm",children:["(",a.savingsPercent,"% Savings!)"]})]})]})]}),h.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mt-6",children:[h.jsx("h3",{className:"font-bold text-amber-800 text-lg mb-2",children:" Why Such Big Savings?"}),h.jsxs("ul",{className:"space-y-2 text-sm text-amber-700",children:[h.jsxs("li",{children:[" ",h.jsx("strong",{children:"No Middlemen"})," - We develop directly for you"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Efficient Technology"})," - Our platform reduces development costs"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Volume Business"})," - We serve many restaurants across India"]}),h.jsxs("li",{children:[" ",h.jsx("strong",{children:"Transparent Pricing"})," - No hidden fees or commissions"]})]})]})]})};function aq(){var D,W,K,ee;const[n,e]=N.useState(null),[t,i]=N.useState(null),[s,r]=N.useState(null),[a,o]=N.useState({name:"",email:"",phone:"",restaurant:"",plan:""}),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[f,p]=N.useState(0),[g,x]=N.useState(null),[A,m]=N.useState(!1);N.useEffect(()=>{const Q=()=>{m(window.innerWidth<768)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]);const y=N.useMemo(()=>[{name:"Silver",icon:h.jsx(OR,{className:"w-5 h-5 sm:w-6 sm:h-6"}),price:"5,999",monthlySubscription:"599/month",includes:"Essential digital menu with upto 10 bestseller AR/video features",terms:"45% advance | Remaining after delivery",features:["Up to 10 AR food previews","Up to 10 video previews","5 QR codes included","Basic menu analytics","Email support","21 days delivery","Mobile-responsive design","12 months hosting included","Monthly subscription: 599/month"]},{name:"Gold",icon:h.jsx(_p,{className:"w-5 h-5 sm:w-6 sm:h-6"}),price:"6,999",monthlySubscription:"699/month",includes:"Advanced digital menu with enhanced AR experience",terms:"45% advance | Remaining after delivery",features:["Up to 20 AR food previews","Up to 20 video previews","5 QR codes included","Advanced analytics dashboard","Priority support","Social media integration","21 days delivery","Mobile-responsive design","12 months hosting included","Monthly subscription: 699/month"],popular:!0},{name:"Platinum",icon:h.jsx(bE,{className:"w-5 h-5 sm:w-6 sm:h-6"}),price:"9,999",monthlySubscription:"999/month",includes:"Complete digital ecosystem with premium features",terms:"45% advance | Remaining after delivery",features:["Up to 35 AR food previews","Up to 35 video previews","10 QR codes included","24/7 priority support","Custom domain support","Social media integration","25 days premium delivery","Mobile-responsive design","12 months hosting included","Custom branding options","Monthly subscription: 999/month"],bestseller:!0}],[]),v=N.useMemo(()=>[{title:"Payment Structure",content:"Pay the plan price upfront for development and setup. Then pay the monthly subscription (599/699/999) per month which includes hosting, support, and maintenance."},{title:"What's Included in Monthly Subscription?",content:"Monthly subscription includes: Cloud hosting, SSL certificate, technical support, security updates, feature updates, and 99.9% uptime guarantee. Required per month."},{title:"Additional QR Codes",content:"Need more QR codes? Additional codes available at 99 per QR code. Perfect for multiple tables, takeaway counters, or different restaurant sections."},{title:"AR & Video Content Limits",content:"Each plan includes a set number of AR previews and videos. Additional content can be added at 59 per AR preview or video. Bulk discounts available."},{title:"Support & Maintenance",content:"All plans include 12 months of technical support and maintenance through the monthly subscription. Platinum plan includes 24/7 priority support."},{title:"Payment & Refund Policy",content:"45% advance payment required to start development. Balance due upon delivery. Monthly subscription starts after delivery. Advance is refundable only if work hasn't started within 24 hours."},{title:"Delivery Timeline",content:"Silver & Gold: 15 working days | Platinum: 10 working days. Rush delivery available at 25% extra charge for 50% faster delivery."}],[]),b=N.useMemo(()=>[{title:"What is the cost of digital menu for restaurants?",content:"Our digital menu pricing starts at 5,999 one-time setup fee plus 599/month subscription. This includes QR codes, AR previews, and mobile-responsive design perfect for Indian restaurants."},{title:"How much does QR code menu cost?",content:"QR code menu costs 5,999 for Silver plan with 5 QR codes included. Additional QR codes available at 99 each. Monthly subscription of 599 includes hosting and support."},{title:"Is there monthly subscription for digital menus?",content:"Yes, all plans include mandatory monthly subscription: Silver 599/month, Gold 699/month, Platinum 999/month. This covers hosting, support, and maintenance."},{title:"What is included in digital menu price?",content:"Price includes development, AR food previews, video content, QR codes, mobile-responsive design, analytics, and 12 months hosting with support."}],[]),w=N.useMemo(()=>[{id:1,title:"How Much Does Digital Menu Cost in India?",description:"Complete breakdown of digital menu pricing for restaurants",content:`
        <div class="space-y-6">
          <h2 class="text-2xl font-bold text-gray-900">Complete Digital Menu Cost Breakdown in India</h2>
          
          <div class="bg-blue-50 p-4 sm:p-6 rounded-xl">
            <h3 class="text-lg font-semibold text-blue-900 mb-3"> Digital Menu Cost Comparison in India</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-4">
              <div class="bg-white p-4 sm:p-5 rounded-lg border-2 border-red-200">
                <h4 class="font-bold text-red-700 text-sm sm:text-base mb-3"> Other Providers</h4>
                <div class="space-y-2 text-sm">
                  <div class="flex justify-between">
                    <span>Setup Cost:</span>
                    <span class="font-semibold text-red-600">15,000 - 30,000</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Monthly Fee:</span>
                    <span class="font-semibold text-red-600">1,499 - 2,999</span>
                  </div>
                  <div class="flex justify-between border-t pt-2">
                    <span class="font-semibold">First Year Total:</span>
                    <span class="font-bold text-red-700">33,000 - 66,000</span>
                  </div>
                </div>
              </div>
              
              <div class="bg-white p-4 sm:p-5 rounded-lg border-2 border-green-200 relative">
                <div class="absolute -top-2 -right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold">
                  OUR PRICE
                </div>
                <h4 class="font-bold text-green-700 text-sm sm:text-base mb-3"> The VisuPlate</h4>
                <div class="space-y-2 text-sm">
                  <div class="flex justify-between">
                    <span>Setup Cost:</span>
                    <span class="font-semibold text-green-600">5,999 - 9,999</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Monthly Fee:</span>
                    <span class="font-semibold text-green-600">599 - 999</span>
                  </div>
                  <div class="flex justify-between border-t pt-2">
                    <span class="font-semibold">First Year Total:</span>
                    <span class="font-bold text-green-700">12,000 - 22,000</span>
                  </div>
                </div>
              </div>
            </div>
            <p class="text-blue-800 text-xs sm:text-sm text-center font-semibold">
               Save 60-70% compared to other digital menu providers in India
            </p>
          </div>

          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold text-gray-900">Why Choose The VisuPlate?</h3>
            <p class="text-gray-600 text-sm sm:text-base mb-4">Get premium features at 60% lower cost than competitors</p>
            <ul class="space-y-2 text-sm sm:text-base">
              <li> <strong>Same Premium Features</strong> - AR, videos, analytics included</li>
              <li> <strong>60-70% Cost Saving</strong> - No overpricing like competitors</li>
              <li> <strong>No Hidden Charges</strong> - Transparent pricing</li>
              <li> <strong>Faster Delivery</strong> - 15-25 days vs 30-45 days (others)</li>
              <li> <strong>Better Support</strong> - Direct WhatsApp support included</li>
            </ul>

            <h3 class="text-xl font-semibold text-gray-900 mt-6">Hidden Costs to Consider</h3>
            <div class="bg-amber-50 p-4 rounded-lg">
              <ul class="space-y-2 text-sm sm:text-base">
                <li> Additional QR codes: 99 each</li>
                <li> Extra AR previews: 59 each</li>
              </ul>
            </div>
          </div>
        </div>
      `},{id:2,title:"QR Code Menu vs Traditional Menu Cost Analysis",description:"Compare costs and ROI of digital vs paper menus",content:`
        <div class="space-y-6">
          <h2 class="text-2xl font-bold text-gray-900">QR Code Menu vs Traditional Menu: Complete Cost Analysis</h2>
          
          <div class="grid grid-cols-1 gap-4 sm:gap-6">
            <div class="bg-green-50 p-4 sm:p-6 rounded-xl">
              <h3 class="text-lg font-semibold text-green-900 mb-4"> QR Code Digital Menu</h3>
              <div class="space-y-3">
                <div class="flex justify-between">
                  <span>One-time Setup:</span>
                  <span class="font-semibold">5,999 - 9,999</span>
                </div>
                <div class="flex justify-between">
                  <span>Monthly Subscription:</span>
                  <span class="font-semibold">599 - 999</span>
                </div>
                <div class="flex justify-between border-t pt-2">
                  <span class="font-semibold">First Year Total:</span>
                  <span class="font-bold text-green-700">12,000 - 22,000</span>
                </div>
              </div>
            </div>

            <div class="bg-red-50 p-4 sm:p-6 rounded-xl">
              <h3 class="text-lg font-semibold text-red-900 mb-4"> Traditional Paper Menu</h3>
              <div class="space-y-3">
                <div class="flex justify-between">
                  <span>Initial Printing (20 copies):</span>
                  <span class="font-semibold">8,000 - 15,000</span>
                </div>
                <div class="flex justify-between">
                  <span>Yearly Re-prints:</span>
                  <span class="font-semibold">2,000 - 5,000</span>
                </div>
                <div class="flex justify-between border-t pt-2">
                  <span class="font-semibold">First Year Total:</span>
                  <span class="font-bold text-red-700">32,000 - 80,000</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      `},{id:3,title:"Digital Menu Savings Calculator",description:"Calculate how much you'll save with our pricing vs competitors",content:"CALCULATOR_COMPONENT"}],[]),S=N.useMemo(()=>[...v,...b],[v,b]),C=N.useMemo(()=>["One-time development fee","12 months mandatory subscription","No hidden charges","Professional quality guaranteed","Easy upgrades available","Dedicated support"],[]),M=N.useMemo(()=>[h.jsx(HF,{className:"w-5 h-5 sm:w-6 sm:h-6"}),h.jsx(Gv,{className:"w-5 h-5 sm:w-6 sm:h-6"}),h.jsx(FF,{className:"w-5 h-5 sm:w-6 sm:h-6"}),h.jsx(jF,{className:"w-5 h-5 sm:w-6 sm:h-6"})],[]),_=N.useCallback(()=>{if(A)return;const Q=window.scrollY,ae=document.documentElement.scrollHeight-window.innerHeight,$=Q/ae*100;p($)},[A]);N.useEffect(()=>{const Q=()=>{A||requestAnimationFrame(_)};return window.addEventListener("scroll",Q,{passive:!0}),()=>window.removeEventListener("scroll",Q)},[_,A]),N.useEffect(()=>{document.title="Digital Menu Pricing 2024 | QR Code Menu Plans 5,999-9,999 | The VisuPlate";let Q=document.querySelector('meta[name="viewport"]');Q||(Q=document.createElement("meta"),Q.name="viewport",Q.content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=1",document.head.appendChild(Q));const ae=$=>{const te=$.target;te.tagName==="INPUT"||te.tagName==="TEXTAREA"?Q.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no":Q.content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=1"};return document.addEventListener("focusin",ae),document.addEventListener("focusout",ae),()=>{document.removeEventListener("focusin",ae),document.removeEventListener("focusout",ae)}},[]);const E=N.useCallback(Q=>{r(Q),o(ae=>({...ae,plan:Q}))},[]),R=async Q=>{Q.preventDefault(),c(!0),await new Promise(ue=>setTimeout(ue,1e3));const ae="9599202386",$=`New Plan Inquiry - TheVisuPlate!

Name: ${a.name}
Email: ${a.email}
Phone: ${a.phone}
Restaurant: ${a.restaurant}
Selected Plan: ${a.plan}

Message: I want to get started with the ${a.plan} plan!`,te=encodeURIComponent($),de=`https://wa.me/${ae}?text=${te}`;d(!0),c(!1),setTimeout(()=>{window.open(de,"_blank"),r(null),d(!1),o({name:"",email:"",phone:"",restaurant:"",plan:""})},1500)},L=Q=>{o(ae=>({...ae,[Q.target.name]:Q.target.value}))},F=N.useCallback(Q=>{e(n===Q?null:Q)},[n]),U=N.useCallback(Q=>{const ae=parseInt(Q.price.replace("","").replace(",","")),$=parseInt(Q.monthlySubscription.replace("","").replace("/month",""));return ae+$*12},[]),z=N.useCallback(Q=>y.find(ae=>ae.name===Q),[y]),V=Q=>`
      relative group h-full flex flex-col 
      transform-gpu
      transition-all duration-300
      active:scale-95
      ${t===Q.name?"scale-95":""}
      ${Q.bestseller&&!A?"lg:scale-105 lg:-translate-y-4":""}
    `,G=Q=>`
      relative h-full flex flex-col bg-white rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 
      border-2 shadow-lg sm:shadow-xl transition-all duration-300
      ${Q.bestseller?"border-purple-200 bg-gradient-to-b from-white to-purple-50/50":Q.popular?"border-amber-200 bg-gradient-to-b from-white to-amber-50/50":"border-emerald-200 bg-gradient-to-b from-white to-emerald-50/30"}
    `;return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-white via-emerald-50/10 to-cyan-50/10",children:[!A&&h.jsx("div",{className:"fixed top-0 left-0 w-full h-1 bg-gray-200 z-50",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-cyan-500 transition-all duration-300",style:{width:`${f}%`}})}),!A&&h.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute -top-40 -right-32 w-60 h-60 bg-gradient-to-r from-emerald-200/10 to-cyan-200/10 rounded-full blur-2xl"}),h.jsx("div",{className:"absolute -bottom-40 -left-32 w-60 h-60 bg-gradient-to-r from-purple-200/10 to-pink-200/10 rounded-full blur-2xl"})]}),h.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-8 sm:py-12 lg:py-16 relative",children:[h.jsxs("header",{className:"mb-12 sm:mb-16 lg:mb-20 relative flex flex-col items-center justify-center w-full text-center",children:[h.jsxs("div",{className:"pt-2 inline-flex items-center gap-2 bg-gradient-to-r from-emerald-500 to-green-500 text-white px-4 py-2 rounded-full text-xs sm:text-sm font-semibold mb-6 shadow-lg",children:[h.jsx(Pf,{className:"w-4 h-4"}),"One-Time Setup + Monthly Subscription"]}),h.jsx("h1",{className:"text-2xl sm:text-4xl lg:text-5xl font-bold mb-4 p-2 bg-gradient-to-r from-emerald-600 via-green-600 to-cyan-600 bg-clip-text text-transparent inline-block leading-tight",children:"Complete Pricing Package"}),h.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-gray-600 max-w-2xl mx-auto mb-6 sm:mb-8 px-2",children:"Pay once for development, then monthly for hosting and support. Everything included for your success."}),h.jsx("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 max-w-2xl mx-auto px-2",children:C.map((Q,ae)=>h.jsxs("div",{className:"flex items-center gap-1 bg-white px-3 py-1.5 rounded-full border border-emerald-200 shadow-sm text-xs sm:text-sm",children:[h.jsx(Al,{className:"w-3 h-3 sm:w-4 sm:h-4 text-emerald-500 flex-shrink-0"}),h.jsx("span",{className:"text-gray-700 whitespace-nowrap",children:Q})]},ae))})]}),h.jsx("section",{className:"mb-16 sm:mb-20",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:y.map(Q=>h.jsxs("div",{className:V(Q),onTouchStart:()=>i(Q.name),onTouchEnd:()=>i(null),children:[Q.bestseller&&h.jsx("div",{className:"absolute -top-3 sm:-top-4 left-1/2 transform -translate-x-1/2 z-20",children:h.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold shadow-lg flex items-center gap-1 sm:gap-2 whitespace-nowrap",children:[h.jsx(bE,{className:"w-3 h-3 sm:w-4 sm:h-4 fill-current"}),"MOST POPULAR"]})}),Q.popular&&!Q.bestseller&&h.jsx("div",{className:"absolute -top-3 sm:-top-4 left-1/2 transform -translate-x-1/2 z-20",children:h.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-xs sm:text-sm font-bold shadow-lg flex items-center gap-1 sm:gap-2 whitespace-nowrap",children:[h.jsx(_p,{className:"w-3 h-3 sm:w-4 sm:h-4 fill-current"}),"GREAT VALUE"]})}),h.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:h.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-2 sm:px-3 py-1 rounded-full text-xs font-bold shadow",children:["+ ",Q.monthlySubscription]})}),h.jsxs("div",{className:G(Q),children:[h.jsxs("div",{className:"relative text-center mb-6 sm:mb-8",children:[h.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 rounded-xl sm:rounded-2xl mb-3 sm:mb-4 ${Q.bestseller?"bg-gradient-to-br from-purple-500 to-pink-500 text-white":Q.popular?"bg-gradient-to-br from-amber-500 to-orange-500 text-white":"bg-gradient-to-br from-emerald-500 to-green-500 text-white"}`,children:Q.icon}),h.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:Q.name}),h.jsx("p",{className:"text-gray-600 text-xs sm:text-sm",children:Q.includes})]}),h.jsx("div",{className:"relative text-center mb-6 sm:mb-8",children:h.jsxs("div",{className:"mb-3 sm:mb-4",children:[h.jsx("p",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:Q.price}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg sm:rounded-xl p-2 sm:p-3 mb-2",children:[h.jsxs("p",{className:"text-blue-700 font-semibold text-sm sm:text-base",children:["+ ",Q.monthlySubscription]}),h.jsx("p",{className:"text-blue-600 text-xs sm:text-sm",children:"per month"})]}),h.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:"One-time setup cost then monthly subscription"})]})}),h.jsx("div",{className:"relative space-y-2 sm:space-y-3 mb-6 sm:mb-8 flex-grow",children:Q.features.map((ae,$)=>h.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[h.jsx(Al,{className:`w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 mt-0.5 ${Q.bestseller?"text-purple-500":Q.popular?"text-amber-500":"text-emerald-500"}`}),h.jsx("span",{className:"text-gray-700 text-xs sm:text-sm leading-relaxed",children:ae})]},$))}),h.jsxs("div",{className:"relative bg-white border border-gray-200 rounded-lg sm:rounded-xl p-3 sm:p-4 mb-4 sm:mb-6",children:[h.jsx("h3",{className:"text-xs sm:text-sm font-bold text-gray-900 mb-1",children:"Payment Terms"}),h.jsx("p",{className:"text-gray-600 text-xs sm:text-sm",children:Q.terms}),h.jsx("p",{className:"text-blue-600 text-xs font-semibold mt-1",children:"Monthly subscription starts after delivery"})]}),h.jsx("button",{onClick:()=>E(Q.name),className:`relative w-full py-3 sm:py-4 px-4 sm:px-6 rounded-lg sm:rounded-xl font-bold text-base sm:text-lg transition-all duration-300 overflow-hidden min-h-[44px] flex items-center justify-center ${Q.bestseller?"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white shadow-lg":Q.popular?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg":"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-lg"}`,children:h.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:["Get ",Q.name," Plan",h.jsx(Pf,{className:"w-4 h-4"})]})})]})]},Q.name))})}),h.jsxs("section",{className:"max-w-4xl mx-auto mb-12 sm:mb-16 relative",children:[h.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center text-gray-900 mb-8 sm:mb-12 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Complete Cost Breakdown"}),h.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg border border-emerald-100 overflow-hidden",children:[h.jsxs("div",{className:"hidden sm:grid grid-cols-4 gap-4 p-4 sm:p-6 bg-gradient-to-r from-emerald-50 to-green-50 border-b border-emerald-200",children:[h.jsx("div",{className:"font-bold text-gray-900 text-sm",children:"Plan"}),h.jsx("div",{className:"text-center font-bold text-gray-600 text-sm",children:"One-Time Setup"}),h.jsx("div",{className:"text-center font-bold text-blue-600 text-sm",children:"Monthly Subscription"}),h.jsx("div",{className:"text-center font-bold text-green-600 text-sm",children:"Total 12 Months"})]}),h.jsx("div",{className:"sm:hidden p-3 text-center font-semibold bg-emerald-50 border-b border-emerald-200 text-sm",children:"Plan Cost Summary"}),y.map((Q,ae)=>{const $=U(Q);return h.jsxs("div",{children:[h.jsxs("div",{className:"hidden sm:grid grid-cols-4 gap-4 p-4 sm:p-6 border-b border-gray-100 hover:bg-white transition-colors duration-300",children:[h.jsxs("div",{className:"font-medium text-gray-700 flex items-center gap-3 text-sm",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Q.bestseller?"bg-purple-500 text-white":Q.popular?"bg-amber-500 text-white":"bg-emerald-500 text-white"}`,children:Q.icon}),Q.name]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-lg sm:text-xl font-bold text-gray-900",children:Q.price}),h.jsx("div",{className:"text-gray-500 text-xs",children:"Development"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-lg sm:text-xl font-bold text-blue-600",children:Q.monthlySubscription}),h.jsx("div",{className:"text-gray-500 text-xs",children:" 12 months"})]}),h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"text-lg sm:text-xl font-bold text-green-600",children:["",$.toLocaleString()]}),h.jsx("div",{className:"text-gray-500 text-xs",children:"First year total"})]})]}),h.jsxs("div",{className:"sm:hidden p-3 space-y-2 border-b border-gray-100 bg-white",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"font-semibold text-gray-900 flex items-center gap-2 text-sm",children:[h.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center ${Q.bestseller?"bg-purple-500 text-white":Q.popular?"bg-amber-500 text-white":"bg-emerald-500 text-white"}`,children:Q.icon}),Q.name]}),h.jsx("span",{className:"font-bold text-gray-800 text-sm",children:Q.price})]}),h.jsxs("div",{className:"flex justify-between text-blue-700 text-xs",children:[h.jsx("span",{children:"Monthly Subscription:"}),h.jsx("span",{className:"font-semibold",children:Q.monthlySubscription})]}),h.jsxs("div",{className:"flex justify-between text-green-700 text-sm",children:[h.jsx("span",{className:"font-semibold",children:"Total 12 Months:"}),h.jsxs("span",{className:"font-bold",children:["",$.toLocaleString()]})]})]})]},ae)})]})]}),h.jsxs("section",{className:"max-w-6xl mx-auto mb-12 sm:mb-16",children:[h.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center text-gray-900 mb-6 sm:mb-8",children:"Digital Menu Pricing Comparison 2024"}),h.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-lg overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full min-w-[500px]",children:[h.jsx("thead",{className:"bg-gradient-to-r from-emerald-500 to-green-500 text-white",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-3 sm:p-4 text-left text-xs sm:text-sm",children:"Feature"}),h.jsx("th",{className:"p-3 sm:p-4 text-center text-xs sm:text-sm",children:"Silver 5,999"}),h.jsx("th",{className:"p-3 sm:p-4 text-center text-xs sm:text-sm",children:"Gold 6,999"}),h.jsx("th",{className:"p-3 sm:p-4 text-center text-xs sm:text-sm",children:"Platinum 9,999"})]})}),h.jsx("tbody",{children:[["AR Food Previews","10","20","35"],["Video Previews","10","20","35"],["QR Codes","5","5","10"],["Monthly Subscription","599","699","999"],["Delivery Time","21 days","21 days","25 days"],["Support","Email","Priority","24/7 Priority"]].map(([Q,ae,$,te],de)=>h.jsxs("tr",{className:de%2===0?"bg-gray-50":"bg-white",children:[h.jsx("td",{className:"p-3 sm:p-4 font-medium text-gray-900 text-xs sm:text-sm",children:Q}),h.jsx("td",{className:"p-3 sm:p-4 text-center text-gray-700 text-xs sm:text-sm",children:ae}),h.jsx("td",{className:"p-3 sm:p-4 text-center text-gray-700 text-xs sm:text-sm",children:$}),h.jsx("td",{className:"p-3 sm:p-4 text-center text-gray-700 text-xs sm:text-sm",children:te})]},de))})]})})})]}),h.jsxs("section",{className:"mt-8 sm:mt-12 text-center mb-12 sm:mb-16",children:[h.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Popular in Major Cities"}),h.jsx("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 max-w-2xl mx-auto px-2",children:["Digital Menu Mumbai","QR Menu Delhi","Online Menu Bangalore","Restaurant Menu Chennai","Cafe Menu Hyderabad","Food Menu Kolkata","Cloud Kitchen Pune"].map((Q,ae)=>h.jsx("span",{className:"bg-gray-100 text-gray-700 px-3 py-1.5 rounded-full text-xs hover:bg-emerald-100 hover:text-emerald-700 transition-colors",children:Q},ae))})]}),h.jsxs("section",{className:"max-w-4xl mx-auto mb-12 sm:mb-16",children:[h.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-center text-gray-900 mb-6 sm:mb-8",children:"Related Articles About Digital Menu Costs"}),h.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:w.map((Q,ae)=>h.jsx("div",{onClick:()=>x(Q.id),className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 active:scale-95 transition-transform duration-300 cursor-pointer min-h-[80px] flex items-center",children:h.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 w-full",children:[h.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-500 to-green-500 rounded-lg flex items-center justify-center text-white flex-shrink-0",children:M[ae]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-bold text-gray-900 text-sm sm:text-base mb-1 sm:mb-2 line-clamp-2",children:Q.title}),h.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:Q.description})]})]})},Q.id))})]}),h.jsxs("section",{className:"max-w-4xl mx-auto mb-12 sm:mb-16",children:[h.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-center text-gray-900 mb-8 sm:mb-12 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Frequently Asked Questions"}),h.jsx("div",{className:"space-y-3 sm:space-y-4",children:S.map((Q,ae)=>h.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl border border-emerald-100 overflow-hidden active:scale-95 transition-transform duration-300",children:[h.jsxs("button",{onClick:()=>F(ae),className:"w-full p-4 sm:p-6 text-left flex items-center justify-between hover:bg-gradient-to-r from-emerald-50 to-green-50 transition-all duration-300 group min-h-[60px]",children:[h.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[h.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-emerald-500 to-green-500 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:h.jsx(Al,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),h.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 text-left",children:Q.title})]}),n===ae?h.jsx(OF,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 flex-shrink-0"}):h.jsx(UF,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 flex-shrink-0"})]}),n===ae&&h.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 animate-fadeIn",children:h.jsx("div",{className:"pl-0 sm:pl-14",children:h.jsx("p",{className:"text-gray-700 leading-relaxed text-sm sm:text-base",children:Q.content})})})]},ae))})]}),h.jsx("section",{className:"text-center",children:h.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 rounded-xl sm:rounded-2xl p-6 sm:p-8 md:p-12 text-white shadow-lg hover:shadow-xl transition-all duration-300 relative overflow-hidden",children:[h.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4 relative",children:"Get Your Digital Menu Today"}),h.jsxs("p",{className:"text-sm sm:text-base lg:text-lg text-gray-300 mb-6 sm:mb-8 max-w-2xl mx-auto relative",children:["Affordable ",h.jsx("strong",{children:"QR code menu pricing"})," with ",h.jsx("strong",{children:"monthly subscription"})," options. Perfect for ",h.jsx("strong",{children:"restaurants in India"}),"."]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center relative",children:[h.jsxs("button",{onClick:()=>E("Best Value"),className:"bg-emerald-500 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg sm:rounded-xl font-bold text-base sm:text-lg transition-colors flex items-center justify-center gap-2 min-h-[44px]",children:["View Pricing Plans",h.jsx(Pf,{className:"w-4 h-4 sm:w-5 sm:h-5"})]}),h.jsx(St,{to:"/contact",className:"flex",children:h.jsx("button",{className:"border-2 border-white text-white px-6 sm:px-8 py-3 sm:py-4 rounded-lg sm:rounded-xl font-bold text-base sm:text-lg hover:bg-white hover:text-gray-900 transition-colors w-full min-h-[44px]",children:"Contact for Custom Quote"})})]})]})}),h.jsxs("section",{className:"hidden","aria-hidden":"true",children:[h.jsx("h2",{children:"Digital Menu Pricing for Restaurants"}),h.jsx("p",{children:"The VisuPlate offers comprehensive digital menu solutions for restaurants, cafes, and food businesses in India. Our pricing includes Silver plan at 5,999, Gold plan at 6,999, and Platinum plan at 9,999 with monthly subscriptions starting from 599/month. All plans include QR codes, AR food previews, video content, and mobile-responsive designs perfect for Indian restaurants looking to upgrade to digital menus."})]}),h.jsxs("footer",{className:"text-center mt-12 sm:mt-16 pt-6 sm:pt-8 border-t border-gray-200",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-8 max-w-2xl mx-auto",children:[h.jsxs("a",{href:"tel:+918851796110",className:"flex items-center justify-center gap-2 text-gray-600 text-sm hover:text-emerald-600",children:[h.jsx(Pl,{className:"w-4 h-4 text-emerald-500"}),h.jsx("span",{children:"+91 8851796110"})]}),h.jsxs("a",{href:"mailto:thevisuplate@gmail.com",className:"flex items-center justify-center gap-2 text-gray-600 text-sm hover:text-emerald-600",children:[h.jsx(vm,{className:"w-4 h-4 text-emerald-500"}),h.jsx("span",{children:"thevisuplate@gmail.com"})]}),h.jsxs(St,{to:"/contact",className:"flex items-center justify-center gap-2 text-gray-600 text-sm hover:text-emerald-600",children:[h.jsx(Vv,{className:"w-4 h-4 text-emerald-500"}),h.jsx("span",{children:"Available In Pan India"})]})]}),h.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mt-6 sm:mt-8",children:" 2024 TheVisuPlate. All rights reserved."})]})]}),s&&h.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 z-50 p-3 sm:p-4 flex items-center justify-center",children:h.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-5 w-full max-w-sm mx-auto shadow-xl border border-emerald-100 max-h-[85vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[h.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:["Get ",s," Plan"]}),h.jsx("button",{onClick:()=>r(null),className:"text-gray-400 hover:text-gray-600 transition-colors duration-300 min-h-[44px] min-w-[44px] flex items-center justify-center",children:h.jsx(Ex,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),u?h.jsxs("div",{className:"text-center py-6 sm:py-8",children:[h.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4",children:h.jsx(Al,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),h.jsx("h4",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Success!"}),h.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Redirecting to WhatsApp..."})]}):h.jsxs("form",{onSubmit:R,className:"space-y-3 sm:space-y-4",children:[h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg sm:rounded-xl p-3 sm:p-4 mb-3 sm:mb-4",children:[h.jsx("h4",{className:"font-bold text-blue-900 text-sm sm:text-base mb-2",children:"Plan Summary:"}),h.jsxs("div",{className:"space-y-1 text-xs sm:text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"One-Time Setup:"}),h.jsx("span",{className:"font-semibold",children:(D=z(s))==null?void 0:D.price})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Monthly Subscription:"}),h.jsx("span",{className:"font-semibold text-blue-600",children:(W=z(s))==null?void 0:W.monthlySubscription})]}),h.jsxs("div",{className:"flex justify-between border-t border-blue-200 pt-1 mt-1",children:[h.jsx("span",{children:"First Year Total:"}),h.jsxs("span",{className:"font-bold text-green-600",children:["",z(s)?U(z(s)).toLocaleString():"0"]})]})]})]}),h.jsx("div",{children:h.jsx("input",{type:"text",name:"name",placeholder:"Your Full Name *",required:!0,value:a.name,onChange:L,className:"w-full p-3 sm:p-4 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base min-h-[44px]"})}),h.jsx("div",{children:h.jsx("input",{type:"email",name:"email",placeholder:"Email Address *",required:!0,value:a.email,onChange:L,className:"w-full p-3 sm:p-4 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base min-h-[44px]"})}),h.jsx("div",{children:h.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number *",required:!0,value:a.phone,onChange:L,className:"w-full p-3 sm:p-4 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base min-h-[44px]"})}),h.jsx("div",{children:h.jsx("input",{type:"text",name:"restaurant",placeholder:"Restaurant Name *",required:!0,value:a.restaurant,onChange:L,className:"w-full p-3 sm:p-4 border border-gray-200 rounded-lg sm:rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base min-h-[44px]"})}),h.jsx("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-emerald-500 to-green-500 text-white py-3 sm:py-4 px-4 sm:px-6 rounded-lg sm:rounded-xl font-bold text-base sm:text-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-h-[44px]",children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):h.jsxs(h.Fragment,{children:["Continue to WhatsApp",h.jsx(Pl,{className:"w-4 h-4 sm:w-5 sm:h-5"})]})}),h.jsxs("p",{className:"text-gray-500 text-xs sm:text-sm text-center",children:["We'll redirect you to WhatsApp to discuss your ",s," plan"]})]})]})}),g&&h.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 z-50 p-3 sm:p-4 flex items-center justify-center",children:h.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-gray-200",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 pr-2",children:(K=w.find(Q=>Q.id===g))==null?void 0:K.title}),h.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600 transition-colors duration-300 min-h-[44px] min-w-[44px] flex items-center justify-center flex-shrink-0",children:h.jsx(Ex,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),h.jsx("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[60vh] sm:max-h-[70vh]",children:g===3?h.jsx(rq,{}):h.jsx("div",{dangerouslySetInnerHTML:{__html:((ee=w.find(Q=>Q.id===g))==null?void 0:ee.content)||""}})}),h.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-between items-center",children:[h.jsx("p",{className:"text-gray-600 text-sm sm:text-base text-center sm:text-left",children:"Need a custom solution for your restaurant?"}),h.jsxs("button",{onClick:()=>{x(null),E("Custom Consultation")},className:"bg-emerald-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg font-semibold hover:bg-emerald-600 transition-colors flex items-center gap-2 min-h-[44px] text-sm sm:text-base",children:[h.jsx(Pl,{className:"w-4 h-4"}),"Get Free Consultation"]})]})})]})})]})}function oq(){return h.jsx("div",{className:"min-h-screen bg-white px-6 py-24",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Privacy Policy"}),h.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:"Your privacy is important to us. This policy explains how The Visuplate collects, uses, and safeguards your information."}),h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-10 mb-2",children:"Information We Collect"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We may collect personal details such as your name, email, and contact information when you interact with our platform."}),h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mt-10 mb-2",children:"How We Use Your Information"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Your data is used to improve our platform, deliver better support, and personalize your experience."}),h.jsxs("p",{className:"text-gray-600 mt-10",children:["If you have any questions, contact us at"," ",h.jsx("a",{href:"mailto:hello@thevisuplate.com",className:"text-emerald-600",children:"hello@thevisuplate.com"}),"."]})]})})}function lq(){return h.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-white via-emerald-50/30 to-teal-50/30 px-6 py-24 overflow-hidden",children:[h.jsxs("div",{className:"fixed inset-0 -z-10 pointer-events-none",children:[h.jsx("div",{className:"absolute -top-40 -left-32 w-[28rem] h-[28rem] bg-emerald-300/20 blur-3xl rounded-full animate-pulse"}),h.jsx("div",{className:"absolute top-1/3 -right-32 w-[25rem] h-[25rem] bg-teal-200/20 blur-3xl rounded-full animate-pulse delay-700"}),h.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[40rem] h-[40rem] bg-green-200/10 blur-3xl rounded-full animate-pulse delay-500"})]}),h.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[h.jsx("h1",{className:"text-5xl font-extrabold text-gray-900 mb-6 bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"Terms of Service"}),h.jsx("p",{className:"text-lg text-gray-700 leading-relaxed mb-10",children:"Welcome to The Visuplate. By accessing or using our website and services, you agree to the terms outlined below."}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("section",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"1. Use of Service"}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"You agree not to misuse our platform, perform unauthorized access attempts, or engage in any activity that violates applicable laws or disrupts our services."})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"2. User Responsibilities"}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"You are responsible for providing accurate information, maintaining the security of your account, and complying with all policies associated with The Visuplate."})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"3. Intellectual Property"}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"All logos, graphics, text, models, and media provided on The Visuplate platform are owned or licensed by us. You may not copy, modify, distribute, or reproduce any content without explicit written permission."})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"4. Limitation of Liability"}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"The Visuplate is not liable for any indirect, incidental, or consequential damages arising from your use of our services. All features are provided as is without warranties."})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"5. Updates to Terms"}),h.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We may update these Terms occasionally. Continued use of our website and services after any changes constitutes acceptance of the updated terms."})]})]}),h.jsxs("p",{className:"text-gray-700 mt-14",children:["For questions or concerns, reach out to"," ",h.jsx("a",{href:"mailto:thevisuplate@gmail.com",className:"text-emerald-600 font-semibold hover:text-emerald-700",children:"thevisuplate@gmail.com"}),"."]})]})]})}function cq(){return h.jsx("div",{className:"min-h-screen bg-white px-6 py-24",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Cookie Policy"}),h.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"This website uses cookies to enhance your browsing experience and analyze site performance."}),h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"What Are Cookies?"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Cookies are small text files stored on your device when you visit a website."}),h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"How We Use Cookies"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"We use cookies to improve site performance, understand user behavior, and personalize content."}),h.jsxs("p",{className:"text-gray-600 mt-10",children:["Questions? Contact us at"," ",h.jsx("a",{href:"mailto:hello@thevisuplate.com",className:"text-emerald-600",children:"thevisuplate@gmail.com"}),"."]})]})})}function uq(){const n=Us(),e=[{path:"/",label:"Home",icon:GF},{path:"/demo-menu",label:"Demo Menu",icon:PF},{path:"/about",label:"About",icon:zF},{path:"/contact",label:"Contact Us",icon:vm}];return h.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg py-2 px-4 flex justify-between lg:hidden z-50",children:e.map(t=>{const i=t.icon,s=n.pathname===t.path;return h.jsxs(St,{to:t.path,className:"flex flex-col items-center w-full",children:[h.jsx(i,{className:`w-6 h-6 ${s?"text-emerald-600":"text-gray-500"}`}),h.jsx("span",{className:`text-xs mt-1 ${s?"text-emerald-600 font-semibold":"text-gray-500"}`,children:t.label})]},t.path)})})}function dq(){const{pathname:n}=Us();return N.useEffect(()=>{window.scrollTo(0,0)},[n]),null}const hq=["+919599202386","+918377861214","+916387811493"],M0="thevisuplate@gmail.com",I0={silver:`Silver Plan:
 One-time setup: 5,999
 Monthly subscription: 599/month
 First year total: 13,187`,gold:`Gold Plan:
 One-time setup: 6,999
 Monthly subscription: 699/month
 First year total: 15,387`,platinum:`Platinum Plan:
 One-time setup: 9,999
 Monthly subscription: 999/month
 First year total: 21,987`},fq=["Pricing","Book Demo","See Plans","Contact Team","How VisuPlate Works","Features","Try Live Menu","WhatsApp Support"];function pq(){const[n,e]=N.useState(()=>{try{return localStorage.getItem("visu_chat_open")==="1"}catch{return!1}}),[t,i]=N.useState(""),[s,r]=N.useState(()=>{try{const L=localStorage.getItem("visu_chat_msgs");return L?JSON.parse(L):[{from:"bot",text:"Hey!  I'm VisuBuddy  ask me about Pricing, Demo, or Plans!"}]}catch{return[{from:"bot",text:"Hey!  I'm VisuBuddy  ask me about Pricing, Demo, or Plans!"}]}}),[a,o]=N.useState(!1),l=N.useRef(null);N.useEffect(()=>{try{localStorage.setItem("visu_chat_msgs",JSON.stringify(s)),localStorage.setItem("visu_chat_open",n?"1":"0")}catch{}l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:"smooth"})},[s,n]);const c=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),u=L=>r(F=>[...F,{...L,time:L.time??c()}]),d=L=>{o(!0);const F=Math.min(1200+L.length*12,2200);setTimeout(()=>{o(!1),u({from:"bot",text:L})},F)},f=L=>{const F=L.toLowerCase();if(F.includes("silver"))return I0.silver;if(F.includes("gold"))return I0.gold;if(F.includes("platinum"))return I0.platinum;if(/\b(price|pricing|cost|plans|fees|subscription)\b/.test(F))return`We have 3 plans  Silver, Gold, Platinum.
Type 'Silver' / 'Gold' / 'Platinum' for details.`;if(F.includes("demo")||F.includes("book"))return"Great! Tap 'Book Demo' or tell me your preferred time.";if(F.includes("how visuplate")||F.includes("what is"))return"VisuPlate is a digital QR-menu system for restaurants with multi-outlet management & free maintenance.";if(F.includes("outlet"))return"Yes  we support multiple outlets.";if(F.includes("design"))return"Yes  menu design support is included.";if(F.includes("maintenance")||F.includes("service"))return"Yes  we offer free maintenance based on your plan tier.";if(F.includes("whatsapp"))return"Tap 'WhatsApp Support' and I'll open chats with our team.";if(F.includes("live menu"))return"Tap 'Try Live Menu' to preview your menu experience.";const U=["Hmm, can you rephrase that? Try asking about 'Pricing' or 'Demo'.","Not sure I understood  want to explore Silver, Gold, or Platinum plans?","You can ask me about pricing, demo, features, or menu design!"];return U[Math.floor(Math.random()*U.length)]},p=L=>{const F=(L??t).trim();if(!F)return;u({from:"user",text:F}),i("");const U=f(F);d(U)},g=L=>{L.key==="Enter"&&p()},x=L=>{if(L==="Pricing"||L==="See Plans"){p("pricing");return}if(L==="Book Demo"){u({from:"bot",text:"Sure  please enter your name & phone number below."}),v(!0);return}if(L==="Contact Team"){u({from:"bot",text:`You can email us at ${M0} or message us on WhatsApp.`});return}if(L==="How VisuPlate Works"){p("how visuplate");return}if(L==="Features"){u({from:"bot",text:"VisuPlate: QR menus, multi-outlet, menu design, analytics & integrations."});return}if(L==="Try Live Menu"){u({from:"bot",text:"Opening live menu preview..."});return}if(L==="WhatsApp Support"){A("Hello! I want information about VisuPlate pricing & demo."),u({from:"bot",text:"Opening WhatsApp chats..."});return}p(L)},A=(L="")=>{const F=encodeURIComponent(L);hq.forEach(U=>{const V=`https://wa.me/${U.replace(/\D/g,"")}?text=${F}`;window.open(V,"_blank")})},m=(L,F,U)=>{const z=encodeURIComponent("VisuPlate Demo Request / Callback"),V=encodeURIComponent(`Demo request from chatbot:
Name: ${L}
Phone: ${F}
Restaurant: ${U??""}
Please contact ASAP.`),G=`mailto:${M0}?subject=${z}&body=${V}`;window.open(G,"_blank"),A(`Demo request: Name: ${L}, Phone: ${F}, Restaurant: ${U??""}`),u({from:"bot",text:"Thanks! Our team will reach out shortly."})},[y,v]=N.useState(!1),[b,w]=N.useState(""),[S,C]=N.useState(""),[M,_]=N.useState(""),E=()=>{if(!b.trim()||!S.trim()){u({from:"bot",text:"Please enter both your name and phone number."});return}m(b.trim(),S.trim(),M.trim()),w(""),C(""),_(""),v(!1)},R=()=>h.jsx("div",{className:"w-9 h-9 rounded-full bg-emerald-600 flex items-center justify-center text-white font-bold select-none",children:"VP"});return h.jsxs(h.Fragment,{children:[!n&&h.jsx("button",{onClick:()=>e(!0),"aria-label":"Open chat",className:`\r
    fixed \r
    bottom-24 sm:bottom-20 md:bottom-10 lg:bottom-10 \r
    right-4 sm:right-6 \r
    bg-white/90 backdrop-blur-sm border border-gray-200 \r
    p-2 rounded-full shadow-xl hover:scale-105 \r
    transition z-50\r
  `,children:h.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-600 flex items-center justify-center text-white shadow",children:h.jsx(YF,{className:"w-6 h-6"})})}),n&&h.jsxs("div",{className:`\r
    fixed \r
    bottom-24              /* stays above bottom nav */\r
    right-2 sm:right-6 \r
    w-[90vw] sm:w-80 md:w-96     /* full width on mobile */\r
    max-h-[70vh] sm:max-h-[75vh] /* prevent overflow */\r
    bg-white/95 \r
    backdrop-blur-sm \r
    rounded-2xl \r
    border \r
    border-gray-200 \r
    shadow-2xl \r
    z-50 \r
    flex \r
    flex-col \r
    overflow-hidden \r
    animate-fade-in\r
  `,children:[h.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-emerald-600 text-white",children:[h.jsx(R,{}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-semibold",children:"VisuBuddy"}),h.jsx("div",{className:"text-xs opacity-90",children:"Ask anything  Pricing, Demo, Plans"})]}),h.jsx("button",{"aria-label":"Close chat",onClick:()=>e(!1),className:"p-1 hover:bg-white/10 rounded",children:h.jsx(Ex,{className:"w-4 h-4"})})]}),h.jsx("div",{className:"px-3 py-2 border-b border-gray-100 bg-white",children:h.jsx("div",{className:"flex flex-wrap gap-2",children:fq.map(L=>h.jsx("button",{onClick:()=>x(L),className:"text-xs px-3 py-1 bg-gray-100 rounded-full hover:bg-gray-200 transition",children:L},L))})}),h.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-white to-gray-50",children:[s.map((L,F)=>h.jsx("div",{className:"w-full flex",children:L.from==="bot"?h.jsxs("div",{className:"max-w-[78%] bg-gray-100 text-gray-800 px-3 py-2 rounded-xl whitespace-pre-line",children:[L.text,h.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:L.time})]}):h.jsxs("div",{className:"ml-auto max-w-[78%] bg-emerald-600 text-white px-3 py-2 rounded-xl whitespace-pre-line",children:[L.text,h.jsx("div",{className:"text-[10px] text-emerald-200 mt-1 text-right",children:L.time})]})},F)),a&&h.jsx("div",{className:"w-28 bg-gray-100 px-3 py-2 rounded-xl",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"typing-dot"}),h.jsx("div",{className:"typing-dot delay-200"}),h.jsx("div",{className:"typing-dot delay-400"})]})})]}),y&&h.jsxs("div",{className:"px-4 py-3 border-t bg-white space-y-2",children:[h.jsx("input",{placeholder:"Your name",value:b,onChange:L=>w(L.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm"}),h.jsx("input",{placeholder:"Phone (e.g. +9198xxxx)",value:S,onChange:L=>C(L.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm"}),h.jsx("input",{placeholder:"Restaurant (optional)",value:M,onChange:L=>_(L.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:E,className:"flex-1 bg-emerald-600 text-white px-3 py-2 rounded-lg text-sm",children:"Request Callback"}),h.jsx("button",{onClick:()=>{v(!1),u({from:"bot",text:"Cancelled."})},className:"px-3 py-2 rounded-lg border text-sm",children:"Cancel"})]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["We will email ",M0," and message our WhatsApp numbers."]})]}),!y&&h.jsxs("div",{className:"px-3 py-3 border-t bg-white flex items-center gap-2",children:[h.jsx("input",{placeholder:"Type a message...",value:t,onChange:L=>i(L.target.value),onKeyDown:g,className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none"}),h.jsx("button",{onClick:()=>p(),className:"bg-emerald-600 text-white px-3 py-2 rounded-lg text-sm",children:"Send"})]})]}),h.jsx("style",{children:`
        .typing-dot {
          width: 7px;
          height: 7px;
          background: #9ca3af;
          border-radius: 9999px;
          animation: blink 1s infinite;
        }
        .typing-dot.delay-200 { animation-delay: .15s; }
        .typing-dot.delay-400 { animation-delay: .3s; }

        @keyframes blink {
          0% { opacity: .2; transform: translateY(0); }
          30% { opacity: 1; transform: translateY(-4px); }
          100% { opacity: .2; transform: translateY(0); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(6px) scale(.98); }
          to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .animate-fade-in {
          animation: fadeIn .22s ease;
        }
      `})]})}const Rd={_origin:"https://api.emailjs.com"},mq=(n,e="https://api.emailjs.com")=>{Rd._userID=n,Rd._origin=e},CD=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class JM{constructor(e){this.status=e.status,this.text=e.responseText}}const MD=(n,e,t={})=>new Promise((i,s)=>{const r=new XMLHttpRequest;r.addEventListener("load",({target:a})=>{const o=new JM(a);o.status===200||o.text==="OK"?i(o):s(o)}),r.addEventListener("error",({target:a})=>{s(new JM(a))}),r.open("POST",Rd._origin+n,!0),Object.keys(t).forEach(a=>{r.setRequestHeader(a,t[a])}),r.send(e)}),gq=(n,e,t,i)=>{const s=i||Rd._userID;return CD(s,n,e),MD("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},Aq=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},xq=(n,e,t,i)=>{const s=i||Rd._userID,r=Aq(t);CD(s,n,e);const a=new FormData(r);return a.append("lib_version","3.2.0"),a.append("service_id",n),a.append("template_id",e),a.append("user_id",s),MD("/api/v1.0/email/send-form",a)},yq={init:mq,send:gq,sendForm:xq};function ID({jobTitle:n}){const[e,t]=N.useState(!1),[i,s]=N.useState({name:"",email:"",role:n??"",portfolio:"",why:"",message:"",resume_url:""});N.useEffect(()=>{n&&s(o=>({...o,role:n}))},[n]);const r=o=>{const l=o.target.name;s(c=>({...c,[l]:o.target.value}))},a=async o=>{o.preventDefault();try{await yq.send("service_77qf29o","template_el3mphs",{...i,job_title:n||i.role,time:new Date().toLocaleString(),resume_file:"",resume_filename:""},"B6wKR7DPbmnbWCbbz"),t(!0)}catch{alert("Failed to send application. Try again later.")}};return h.jsx(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`\r
        bg-white\r
        w-full\r
        max-w-md\r
        mx-auto\r
        p-8\r
        rounded-3xl\r
        shadow-xl\r
        border\r
      `,children:e?h.jsxs("div",{className:"text-center py-10",children:[h.jsx("h2",{className:"text-3xl font-bold text-emerald-700 mb-4",children:" Application Submitted!"}),h.jsx("p",{className:"text-gray-700 text-lg",children:"Thank you  our team will contact you after screening."})]}):h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"text-2xl font-bold mb-6 text-emerald-700 text-center",children:n?`Apply for ${n}`:"Early Team Application"}),h.jsxs("form",{onSubmit:a,className:"space-y-5",children:[["name","email","role","portfolio","resume_url"].map(o=>h.jsx("input",{name:o,value:i[o],onChange:r,placeholder:o==="resume_url"?"Resume Link (Google Drive, Notion, etc.)":o.charAt(0).toUpperCase()+o.slice(1),className:`\r
                    w-full \r
                    border \r
                    p-3 \r
                    rounded-xl \r
                    text-gray-700 \r
                    focus:ring-2 \r
                    focus:ring-emerald-500 \r
                    focus:outline-none\r
                  `,type:o==="email"?"email":"text",required:["name","email","role"].includes(o)},o)),h.jsx("textarea",{name:"why",value:i.why,onChange:r,placeholder:"Why do you want this role?",className:`\r
                w-full \r
                border \r
                p-3 \r
                rounded-xl \r
                text-gray-700 \r
                focus:ring-2 \r
                focus:ring-emerald-500 \r
                focus:outline-none\r
              `,rows:3}),h.jsx("textarea",{name:"message",value:i.message,onChange:r,placeholder:"Additional message",className:`\r
                w-full \r
                border \r
                p-3 \r
                rounded-xl \r
                text-gray-700 \r
                focus:ring-2 \r
                focus:ring-emerald-500 \r
                focus:outline-none\r
              `,rows:3}),h.jsx("button",{type:"submit",className:`\r
                w-full \r
                bg-emerald-600 \r
                hover:bg-emerald-700 \r
                text-white \r
                py-3 \r
                rounded-xl \r
                font-semibold \r
                transition\r
              `,children:"Submit Application"})]})]})})}function vq(){const{id:n}=k3(),[e,t]=N.useState(null);return N.useEffect(()=>{fetch("/jobs.json").then(i=>i.json()).then(i=>{const s=i.find(r=>r.id===n)??null;t(s)}).catch(()=>t(null))},[n]),e?h.jsxs("div",{className:"min-h-screen bg-white pt-32 pb-16 px-6 max-w-7xl mx-auto",children:[h.jsx(St,{to:"/careers",className:"text-emerald-600 underline text-sm",children:" Back to Careers"}),h.jsxs("div",{className:"mt-8 grid lg:grid-cols-[1fr_500px] gap-12",children:[h.jsxs("div",{className:"max-w-3xl",children:[h.jsx("h1",{className:"text-4xl font-bold",children:e.title}),h.jsxs("p",{className:"text-gray-600 mt-2",children:[e.location,"  ",e.type]}),h.jsxs("section",{className:"mt-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"About the role"}),e.description.map((i,s)=>h.jsx("p",{className:"text-gray-700 mb-3 leading-relaxed",children:i},s))]}),h.jsxs("section",{className:"mt-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Responsibilities"}),h.jsx("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:e.responsibilities.map((i,s)=>h.jsx("li",{children:i},s))})]}),h.jsxs("section",{className:"mt-8 mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Requirements"}),h.jsx("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:e.requirements.map((i,s)=>h.jsx("li",{children:i},s))})]}),e.extra&&h.jsxs("section",{className:"mt-8 mb-8",children:[h.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Extras"}),e.extra.salary_note&&h.jsx("p",{className:"text-gray-700 mb-2",children:e.extra.salary_note}),e.extra.perks&&e.extra.perks.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{className:"font-medium mt-3 mb-1",children:"Perks"}),h.jsx("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:e.extra.perks.map((i,s)=>h.jsx("li",{children:i},s))})]}),e.extra.stipend_structure&&h.jsxs("div",{className:"mt-3",children:[h.jsx("h4",{className:"font-medium mb-1",children:"Stipend Structure"}),h.jsxs("p",{className:"text-gray-700",children:["Fixed: ",e.extra.stipend_structure.fixed]}),h.jsxs("p",{className:"text-gray-700",children:["Incentive: ",e.extra.stipend_structure.incentive]})]}),e.extra.openings!==void 0&&h.jsxs("p",{className:"text-gray-700 mt-3",children:[h.jsx("strong",{children:"Openings:"})," ",e.extra.openings]})]})]}),h.jsx("aside",{className:`\r
    lg:sticky lg:top-28 \r
    p-6 border rounded-2xl shadow-lg bg-white h-fit\r
\r
    w-full\r
    max-w-md \r
    mx-auto \r
    mt-10\r
  `,children:h.jsx(ID,{jobTitle:e.title})})]})]}):h.jsx("div",{className:"min-h-screen flex items-center justify-center p-8",children:"Loading job..."})}function bq(){return h.jsx("div",{className:"min-h-screen bg-white pt-32 pb-10 px-4",children:h.jsx(ID,{})})}const wq={hidden:{opacity:0,y:24},enter:{opacity:1,y:0,transition:{duration:.7}},exit:{opacity:0,y:-12,transition:{duration:.4}}},ZM={off:{opacity:0,y:18,scale:.98},on:{opacity:1,y:0,scale:1}},Eq={closed:{height:0,opacity:0},open:{height:"auto",opacity:1,transition:{duration:.35}}};function _q(){const[n,e]=N.useState(0),[t,i]=N.useState(!1),s=["digital menu","QR menu","online menu","restaurant menu","contactless menu","food menu","menu QR code","digital restaurant","cafe menu","cloud kitchen","food ordering","menu management"];N.useEffect(()=>{var A;const l="Digital Menu  QR Code Menu System for Restaurants | The Visuplate",c="Transform your restaurant with our digital QR menu system. Contactless ordering, instant updates, mobile-friendly. Perfect for restaurants, cafes, cloud kitchens. Start free today.";document.title=l;let u=document.querySelector('meta[name="description"]');u||(u=document.createElement("meta"),u.name="description",document.head.appendChild(u)),u.content=c;let d=document.querySelector('link[rel="canonical"]');d||(d=document.createElement("link"),d.rel="canonical",document.head.appendChild(d)),d.href="https://thevisuplate.online/digital-menu",[{property:"og:title",content:l},{property:"og:description",content:c},{property:"og:type",content:"website"},{property:"og:url",content:"https://thevisuplate.online/digital-menu"},{property:"og:image",content:"https://thevisuplate.online/og-digital-menu.jpg"}].forEach(m=>{let y=document.querySelector(`meta[property="${m.property}"]`);y||(y=document.createElement("meta"),y.setAttribute("property",m.property),document.head.appendChild(y)),y.content=m.content}),[{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:l},{name:"twitter:description",content:c},{name:"twitter:image",content:"https://thevisuplate.online/twitter-digital-menu.jpg"}].forEach(m=>{let y=document.querySelector(`meta[name="${m.name}"]`);y||(y=document.createElement("meta"),y.name=m.name,document.head.appendChild(y)),y.content=m.content});const g=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)");i((g==null?void 0:g.matches)??!1);const x=()=>i(g.matches);return(A=g==null?void 0:g.addEventListener)==null||A.call(g,"change",x),()=>{var m;return(m=g==null?void 0:g.removeEventListener)==null?void 0:m.call(g,"change",x)}},[]);const r={"@context":"https://schema.org","@graph":[{"@type":"Product","@id":"https://thevisuplate.online/digital-menu#product",name:"The Visuplate Digital Menu System",description:"Premium digital QR menu solution for restaurants, cafes, and food businesses. Contactless ordering, real-time updates, and customer analytics.",brand:{"@type":"Brand",name:"The Visuplate",logo:"https://thevisuplate.online/logo.png"},category:"Restaurant Technology",offers:{"@type":"Offer",price:"0",priceCurrency:"INR",priceValidUntil:"2024-12-31",url:"https://thevisuplate.online/pricing",availability:"https://schema.org/InStock",hasMerchantReturnPolicy:"https://thevisuplate.online/refund-policy"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",ratingCount:"127",bestRating:"5",worstRating:"1"},review:[{"@type":"Review",author:{"@type":"Person",name:"Restaurant Owner"},reviewBody:"Game changer for our restaurant. Orders increased by 30% after switching to digital menus.",reviewRating:{"@type":"Rating",ratingValue:"5",bestRating:"5"}}]},{"@type":"SoftwareApplication",name:"The Visuplate Digital Menu",applicationCategory:"BusinessApplication",operatingSystem:"Web Browser",offers:{"@type":"Offer",price:"0",priceCurrency:"INR"}},{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://thevisuplate.online"},{"@type":"ListItem",position:2,name:"Digital Menu",item:"https://thevisuplate.online/digital-menu"}]},{"@type":"FAQPage",mainEntity:[{"@type":"Question",name:"How do I update menu items on my digital menu?",acceptedAnswer:{"@type":"Answer",text:"Login to your dashboard and make changes in real-time. Updates go live immediately - no printing or waiting required."}},{"@type":"Question",name:"Do customers need to download an app to use the QR menu?",acceptedAnswer:{"@type":"Answer",text:"No app download required. Customers simply scan the QR code with their phone camera and the menu opens directly in their mobile browser."}},{"@type":"Question",name:"Is the digital menu mobile-friendly and fast?",acceptedAnswer:{"@type":"Answer",text:"Yes, our menus are fully responsive and optimized for all mobile devices with fast loading times even on slow internet connections."}},{"@type":"Question",name:"How long does it take to set up a digital menu?",acceptedAnswer:{"@type":"Answer",text:"Most restaurants can get their digital menu live within 10-30 minutes. Just upload your menu items, customize the design, and generate your QR code."}},{"@type":"Question",name:"Can I use my own domain for the menu?",acceptedAnswer:{"@type":"Answer",text:"Yes, we support custom domains and white-labeling options. Connect your own domain through simple DNS configuration."}}]},{"@type":"Organization",name:"The Visuplate",url:"https://thevisuplate.online",logo:"https://thevisuplate.online/logo.png",description:"Digital menu solutions for modern restaurants and food businesses",sameAs:["https://facebook.com/thevisuplate","https://instagram.com/thevisuplate","https://linkedin.com/company/thevisuplate"]}]},a=[{title:"Instant Menu Updates",desc:"Update items, prices, and availability in real-time from your dashboard. Changes go live immediately across all devices.",schema:"RealTimeUpdate"},{title:"No App Required for Customers",desc:"Customers scan QR codes with their phone camera. Works instantly in any mobile browser without downloads or installations.",schema:"MobileCompatibility"},{title:"Shareable & Trackable Menus",desc:"Share via WhatsApp, Instagram, or embed on your website. Built-in analytics show popular items and customer engagement.",schema:"AnalyticsFeature"},{title:"Brand-Customizable Design",desc:"Match your restaurant's branding with custom colors, fonts, logos, and layout. Professional appearance that builds trust.",schema:"CustomizationFeature"},{title:"Fast & Optimized Performance",desc:"Lightning-fast loading with image optimization and lazy loading. Works perfectly even on low-bandwidth mobile networks.",schema:"PerformanceOptimization"},{title:"Secure & Reliable Hosting",desc:"HTTPS security, reliable cloud hosting, and regular backups. Your menu is always available when customers need it.",schema:"SecurityFeature"}],o=[{q:"How long does it take to set up a digital menu?",a:"Most restaurants can get their digital menu live within 15-21 days. Setup involves uploading your menu items, customizing the design to match your brand, and generating your QR code. No technical expertise required."},{q:"Can I use my own domain for the menu?",a:"Yes, we support custom domains and white-labeling options. You can connect your own domain (like menu.yourrestaurant.com) through simple DNS configuration in your dashboard."},{q:"Do you provide analytics for the menu?",a:"Yes, our built-in analytics show you item impressions, click-through rates, popular dishes, and customer engagement metrics. Understand what your customers love and optimize your menu accordingly."},{q:"Is there a limit on menu items or updates?",a:"No limits on menu items or updates. You can add unlimited dishes, categories, and make as many real-time changes as needed. Different pricing plans offer additional features like advanced analytics and custom domains."},{q:"How do customers access the digital menu?",a:"Customers can scan your QR code (placed on tables, counters, or marketing materials) or click a direct link shared via social media, WhatsApp, or your website. No app download required."}];return h.jsxs(h.Fragment,{children:[h.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(r)}}),h.jsxs("header",{className:"relative overflow-hidden",role:"banner",children:[h.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[h.jsx("div",{className:"absolute -left-40 -top-28 w-[420px] h-[420px] bg-gradient-to-br from-indigo-300/20 to-emerald-200/10 rounded-full filter blur-3xl animate-blob-slow opacity-90"}),h.jsx("div",{className:"absolute right-[-120px] top-16 w-[320px] h-[320px] bg-gradient-to-br from-purple-300/20 to-indigo-100/10 rounded-full filter blur-2xl animate-blob-slower opacity-70"}),h.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-[-80px] w-[640px] h-[320px] bg-gradient-to-br from-emerald-200/6 to-white rounded-full filter blur-3xl opacity-60"})]}),h.jsx("div",{className:"max-w-6xl mx-auto px-6 py-20",children:h.jsxs(Se.div,{variants:wq,initial:"hidden",animate:"enter",exit:"exit",className:"text-center","aria-labelledby":"digital-menu-heading",children:[h.jsx("h1",{id:"digital-menu-heading",className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight text-emerald-700",children:"Digital QR Menu System for Restaurants"}),h.jsxs("p",{className:"mt-4 max-w-3xl mx-auto text-gray-700 text-base sm:text-lg",children:["Transform your restaurant with contactless digital menus. ",h.jsx("strong",{children:"QR code ordering"}),", instant updates, and customer insights that boost sales and improve service."]}),h.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[h.jsxs(Se.a,{whileHover:{scale:t?1:1.03},whileTap:{scale:t?1:.98},className:"inline-flex items-center gap-3 bg-emerald-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-emerald-700 transition font-semibold",href:"/demo-menu","aria-label":"View live demo of our digital menu system",children:[h.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:h.jsx("path",{d:"M5 3v18l15-9L5 3z",fill:"currentColor"})}),"View Live Demo"]}),h.jsx(Se.a,{whileHover:{scale:t?1:1.02},className:"inline-flex items-center gap-3 border border-emerald-600 text-emerald-600 px-6 py-3 rounded-full shadow-sm hover:bg-emerald-50 transition font-semibold",href:"/pricing","aria-label":"See pricing plans for digital menus",children:"View Pricing Plans"})]}),h.jsx("div",{className:"mt-6 text-sm text-gray-600",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("strong",{className:"text-emerald-700",children:"Free demo available"}),h.jsx("span",{children:" No credit card required  Works on all devices"})]})})]})})]}),h.jsxs("section",{"aria-labelledby":"features-heading",className:"max-w-6xl mx-auto px-6 py-16",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{id:"features-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"Why Choose Our Digital Menu Solution?"}),h.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Designed specifically for restaurants, cafes, and food businesses to enhance customer experience and streamline operations."})]}),h.jsx(Se.div,{initial:"off",animate:"on",variants:ZM,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",itemScope:!0,itemType:"https://schema.org/ItemList",children:a.map((l,c)=>h.jsxs(Se.article,{custom:c,initial:"off",animate:"on",variants:ZM,transition:{delay:c*.12,duration:.55},whileHover:{y:t?0:-6,boxShadow:t?"0 6px 12px rgba(0,0,0,0.06)":"0 18px 40px rgba(16,24,40,0.08)"},className:"bg-white rounded-2xl p-6 md:p-8 border border-transparent hover:border-emerald-100 cursor-default","aria-labelledby":`feature-${c}`,itemProp:"itemListElement",itemScope:!0,itemType:"https://schema.org/ListItem",children:[h.jsx("meta",{itemProp:"position",content:String(c+1)}),h.jsx("h3",{id:`feature-${c}`,className:"text-xl font-semibold text-gray-900 mb-4",itemProp:"name",children:l.title}),h.jsx("p",{className:"text-gray-600 leading-relaxed",itemProp:"description",children:l.desc}),h.jsx("div",{className:"mt-6",children:h.jsxs("span",{className:"inline-flex items-center text-sm text-emerald-600 font-medium",children:["Learn more about ",l.title.toLowerCase(),h.jsx("svg",{className:"w-4 h-4 ml-2",viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",children:h.jsx("path",{d:"M5 10h10M11 6l4 4-4 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]},l.title))})]}),h.jsx("section",{"aria-labelledby":"demo-heading",className:"max-w-6xl mx-auto px-6 py-16",children:h.jsx(Se.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-gradient-to-br from-white to-emerald-50 rounded-2xl p-8 md:p-12 shadow-lg border border-emerald-100",children:h.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h2",{id:"demo-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"Experience Our Digital Menu Live"}),h.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"See exactly how your customers will experience your menu. Scan the demo QR code or click to view the fully functional mobile-optimized menu."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsx("a",{href:"/demo-menu",className:"px-6 py-3 bg-emerald-600 text-white rounded-full shadow hover:bg-emerald-700 transition font-semibold text-center","aria-label":"Open interactive digital menu demo",children:"Open Interactive Demo"}),h.jsx("a",{href:"/pricing",className:"px-6 py-3 border-2 border-emerald-600 text-emerald-600 rounded-full hover:bg-emerald-50 transition font-semibold text-center",children:"See All Plans & Features"})]}),h.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:[h.jsx("strong",{children:"Perfect for:"})," Restaurants, Cafes, Food Trucks, Cloud Kitchens, Bars, Catering Services"]})]}),h.jsx("div",{className:"w-full md:w-80",children:h.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-2 border-gray-200 shadow-xl bg-white",children:[h.jsx("div",{className:"bg-gradient-to-b from-emerald-600 to-emerald-700 p-4 text-white text-center",children:h.jsx("div",{className:"text-sm font-semibold",children:"The Visuplate Demo Menu"})}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"h-40 rounded-lg bg-gradient-to-br from-emerald-50 to-white flex flex-col justify-center items-center p-4 border border-emerald-100",children:[h.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Scan to view demo"}),h.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded flex items-center justify-center",children:h.jsx("span",{className:"text-xs text-gray-400",children:"QR Code"})})]}),h.jsxs("div",{className:"mt-4 text-center",children:[h.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:"Chef's Special Thali"}),h.jsx("div",{className:"text-xs text-gray-600 mt-1",children:" 299  Vegetarian  Serves 1"})]})]}),h.jsx("div",{className:"absolute right-3 bottom-3 text-xs text-gray-400 bg-white px-2 py-1 rounded",children:"Live Preview"})]})})]})})}),h.jsxs("section",{"aria-labelledby":"faq-heading",className:"max-w-4xl mx-auto px-6 py-16",children:[h.jsxs("div",{className:"text-center mb-10",children:[h.jsx("h2",{id:"faq-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"Digital Menu Frequently Asked Questions"}),h.jsx("p",{className:"text-lg text-gray-600",children:"Everything you need to know about our QR code digital menu system for restaurants."})]}),h.jsx("div",{className:"space-y-4",children:o.map((l,c)=>{const u=n===c;return h.jsxs("article",{className:"bg-white rounded-xl border border-gray-200 p-5 shadow-sm hover:shadow-md transition-shadow",itemScope:!0,itemProp:"mainEntity",itemType:"https://schema.org/Question",children:[h.jsxs("button",{"aria-expanded":u,"aria-controls":`faq-answer-${c}`,onClick:()=>e(u?null:c),className:"w-full flex justify-between items-start gap-4 text-left",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",itemProp:"name",children:l.q}),h.jsx("div",{className:"text-sm text-emerald-600 font-medium",children:u?"Click to collapse answer":"Click to expand answer"})]}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border transition-colors ${u?"bg-emerald-50 border-emerald-200":"bg-gray-50 border-gray-200"}`,children:h.jsx("svg",{className:`w-5 h-5 transform transition-transform ${u?"rotate-45 text-emerald-600":"text-gray-600"}`,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:h.jsx("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})]}),h.jsx(pb,{initial:!1,children:u&&h.jsx(Se.div,{initial:"closed",animate:"open",exit:"closed",variants:Eq,className:"overflow-hidden",id:`faq-answer-${c}`,itemScope:!0,itemProp:"acceptedAnswer",itemType:"https://schema.org/Answer",children:h.jsx("div",{className:"pt-4 mt-2 border-t border-gray-100",children:h.jsx("p",{className:"text-gray-700 leading-relaxed",itemProp:"text",children:l.a})})},"panel")})]},l.q)})})]}),h.jsx("section",{"aria-labelledby":"cta-heading",className:"py-16 bg-gradient-to-br from-emerald-50 to-white border-t border-emerald-100",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[h.jsx("h2",{id:"cta-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Transform Your Restaurant Menu?"}),h.jsx("p",{className:"text-lg text-gray-700 mb-8 max-w-2xl mx-auto",children:"Join thousands of restaurants using our digital menu system to increase orders, reduce costs, and provide better customer experiences."}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-8",children:[h.jsx("a",{href:"/demo-menu",className:"px-8 py-4 bg-emerald-600 rounded-full text-white shadow-lg hover:bg-emerald-700 transition font-semibold text-lg","aria-label":"Try our digital menu demo now",children:"Try Free Demo Now"}),h.jsx("a",{href:"/contact",className:"px-8 py-4 border-2 border-emerald-600 rounded-full text-emerald-600 hover:bg-emerald-50 transition font-semibold text-lg",children:"Get Custom Quote"})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 text-sm text-gray-600 max-w-2xl mx-auto",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{children:"No credit card required"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{children:"Setup in under 15-21 days"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{children:"Free support included"})]})]})]})}),h.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-8",children:h.jsx("div",{className:"max-w-6xl mx-auto px-6",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[h.jsx("strong",{children:"Popular Searches:"})," ",s.slice(0,6).join("  ")]}),h.jsx("p",{className:"text-xs text-gray-500 max-w-3xl mx-auto",children:"The Visuplate Digital Menu solution helps restaurants, cafes, food trucks, and catering businesses create beautiful, functional QR code menus that work on all devices. Our contactless menu system is optimized for search engines and mobile users, making it easy for customers to browse your menu and place orders."}),h.jsxs("div",{className:"mt-4 text-xs text-gray-400",children:[" ",new Date().getFullYear()," The Visuplate. Digital Menu Solutions for Restaurants."]})]})})})]})}const Sq={off:{opacity:0,y:20},on:{opacity:1,y:0}},Cq={on:{transition:{staggerChildren:.15}}};function Mq(){const[n,e]=N.useState(!1);N.useEffect(()=>{var x;const l="QR Code Menu System for Restaurants | Contactless Digital Menu | The Visuplate",c="QR code menu system for restaurants. Contactless digital menus that load instantly when scanned. Hygienic, trackable, and easy to update. Perfect for modern dining.";document.title=l;let u=document.querySelector('meta[name="description"]');u||(u=document.createElement("meta"),u.name="description",document.head.appendChild(u)),u.content=c;let d=document.querySelector('link[rel="canonical"]');d||(d=document.createElement("link"),d.rel="canonical",document.head.appendChild(d)),d.href="https://thevisuplate.online/qr-menu",[{property:"og:title",content:l},{property:"og:description",content:c},{property:"og:type",content:"website"},{property:"og:url",content:"https://thevisuplate.online/qr-menu"},{property:"og:image",content:"https://thevisuplate.online/og-qr-menu.jpg"}].forEach(A=>{let m=document.querySelector(`meta[property="${A.property}"]`);m||(m=document.createElement("meta"),m.setAttribute("property",A.property),document.head.appendChild(m)),m.content=A.content});const p=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)");e((p==null?void 0:p.matches)??!1);const g=()=>e(p.matches);return(x=p==null?void 0:p.addEventListener)==null||x.call(p,"change",g),()=>{var A;return(A=p==null?void 0:p.removeEventListener)==null?void 0:A.call(p,"change",g)}},[]);const t={"@context":"https://schema.org","@graph":[{"@type":"Product","@id":"https://thevisuplate.online/qr-menu#product",name:"QR Code Menu System",description:"Contactless QR code digital menu solution for restaurants, cafes, and food establishments. Customers scan to view menu instantly.",brand:{"@type":"Brand",name:"The Visuplate",logo:"https://thevisuplate.online/logo.png"},category:"Restaurant Technology",keywords:["QR menu","digital menu","contactless menu","QR code menu","restaurant QR code"],offers:{"@type":"Offer",price:"0",priceCurrency:"INR",priceValidUntil:"2024-12-31",url:"https://thevisuplate.online/pricing",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.7",ratingCount:"89",bestRating:"5",worstRating:"1"},review:[{"@type":"Review",author:{"@type":"Person",name:"Cafe Owner"},reviewBody:"Our customers love the QR menu. So much faster than waiting for physical menus.",reviewRating:{"@type":"Rating",ratingValue:"5",bestRating:"5"}}]},{"@type":"FAQPage",mainEntity:[{"@type":"Question",name:"How does the QR code menu work?",acceptedAnswer:{"@type":"Answer",text:"Customers scan your QR code with their smartphone camera, which instantly opens your digital menu in their mobile browser. No app download required."}},{"@type":"Question",name:"Do customers need to install an app?",acceptedAnswer:{"@type":"Answer",text:"No app installation needed. The QR code opens directly in the phone's web browser, making it accessible to all customers instantly."}},{"@type":"Question",name:"Can I track how many people scan my QR menu?",acceptedAnswer:{"@type":"Answer",text:"Yes, our analytics dashboard shows scan counts, popular menu items, peak usage times, and customer engagement metrics."}}]},{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://thevisuplate.online"},{"@type":"ListItem",position:2,name:"QR Menu",item:"https://thevisuplate.online/qr-menu"}]}]},i=[{title:"Instant Scan & View",description:"Customers scan QR code and menu loads immediately in their browser. No delays, no app downloads required.",icon:"",schema:"InstantLoading"},{title:"100% Contactless Experience",description:"Eliminate physical menu handling. More hygienic and safer for both customers and staff in post-pandemic dining.",icon:"",schema:"HygienicSolution"},{title:"Smart Analytics & Trends",description:"Track popular dishes, scan frequency, and customer preferences. Make data-driven menu decisions.",icon:"",schema:"AnalyticsFeature"},{title:"Real-time Menu Updates",description:"Change prices, add specials, or mark items sold out instantly. Changes reflect immediately across all devices.",icon:"",schema:"RealTimeUpdate"},{title:"Brand Customization",description:"Match your restaurant's branding with custom colors, logos, and layout. Professional appearance builds trust.",icon:"",schema:"BrandCustomization"},{title:"Multi-language Support",description:"Serve international customers with multi-language menu options. Expand your customer reach effortlessly.",icon:"",schema:"MultiLanguage"}],s=["Reduce menu printing costs by up to 80%","30% faster table turnover with instant menu access","Update menu items in real-time without waste","Track customer preferences and popular dishes","Eco-friendly solution reduces paper waste","Works on any smartphone with camera"],r=[{question:"How long does it take to set up a QR menu?",answer:"Most restaurants can set up their QR menu in under 15 minutes. Simply upload your menu items, customize the design, and download your QR codes for printing."},{question:"What if customers don't have QR scanner apps?",answer:"Modern smartphones (iOS 11+, Android 9+) have built-in QR code scanners in their camera apps. No additional apps needed - just point and scan."},{question:"Can I use the same QR code for multiple tables?",answer:"Yes, one QR code can be printed and placed on multiple tables. Each scan is tracked individually in your analytics dashboard."},{question:"How do I print and display the QR codes?",answer:"We provide print-ready QR code files in multiple sizes. Common placements include table tents, stickers on tables, wall posters, or counter displays."}],[a,o]=N.useState(0);return h.jsxs(h.Fragment,{children:[h.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}}),h.jsxs("header",{className:"relative w-full py-20 bg-gradient-to-br from-purple-50 via-white to-blue-50 overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 -z-10",children:[h.jsx("div",{className:"absolute -top-24 -left-24 w-72 h-72 bg-purple-200/30 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-32 -right-32 w-96 h-96 bg-blue-200/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-purple-300/10 rounded-full blur-2xl"})]}),h.jsxs("div",{className:"max-w-6xl mx-auto px-6 text-center",children:[h.jsx(Se.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-4xl md:text-5xl lg:text-6xl font-bold text-purple-700 mb-6",children:"QR Code Menu System"}),h.jsxs(Se.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},className:"text-gray-600 max-w-3xl mx-auto text-lg md:text-xl leading-relaxed",children:["Transform your restaurant with ",h.jsx("strong",{children:"contactless QR code menus"}),". Customers scan to view your digital menu instantly - faster, cleaner, and smarter than traditional menus."]}),h.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4},className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[h.jsxs(Se.a,{whileHover:{scale:n?1:1.05},whileTap:{scale:n?1:.95},href:"/demo-qr-menu",className:"px-8 py-4 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 transition-colors font-semibold text-lg flex items-center gap-3","aria-label":"Try our QR menu demo",children:[h.jsx("span",{children:"Try QR Menu Demo"}),h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/pricing",className:"px-8 py-4 border-2 border-purple-600 text-purple-600 rounded-full hover:bg-purple-50 transition-colors font-semibold text-lg",children:"View Pricing"})]}),h.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.6},className:"mt-6 flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-500",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{children:"No app download required"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{children:"Setup in 15 minutes"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{children:"Free demo available"})]})]})]})]}),h.jsxs("section",{"aria-labelledby":"features-heading",className:"max-w-7xl mx-auto px-6 py-16",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{id:"features-heading",className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose QR Code Menus?"}),h.jsx("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:"Modern solutions for modern restaurants. Enhance customer experience while streamlining your operations."})]}),h.jsx(Se.div,{variants:Cq,initial:"off",whileInView:"on",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((l,c)=>h.jsxs(Se.article,{variants:Sq,whileHover:{y:n?0:-8,transition:{duration:.3}},className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[h.jsx("div",{className:"text-4xl mb-4",children:l.icon}),h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:l.title}),h.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.description})]},l.title))})]}),h.jsx("section",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white py-16",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Transform Your Restaurant Service"}),h.jsx("p",{className:"text-purple-100 text-lg max-w-2xl mx-auto",children:"Join thousands of restaurants that have upgraded to QR code menus"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto",children:s.map((l,c)=>h.jsxs(Se.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{duration:.5,delay:c*.1},viewport:{once:!0},className:"flex items-start gap-3 p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[h.jsx("svg",{className:"w-5 h-5 text-green-300 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{className:"text-purple-50",children:l})]},l))})]})}),h.jsx("section",{className:"max-w-6xl mx-auto px-6 py-16",children:h.jsx(Se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 border border-gray-200",children:h.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[h.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ready to See It in Action?"}),h.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Experience our QR menu system firsthand. Scan the demo code or click to view the mobile-optimized menu that your customers will see."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/demo-qr-menu",className:"px-8 py-4 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 transition-colors font-semibold text-center",children:"View Live Demo"}),h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/contact",className:"px-8 py-4 border-2 border-purple-600 text-purple-600 rounded-full hover:bg-purple-50 transition-colors font-semibold text-center",children:"Get Custom Quote"})]})]}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-blue-100 p-6 rounded-2xl shadow-inner",children:h.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[h.jsxs("div",{className:"w-48 h-48 bg-gradient-to-br from-purple-400 to-blue-500 rounded-lg flex items-center justify-center text-white font-bold text-center text-sm p-4",children:["Scan This QR Code",h.jsx("br",{}),"To View Demo Menu"]}),h.jsx("div",{className:"mt-4 text-center text-sm text-gray-600",children:"Point your camera at this code"})]})})})]})})}),h.jsxs("section",{"aria-labelledby":"faq-heading",className:"max-w-4xl mx-auto px-6 py-16",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{id:"faq-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),h.jsx("p",{className:"text-gray-600",children:"Everything you need to know about QR code menus for restaurants"})]}),h.jsx("div",{className:"space-y-4",children:r.map((l,c)=>h.jsxs(Se.article,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:c*.1},viewport:{once:!0},className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:[h.jsxs("button",{onClick:()=>o(a===c?null:c),className:"w-full flex justify-between items-center text-left","aria-expanded":a===c,children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 pr-4",children:l.question}),h.jsx("svg",{className:`w-6 h-6 text-purple-600 transform transition-transform ${a===c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx(pb,{children:a===c&&h.jsx(Se.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:h.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100",children:h.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.answer})})})})]},c))})]}),h.jsx("section",{className:"bg-gradient-to-br from-purple-50 to-blue-50 py-16",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[h.jsx(Se.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Start Your QR Menu Journey Today"}),h.jsx(Se.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.2},viewport:{once:!0},className:"text-gray-600 text-lg mb-8 max-w-2xl mx-auto",children:"Join the future of restaurant service with our easy-to-implement QR code menu system."}),h.jsxs(Se.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/get-started",className:"px-8 py-4 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 transition-colors font-semibold text-lg",children:"Get Started Free"}),h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/schedule-demo",className:"px-8 py-4 border-2 border-purple-600 text-purple-600 rounded-full hover:bg-purple-50 transition-colors font-semibold text-lg",children:"Schedule Demo"})]})]})})]})}const Iq={off:{opacity:0,y:20},on:{opacity:1,y:0}},Tq={on:{transition:{staggerChildren:.15}}};function Rq(){const[n,e]=N.useState(!1),[t,i]=N.useState(0);N.useEffect(()=>{var m;const c="Online Menu System for Restaurants | Web-Based Digital Menu | The Visuplate",u="Online menu system for restaurants. Web-based digital menus accessible from any device. Shareable links, fast loading, and mobile-optimized. Perfect for delivery and dine-in.";document.title=c;let d=document.querySelector('meta[name="description"]');d||(d=document.createElement("meta"),d.name="description",document.head.appendChild(d)),d.content=u;let f=document.querySelector('link[rel="canonical"]');f||(f=document.createElement("link"),f.rel="canonical",document.head.appendChild(f)),f.href="https://thevisuplate.online/online-menu",[{property:"og:title",content:c},{property:"og:description",content:u},{property:"og:type",content:"website"},{property:"og:url",content:"https://thevisuplate.online/online-menu"},{property:"og:image",content:"https://thevisuplate.online/og-online-menu.jpg"}].forEach(y=>{let v=document.querySelector(`meta[property="${y.property}"]`);v||(v=document.createElement("meta"),v.setAttribute("property",y.property),document.head.appendChild(v)),v.content=y.content}),[{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:c},{name:"twitter:description",content:u},{name:"twitter:image",content:"https://thevisuplate.online/twitter-online-menu.jpg"}].forEach(y=>{let v=document.querySelector(`meta[name="${y.name}"]`);v||(v=document.createElement("meta"),v.name=y.name,document.head.appendChild(v)),v.content=y.content});const x=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)");e((x==null?void 0:x.matches)??!1);const A=()=>e(x.matches);return(m=x==null?void 0:x.addEventListener)==null||m.call(x,"change",A),()=>{var y;return(y=x==null?void 0:x.removeEventListener)==null?void 0:y.call(x,"change",A)}},[]);const s={"@context":"https://schema.org","@graph":[{"@type":"Product","@id":"https://thevisuplate.online/online-menu#product",name:"Online Menu System",description:"Web-based online menu solution for restaurants, cafes, and food delivery services. Accessible from any device with shareable links and instant updates.",brand:{"@type":"Brand",name:"The Visuplate",logo:"https://thevisuplate.online/logo.png"},category:"Restaurant Technology",keywords:["online menu","web menu","digital menu","restaurant website menu","food delivery menu"],offers:{"@type":"Offer",price:"0",priceCurrency:"INR",priceValidUntil:"2024-12-31",url:"https://thevisuplate.online/pricing",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",ratingCount:"156",bestRating:"5",worstRating:"1"},review:[{"@type":"Review",author:{"@type":"Person",name:"Restaurant Manager"},reviewBody:"Our online menu increased takeaway orders by 45%. Customers love browsing on their phones before ordering.",reviewRating:{"@type":"Rating",ratingValue:"5",bestRating:"5"}}]},{"@type":"WebApplication",name:"The Visuplate Online Menu",applicationCategory:"BusinessApplication",operatingSystem:"All",permissions:"browser",description:"Responsive online menu system for food businesses",browserRequirements:"Requires JavaScript. Works on all modern browsers."},{"@type":"FAQPage",mainEntity:[{"@type":"Question",name:"How do customers access the online menu?",acceptedAnswer:{"@type":"Answer",text:"Customers can access your menu through a shareable link on WhatsApp, Instagram, your website, or by scanning a QR code. No downloads required."}},{"@type":"Question",name:"Does the online menu work on all devices?",acceptedAnswer:{"@type":"Answer",text:"Yes, our online menus are fully responsive and optimized for mobile phones, tablets, laptops, and desktop computers with automatic layout adjustments."}},{"@type":"Question",name:"Can I embed the menu on my website?",acceptedAnswer:{"@type":"Answer",text:"Absolutely! We provide embed codes to seamlessly integrate your menu into any website, WordPress, Shopify, or custom web platform."}}]},{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://thevisuplate.online"},{"@type":"ListItem",position:2,name:"Online Menu",item:"https://thevisuplate.online/online-menu"}]}]},r=[{title:"Universal Device Compatibility",description:"Flawless experience on smartphones, tablets, laptops, and desktops. Responsive design adapts to any screen size automatically.",icon:"",stats:"100% Responsive"},{title:"Instant Shareable Links",description:"Share your menu via WhatsApp, Instagram, Facebook, or embed directly on your website. One link works everywhere.",icon:"",stats:"1-Click Sharing"},{title:"Lightning Fast Loading",description:"Optimized for speed with lazy loading images and minimal code. Loads in under 2 seconds on mobile networks.",icon:"",stats:"<2s Load Time"},{title:"SEO Optimized",description:"Built with search engine optimization. Your menu can appear in Google search results, driving more organic traffic.",icon:"",stats:"Google Friendly"},{title:"Real-time Order Integration",description:"Connect with food delivery platforms or add direct ordering. Customers can order directly from the menu.",icon:"",stats:"Order Integration"},{title:"Multi-language Support",description:"Serve international customers with automatic translation options. Expand your reach without barriers.",icon:"",stats:"15+ Languages"}],a=[{scenario:"Food Delivery Services",benefit:"Customers browse and order before even calling",icon:""},{scenario:"Website Integration",benefit:"Seamlessly embed menu on your existing website",icon:""},{scenario:"Social Media Marketing",benefit:"Share menu links on Instagram and Facebook",icon:""},{scenario:"Catering Services",benefit:"Send professional menu links to corporate clients",icon:""},{scenario:"Event Menus",benefit:"Create special menus for weddings and events",icon:""},{scenario:"Seasonal Specials",benefit:"Quickly update and share seasonal offerings",icon:""}],o=["Increase online orders by up to 60%","Reduce customer service calls about menu items","Update menu instantly without technical skills","Track customer engagement and popular dishes","Professional appearance builds customer trust","Works with any device your customers use"],l=[{question:"How do I share my online menu with customers?",answer:"You can share your menu in multiple ways: copy the direct link to share on WhatsApp/email, embed it on your website, add to your social media profiles, or generate QR codes for physical locations."},{question:"Can customers order directly from the online menu?",answer:"Yes! We support direct ordering integration with popular food delivery platforms or you can set up direct ordering with payment processing. Customers can browse and order in one seamless experience."},{question:"How often can I update my online menu?",answer:"You can update your menu unlimited times in real-time. Changes are instant and reflect immediately across all shared links and embedded versions. Perfect for daily specials or sold-out items."},{question:"Is the online menu optimized for slow internet connections?",answer:"Absolutely. Our menus are optimized with compressed images, lazy loading, and minimal code to ensure fast loading even on 2G/3G networks. Perfect for all customer scenarios."},{question:"Can I see analytics for my online menu?",answer:"Yes, our dashboard provides detailed analytics including page views, popular items, average time spent, device types, and geographic data to help you understand customer behavior."}];return h.jsxs(h.Fragment,{children:[h.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(s)}}),h.jsxs("header",{className:"relative w-full py-20 bg-gradient-to-br from-green-50 via-white to-emerald-50 overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 -z-10",children:[h.jsx("div",{className:"absolute -top-20 -left-20 w-80 h-80 bg-green-200/30 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-28 -right-28 w-96 h-96 bg-emerald-200/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-green-300/10 rounded-full blur-2xl"})]}),h.jsxs("div",{className:"max-w-6xl mx-auto px-6 text-center",children:[h.jsx(Se.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7},className:"text-4xl md:text-5xl lg:text-6xl font-bold text-green-700 mb-6",children:"Online Menu System"}),h.jsxs(Se.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},className:"text-gray-600 max-w-3xl mx-auto text-lg md:text-xl leading-relaxed",children:["Beautiful, fast, and accessible online menus that work on ",h.jsx("strong",{children:"any device"}),". Share via link, embed on your website, or integrate with social media to reach more customers."]}),h.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4},className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[h.jsxs(Se.a,{whileHover:{scale:n?1:1.05},whileTap:{scale:n?1:.95},href:"/demo-online-menu",className:"px-8 py-4 bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-colors font-semibold text-lg flex items-center gap-3","aria-label":"View online menu demo",children:[h.jsx("span",{children:"View Online Demo"}),h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]}),h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/pricing",className:"px-8 py-4 border-2 border-green-600 text-green-600 rounded-full hover:bg-green-50 transition-colors font-semibold text-lg",children:"Pricing & Plans"})]}),h.jsxs(Se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.6},className:"mt-8 flex flex-wrap items-center justify-center gap-6 text-sm text-gray-500",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-white/70 px-3 py-2 rounded-full",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{children:"Works on all devices"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/70 px-3 py-2 rounded-full",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{children:"No technical skills needed"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/70 px-3 py-2 rounded-full",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsx("span",{children:"Free demo available"})]})]})]})]}),h.jsxs("section",{"aria-labelledby":"features-heading",className:"max-w-7xl mx-auto px-6 py-16",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("h2",{id:"features-heading",className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Why Choose Online Menus?"}),h.jsx("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:"Modern solutions for the digital age. Reach customers wherever they are with beautiful, functional online menus."})]}),h.jsx(Se.div,{variants:Tq,initial:"off",whileInView:"on",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((c,u)=>h.jsxs(Se.article,{variants:Iq,whileHover:{y:n?0:-8,transition:{duration:.3}},className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group",children:[h.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 transition-transform duration-300",children:c.icon}),h.jsx("div",{className:"mb-2",children:h.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs font-semibold px-3 py-1 rounded-full",children:c.stats})}),h.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:c.title}),h.jsx("p",{className:"text-gray-600 leading-relaxed",children:c.description})]},c.title))})]}),h.jsx("section",{className:"bg-gray-50 py-16",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Perfect For Every Scenario"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"Whether you're a small cafe or multi-location restaurant chain"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((c,u)=>h.jsxs(Se.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:u*.1},viewport:{once:!0},className:"bg-white p-6 rounded-xl shadow-md border border-gray-200 hover:shadow-lg transition-shadow",children:[h.jsx("div",{className:"text-3xl mb-3",children:c.icon}),h.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:c.scenario}),h.jsx("p",{className:"text-gray-600 text-sm",children:c.benefit})]},c.scenario))})]})}),h.jsx("section",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white py-16",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Measurable Business Results"}),h.jsx("p",{className:"text-green-100 text-lg max-w-2xl mx-auto",children:"Join successful restaurants using our online menu system"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl mx-auto",children:o.map((c,u)=>h.jsxs(Se.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{duration:.5,delay:u*.1},viewport:{once:!0},className:"flex items-start gap-3 p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[h.jsx("svg",{className:"w-5 h-5 text-green-300 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{className:"text-green-50",children:c})]},c))})]})}),h.jsx("section",{className:"max-w-6xl mx-auto px-6 py-16",children:h.jsx(Se.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 border border-gray-200",children:h.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12",children:[h.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Experience the Online Menu Difference"}),h.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"See how your customers will experience your menu across different devices. Responsive design ensures perfect viewing everywhere."}),h.jsxs("div",{className:"space-y-4 mb-8",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{className:"text-gray-700",children:"Mobile-optimized for smartphones"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{className:"text-gray-700",children:"Tablet-friendly layout"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),h.jsx("span",{className:"text-gray-700",children:"Desktop-optimized experience"})]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/demo-online-menu",className:"px-8 py-4 bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-colors font-semibold text-center",children:"View Live Demo"}),h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/get-started",className:"px-8 py-4 border-2 border-green-600 text-green-600 rounded-full hover:bg-green-50 transition-colors font-semibold text-center",children:"Start Free Trial"})]})]}),h.jsx("div",{className:"flex-shrink-0",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"bg-gradient-to-br from-green-100 to-emerald-100 p-6 rounded-2xl shadow-inner",children:h.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[h.jsx("div",{className:"bg-white p-2 rounded-lg shadow-md transform -rotate-6",children:h.jsx("div",{className:"w-24 h-40 bg-gradient-to-br from-green-400 to-emerald-500 rounded flex items-center justify-center text-white text-xs text-center p-2",children:"Mobile View"})}),h.jsx("div",{className:"bg-white p-3 rounded-lg shadow-md transform rotate-3",children:h.jsx("div",{className:"w-32 h-24 bg-gradient-to-br from-green-400 to-emerald-500 rounded flex items-center justify-center text-white text-xs text-center p-2",children:"Tablet View"})}),h.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md transform -rotate-3",children:h.jsx("div",{className:"w-40 h-28 bg-gradient-to-br from-green-400 to-emerald-500 rounded flex items-center justify-center text-white text-xs text-center p-2",children:"Desktop View"})})]})}),h.jsx("div",{className:"absolute -bottom-4 -right-4 bg-green-600 text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg",children:"Responsive Design"})]})})]})})}),h.jsxs("section",{"aria-labelledby":"faq-heading",className:"max-w-4xl mx-auto px-6 py-16",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{id:"faq-heading",className:"text-3xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),h.jsx("p",{className:"text-gray-600",children:"Everything you need to know about our online menu system"})]}),h.jsx("div",{className:"space-y-4",children:l.map((c,u)=>h.jsxs(Se.article,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:u*.1},viewport:{once:!0},className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:[h.jsxs("button",{onClick:()=>i(t===u?null:u),className:"w-full flex justify-between items-center text-left","aria-expanded":t===u,children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 pr-4",children:c.question}),h.jsx("svg",{className:`w-6 h-6 text-green-600 transform transition-transform ${t===u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h.jsx(pb,{children:t===u&&h.jsx(Se.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:h.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100",children:h.jsx("p",{className:"text-gray-600 leading-relaxed",children:c.answer})})})})]},u))})]}),h.jsx("section",{className:"bg-gradient-to-br from-green-50 to-emerald-50 py-16",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[h.jsx(Se.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Launch Your Online Menu Today"}),h.jsx(Se.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.2},viewport:{once:!0},className:"text-gray-600 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of restaurants serving customers through beautiful, functional online menus."}),h.jsxs(Se.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.4},viewport:{once:!0},className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/get-started",className:"px-8 py-4 bg-green-600 text-white rounded-full shadow-lg hover:bg-green-700 transition-colors font-semibold text-lg",children:"Start Free Trial"}),h.jsx(Se.a,{whileHover:{scale:n?1:1.05},href:"/schedule-demo",className:"px-8 py-4 border-2 border-green-600 text-green-600 rounded-full hover:bg-green-50 transition-colors font-semibold text-lg",children:"Schedule Personalized Demo"})]}),h.jsx(Se.p,{initial:{opacity:0},whileInView:{opacity:1},transition:{delay:.6},viewport:{once:!0},className:"mt-6 text-sm text-gray-500",children:"No credit card required  Setup in 15 minutes  Free support included"})]})})]})}function Bq(){const[n,e]=N.useState(!1);return N.useEffect(()=>{const t=setTimeout(()=>e(!0),500);return()=>clearTimeout(t)},[]),h.jsxs(bF,{children:[h.jsx(dq,{}),h.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 flex flex-col transition-opacity duration-1000 ${n?"opacity-100":"opacity-0"}`,children:[h.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-white via-slate-50 to-emerald-100/30 -z-10"}),h.jsx("div",{className:"fixed inset-0 opacity-20 -z-10",children:[...Array(15)].map((t,i)=>h.jsx("div",{className:"absolute w-1 h-1 bg-emerald-400 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*4}s`}},i))}),h.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[h.jsx(BF,{}),h.jsx("main",{className:"flex-grow relative z-20",children:h.jsxs(J3,{children:[h.jsx(zn,{path:"/",element:h.jsx(VQ,{})}),h.jsx(zn,{path:"/about",element:h.jsx(GQ,{})}),h.jsx(zn,{path:"/contact",element:h.jsx(HQ,{})}),h.jsx(zn,{path:"/demo-menu",element:h.jsx(nq,{})}),h.jsx(zn,{path:"/careers",element:h.jsx(sq,{})}),h.jsx(zn,{path:"/careers/:id",element:h.jsx(vq,{})}),h.jsx(zn,{path:"/apply",element:h.jsx(bq,{})}),h.jsx(zn,{path:"/pricing",element:h.jsx(aq,{})}),h.jsx(zn,{path:"/privacy",element:h.jsx(oq,{})}),h.jsx(zn,{path:"/terms",element:h.jsx(lq,{})}),h.jsx(zn,{path:"/cookies",element:h.jsx(cq,{})}),h.jsx(zn,{path:"/digital-menu",element:h.jsx(_q,{})}),h.jsx(zn,{path:"/qr-menu",element:h.jsx(Mq,{})}),h.jsx(zn,{path:"/online-menu",element:h.jsx(Rq,{})})]})}),h.jsx(iq,{}),h.jsx(uq,{}),h.jsx(pq,{})]})]})]})}fR(document.getElementById("root")).render(h.jsx(N.StrictMode,{children:h.jsx(Bq,{})}));
